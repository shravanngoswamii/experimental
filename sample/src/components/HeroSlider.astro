---
// src/components/HeroSlider.astro
// This component displays a full-width hero section with a background image slideshow.
---
<section class="hero-slider">
    <div class="slider-container">
        <!-- Slides using provided images -->
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1670175031931-c4fff145998b');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1610557892470-55d9e80c0bce');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1564448049208-10deaa9044e3');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1749318475359-800b8318ee7f');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1602770199032-dc058e3dbed0');"></div>
    </div>
    <div class="hero-gradient"></div>
    <div class="hero-content container">
        <div class="hero-card">
            <h1 class="hero-title">Washing Machine Repair You Can Trust</h1>
            <p class="hero-subtitle">Same-day service for front-load & top-load washers across Mumbai, Thane & Navi Mumbai. Genuine parts. 90-day warranty.</p>
            <div class="hero-actions">
                <a href="#contact" class="btn btn-accent">Book Washing Machine Repair</a>
                <a href="tel:18001037208" class="btn">Call 1800 103 7208</a>
            </div>
        </div>
    </div>
</section>

<script>
    // Simple JavaScript for the image slideshow, respects reduced motion
    document.addEventListener('DOMContentLoaded', () => {
        const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
        const slides = document.querySelectorAll('.hero-slider .slide');
        if (!slides.length) return;
        let currentSlide = 0;
        const interval = 5000;
        if (mq.matches) {
            // Do not auto-rotate when reduced motion is preferred
            slides.forEach((s, i) => s.classList.toggle('active', i === 0));
            return;
        }
        function nextSlide() {
            if (slides[currentSlide]) {
                slides[currentSlide].classList.remove('active');
            }
            currentSlide = (currentSlide + 1) % slides.length;
            if (slides[currentSlide]) {
                slides[currentSlide].classList.add('active');
            }
        }
        setInterval(nextSlide, interval);
    });
</script>

<style>
    .hero-slider {
        position: relative;
        /* Use viewport height minus header height for a perfect fit */
        height: calc(100vh - var(--header-height)); 
        min-height: 500px; /* Ensure it's not too short on wide screens */
        max-height: 800px;
        color: var(--white-color);
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
    }

    .slider-container {
        position: absolute;
        inset: 0;
    }

    .slide {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1.2s ease-in-out;
        transform: scale(1.08);
        animation: kenburns 24s infinite;
    }

    .slide.active { opacity: 1; }

    .hero-gradient {
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 50% 30%, rgba(0, 80, 180, 0.4), transparent 70%),
                    linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.65) 100%);
        z-index: 1;
    }

    .hero-content { 
        position: relative; 
        z-index: 2; 
    }

    .hero-card {
        margin-inline: auto;
        max-width: 820px;
        padding: clamp(1.5rem, 4vw, 2.5rem);
        background: rgba(255,255,255,0.08);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 16px;
        backdrop-filter: blur(12px) saturate(120%);
        -webkit-backdrop-filter: blur(12px) saturate(120%);
        box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    }

    .hero-title {
        font-size: clamp(2rem, 6vw, 3.25rem);
        font-weight: 800;
        color: var(--white-color);
        margin-bottom: .8rem;
        letter-spacing: 0.2px;
        text-shadow: 0 2px 12px rgba(0,0,0,0.35);
    }

    .hero-subtitle {
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        max-width: 60ch;
        margin: 0 auto 1.5rem;
        color: rgba(255,255,255,0.95);
    }

    .hero-actions {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem; /* Add spacing between buttons */
    }

    @keyframes kenburns { 0% { transform: scale(1.08);} 100% { transform: scale(1);} }

    @media (prefers-reduced-motion: reduce) {
        .slide { animation: none; }
    }

    /* Adjust for smaller screens */
    @media (max-width: 600px) {
        .hero-slider {
            /* Let the content define the height on mobile, with padding */
            height: auto;
            min-height: calc(90svh - var(--header-height));
            padding: 4rem 0;
        }
        .hero-actions {
            flex-direction: column;
            gap: 1rem; /* Increase gap for vertical layout */
        }
        .hero-actions .btn {
            width: 100%;
            max-width: 320px; /* Constrain button width */
            padding: 1rem;
            font-size: 1.1rem;
        }
    }
</style>
