---
// src/components/HeroSlider.astro
// This component displays a full-width hero section with a background image slideshow.
---
<section class="hero-slider">
    <div class="slider-container">
        <!-- Slides using provided images -->
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1670175031931-c4fff145998b');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1610557892470-55d9e80c0bce');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1564448049208-10deaa9044e3');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1749318475359-800b8318ee7f');"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1602770199032-dc058e3dbed0');"></div>
    </div>
    <div class="hero-gradient"></div>
    <div class="hero-content container">
        <div class="hero-card">
            <h1 class="hero-title">Washing Machine Repair You Can Trust</h1>
            <p class="hero-subtitle">Same-day service for front-load & top-load washers across Mumbai, Thane & Navi Mumbai. Genuine parts. 90-day warranty.</p>
            <div class="hero-actions">
                <a href="#contact" class="btn btn-accent">Book Washing Machine Repair</a>
                <a href="tel:18001037208" class="btn" style="margin-left: .75rem;">Call 1800 103 7208</a>
            </div>
        </div>
    </div>
</section>

<script>
    // Simple JavaScript for the image slideshow, respects reduced motion
    document.addEventListener('DOMContentLoaded', () => {
        const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
        const slides = document.querySelectorAll('.hero-slider .slide');
        if (!slides.length) return;
        let currentSlide = 0;
        const interval = 5000;
        if (mq.matches) {
            // Do not auto-rotate when reduced motion is preferred
            slides.forEach((s, i) => s.classList.toggle('active', i === 0));
            return;
        }
        function nextSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }
        setInterval(nextSlide, interval);
    });
</script>

<style>
    .hero-slider {
        position: relative;
        height: min(100svh, 760px);
        color: var(--white-color);
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
        isolation: isolate; /* ensure overlays sit correctly */
    }

    @media (max-width: 640px) {
        .hero-slider { height: 80svh; }
    }

    .slider-container {
        position: absolute;
        inset: 0;
    }

    .slide {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1.2s ease-in-out;
        transform: scale(1.08);
        animation: kenburns 24s infinite;
    }

    .slide.active { opacity: 1; }

    .hero-gradient {
        position: absolute;
        inset: 0;
        background: radial-gradient(1200px 600px at 50% 20%, rgba(0, 123, 255, 0.45), transparent 60%),
                    linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.65) 100%);
        z-index: 1;
    }

    .hero-content { position: relative; z-index: 2; }

    .hero-card {
        margin-inline: auto;
        max-width: 820px;
        padding: clamp(1rem, 1rem + 2vw, 2rem);
        background: rgba(255,255,255,0.08);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 16px;
        backdrop-filter: blur(12px) saturate(120%);
        -webkit-backdrop-filter: blur(12px) saturate(120%);
        box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    }

    .hero-title {
        font-size: clamp(1.75rem, 1.1rem + 3vw, 3rem);
        font-weight: 800;
        color: var(--white-color);
        margin-bottom: .8rem;
        letter-spacing: 0.2px;
        text-shadow: 0 2px 12px rgba(0,0,0,0.35);
    }

    .hero-subtitle {
        font-size: clamp(1rem, 0.9rem + 0.6vw, 1.25rem);
        max-width: 60ch;
        margin: 0 auto 1.25rem;
        color: rgba(255,255,255,0.95);
    }

    .hero-actions { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; }

    @keyframes kenburns { 0% { transform: scale(1.08);} 100% { transform: scale(1);} }

    @media (prefers-reduced-motion: reduce) {
        .slide { animation: none; }
    }
</style>
