(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function gc(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Qe={},xa=[],Lr=()=>{},ry=()=>!1,ts=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),pc=t=>t.startsWith("onUpdate:"),Pt=Object.assign,mc=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},ny=Object.prototype.hasOwnProperty,Ke=(t,e)=>ny.call(t,e),Pe=Array.isArray,Ca=t=>_i(t)==="[object Map]",rs=t=>_i(t)==="[object Set]",uf=t=>_i(t)==="[object Date]",Oe=t=>typeof t=="function",vt=t=>typeof t=="string",xr=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",Lh=t=>(et(t)||Oe(t))&&Oe(t.then)&&Oe(t.catch),_h=Object.prototype.toString,_i=t=>_h.call(t),ay=t=>_i(t).slice(8,-1),Ih=t=>_i(t)==="[object Object]",yc=t=>vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ii=gc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ns=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},iy=/-(\w)/g,yn=ns(t=>t.replace(iy,(e,r)=>r?r.toUpperCase():"")),oy=/\B([A-Z])/g,Pn=ns(t=>t.replace(oy,"-$1").toLowerCase()),Oh=ns(t=>t.charAt(0).toUpperCase()+t.slice(1)),Os=ns(t=>t?`on${Oh(t)}`:""),hn=(t,e)=>!Object.is(t,e),mo=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Nh=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},sy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ly=t=>{const e=vt(t)?Number(t):NaN;return isNaN(e)?t:e};let cf;const as=()=>cf||(cf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xn(t){if(Pe(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=vt(n)?dy(n):Xn(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(vt(t)||et(t))return t}const uy=/;(?![^(]*\))/g,cy=/:([^]+)/,fy=/\/\*[^]*?\*\//g;function dy(t){const e={};return t.replace(fy,"").split(uy).forEach(r=>{if(r){const n=r.split(cy);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ot(t){let e="";if(vt(t))e=t;else if(Pe(t))for(let r=0;r<t.length;r++){const n=ot(t[r]);n&&(e+=n+" ")}else if(et(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const vy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hy=gc(vy);function zh(t){return!!t||t===""}function gy(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=is(t[n],e[n]);return r}function is(t,e){if(t===e)return!0;let r=uf(t),n=uf(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=xr(t),n=xr(e),r||n)return t===e;if(r=Pe(t),n=Pe(e),r||n)return r&&n?gy(t,e):!1;if(r=et(t),n=et(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const o in t){const s=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(s&&!l||!s&&l||!is(t[o],e[o]))return!1}}return String(t)===String(e)}function Fh(t,e){return t.findIndex(r=>is(r,e))}const Vh=t=>!!(t&&t.__v_isRef===!0),nr=t=>vt(t)?t:t==null?"":Pe(t)||et(t)&&(t.toString===_h||!Oe(t.toString))?Vh(t)?nr(t.value):JSON.stringify(t,qh,2):String(t),qh=(t,e)=>Vh(e)?qh(t,e.value):Ca(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[Ns(n,i)+" =>"]=a,r),{})}:rs(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Ns(r))}:xr(e)?Ns(e):et(e)&&!Pe(e)&&!Ih(e)?String(e):e,Ns=(t,e="")=>{var r;return xr(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ft;class $h{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ft,!e&&Ft&&(this.index=(Ft.scopes||(Ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Ft;try{return Ft=this,e()}finally{Ft=r}}}on(){++this._on===1&&(this.prevScope=Ft,Ft=this)}off(){this._on>0&&--this._on===0&&(Ft=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Gh(t){return new $h(t)}function Hh(){return Ft}function py(t,e=!1){Ft&&Ft.cleanups.push(t)}let rt;const zs=new WeakSet;class Uh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ft&&Ft.active&&Ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zs.has(this)&&(zs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ff(this),jh(this);const e=rt,r=br;rt=this,br=!0;try{return this.fn()}finally{Yh(this),rt=e,br=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xc(e);this.deps=this.depsTail=void 0,ff(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nu(this)&&this.run()}get dirty(){return Nu(this)}}let Wh=0,oi,si;function Kh(t,e=!1){if(t.flags|=8,e){t.next=si,si=t;return}t.next=oi,oi=t}function bc(){Wh++}function wc(){if(--Wh>0)return;if(si){let e=si;for(si=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;oi;){let e=oi;for(oi=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function jh(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Yh(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),xc(n),my(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function Nu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Xh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Xh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===gi)||(t.globalVersion=gi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Nu(t))))return;t.flags|=2;const e=t.dep,r=rt,n=br;rt=t,br=!0;try{jh(t);const a=t.fn(t._value);(e.version===0||hn(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{rt=r,br=n,Yh(t),t.flags&=-3}}function xc(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)xc(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function my(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let br=!0;const Zh=[];function Yr(){Zh.push(br),br=!1}function Xr(){const t=Zh.pop();br=t===void 0?!0:t}function ff(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=rt;rt=void 0;try{e()}finally{rt=r}}}let gi=0;class yy{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!rt||!br||rt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==rt)r=this.activeLink=new yy(rt,this),rt.deps?(r.prevDep=rt.depsTail,rt.depsTail.nextDep=r,rt.depsTail=r):rt.deps=rt.depsTail=r,Qh(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=rt.depsTail,r.nextDep=void 0,rt.depsTail.nextDep=r,rt.depsTail=r,rt.deps===r&&(rt.deps=n)}return r}trigger(e){this.version++,gi++,this.notify(e)}notify(e){bc();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{wc()}}}function Qh(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Qh(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Mo=new WeakMap,jn=Symbol(""),zu=Symbol(""),pi=Symbol("");function Vt(t,e,r){if(br&&rt){let n=Mo.get(t);n||Mo.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new Cc),a.map=n,a.key=r),a.track()}}function Wr(t,e,r,n,a,i){const o=Mo.get(t);if(!o){gi++;return}const s=l=>{l&&l.trigger()};if(bc(),e==="clear")o.forEach(s);else{const l=Pe(t),u=l&&yc(r);if(l&&r==="length"){const c=Number(n);o.forEach((f,v)=>{(v==="length"||v===pi||!xr(v)&&v>=c)&&s(f)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),u&&s(o.get(pi)),e){case"add":l?u&&s(o.get("length")):(s(o.get(jn)),Ca(t)&&s(o.get(zu)));break;case"delete":l||(s(o.get(jn)),Ca(t)&&s(o.get(zu)));break;case"set":Ca(t)&&s(o.get(jn));break}}wc()}function by(t,e){const r=Mo.get(t);return r&&r.get(e)}function oa(t){const e=Ge(t);return e===t?e:(Vt(e,"iterate",pi),hr(t)?e:e.map(Rt))}function os(t){return Vt(t=Ge(t),"iterate",pi),t}const wy={__proto__:null,[Symbol.iterator](){return Fs(this,Symbol.iterator,Rt)},concat(...t){return oa(this).concat(...t.map(e=>Pe(e)?oa(e):e))},entries(){return Fs(this,"entries",t=>(t[1]=Rt(t[1]),t))},every(t,e){return zr(this,"every",t,e,void 0,arguments)},filter(t,e){return zr(this,"filter",t,e,r=>r.map(Rt),arguments)},find(t,e){return zr(this,"find",t,e,Rt,arguments)},findIndex(t,e){return zr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return zr(this,"findLast",t,e,Rt,arguments)},findLastIndex(t,e){return zr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return zr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vs(this,"includes",t)},indexOf(...t){return Vs(this,"indexOf",t)},join(t){return oa(this).join(t)},lastIndexOf(...t){return Vs(this,"lastIndexOf",t)},map(t,e){return zr(this,"map",t,e,void 0,arguments)},pop(){return Ua(this,"pop")},push(...t){return Ua(this,"push",t)},reduce(t,...e){return df(this,"reduce",t,e)},reduceRight(t,...e){return df(this,"reduceRight",t,e)},shift(){return Ua(this,"shift")},some(t,e){return zr(this,"some",t,e,void 0,arguments)},splice(...t){return Ua(this,"splice",t)},toReversed(){return oa(this).toReversed()},toSorted(t){return oa(this).toSorted(t)},toSpliced(...t){return oa(this).toSpliced(...t)},unshift(...t){return Ua(this,"unshift",t)},values(){return Fs(this,"values",Rt)}};function Fs(t,e,r){const n=os(t),a=n[e]();return n!==t&&!hr(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=r(i.value)),i}),a}const xy=Array.prototype;function zr(t,e,r,n,a,i){const o=os(t),s=o!==t&&!hr(t),l=o[e];if(l!==xy[e]){const f=l.apply(t,i);return s?Rt(f):f}let u=r;o!==t&&(s?u=function(f,v){return r.call(this,Rt(f),v,t)}:r.length>2&&(u=function(f,v){return r.call(this,f,v,t)}));const c=l.call(o,u,n);return s&&a?a(c):c}function df(t,e,r,n){const a=os(t);let i=r;return a!==t&&(hr(t)?r.length>3&&(i=function(o,s,l){return r.call(this,o,s,l,t)}):i=function(o,s,l){return r.call(this,o,Rt(s),l,t)}),a[e](i,...n)}function Vs(t,e,r){const n=Ge(t);Vt(n,"iterate",pi);const a=n[e](...r);return(a===-1||a===!1)&&Tc(r[0])?(r[0]=Ge(r[0]),n[e](...r)):a}function Ua(t,e,r=[]){Yr(),bc();const n=Ge(t)[e].apply(t,r);return wc(),Xr(),n}const Cy=gc("__proto__,__v_isRef,__isVue"),Jh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xr));function Ey(t){xr(t)||(t=String(t));const e=Ge(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class eg{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?Ly:ag:i?ng:rg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Pe(e);if(!a){let l;if(o&&(l=wy[r]))return l;if(r==="hasOwnProperty")return Ey}const s=Reflect.get(e,r,dt(e)?e:n);return(xr(r)?Jh.has(r):Cy(r))||(a||Vt(e,"get",r),i)?s:dt(s)?o&&yc(r)?s:s.value:et(s)?a?ig(s):ss(s):s}}class tg extends eg{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];if(!this._isShallow){const l=bn(i);if(!hr(n)&&!bn(n)&&(i=Ge(i),n=Ge(n)),!Pe(e)&&dt(i)&&!dt(n))return l?!1:(i.value=n,!0)}const o=Pe(e)&&yc(r)?Number(r)<e.length:Ke(e,r),s=Reflect.set(e,r,n,dt(e)?e:a);return e===Ge(a)&&(o?hn(n,i)&&Wr(e,"set",r,n):Wr(e,"add",r,n)),s}deleteProperty(e,r){const n=Ke(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Wr(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!xr(r)||!Jh.has(r))&&Vt(e,"has",r),n}ownKeys(e){return Vt(e,"iterate",Pe(e)?"length":jn),Reflect.ownKeys(e)}}class Sy extends eg{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Ty=new tg,Dy=new Sy,Py=new tg(!0);const Fu=t=>t,Qi=t=>Reflect.getPrototypeOf(t);function ky(t,e,r){return function(...n){const a=this.__v_raw,i=Ge(a),o=Ca(i),s=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=a[t](...n),c=r?Fu:e?Lo:Rt;return!e&&Vt(i,"iterate",l?zu:jn),{next(){const{value:f,done:v}=u.next();return v?{value:f,done:v}:{value:s?[c(f[0]),c(f[1])]:c(f),done:v}},[Symbol.iterator](){return this}}}}function Ji(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ay(t,e){const r={get(a){const i=this.__v_raw,o=Ge(i),s=Ge(a);t||(hn(a,s)&&Vt(o,"get",a),Vt(o,"get",s));const{has:l}=Qi(o),u=e?Fu:t?Lo:Rt;if(l.call(o,a))return u(i.get(a));if(l.call(o,s))return u(i.get(s));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&Vt(Ge(a),"iterate",jn),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=Ge(i),s=Ge(a);return t||(hn(a,s)&&Vt(o,"has",a),Vt(o,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const o=this,s=o.__v_raw,l=Ge(s),u=e?Fu:t?Lo:Rt;return!t&&Vt(l,"iterate",jn),s.forEach((c,f)=>a.call(i,u(c),u(f),o))}};return Pt(r,t?{add:Ji("add"),set:Ji("set"),delete:Ji("delete"),clear:Ji("clear")}:{add(a){!e&&!hr(a)&&!bn(a)&&(a=Ge(a));const i=Ge(this);return Qi(i).has.call(i,a)||(i.add(a),Wr(i,"add",a,a)),this},set(a,i){!e&&!hr(i)&&!bn(i)&&(i=Ge(i));const o=Ge(this),{has:s,get:l}=Qi(o);let u=s.call(o,a);u||(a=Ge(a),u=s.call(o,a));const c=l.call(o,a);return o.set(a,i),u?hn(i,c)&&Wr(o,"set",a,i):Wr(o,"add",a,i),this},delete(a){const i=Ge(this),{has:o,get:s}=Qi(i);let l=o.call(i,a);l||(a=Ge(a),l=o.call(i,a)),s&&s.call(i,a);const u=i.delete(a);return l&&Wr(i,"delete",a,void 0),u},clear(){const a=Ge(this),i=a.size!==0,o=a.clear();return i&&Wr(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=ky(a,t,e)}),r}function Ec(t,e){const r=Ay(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Ke(r,a)&&a in n?r:n,a,i)}const By={get:Ec(!1,!1)},Ry={get:Ec(!1,!0)},My={get:Ec(!0,!1)};const rg=new WeakMap,ng=new WeakMap,ag=new WeakMap,Ly=new WeakMap;function _y(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iy(t){return t.__v_skip||!Object.isExtensible(t)?0:_y(ay(t))}function ss(t){return bn(t)?t:Sc(t,!1,Ty,By,rg)}function Oy(t){return Sc(t,!1,Py,Ry,ng)}function ig(t){return Sc(t,!0,Dy,My,ag)}function Sc(t,e,r,n,a){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Iy(t);if(i===0)return t;const o=a.get(t);if(o)return o;const s=new Proxy(t,i===2?n:r);return a.set(t,s),s}function gn(t){return bn(t)?gn(t.__v_raw):!!(t&&t.__v_isReactive)}function bn(t){return!!(t&&t.__v_isReadonly)}function hr(t){return!!(t&&t.__v_isShallow)}function Tc(t){return t?!!t.__v_raw:!1}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function Dc(t){return!Ke(t,"__v_skip")&&Object.isExtensible(t)&&Nh(t,"__v_skip",!0),t}const Rt=t=>et(t)?ss(t):t,Lo=t=>et(t)?ig(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function He(t){return Ny(t,!1)}function Ny(t,e){return dt(t)?t:new zy(t,e)}class zy{constructor(e,r){this.dep=new Cc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ge(e),this._value=r?e:Rt(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||hr(e)||bn(e);e=n?e:Ge(e),hn(e,r)&&(this._rawValue=e,this._value=n?e:Rt(e),this.dep.trigger())}}function fr(t){return dt(t)?t.value:t}const Fy={get:(t,e,r)=>e==="__v_raw"?t:fr(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return dt(a)&&!dt(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function og(t){return gn(t)?t:new Proxy(t,Fy)}function Vy(t){const e=Pe(t)?new Array(t.length):{};for(const r in t)e[r]=$y(t,r);return e}class qy{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return by(Ge(this._object),this._key)}}function $y(t,e,r){const n=t[e];return dt(n)?n:new qy(t,e,r)}class Gy{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Cc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&rt!==this)return Kh(this,!0),!0}get value(){const e=this.dep.track();return Xh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Hy(t,e,r=!1){let n,a;return Oe(t)?n=t:(n=t.get,a=t.set),new Gy(n,a,r)}const eo={},_o=new WeakMap;let Vn;function Uy(t,e=!1,r=Vn){if(r){let n=_o.get(r);n||_o.set(r,n=[]),n.push(t)}}function Wy(t,e,r=Qe){const{immediate:n,deep:a,once:i,scheduler:o,augmentJob:s,call:l}=r,u=y=>a?y:hr(y)||a===!1||a===0?Kr(y,1):Kr(y);let c,f,v,g,h=!1,w=!1;if(dt(t)?(f=()=>t.value,h=hr(t)):gn(t)?(f=()=>u(t),h=!0):Pe(t)?(w=!0,h=t.some(y=>gn(y)||hr(y)),f=()=>t.map(y=>{if(dt(y))return y.value;if(gn(y))return u(y);if(Oe(y))return l?l(y,2):y()})):Oe(t)?e?f=l?()=>l(t,2):t:f=()=>{if(v){Yr();try{v()}finally{Xr()}}const y=Vn;Vn=c;try{return l?l(t,3,[g]):t(g)}finally{Vn=y}}:f=Lr,e&&a){const y=f,x=a===!0?1/0:a;f=()=>Kr(y(),x)}const b=Hh(),d=()=>{c.stop(),b&&b.active&&mc(b.effects,c)};if(i&&e){const y=e;e=(...x)=>{y(...x),d()}}let p=w?new Array(t.length).fill(eo):eo;const m=y=>{if(!(!(c.flags&1)||!c.dirty&&!y))if(e){const x=c.run();if(a||h||(w?x.some((E,C)=>hn(E,p[C])):hn(x,p))){v&&v();const E=Vn;Vn=c;try{const C=[x,p===eo?void 0:w&&p[0]===eo?[]:p,g];p=x,l?l(e,3,C):e(...C)}finally{Vn=E}}}else c.run()};return s&&s(m),c=new Uh(f),c.scheduler=o?()=>o(m,!1):m,g=y=>Uy(y,!1,c),v=c.onStop=()=>{const y=_o.get(c);if(y){if(l)l(y,4);else for(const x of y)x();_o.delete(c)}},e?n?m(!0):p=c.run():o?o(m.bind(null,!0),!0):c.run(),d.pause=c.pause.bind(c),d.resume=c.resume.bind(c),d.stop=d,d}function Kr(t,e=1/0,r){if(e<=0||!et(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,dt(t))Kr(t.value,e,r);else if(Pe(t))for(let n=0;n<t.length;n++)Kr(t[n],e,r);else if(rs(t)||Ca(t))t.forEach(n=>{Kr(n,e,r)});else if(Ih(t)){for(const n in t)Kr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Kr(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ii(t,e,r,n){try{return n?t(...n):t()}catch(a){ls(a,e,r)}}function Cr(t,e,r,n){if(Oe(t)){const a=Ii(t,e,r,n);return a&&Lh(a)&&a.catch(i=>{ls(i,e,r)}),a}if(Pe(t)){const a=[];for(let i=0;i<t.length;i++)a.push(Cr(t[i],e,r,n));return a}}function ls(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,l,u)===!1)return}s=s.parent}if(i){Yr(),Ii(i,null,10,[t,l,u]),Xr();return}}Ky(t,r,a,n,o)}function Ky(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const jt=[];let Br=-1;const Ea=[];let cn=null,pa=0;const sg=Promise.resolve();let Io=null;function Pc(t){const e=Io||sg;return t?e.then(this?t.bind(this):t):e}function jy(t){let e=Br+1,r=jt.length;for(;e<r;){const n=e+r>>>1,a=jt[n],i=mi(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function kc(t){if(!(t.flags&1)){const e=mi(t),r=jt[jt.length-1];!r||!(t.flags&2)&&e>=mi(r)?jt.push(t):jt.splice(jy(e),0,t),t.flags|=1,lg()}}function lg(){Io||(Io=sg.then(cg))}function Yy(t){Pe(t)?Ea.push(...t):cn&&t.id===-1?cn.splice(pa+1,0,t):t.flags&1||(Ea.push(t),t.flags|=1),lg()}function vf(t,e,r=Br+1){for(;r<jt.length;r++){const n=jt[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;jt.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ug(t){if(Ea.length){const e=[...new Set(Ea)].sort((r,n)=>mi(r)-mi(n));if(Ea.length=0,cn){cn.push(...e);return}for(cn=e,pa=0;pa<cn.length;pa++){const r=cn[pa];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}cn=null,pa=0}}const mi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function cg(t){try{for(Br=0;Br<jt.length;Br++){const e=jt[Br];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ii(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Br<jt.length;Br++){const e=jt[Br];e&&(e.flags&=-2)}Br=-1,jt.length=0,ug(),Io=null,(jt.length||Ea.length)&&cg()}}let Tt=null,fg=null;function Oo(t){const e=Tt;return Tt=t,fg=t&&t.type.__scopeId||null,e}function Me(t,e=Tt,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&Ef(-1);const i=Oo(e);let o;try{o=t(...a)}finally{Oo(i),n._d&&Ef(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function $r(t,e){if(Tt===null)return t;const r=vs(Tt),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,o,s,l=Qe]=e[a];i&&(Oe(i)&&(i={mounted:i,updated:i}),i.deep&&Kr(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:s,modifiers:l}))}return t}function _n(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const s=a[o];i&&(s.oldValue=i[o].value);let l=s.dir[n];l&&(Yr(),Cr(l,r,8,[t.el,s,t,e]),Xr())}}const Xy=Symbol("_vte"),dg=t=>t.__isTeleport,fn=Symbol("_leaveCb"),to=Symbol("_enterCb");function Zy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ia(()=>{t.isMounted=!0}),wg(()=>{t.isUnmounting=!0}),t}const ur=[Function,Array],vg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ur,onEnter:ur,onAfterEnter:ur,onEnterCancelled:ur,onBeforeLeave:ur,onLeave:ur,onAfterLeave:ur,onLeaveCancelled:ur,onBeforeAppear:ur,onAppear:ur,onAfterAppear:ur,onAppearCancelled:ur},hg=t=>{const e=t.subTree;return e.component?hg(e.component):e},Qy={name:"BaseTransition",props:vg,setup(t,{slots:e}){const r=j0(),n=Zy();return()=>{const a=e.default&&mg(e.default(),!0);if(!a||!a.length)return;const i=gg(a),o=Ge(t),{mode:s}=o;if(n.isLeaving)return qs(i);const l=hf(i);if(!l)return qs(i);let u=Vu(l,o,n,r,f=>u=f);l.type!==qt&&yi(l,u);let c=r.subTree&&hf(r.subTree);if(c&&c.type!==qt&&!Hn(l,c)&&hg(r).type!==qt){let f=Vu(c,o,n,r);if(yi(c,f),s==="out-in"&&l.type!==qt)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,c=void 0},qs(i);s==="in-out"&&l.type!==qt?f.delayLeave=(v,g,h)=>{const w=pg(n,c);w[String(c.key)]=c,v[fn]=()=>{g(),v[fn]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{h(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function gg(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==qt){e=r;break}}return e}const Jy=Qy;function pg(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Vu(t,e,r,n,a){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:v,onLeave:g,onAfterLeave:h,onLeaveCancelled:w,onBeforeAppear:b,onAppear:d,onAfterAppear:p,onAppearCancelled:m}=e,y=String(t.key),x=pg(r,t),E=(S,P)=>{S&&Cr(S,n,9,P)},C=(S,P)=>{const R=P[1];E(S,P),Pe(S)?S.every(A=>A.length<=1)&&R():S.length<=1&&R()},T={mode:o,persisted:s,beforeEnter(S){let P=l;if(!r.isMounted)if(i)P=b||l;else return;S[fn]&&S[fn](!0);const R=x[y];R&&Hn(t,R)&&R.el[fn]&&R.el[fn](),E(P,[S])},enter(S){let P=u,R=c,A=f;if(!r.isMounted)if(i)P=d||u,R=p||c,A=m||f;else return;let M=!1;const V=S[to]=G=>{M||(M=!0,G?E(A,[S]):E(R,[S]),T.delayedLeave&&T.delayedLeave(),S[to]=void 0)};P?C(P,[S,V]):V()},leave(S,P){const R=String(t.key);if(S[to]&&S[to](!0),r.isUnmounting)return P();E(v,[S]);let A=!1;const M=S[fn]=V=>{A||(A=!0,P(),V?E(w,[S]):E(h,[S]),S[fn]=void 0,x[R]===t&&delete x[R])};x[R]=t,g?C(g,[S,M]):M()},clone(S){const P=Vu(S,e,r,n,a);return a&&a(P),P}};return T}function qs(t){if(us(t))return t=wn(t),t.children=null,t}function hf(t){if(!us(t))return dg(t.type)&&t.children?gg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Oe(r.default))return r.default()}}function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mg(t,e=!1,r){let n=[],a=0;for(let i=0;i<t.length;i++){let o=t[i];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===at?(o.patchFlag&128&&a++,n=n.concat(mg(o.children,e,s))):(e||o.type!==qt)&&n.push(s!=null?wn(o,{key:s}):o)}if(a>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function It(t,e){return Oe(t)?Pt({name:t.name},e,{setup:t}):t}function yg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function No(t,e,r,n,a=!1){if(Pe(t)){t.forEach((h,w)=>No(h,e&&(Pe(e)?e[w]:e),r,n,a));return}if(Sa(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&No(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?vs(n.component):n.el,o=a?null:i,{i:s,r:l}=t,u=e&&e.r,c=s.refs===Qe?s.refs={}:s.refs,f=s.setupState,v=Ge(f),g=f===Qe?()=>!1:h=>Ke(v,h);if(u!=null&&u!==l&&(vt(u)?(c[u]=null,g(u)&&(f[u]=null)):dt(u)&&(u.value=null)),Oe(l))Ii(l,s,12,[o,c]);else{const h=vt(l),w=dt(l);if(h||w){const b=()=>{if(t.f){const d=h?g(l)?f[l]:c[l]:l.value;a?Pe(d)&&mc(d,i):Pe(d)?d.includes(i)||d.push(i):h?(c[l]=[i],g(l)&&(f[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,g(l)&&(f[l]=o)):w&&(l.value=o,t.k&&(c[t.k]=o))};o?(b.id=-1,or(b,r)):b()}}}as().requestIdleCallback;as().cancelIdleCallback;const Sa=t=>!!t.type.__asyncLoader,us=t=>t.type.__isKeepAlive;function e0(t,e){bg(t,"a",e)}function t0(t,e){bg(t,"da",e)}function bg(t,e,r=Mt){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(cs(e,n,r),r){let a=r.parent;for(;a&&a.parent;)us(a.parent.vnode)&&r0(n,e,r,a),a=a.parent}}function r0(t,e,r,n){const a=cs(e,t,n,!0);Oa(()=>{mc(n[e],a)},r)}function cs(t,e,r=Mt,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Yr();const s=Oi(r),l=Cr(e,r,t,o);return s(),Xr(),l});return n?a.unshift(i):a.push(i),i}}const en=t=>(e,r=Mt)=>{(!xi||t==="sp")&&cs(t,(...n)=>e(...n),r)},n0=en("bm"),Ia=en("m"),a0=en("bu"),i0=en("u"),wg=en("bum"),Oa=en("um"),o0=en("sp"),s0=en("rtg"),l0=en("rtc");function u0(t,e=Mt){cs("ec",t,e)}const c0=Symbol.for("v-ndc");function Zn(t,e,r,n){let a;const i=r,o=Pe(t);if(o||vt(t)){const s=o&&gn(t);let l=!1,u=!1;s&&(l=!hr(t),u=bn(t),t=os(t)),a=new Array(t.length);for(let c=0,f=t.length;c<f;c++)a[c]=e(l?u?Lo(Rt(t[c])):Rt(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let s=0;s<t;s++)a[s]=e(s+1,s,void 0,i)}else if(et(t))if(t[Symbol.iterator])a=Array.from(t,(s,l)=>e(s,l,void 0,i));else{const s=Object.keys(t);a=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];a[l]=e(t[c],c,l,i)}}else a=[];return a}function Ta(t,e,r={},n,a){if(Tt.ce||Tt.parent&&Sa(Tt.parent)&&Tt.parent.ce)return e!=="default"&&(r.name=e),Ae(),Ba(at,null,[be("slot",r,n)],64);let i=t[e];i&&i._c&&(i._d=!1),Ae();const o=i&&xg(i(r)),s=r.key||o&&o.key,l=Ba(at,{key:(s&&!xr(s)?s:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!a&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function xg(t){return t.some(e=>wi(e)?!(e.type===qt||e.type===at&&!xg(e.children)):!0)?t:null}const qu=t=>t?qg(t)?vs(t):qu(t.parent):null,li=Pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qu(t.parent),$root:t=>qu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Eg(t),$forceUpdate:t=>t.f||(t.f=()=>{kc(t.update)}),$nextTick:t=>t.n||(t.n=Pc.bind(t.proxy)),$watch:t=>L0.bind(t)}),$s=(t,e)=>t!==Qe&&!t.__isScriptSetup&&Ke(t,e),f0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:o,type:s,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if($s(n,e))return o[e]=1,n[e];if(a!==Qe&&Ke(a,e))return o[e]=2,a[e];if((u=t.propsOptions[0])&&Ke(u,e))return o[e]=3,i[e];if(r!==Qe&&Ke(r,e))return o[e]=4,r[e];$u&&(o[e]=0)}}const c=li[e];let f,v;if(c)return e==="$attrs"&&Vt(t.attrs,"get",""),c(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(r!==Qe&&Ke(r,e))return o[e]=4,r[e];if(v=l.config.globalProperties,Ke(v,e))return v[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return $s(a,e)?(a[e]=r,!0):n!==Qe&&Ke(n,e)?(n[e]=r,!0):Ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:i}},o){let s;return!!r[o]||t!==Qe&&Ke(t,o)||$s(e,o)||(s=i[0])&&Ke(s,o)||Ke(n,o)||Ke(li,o)||Ke(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Ke(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function gf(t){return Pe(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let $u=!0;function d0(t){const e=Eg(t),r=t.proxy,n=t.ctx;$u=!1,e.beforeCreate&&pf(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:v,beforeUpdate:g,updated:h,activated:w,deactivated:b,beforeDestroy:d,beforeUnmount:p,destroyed:m,unmounted:y,render:x,renderTracked:E,renderTriggered:C,errorCaptured:T,serverPrefetch:S,expose:P,inheritAttrs:R,components:A,directives:M,filters:V}=e;if(u&&v0(u,n,null),o)for(const k in o){const O=o[k];Oe(O)&&(n[k]=O.bind(r))}if(a){const k=a.call(r,r);et(k)&&(t.data=ss(k))}if($u=!0,i)for(const k in i){const O=i[k],z=Oe(O)?O.bind(r,r):Oe(O.get)?O.get.bind(r,r):Lr,H=!Oe(O)&&Oe(O.set)?O.set.bind(r):Lr,U=pt({get:z,set:H});Object.defineProperty(n,k,{enumerable:!0,configurable:!0,get:()=>U.value,set:_=>U.value=_})}if(s)for(const k in s)Cg(s[k],n,r,k);if(l){const k=Oe(l)?l.call(r):l;Reflect.ownKeys(k).forEach(O=>{b0(O,k[O])})}c&&pf(c,t,"c");function B(k,O){Pe(O)?O.forEach(z=>k(z.bind(r))):O&&k(O.bind(r))}if(B(n0,f),B(Ia,v),B(a0,g),B(i0,h),B(e0,w),B(t0,b),B(u0,T),B(l0,E),B(s0,C),B(wg,p),B(Oa,y),B(o0,S),Pe(P))if(P.length){const k=t.exposed||(t.exposed={});P.forEach(O=>{Object.defineProperty(k,O,{get:()=>r[O],set:z=>r[O]=z})})}else t.exposed||(t.exposed={});x&&t.render===Lr&&(t.render=x),R!=null&&(t.inheritAttrs=R),A&&(t.components=A),M&&(t.directives=M),S&&yg(t)}function v0(t,e,r=Lr){Pe(t)&&(t=Gu(t));for(const n in t){const a=t[n];let i;et(a)?"default"in a?i=ui(a.from||n,a.default,!0):i=ui(a.from||n):i=ui(a),dt(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function pf(t,e,r){Cr(Pe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function Cg(t,e,r,n){let a=n.includes(".")?Og(r,n):()=>r[n];if(vt(t)){const i=e[t];Oe(i)&&gr(a,i)}else if(Oe(t))gr(a,t.bind(r));else if(et(t))if(Pe(t))t.forEach(i=>Cg(i,e,r,n));else{const i=Oe(t.handler)?t.handler.bind(r):e[t.handler];Oe(i)&&gr(a,i,t)}}function Eg(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,s=i.get(e);let l;return s?l=s:!a.length&&!r&&!n?l=e:(l={},a.length&&a.forEach(u=>zo(l,u,o,!0)),zo(l,e,o)),et(e)&&i.set(e,l),l}function zo(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&zo(t,i,r,!0),a&&a.forEach(o=>zo(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const s=h0[o]||r&&r[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const h0={data:mf,props:yf,emits:yf,methods:ti,computed:ti,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:ti,directives:ti,watch:p0,provide:mf,inject:g0};function mf(t,e){return e?t?function(){return Pt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function g0(t,e){return ti(Gu(t),Gu(e))}function Gu(t){if(Pe(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Ut(t,e){return t?[...new Set([].concat(t,e))]:e}function ti(t,e){return t?Pt(Object.create(null),t,e):e}function yf(t,e){return t?Pe(t)&&Pe(e)?[...new Set([...t,...e])]:Pt(Object.create(null),gf(t),gf(e??{})):e}function p0(t,e){if(!t)return e;if(!e)return t;const r=Pt(Object.create(null),t);for(const n in e)r[n]=Ut(t[n],e[n]);return r}function Sg(){return{app:null,config:{isNativeTag:ry,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let m0=0;function y0(t,e){return function(n,a=null){Oe(n)||(n=Pt({},n)),a!=null&&!et(a)&&(a=null);const i=Sg(),o=new WeakSet,s=[];let l=!1;const u=i.app={_uid:m0++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:tb,get config(){return i.config},set config(c){},use(c,...f){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(u,...f)):Oe(c)&&(o.add(c),c(u,...f))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,f){return f?(i.components[c]=f,u):i.components[c]},directive(c,f){return f?(i.directives[c]=f,u):i.directives[c]},mount(c,f,v){if(!l){const g=u._ceVNode||be(n,a);return g.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),t(g,c,v),l=!0,u._container=c,c.__vue_app__=u,vs(g.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Cr(s,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,f){return i.provides[c]=f,u},runWithContext(c){const f=Yn;Yn=u;try{return c()}finally{Yn=f}}};return u}}let Yn=null;function b0(t,e){if(Mt){let r=Mt.provides;const n=Mt.parent&&Mt.parent.provides;n===r&&(r=Mt.provides=Object.create(n)),r[t]=e}}function ui(t,e,r=!1){const n=Mt||Tt;if(n||Yn){let a=Yn?Yn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Oe(e)?e.call(n&&n.proxy):e}}function w0(){return!!(Mt||Tt||Yn)}const Tg={},Dg=()=>Object.create(Tg),Pg=t=>Object.getPrototypeOf(t)===Tg;function x0(t,e,r,n=!1){const a={},i=Dg();t.propsDefaults=Object.create(null),kg(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:Oy(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function C0(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,s=Ge(a),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let v=c[f];if(fs(t.emitsOptions,v))continue;const g=e[v];if(l)if(Ke(i,v))g!==i[v]&&(i[v]=g,u=!0);else{const h=yn(v);a[h]=Hu(l,s,h,g,t,!1)}else g!==i[v]&&(i[v]=g,u=!0)}}}else{kg(t,e,a,i)&&(u=!0);let c;for(const f in s)(!e||!Ke(e,f)&&((c=Pn(f))===f||!Ke(e,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(a[f]=Hu(l,s,f,void 0,t,!0)):delete a[f]);if(i!==s)for(const f in i)(!e||!Ke(e,f))&&(delete i[f],u=!0)}u&&Wr(t.attrs,"set","")}function kg(t,e,r,n){const[a,i]=t.propsOptions;let o=!1,s;if(e)for(let l in e){if(ii(l))continue;const u=e[l];let c;a&&Ke(a,c=yn(l))?!i||!i.includes(c)?r[c]=u:(s||(s={}))[c]=u:fs(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(i){const l=Ge(r),u=s||Qe;for(let c=0;c<i.length;c++){const f=i[c];r[f]=Hu(a,l,f,u[f],t,!Ke(u,f))}}return o}function Hu(t,e,r,n,a,i){const o=t[r];if(o!=null){const s=Ke(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:u}=a;if(r in u)n=u[r];else{const c=Oi(a);n=u[r]=l.call(null,e),c()}}else n=l;a.ce&&a.ce._setProp(r,n)}o[0]&&(i&&!s?n=!1:o[1]&&(n===""||n===Pn(r))&&(n=!0))}return n}const E0=new WeakMap;function Ag(t,e,r=!1){const n=r?E0:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,o={},s=[];let l=!1;if(!Oe(t)){const c=f=>{l=!0;const[v,g]=Ag(f,e,!0);Pt(o,v),g&&s.push(...g)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return et(t)&&n.set(t,xa),xa;if(Pe(i))for(let c=0;c<i.length;c++){const f=yn(i[c]);bf(f)&&(o[f]=Qe)}else if(i)for(const c in i){const f=yn(c);if(bf(f)){const v=i[c],g=o[f]=Pe(v)||Oe(v)?{type:v}:Pt({},v),h=g.type;let w=!1,b=!0;if(Pe(h))for(let d=0;d<h.length;++d){const p=h[d],m=Oe(p)&&p.name;if(m==="Boolean"){w=!0;break}else m==="String"&&(b=!1)}else w=Oe(h)&&h.name==="Boolean";g[0]=w,g[1]=b,(w||Ke(g,"default"))&&s.push(f)}}const u=[o,s];return et(t)&&n.set(t,u),u}function bf(t){return t[0]!=="$"&&!ii(t)}const Ac=t=>t[0]==="_"||t==="$stable",Bc=t=>Pe(t)?t.map(Rr):[Rr(t)],S0=(t,e,r)=>{if(e._n)return e;const n=Me((...a)=>Bc(e(...a)),r);return n._c=!1,n},Bg=(t,e,r)=>{const n=t._ctx;for(const a in t){if(Ac(a))continue;const i=t[a];if(Oe(i))e[a]=S0(a,i,n);else if(i!=null){const o=Bc(i);e[a]=()=>o}}},Rg=(t,e)=>{const r=Bc(e);t.slots.default=()=>r},Mg=(t,e,r)=>{for(const n in e)(r||!Ac(n))&&(t[n]=e[n])},T0=(t,e,r)=>{const n=t.slots=Dg();if(t.vnode.shapeFlag&32){const a=e._;a?(Mg(n,e,r),r&&Nh(n,"_",a,!0)):Bg(e,n)}else e&&Rg(t,e)},D0=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,o=Qe;if(n.shapeFlag&32){const s=e._;s?r&&s===1?i=!1:Mg(a,e,r):(i=!e.$stable,Bg(e,a)),o=e}else e&&(Rg(t,e),o={default:1});if(i)for(const s in a)!Ac(s)&&o[s]==null&&delete a[s]},or=V0;function P0(t){return k0(t)}function k0(t,e){const r=as();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:v,setScopeId:g=Lr,insertStaticContent:h}=t,w=(D,N,j,ne=null,ce=null,ie=null,le=void 0,X=null,Q=!!N.dynamicChildren)=>{if(D===N)return;D&&!Hn(D,N)&&(ne=K(D),_(D,ce,ie,!0),D=null),N.patchFlag===-2&&(Q=!1,N.dynamicChildren=null);const{type:Z,ref:fe,shapeFlag:oe}=N;switch(Z){case ds:b(D,N,j,ne);break;case qt:d(D,N,j,ne);break;case Hs:D==null&&p(N,j,ne,le);break;case at:A(D,N,j,ne,ce,ie,le,X,Q);break;default:oe&1?x(D,N,j,ne,ce,ie,le,X,Q):oe&6?M(D,N,j,ne,ce,ie,le,X,Q):(oe&64||oe&128)&&Z.process(D,N,j,ne,ce,ie,le,X,Q,W)}fe!=null&&ce&&No(fe,D&&D.ref,ie,N||D,!N)},b=(D,N,j,ne)=>{if(D==null)n(N.el=s(N.children),j,ne);else{const ce=N.el=D.el;N.children!==D.children&&u(ce,N.children)}},d=(D,N,j,ne)=>{D==null?n(N.el=l(N.children||""),j,ne):N.el=D.el},p=(D,N,j,ne)=>{[D.el,D.anchor]=h(D.children,N,j,ne,D.el,D.anchor)},m=({el:D,anchor:N},j,ne)=>{let ce;for(;D&&D!==N;)ce=v(D),n(D,j,ne),D=ce;n(N,j,ne)},y=({el:D,anchor:N})=>{let j;for(;D&&D!==N;)j=v(D),a(D),D=j;a(N)},x=(D,N,j,ne,ce,ie,le,X,Q)=>{N.type==="svg"?le="svg":N.type==="math"&&(le="mathml"),D==null?E(N,j,ne,ce,ie,le,X,Q):S(D,N,ce,ie,le,X,Q)},E=(D,N,j,ne,ce,ie,le,X)=>{let Q,Z;const{props:fe,shapeFlag:oe,transition:he,dirs:pe}=D;if(Q=D.el=o(D.type,ie,fe&&fe.is,fe),oe&8?c(Q,D.children):oe&16&&T(D.children,Q,null,ne,ce,Gs(D,ie),le,X),pe&&_n(D,null,ne,"created"),C(Q,D,D.scopeId,le,ne),fe){for(const Ee in fe)Ee!=="value"&&!ii(Ee)&&i(Q,Ee,null,fe[Ee],ie,ne);"value"in fe&&i(Q,"value",null,fe.value,ie),(Z=fe.onVnodeBeforeMount)&&Dr(Z,ne,D)}pe&&_n(D,null,ne,"beforeMount");const ge=A0(ce,he);ge&&he.beforeEnter(Q),n(Q,N,j),((Z=fe&&fe.onVnodeMounted)||ge||pe)&&or(()=>{Z&&Dr(Z,ne,D),ge&&he.enter(Q),pe&&_n(D,null,ne,"mounted")},ce)},C=(D,N,j,ne,ce)=>{if(j&&g(D,j),ne)for(let ie=0;ie<ne.length;ie++)g(D,ne[ie]);if(ce){let ie=ce.subTree;if(N===ie||zg(ie.type)&&(ie.ssContent===N||ie.ssFallback===N)){const le=ce.vnode;C(D,le,le.scopeId,le.slotScopeIds,ce.parent)}}},T=(D,N,j,ne,ce,ie,le,X,Q=0)=>{for(let Z=Q;Z<D.length;Z++){const fe=D[Z]=X?dn(D[Z]):Rr(D[Z]);w(null,fe,N,j,ne,ce,ie,le,X)}},S=(D,N,j,ne,ce,ie,le)=>{const X=N.el=D.el;let{patchFlag:Q,dynamicChildren:Z,dirs:fe}=N;Q|=D.patchFlag&16;const oe=D.props||Qe,he=N.props||Qe;let pe;if(j&&In(j,!1),(pe=he.onVnodeBeforeUpdate)&&Dr(pe,j,N,D),fe&&_n(N,D,j,"beforeUpdate"),j&&In(j,!0),(oe.innerHTML&&he.innerHTML==null||oe.textContent&&he.textContent==null)&&c(X,""),Z?P(D.dynamicChildren,Z,X,j,ne,Gs(N,ce),ie):le||O(D,N,X,null,j,ne,Gs(N,ce),ie,!1),Q>0){if(Q&16)R(X,oe,he,j,ce);else if(Q&2&&oe.class!==he.class&&i(X,"class",null,he.class,ce),Q&4&&i(X,"style",oe.style,he.style,ce),Q&8){const ge=N.dynamicProps;for(let Ee=0;Ee<ge.length;Ee++){const we=ge[Ee],ke=oe[we],De=he[we];(De!==ke||we==="value")&&i(X,we,ke,De,ce,j)}}Q&1&&D.children!==N.children&&c(X,N.children)}else!le&&Z==null&&R(X,oe,he,j,ce);((pe=he.onVnodeUpdated)||fe)&&or(()=>{pe&&Dr(pe,j,N,D),fe&&_n(N,D,j,"updated")},ne)},P=(D,N,j,ne,ce,ie,le)=>{for(let X=0;X<N.length;X++){const Q=D[X],Z=N[X],fe=Q.el&&(Q.type===at||!Hn(Q,Z)||Q.shapeFlag&198)?f(Q.el):j;w(Q,Z,fe,null,ne,ce,ie,le,!0)}},R=(D,N,j,ne,ce)=>{if(N!==j){if(N!==Qe)for(const ie in N)!ii(ie)&&!(ie in j)&&i(D,ie,N[ie],null,ce,ne);for(const ie in j){if(ii(ie))continue;const le=j[ie],X=N[ie];le!==X&&ie!=="value"&&i(D,ie,X,le,ce,ne)}"value"in j&&i(D,"value",N.value,j.value,ce)}},A=(D,N,j,ne,ce,ie,le,X,Q)=>{const Z=N.el=D?D.el:s(""),fe=N.anchor=D?D.anchor:s("");let{patchFlag:oe,dynamicChildren:he,slotScopeIds:pe}=N;pe&&(X=X?X.concat(pe):pe),D==null?(n(Z,j,ne),n(fe,j,ne),T(N.children||[],j,fe,ce,ie,le,X,Q)):oe>0&&oe&64&&he&&D.dynamicChildren?(P(D.dynamicChildren,he,j,ce,ie,le,X),(N.key!=null||ce&&N===ce.subTree)&&Lg(D,N,!0)):O(D,N,j,fe,ce,ie,le,X,Q)},M=(D,N,j,ne,ce,ie,le,X,Q)=>{N.slotScopeIds=X,D==null?N.shapeFlag&512?ce.ctx.activate(N,j,ne,le,Q):V(N,j,ne,ce,ie,le,Q):G(D,N,Q)},V=(D,N,j,ne,ce,ie,le)=>{const X=D.component=K0(D,ne,ce);if(us(D)&&(X.ctx.renderer=W),Y0(X,!1,le),X.asyncDep){if(ce&&ce.registerDep(X,B,le),!D.el){const Q=X.subTree=be(qt);d(null,Q,N,j)}}else B(X,D,N,j,ce,ie,le)},G=(D,N,j)=>{const ne=N.component=D.component;if(z0(D,N,j))if(ne.asyncDep&&!ne.asyncResolved){k(ne,N,j);return}else ne.next=N,ne.update();else N.el=D.el,ne.vnode=N},B=(D,N,j,ne,ce,ie,le)=>{const X=()=>{if(D.isMounted){let{next:oe,bu:he,u:pe,parent:ge,vnode:Ee}=D;{const ue=_g(D);if(ue){oe&&(oe.el=Ee.el,k(D,oe,le)),ue.asyncDep.then(()=>{D.isUnmounted||X()});return}}let we=oe,ke;In(D,!1),oe?(oe.el=Ee.el,k(D,oe,le)):oe=Ee,he&&mo(he),(ke=oe.props&&oe.props.onVnodeBeforeUpdate)&&Dr(ke,ge,oe,Ee),In(D,!0);const De=xf(D),me=D.subTree;D.subTree=De,w(me,De,f(me.el),K(me),D,ce,ie),oe.el=De.el,we===null&&F0(D,De.el),pe&&or(pe,ce),(ke=oe.props&&oe.props.onVnodeUpdated)&&or(()=>Dr(ke,ge,oe,Ee),ce)}else{let oe;const{el:he,props:pe}=N,{bm:ge,m:Ee,parent:we,root:ke,type:De}=D,me=Sa(N);In(D,!1),ge&&mo(ge),!me&&(oe=pe&&pe.onVnodeBeforeMount)&&Dr(oe,we,N),In(D,!0);{ke.ce&&ke.ce._injectChildStyle(De);const ue=D.subTree=xf(D);w(null,ue,j,ne,D,ce,ie),N.el=ue.el}if(Ee&&or(Ee,ce),!me&&(oe=pe&&pe.onVnodeMounted)){const ue=N;or(()=>Dr(oe,we,ue),ce)}(N.shapeFlag&256||we&&Sa(we.vnode)&&we.vnode.shapeFlag&256)&&D.a&&or(D.a,ce),D.isMounted=!0,N=j=ne=null}};D.scope.on();const Q=D.effect=new Uh(X);D.scope.off();const Z=D.update=Q.run.bind(Q),fe=D.job=Q.runIfDirty.bind(Q);fe.i=D,fe.id=D.uid,Q.scheduler=()=>kc(fe),In(D,!0),Z()},k=(D,N,j)=>{N.component=D;const ne=D.vnode.props;D.vnode=N,D.next=null,C0(D,N.props,ne,j),D0(D,N.children,j),Yr(),vf(D),Xr()},O=(D,N,j,ne,ce,ie,le,X,Q=!1)=>{const Z=D&&D.children,fe=D?D.shapeFlag:0,oe=N.children,{patchFlag:he,shapeFlag:pe}=N;if(he>0){if(he&128){H(Z,oe,j,ne,ce,ie,le,X,Q);return}else if(he&256){z(Z,oe,j,ne,ce,ie,le,X,Q);return}}pe&8?(fe&16&&$(Z,ce,ie),oe!==Z&&c(j,oe)):fe&16?pe&16?H(Z,oe,j,ne,ce,ie,le,X,Q):$(Z,ce,ie,!0):(fe&8&&c(j,""),pe&16&&T(oe,j,ne,ce,ie,le,X,Q))},z=(D,N,j,ne,ce,ie,le,X,Q)=>{D=D||xa,N=N||xa;const Z=D.length,fe=N.length,oe=Math.min(Z,fe);let he;for(he=0;he<oe;he++){const pe=N[he]=Q?dn(N[he]):Rr(N[he]);w(D[he],pe,j,null,ce,ie,le,X,Q)}Z>fe?$(D,ce,ie,!0,!1,oe):T(N,j,ne,ce,ie,le,X,Q,oe)},H=(D,N,j,ne,ce,ie,le,X,Q)=>{let Z=0;const fe=N.length;let oe=D.length-1,he=fe-1;for(;Z<=oe&&Z<=he;){const pe=D[Z],ge=N[Z]=Q?dn(N[Z]):Rr(N[Z]);if(Hn(pe,ge))w(pe,ge,j,null,ce,ie,le,X,Q);else break;Z++}for(;Z<=oe&&Z<=he;){const pe=D[oe],ge=N[he]=Q?dn(N[he]):Rr(N[he]);if(Hn(pe,ge))w(pe,ge,j,null,ce,ie,le,X,Q);else break;oe--,he--}if(Z>oe){if(Z<=he){const pe=he+1,ge=pe<fe?N[pe].el:ne;for(;Z<=he;)w(null,N[Z]=Q?dn(N[Z]):Rr(N[Z]),j,ge,ce,ie,le,X,Q),Z++}}else if(Z>he)for(;Z<=oe;)_(D[Z],ce,ie,!0),Z++;else{const pe=Z,ge=Z,Ee=new Map;for(Z=ge;Z<=he;Z++){const ae=N[Z]=Q?dn(N[Z]):Rr(N[Z]);ae.key!=null&&Ee.set(ae.key,Z)}let we,ke=0;const De=he-ge+1;let me=!1,ue=0;const L=new Array(De);for(Z=0;Z<De;Z++)L[Z]=0;for(Z=pe;Z<=oe;Z++){const ae=D[Z];if(ke>=De){_(ae,ce,ie,!0);continue}let se;if(ae.key!=null)se=Ee.get(ae.key);else for(we=ge;we<=he;we++)if(L[we-ge]===0&&Hn(ae,N[we])){se=we;break}se===void 0?_(ae,ce,ie,!0):(L[se-ge]=Z+1,se>=ue?ue=se:me=!0,w(ae,N[se],j,null,ce,ie,le,X,Q),ke++)}const re=me?B0(L):xa;for(we=re.length-1,Z=De-1;Z>=0;Z--){const ae=ge+Z,se=N[ae],de=ae+1<fe?N[ae+1].el:ne;L[Z]===0?w(null,se,j,de,ce,ie,le,X,Q):me&&(we<0||Z!==re[we]?U(se,j,de,2):we--)}}},U=(D,N,j,ne,ce=null)=>{const{el:ie,type:le,transition:X,children:Q,shapeFlag:Z}=D;if(Z&6){U(D.component.subTree,N,j,ne);return}if(Z&128){D.suspense.move(N,j,ne);return}if(Z&64){le.move(D,N,j,W);return}if(le===at){n(ie,N,j);for(let oe=0;oe<Q.length;oe++)U(Q[oe],N,j,ne);n(D.anchor,N,j);return}if(le===Hs){m(D,N,j);return}if(ne!==2&&Z&1&&X)if(ne===0)X.beforeEnter(ie),n(ie,N,j),or(()=>X.enter(ie),ce);else{const{leave:oe,delayLeave:he,afterLeave:pe}=X,ge=()=>{D.ctx.isUnmounted?a(ie):n(ie,N,j)},Ee=()=>{oe(ie,()=>{ge(),pe&&pe()})};he?he(ie,ge,Ee):Ee()}else n(ie,N,j)},_=(D,N,j,ne=!1,ce=!1)=>{const{type:ie,props:le,ref:X,children:Q,dynamicChildren:Z,shapeFlag:fe,patchFlag:oe,dirs:he,cacheIndex:pe}=D;if(oe===-2&&(ce=!1),X!=null&&(Yr(),No(X,null,j,D,!0),Xr()),pe!=null&&(N.renderCache[pe]=void 0),fe&256){N.ctx.deactivate(D);return}const ge=fe&1&&he,Ee=!Sa(D);let we;if(Ee&&(we=le&&le.onVnodeBeforeUnmount)&&Dr(we,N,D),fe&6)F(D.component,j,ne);else{if(fe&128){D.suspense.unmount(j,ne);return}ge&&_n(D,null,N,"beforeUnmount"),fe&64?D.type.remove(D,N,j,W,ne):Z&&!Z.hasOnce&&(ie!==at||oe>0&&oe&64)?$(Z,N,j,!1,!0):(ie===at&&oe&384||!ce&&fe&16)&&$(Q,N,j),ne&&q(D)}(Ee&&(we=le&&le.onVnodeUnmounted)||ge)&&or(()=>{we&&Dr(we,N,D),ge&&_n(D,null,N,"unmounted")},j)},q=D=>{const{type:N,el:j,anchor:ne,transition:ce}=D;if(N===at){I(j,ne);return}if(N===Hs){y(D);return}const ie=()=>{a(j),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(D.shapeFlag&1&&ce&&!ce.persisted){const{leave:le,delayLeave:X}=ce,Q=()=>le(j,ie);X?X(D.el,ie,Q):Q()}else ie()},I=(D,N)=>{let j;for(;D!==N;)j=v(D),a(D),D=j;a(N)},F=(D,N,j)=>{const{bum:ne,scope:ce,job:ie,subTree:le,um:X,m:Q,a:Z,parent:fe,slots:{__:oe}}=D;wf(Q),wf(Z),ne&&mo(ne),fe&&Pe(oe)&&oe.forEach(he=>{fe.renderCache[he]=void 0}),ce.stop(),ie&&(ie.flags|=8,_(le,D,N,j)),X&&or(X,N),or(()=>{D.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},$=(D,N,j,ne=!1,ce=!1,ie=0)=>{for(let le=ie;le<D.length;le++)_(D[le],N,j,ne,ce)},K=D=>{if(D.shapeFlag&6)return K(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const N=v(D.anchor||D.el),j=N&&N[Xy];return j?v(j):N};let ee=!1;const Y=(D,N,j)=>{D==null?N._vnode&&_(N._vnode,null,null,!0):w(N._vnode||null,D,N,null,null,null,j),N._vnode=D,ee||(ee=!0,vf(),ug(),ee=!1)},W={p:w,um:_,m:U,r:q,mt:V,mc:T,pc:O,pbc:P,n:K,o:t};return{render:Y,hydrate:void 0,createApp:y0(Y)}}function Gs({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function In({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function A0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Lg(t,e,r=!1){const n=t.children,a=e.children;if(Pe(n)&&Pe(a))for(let i=0;i<n.length;i++){const o=n[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=dn(a[i]),s.el=o.el),!r&&s.patchFlag!==-2&&Lg(o,s)),s.type===ds&&(s.el=o.el),s.type===qt&&!s.el&&(s.el=o.el)}}function B0(t){const e=t.slice(),r=[0];let n,a,i,o,s;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(a=r[r.length-1],t[a]<u){e[n]=a,r.push(n);continue}for(i=0,o=r.length-1;i<o;)s=i+o>>1,t[r[s]]<u?i=s+1:o=s;u<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function _g(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_g(e)}function wf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const R0=Symbol.for("v-scx"),M0=()=>ui(R0);function gr(t,e,r){return Ig(t,e,r)}function Ig(t,e,r=Qe){const{immediate:n,deep:a,flush:i,once:o}=r,s=Pt({},r),l=e&&n||!e&&i!=="post";let u;if(xi){if(i==="sync"){const g=M0();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Lr,g.resume=Lr,g.pause=Lr,g}}const c=Mt;s.call=(g,h,w)=>Cr(g,c,h,w);let f=!1;i==="post"?s.scheduler=g=>{or(g,c&&c.suspense)}:i!=="sync"&&(f=!0,s.scheduler=(g,h)=>{h?g():kc(g)}),s.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const v=Wy(t,e,s);return xi&&(u?u.push(v):l&&v()),v}function L0(t,e,r){const n=this.proxy,a=vt(t)?t.includes(".")?Og(n,t):()=>n[t]:t.bind(n,n);let i;Oe(e)?i=e:(i=e.handler,r=e);const o=Oi(this),s=Ig(a,i.bind(n),r);return o(),s}function Og(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const _0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${yn(e)}Modifiers`]||t[`${Pn(e)}Modifiers`];function I0(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Qe;let a=r;const i=e.startsWith("update:"),o=i&&_0(n,e.slice(7));o&&(o.trim&&(a=r.map(c=>vt(c)?c.trim():c)),o.number&&(a=r.map(sy)));let s,l=n[s=Os(e)]||n[s=Os(yn(e))];!l&&i&&(l=n[s=Os(Pn(e))]),l&&Cr(l,t,6,a);const u=n[s+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Cr(u,t,6,a)}}function Ng(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let o={},s=!1;if(!Oe(t)){const l=u=>{const c=Ng(u,e,!0);c&&(s=!0,Pt(o,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!s?(et(t)&&n.set(t,null),null):(Pe(i)?i.forEach(l=>o[l]=null):Pt(o,i),et(t)&&n.set(t,o),o)}function fs(t,e){return!t||!ts(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(t,e[0].toLowerCase()+e.slice(1))||Ke(t,Pn(e))||Ke(t,e))}function xf(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:f,data:v,setupState:g,ctx:h,inheritAttrs:w}=t,b=Oo(t);let d,p;try{if(r.shapeFlag&4){const y=a||n,x=y;d=Rr(u.call(x,y,c,f,g,v,h)),p=s}else{const y=e;d=Rr(y.length>1?y(f,{attrs:s,slots:o,emit:l}):y(f,null)),p=e.props?s:O0(s)}}catch(y){ci.length=0,ls(y,t,1),d=be(qt)}let m=d;if(p&&w!==!1){const y=Object.keys(p),{shapeFlag:x}=m;y.length&&x&7&&(i&&y.some(pc)&&(p=N0(p,i)),m=wn(m,p,!1,!0))}return r.dirs&&(m=wn(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(r.dirs):r.dirs),r.transition&&yi(m,r.transition),d=m,Oo(b),d}const O0=t=>{let e;for(const r in t)(r==="class"||r==="style"||ts(r))&&((e||(e={}))[r]=t[r]);return e},N0=(t,e)=>{const r={};for(const n in t)(!pc(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function z0(t,e,r){const{props:n,children:a,component:i}=t,{props:o,children:s,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Cf(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const v=c[f];if(o[v]!==n[v]&&!fs(u,v))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?Cf(n,o,u):!0:!!o;return!1}function Cf(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(e[i]!==t[i]&&!fs(r,i))return!0}return!1}function F0({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const zg=t=>t.__isSuspense;function V0(t,e){e&&e.pendingBranch?Pe(t)?e.effects.push(...t):e.effects.push(t):Yy(t)}const at=Symbol.for("v-fgt"),ds=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),Hs=Symbol.for("v-stc"),ci=[];let sr=null;function Ae(t=!1){ci.push(sr=t?null:[])}function q0(){ci.pop(),sr=ci[ci.length-1]||null}let bi=1;function Ef(t,e=!1){bi+=t,t<0&&sr&&e&&(sr.hasOnce=!0)}function Fg(t){return t.dynamicChildren=bi>0?sr||xa:null,q0(),bi>0&&sr&&sr.push(t),t}function _e(t,e,r,n,a,i){return Fg(te(t,e,r,n,a,i,!0))}function Ba(t,e,r,n,a){return Fg(be(t,e,r,n,a,!0))}function wi(t){return t?t.__v_isVNode===!0:!1}function Hn(t,e){return t.type===e.type&&t.key===e.key}const Vg=({key:t})=>t??null,yo=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?vt(t)||dt(t)||Oe(t)?{i:Tt,r:t,k:e,f:!!r}:t:null);function te(t,e=null,r=null,n=0,a=null,i=t===at?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vg(e),ref:e&&yo(e),scopeId:fg,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Tt};return s?(Rc(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=vt(r)?8:16),bi>0&&!o&&sr&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&sr.push(l),l}const be=$0;function $0(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===c0)&&(t=qt),wi(t)){const s=wn(t,e,!0);return r&&Rc(s,r),bi>0&&!i&&sr&&(s.shapeFlag&6?sr[sr.indexOf(t)]=s:sr.push(s)),s.patchFlag=-2,s}if(J0(t)&&(t=t.__vccOpts),e){e=G0(e);let{class:s,style:l}=e;s&&!vt(s)&&(e.class=ot(s)),et(l)&&(Tc(l)&&!Pe(l)&&(l=Pt({},l)),e.style=Xn(l))}const o=vt(t)?1:zg(t)?128:dg(t)?64:et(t)?4:Oe(t)?2:0;return te(t,e,r,n,a,o,i,!0)}function G0(t){return t?Tc(t)||Pg(t)?Pt({},t):t:null}function wn(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:o,children:s,transition:l}=t,u=e?H0(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Vg(u),ref:e&&e.ref?r&&i?Pe(i)?i.concat(yo(e)):[i,yo(e)]:yo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==at?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wn(t.ssContent),ssFallback:t.ssFallback&&wn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&yi(c,l.clone(c)),c}function Ve(t=" ",e=0){return be(ds,null,t,e)}function Kt(t="",e=!1){return e?(Ae(),Ba(qt,null,t)):be(qt,null,t)}function Rr(t){return t==null||typeof t=="boolean"?be(qt):Pe(t)?be(at,null,t.slice()):wi(t)?dn(t):be(ds,null,String(t))}function dn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wn(t)}function Rc(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Pe(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),Rc(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!Pg(e)?e._ctx=Tt:a===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:Tt},r=32):(e=String(e),n&64?(r=16,e=[Ve(e)]):r=8);t.children=e,t.shapeFlag|=r}function H0(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=ot([e.class,n.class]));else if(a==="style")e.style=Xn([e.style,n.style]);else if(ts(a)){const i=e[a],o=n[a];o&&i!==o&&!(Pe(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=n[a])}return e}function Dr(t,e,r,n=null){Cr(t,e,7,[r,n])}const U0=Sg();let W0=0;function K0(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||U0,i={uid:W0++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $h(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ag(n,a),emitsOptions:Ng(n,a),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:n.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=I0.bind(null,i),t.ce&&t.ce(i),i}let Mt=null;const j0=()=>Mt||Tt;let Fo,Uu;{const t=as(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};Fo=e("__VUE_INSTANCE_SETTERS__",r=>Mt=r),Uu=e("__VUE_SSR_SETTERS__",r=>xi=r)}const Oi=t=>{const e=Mt;return Fo(t),t.scope.on(),()=>{t.scope.off(),Fo(e)}},Sf=()=>{Mt&&Mt.scope.off(),Fo(null)};function qg(t){return t.vnode.shapeFlag&4}let xi=!1;function Y0(t,e=!1,r=!1){e&&Uu(e);const{props:n,children:a}=t.vnode,i=qg(t);x0(t,n,i,e),T0(t,a,r||e);const o=i?X0(t,e):void 0;return e&&Uu(!1),o}function X0(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,f0);const{setup:n}=r;if(n){Yr();const a=t.setupContext=n.length>1?Q0(t):null,i=Oi(t),o=Ii(n,t,0,[t.props,a]),s=Lh(o);if(Xr(),i(),(s||t.sp)&&!Sa(t)&&yg(t),s){if(o.then(Sf,Sf),e)return o.then(l=>{Tf(t,l)}).catch(l=>{ls(l,t,0)});t.asyncDep=o}else Tf(t,o)}else $g(t)}function Tf(t,e,r){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=og(e)),$g(t)}function $g(t,e,r){const n=t.type;t.render||(t.render=n.render||Lr);{const a=Oi(t);Yr();try{d0(t)}finally{Xr(),a()}}}const Z0={get(t,e){return Vt(t,"get",""),t[e]}};function Q0(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Z0),slots:t.slots,emit:t.emit,expose:e}}function vs(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(og(Dc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in li)return li[r](t)},has(e,r){return r in e||r in li}})):t.proxy}function J0(t){return Oe(t)&&"__vccOpts"in t}const pt=(t,e)=>Hy(t,e,xi);function eb(t,e,r){const n=arguments.length;return n===2?et(e)&&!Pe(e)?wi(e)?be(t,null,[e]):be(t,e):be(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&wi(r)&&(r=[r]),be(t,e,r))}const tb="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wu;const Df=typeof window<"u"&&window.trustedTypes;if(Df)try{Wu=Df.createPolicy("vue",{createHTML:t=>t})}catch{}const Gg=Wu?t=>Wu.createHTML(t):t=>t,rb="http://www.w3.org/2000/svg",nb="http://www.w3.org/1998/Math/MathML",Hr=typeof document<"u"?document:null,Pf=Hr&&Hr.createElement("template"),ab={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Hr.createElementNS(rb,t):e==="mathml"?Hr.createElementNS(nb,t):r?Hr.createElement(t,{is:r}):Hr.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Hr.createTextNode(t),createComment:t=>Hr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const o=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{Pf.innerHTML=Gg(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const s=Pf.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},an="transition",Wa="animation",Ci=Symbol("_vtc"),Hg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ib=Pt({},vg,Hg),ob=t=>(t.displayName="Transition",t.props=ib,t),Mc=ob((t,{slots:e})=>eb(Jy,sb(t),e)),On=(t,e=[])=>{Pe(t)?t.forEach(r=>r(...e)):t&&t(...e)},kf=t=>t?Pe(t)?t.some(e=>e.length>1):t.length>1:!1;function sb(t){const e={};for(const A in t)A in Hg||(e[A]=t[A]);if(t.css===!1)return e;const{name:r="v",type:n,duration:a,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:v=`${r}-leave-active`,leaveToClass:g=`${r}-leave-to`}=t,h=lb(a),w=h&&h[0],b=h&&h[1],{onBeforeEnter:d,onEnter:p,onEnterCancelled:m,onLeave:y,onLeaveCancelled:x,onBeforeAppear:E=d,onAppear:C=p,onAppearCancelled:T=m}=e,S=(A,M,V,G)=>{A._enterCancelled=G,Nn(A,M?c:s),Nn(A,M?u:o),V&&V()},P=(A,M)=>{A._isLeaving=!1,Nn(A,f),Nn(A,g),Nn(A,v),M&&M()},R=A=>(M,V)=>{const G=A?C:p,B=()=>S(M,A,V);On(G,[M,B]),Af(()=>{Nn(M,A?l:i),Fr(M,A?c:s),kf(G)||Bf(M,n,w,B)})};return Pt(e,{onBeforeEnter(A){On(d,[A]),Fr(A,i),Fr(A,o)},onBeforeAppear(A){On(E,[A]),Fr(A,l),Fr(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,M){A._isLeaving=!0;const V=()=>P(A,M);Fr(A,f),A._enterCancelled?(Fr(A,v),Lf()):(Lf(),Fr(A,v)),Af(()=>{A._isLeaving&&(Nn(A,f),Fr(A,g),kf(y)||Bf(A,n,b,V))}),On(y,[A,V])},onEnterCancelled(A){S(A,!1,void 0,!0),On(m,[A])},onAppearCancelled(A){S(A,!0,void 0,!0),On(T,[A])},onLeaveCancelled(A){P(A),On(x,[A])}})}function lb(t){if(t==null)return null;if(et(t))return[Us(t.enter),Us(t.leave)];{const e=Us(t);return[e,e]}}function Us(t){return ly(t)}function Fr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Ci]||(t[Ci]=new Set)).add(e)}function Nn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Ci];r&&(r.delete(e),r.size||(t[Ci]=void 0))}function Af(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ub=0;function Bf(t,e,r,n){const a=t._endId=++ub,i=()=>{a===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:o,timeout:s,propCount:l}=cb(t,e);if(!o)return n();const u=o+"end";let c=0;const f=()=>{t.removeEventListener(u,v),i()},v=g=>{g.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),t.addEventListener(u,v)}function cb(t,e){const r=window.getComputedStyle(t),n=h=>(r[h]||"").split(", "),a=n(`${an}Delay`),i=n(`${an}Duration`),o=Rf(a,i),s=n(`${Wa}Delay`),l=n(`${Wa}Duration`),u=Rf(s,l);let c=null,f=0,v=0;e===an?o>0&&(c=an,f=o,v=i.length):e===Wa?u>0&&(c=Wa,f=u,v=l.length):(f=Math.max(o,u),c=f>0?o>u?an:Wa:null,v=c?c===an?i.length:l.length:0);const g=c===an&&/\b(transform|all)(,|$)/.test(n(`${an}Property`).toString());return{type:c,timeout:f,propCount:v,hasTransform:g}}function Rf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Mf(r)+Mf(t[n])))}function Mf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Lf(){return document.body.offsetHeight}function fb(t,e,r){const n=t[Ci];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Vo=Symbol("_vod"),Ug=Symbol("_vsh"),on={beforeMount(t,{value:e},{transition:r}){t[Vo]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Ka(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Ka(t,!0),n.enter(t)):n.leave(t,()=>{Ka(t,!1)}):Ka(t,e))},beforeUnmount(t,{value:e}){Ka(t,e)}};function Ka(t,e){t.style.display=e?t[Vo]:"none",t[Ug]=!e}const db=Symbol(""),vb=/(^|;)\s*display\s*:/;function hb(t,e,r){const n=t.style,a=vt(r);let i=!1;if(r&&!a){if(e)if(vt(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&bo(n,s,"")}else for(const o in e)r[o]==null&&bo(n,o,"");for(const o in r)o==="display"&&(i=!0),bo(n,o,r[o])}else if(a){if(e!==r){const o=n[db];o&&(r+=";"+o),n.cssText=r,i=vb.test(r)}}else e&&t.removeAttribute("style");Vo in t&&(t[Vo]=i?n.display:"",t[Ug]&&(n.display="none"))}const _f=/\s*!important$/;function bo(t,e,r){if(Pe(r))r.forEach(n=>bo(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=gb(t,e);_f.test(r)?t.setProperty(Pn(n),r.replace(_f,""),"important"):t[n]=r}}const If=["Webkit","Moz","ms"],Ws={};function gb(t,e){const r=Ws[e];if(r)return r;let n=yn(e);if(n!=="filter"&&n in t)return Ws[e]=n;n=Oh(n);for(let a=0;a<If.length;a++){const i=If[a]+n;if(i in t)return Ws[e]=i}return e}const Of="http://www.w3.org/1999/xlink";function Nf(t,e,r,n,a,i=hy(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Of,e.slice(6,e.length)):t.setAttributeNS(Of,e,r):r==null||i&&!zh(r)?t.removeAttribute(e):t.setAttribute(e,i?"":xr(r)?String(r):r)}function zf(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Gg(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(s!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const s=typeof t[e];s==="boolean"?r=zh(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(a||e)}function Wg(t,e,r,n){t.addEventListener(e,r,n)}function pb(t,e,r,n){t.removeEventListener(e,r,n)}const Ff=Symbol("_vei");function mb(t,e,r,n,a=null){const i=t[Ff]||(t[Ff]={}),o=i[e];if(n&&o)o.value=n;else{const[s,l]=yb(e);if(n){const u=i[e]=xb(n,a);Wg(t,s,u,l)}else o&&(pb(t,s,o,l),i[e]=void 0)}}const Vf=/(?:Once|Passive|Capture)$/;function yb(t){let e;if(Vf.test(t)){e={};let n;for(;n=t.match(Vf);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pn(t.slice(2)),e]}let Ks=0;const bb=Promise.resolve(),wb=()=>Ks||(bb.then(()=>Ks=0),Ks=Date.now());function xb(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Cr(Cb(n,r.value),e,5,[n])};return r.value=t,r.attached=wb(),r}function Cb(t,e){if(Pe(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const qf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Eb=(t,e,r,n,a,i)=>{const o=a==="svg";e==="class"?fb(t,n,o):e==="style"?hb(t,r,n):ts(e)?pc(e)||mb(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Sb(t,e,n,o))?(zf(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Nf(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!vt(n))?zf(t,yn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Nf(t,e,n,o))};function Sb(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&qf(e)&&Oe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return qf(e)&&vt(r)?!1:e in t}const $f=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Pe(e)?r=>mo(e,r):e},js=Symbol("_assign"),Tb={deep:!0,created(t,e,r){t[js]=$f(r),Wg(t,"change",()=>{const n=t._modelValue,a=Db(t),i=t.checked,o=t[js];if(Pe(n)){const s=Fh(n,a),l=s!==-1;if(i&&!l)o(n.concat(a));else if(!i&&l){const u=[...n];u.splice(s,1),o(u)}}else if(rs(n)){const s=new Set(n);i?s.add(a):s.delete(a),o(s)}else o(Kg(t,i))})},mounted:Gf,beforeUpdate(t,e,r){t[js]=$f(r),Gf(t,e,r)}};function Gf(t,{value:e,oldValue:r},n){t._modelValue=e;let a;if(Pe(e))a=Fh(e,n.props.value)>-1;else if(rs(e))a=e.has(n.props.value);else{if(e===r)return;a=is(e,Kg(t,!0))}t.checked!==a&&(t.checked=a)}function Db(t){return"_value"in t?t._value:t.value}function Kg(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const Pb=["ctrl","shift","alt","meta"],kb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Pb.some(r=>t[`${r}Key`]&&!e.includes(r))},Gr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(a,...i)=>{for(let o=0;o<e.length;o++){const s=kb[e[o]];if(s&&s(a,e))return}return t(a,...i)})},Ab={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Hf=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=a=>{if(!("key"in a))return;const i=Pn(a.key);if(e.some(o=>o===i||Ab[o]===i))return t(a)})},Bb=Pt({patchProp:Eb},ab);let Uf;function Rb(){return Uf||(Uf=P0(Bb))}const Mb=(...t)=>{const e=Rb().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=_b(n);if(!a)return;const i=e._component;!Oe(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,Lb(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function Lb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _b(t){return vt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let jg;const hs=t=>jg=t,Yg=Symbol();function Ku(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var fi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(fi||(fi={}));function Ib(){const t=Gh(!0),e=t.run(()=>He({}));let r=[],n=[];const a=Dc({install(i){hs(a),a._a=i,i.provide(Yg,a),i.config.globalProperties.$pinia=a,n.forEach(o=>r.push(o)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return a}const Xg=()=>{};function Wf(t,e,r,n=Xg){t.push(e);const a=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&Hh()&&py(a),a}function sa(t,...e){t.slice().forEach(r=>{r(...e)})}const Ob=t=>t(),Kf=Symbol(),Ys=Symbol();function ju(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],a=t[r];Ku(a)&&Ku(n)&&t.hasOwnProperty(r)&&!dt(n)&&!gn(n)?t[r]=ju(a,n):t[r]=n}return t}const Nb=Symbol();function zb(t){return!Ku(t)||!Object.prototype.hasOwnProperty.call(t,Nb)}const{assign:un}=Object;function Fb(t){return!!(dt(t)&&t.effect)}function Vb(t,e,r,n){const{state:a,actions:i,getters:o}=e,s=r.state.value[t];let l;function u(){s||(r.state.value[t]=a?a():{});const c=Vy(r.state.value[t]);return un(c,i,Object.keys(o||{}).reduce((f,v)=>(f[v]=Dc(pt(()=>{hs(r);const g=r._s.get(t);return o[v].call(g,g)})),f),{}))}return l=Zg(t,u,e,r,n,!0),l}function Zg(t,e,r={},n,a,i){let o;const s=un({actions:{}},r),l={deep:!0};let u,c,f=[],v=[],g;const h=n.state.value[t];!i&&!h&&(n.state.value[t]={}),He({});let w;function b(T){let S;u=c=!1,typeof T=="function"?(T(n.state.value[t]),S={type:fi.patchFunction,storeId:t,events:g}):(ju(n.state.value[t],T),S={type:fi.patchObject,payload:T,storeId:t,events:g});const P=w=Symbol();Pc().then(()=>{w===P&&(u=!0)}),c=!0,sa(f,S,n.state.value[t])}const d=i?function(){const{state:S}=r,P=S?S():{};this.$patch(R=>{un(R,P)})}:Xg;function p(){o.stop(),f=[],v=[],n._s.delete(t)}const m=(T,S="")=>{if(Kf in T)return T[Ys]=S,T;const P=function(){hs(n);const R=Array.from(arguments),A=[],M=[];function V(k){A.push(k)}function G(k){M.push(k)}sa(v,{args:R,name:P[Ys],store:x,after:V,onError:G});let B;try{B=T.apply(this&&this.$id===t?this:x,R)}catch(k){throw sa(M,k),k}return B instanceof Promise?B.then(k=>(sa(A,k),k)).catch(k=>(sa(M,k),Promise.reject(k))):(sa(A,B),B)};return P[Kf]=!0,P[Ys]=S,P},y={_p:n,$id:t,$onAction:Wf.bind(null,v),$patch:b,$reset:d,$subscribe(T,S={}){const P=Wf(f,T,S.detached,()=>R()),R=o.run(()=>gr(()=>n.state.value[t],A=>{(S.flush==="sync"?c:u)&&T({storeId:t,type:fi.direct,events:g},A)},un({},l,S)));return P},$dispose:p},x=ss(y);n._s.set(t,x);const C=(n._a&&n._a.runWithContext||Ob)(()=>n._e.run(()=>(o=Gh()).run(()=>e({action:m}))));for(const T in C){const S=C[T];if(dt(S)&&!Fb(S)||gn(S))i||(h&&zb(S)&&(dt(S)?S.value=h[T]:ju(S,h[T])),n.state.value[t][T]=S);else if(typeof S=="function"){const P=m(S,T);C[T]=P,s.actions[T]=S}}return un(x,C),un(Ge(x),C),Object.defineProperty(x,"$state",{get:()=>n.state.value[t],set:T=>{b(S=>{un(S,T)})}}),n._p.forEach(T=>{un(x,o.run(()=>T({store:x,app:n._a,pinia:n,options:s})))}),h&&i&&r.hydrate&&r.hydrate(x.$state,h),u=!0,c=!0,x}/*! #__NO_SIDE_EFFECTS__ */function Qg(t,e,r){let n;const a=typeof e=="function";n=a?r:e;function i(o,s){const l=w0();return o=o||(l?ui(Yg,null):null),o&&hs(o),o=jg,o._s.has(t)||(a?Zg(t,e,n,o):Vb(t,n,o)),o._s.get(t)}return i.$id=t,i}function Yu(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function qb(t){if(Array.isArray(t))return t}function $b(t){if(Array.isArray(t))return Yu(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ep(n.key),n)}}function An(t,e,r){return e&&Gb(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ar(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Lc(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){s=!0,i=l},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw i}}}}function Jg(t,e,r){return(e=ep(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hb(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ub(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Wb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(t,e){return qb(t)||Ub(t,e)||Lc(t,e)||Wb()}function qo(t){return $b(t)||Hb(t)||Lc(t)||Kb()}function jb(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ep(t){var e=jb(t,"string");return typeof e=="symbol"?e:e+""}function xt(t){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(t)}function Lc(t,e){if(t){if(typeof t=="string")return Yu(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yu(t,e):void 0}}var yt=typeof window>"u"?null:window,jf=yt?yt.navigator:null;yt&&yt.document;var Yb=xt(""),tp=xt({}),Xb=xt(function(){}),Zb=typeof HTMLElement>"u"?"undefined":xt(HTMLElement),Ni=function(e){return e&&e.instanceString&&lt(e.instanceString)?e.instanceString():null},Te=function(e){return e!=null&&xt(e)==Yb},lt=function(e){return e!=null&&xt(e)===Xb},Je=function(e){return!lr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ue=function(e){return e!=null&&xt(e)===tp&&!Je(e)&&e.constructor===Object},Qb=function(e){return e!=null&&xt(e)===tp},ye=function(e){return e!=null&&xt(e)===xt(1)&&!isNaN(e)},Jb=function(e){return ye(e)&&Math.floor(e)===e},$o=function(e){if(Zb!=="undefined")return e!=null&&e instanceof HTMLElement},lr=function(e){return zi(e)||rp(e)},zi=function(e){return Ni(e)==="collection"&&e._private.single},rp=function(e){return Ni(e)==="collection"&&!e._private.single},_c=function(e){return Ni(e)==="core"},np=function(e){return Ni(e)==="stylesheet"},e1=function(e){return Ni(e)==="event"},xn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},t1=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},r1=function(e){return Ue(e)&&ye(e.x1)&&ye(e.x2)&&ye(e.y1)&&ye(e.y2)},n1=function(e){return Qb(e)&&lt(e.then)},a1=function(){return jf&&jf.userAgent.match(/msie|trident|edge/i)},Ra=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,s,l=r.apply(i,o),u=n.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},Ic=Ra(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),gs=Ra(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ap=Ra(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Yf=function(e){return xn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},wt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i1="rgb[a]?\\(("+wt+"[%]?)\\s*,\\s*("+wt+"[%]?)\\s*,\\s*("+wt+"[%]?)(?:\\s*,\\s*("+wt+"))?\\)",o1="rgb[a]?\\((?:"+wt+"[%]?)\\s*,\\s*(?:"+wt+"[%]?)\\s*,\\s*(?:"+wt+"[%]?)(?:\\s*,\\s*(?:"+wt+"))?\\)",s1="hsl[a]?\\(("+wt+")\\s*,\\s*("+wt+"[%])\\s*,\\s*("+wt+"[%])(?:\\s*,\\s*("+wt+"))?\\)",l1="hsl[a]?\\((?:"+wt+")\\s*,\\s*(?:"+wt+"[%])\\s*,\\s*(?:"+wt+"[%])(?:\\s*,\\s*(?:"+wt+"))?\\)",u1="\\#[0-9a-fA-F]{3}",c1="\\#[0-9a-fA-F]{6}",ip=function(e,r){return e<r?-1:e>r?1:0},f1=function(e,r){return-1*ip(e,r)},Be=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},d1=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},v1=function(e){var r,n,a,i,o,s,l,u;function c(h,w,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?h+(w-h)*6*b:b<1/2?w:b<2/3?h+(w-h)*(2/3-b)*6:h}var f=new RegExp("^"+s1+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var v=i<.5?i*(1+a):i+a-i*a,g=2*i-v;s=Math.round(255*c(g,v,n+1/3)),l=Math.round(255*c(g,v,n)),u=Math.round(255*c(g,v,n-1/3))}r=[s,l,u,o]}return r},h1=function(e){var r,n=new RegExp("^"+i1+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},g1=function(e){return p1[e.toLowerCase()]},op=function(e){return(Je(e)?e:null)||g1(e)||d1(e)||h1(e)||v1(e)},p1={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sp=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ue(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},lp=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ue(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xs,Xf;function Vi(){if(Xf)return Xs;Xf=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Xs=t,Xs}var Zs,Zf;function m1(){if(Zf)return Zs;Zf=1;var t=typeof ro=="object"&&ro&&ro.Object===Object&&ro;return Zs=t,Zs}var Qs,Qf;function ps(){if(Qf)return Qs;Qf=1;var t=m1(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Qs=r,Qs}var Js,Jf;function y1(){if(Jf)return Js;Jf=1;var t=ps(),e=function(){return t.Date.now()};return Js=e,Js}var el,ed;function b1(){if(ed)return el;ed=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return el=e,el}var tl,td;function w1(){if(td)return tl;td=1;var t=b1(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return tl=r,tl}var rl,rd;function Oc(){if(rd)return rl;rd=1;var t=ps(),e=t.Symbol;return rl=e,rl}var nl,nd;function x1(){if(nd)return nl;nd=1;var t=Oc(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),l=o[a];try{o[a]=void 0;var u=!0}catch{}var c=n.call(o);return u&&(s?o[a]=l:delete o[a]),c}return nl=i,nl}var al,ad;function C1(){if(ad)return al;ad=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return al=r,al}var il,id;function up(){if(id)return il;id=1;var t=Oc(),e=x1(),r=C1(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return il=o,il}var ol,od;function E1(){if(od)return ol;od=1;function t(e){return e!=null&&typeof e=="object"}return ol=t,ol}var sl,sd;function qi(){if(sd)return sl;sd=1;var t=up(),e=E1(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return sl=n,sl}var ll,ld;function S1(){if(ld)return ll;ld=1;var t=w1(),e=Vi(),r=qi(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):a.test(u)?n:+u}return ll=l,ll}var ul,ud;function T1(){if(ud)return ul;ud=1;var t=Vi(),e=y1(),r=S1(),n="Expected a function",a=Math.max,i=Math.min;function o(s,l,u){var c,f,v,g,h,w,b=0,d=!1,p=!1,m=!0;if(typeof s!="function")throw new TypeError(n);l=r(l)||0,t(u)&&(d=!!u.leading,p="maxWait"in u,v=p?a(r(u.maxWait)||0,l):v,m="trailing"in u?!!u.trailing:m);function y(M){var V=c,G=f;return c=f=void 0,b=M,g=s.apply(G,V),g}function x(M){return b=M,h=setTimeout(T,l),d?y(M):g}function E(M){var V=M-w,G=M-b,B=l-V;return p?i(B,v-G):B}function C(M){var V=M-w,G=M-b;return w===void 0||V>=l||V<0||p&&G>=v}function T(){var M=e();if(C(M))return S(M);h=setTimeout(T,E(M))}function S(M){return h=void 0,m&&c?y(M):(c=f=void 0,g)}function P(){h!==void 0&&clearTimeout(h),b=0,c=w=f=h=void 0}function R(){return h===void 0?g:S(e())}function A(){var M=e(),V=C(M);if(c=arguments,f=this,w=M,V){if(h===void 0)return x(w);if(p)return clearTimeout(h),h=setTimeout(T,l),y(w)}return h===void 0&&(h=setTimeout(T,l)),g}return A.cancel=P,A.flush=R,A}return ul=o,ul}var D1=T1(),$i=Fi(D1),cl=yt?yt.performance:null,cp=cl&&cl.now?function(){return cl.now()}:function(){return Date.now()},P1=function(){if(yt){if(yt.requestAnimationFrame)return function(t){yt.requestAnimationFrame(t)};if(yt.mozRequestAnimationFrame)return function(t){yt.mozRequestAnimationFrame(t)};if(yt.webkitRequestAnimationFrame)return function(t){yt.webkitRequestAnimationFrame(t)};if(yt.msRequestAnimationFrame)return function(t){yt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(cp())},1e3/60)}}(),Go=function(e){return P1(e)},Zr=cp,Un=9261,fp=65599,ma=5381,dp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Un,n=r,a;a=e.next(),!a.done;)n=n*fp+a.value|0;return n},Ei=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Un;return r*fp+e|0},Si=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ma;return(r<<5)+r+e|0},k1=function(e,r){return e*2097152+r},sn=function(e){return e[0]*2097152+e[1]},no=function(e,r){return[Ei(e[0],r[0]),Si(e[1],r[1])]},cd=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return dp(o,r)},Qn=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return dp(o,r)},vp=function(){return A1(arguments)},A1=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Qn(a):r=Qn(a,r)}return r},fd=!0,B1=console.warn!=null,R1=console.trace!=null,Nc=Number.MAX_SAFE_INTEGER||9007199254740991,hp=function(){return!0},Ho=function(){return!1},dd=function(){return 0},zc=function(){},st=function(e){throw new Error(e)},gp=function(e){if(e!==void 0)fd=!!e;else return fd},Ye=function(e){gp()&&(B1?console.warn(e):(console.log(e),R1&&console.trace()))},M1=function(e){return Be({},e)},Mr=function(e){return e==null?e:Je(e)?e.slice():Ue(e)?M1(e):e},L1=function(e){return e.slice()},pp=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},_1={},mp=function(){return _1},Ot=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},Cn=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Fc=function(e){e.splice(0,e.length)},I1=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},tr=function(e,r,n){return n&&(r=ap(n,r)),e[r]},Ur=function(e,r,n,a){n&&(r=ap(n,r)),e[r]=a},O1=function(){function t(){kn(this,t),this._obj={}}return An(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),jr=typeof Map<"u"?Map:O1,N1="undefined",z1=function(){function t(e){if(kn(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return An(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),Na=(typeof Set>"u"?"undefined":xt(Set))!==N1?Set:z1,ms=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!_c(e)){st("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){st("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Na,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];Je(r.classes)?u=r.classes:Te(r.classes)&&(u=r.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var v=u[c];!v||v===""||i.classes.add(v)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=r.style||r.css;g&&(Ye("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},vd=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Ue(n)&&!lr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!lt(a)?a:i,a=lt(a)?a:function(){};for(var s=this._private.cy,l=n=Te(n)?this.filter(n):n,u=[],c=[],f={},v={},g={},h=0,w,b=this.byGroup(),d=b.nodes,p=b.edges,m=0;m<l.length;m++){var y=l[m],x=y.id();y.isNode()&&(u.unshift(y),e.bfs&&(g[x]=!0,c.push(y)),v[x]=0)}for(var E=function(){var M=e.bfs?u.shift():u.pop(),V=M.id();if(e.dfs){if(g[V])return 0;g[V]=!0,c.push(M)}var G=v[V],B=f[V],k=B!=null?B.source():null,O=B!=null?B.target():null,z=B==null?void 0:M.same(k)?O[0]:k[0],H;if(H=a(M,B,z,h++,G),H===!0)return w=M,1;if(H===!1)return 1;for(var U=M.connectedEdges().filter(function($){return(!i||$.source().same(M))&&p.has($)}),_=0;_<U.length;_++){var q=U[_],I=q.connectedNodes().filter(function($){return!$.same(M)&&d.has($)}),F=I.id();I.length!==0&&!g[F]&&(I=I[0],u.push(I),e.bfs&&(g[F]=!0,c.push(I)),f[F]=q,v[F]=v[V]+1)}},C;u.length!==0&&(C=E(),!(C!==0&&C===1)););for(var T=s.collection(),S=0;S<c.length;S++){var P=c[S],R=f[P.id()];R!=null&&T.push(R),T.push(P)}return{path:s.collection(T),found:s.collection(w)}}},Ti={breadthFirstSearch:vd({bfs:!0}),depthFirstSearch:vd({dfs:!0})};Ti.bfs=Ti.breadthFirstSearch;Ti.dfs=Ti.depthFirstSearch;var wo={exports:{}},F1=wo.exports,hd;function V1(){return hd||(hd=1,function(t,e){(function(){var r,n,a,i,o,s,l,u,c,f,v,g,h,w,b;a=Math.floor,f=Math.min,n=function(d,p){return d<p?-1:d>p?1:0},c=function(d,p,m,y,x){var E;if(m==null&&(m=0),x==null&&(x=n),m<0)throw new Error("lo must be non-negative");for(y==null&&(y=d.length);m<y;)E=a((m+y)/2),x(p,d[E])<0?y=E:m=E+1;return[].splice.apply(d,[m,m-m].concat(p)),p},s=function(d,p,m){return m==null&&(m=n),d.push(p),w(d,0,d.length-1,m)},o=function(d,p){var m,y;return p==null&&(p=n),m=d.pop(),d.length?(y=d[0],d[0]=m,b(d,0,p)):y=m,y},u=function(d,p,m){var y;return m==null&&(m=n),y=d[0],d[0]=p,b(d,0,m),y},l=function(d,p,m){var y;return m==null&&(m=n),d.length&&m(d[0],p)<0&&(y=[d[0],p],p=y[0],d[0]=y[1],b(d,0,m)),p},i=function(d,p){var m,y,x,E,C,T;for(p==null&&(p=n),E=(function(){T=[];for(var S=0,P=a(d.length/2);0<=P?S<P:S>P;0<=P?S++:S--)T.push(S);return T}).apply(this).reverse(),C=[],y=0,x=E.length;y<x;y++)m=E[y],C.push(b(d,m,p));return C},h=function(d,p,m){var y;if(m==null&&(m=n),y=d.indexOf(p),y!==-1)return w(d,0,y,m),b(d,y,m)},v=function(d,p,m){var y,x,E,C,T;if(m==null&&(m=n),x=d.slice(0,p),!x.length)return x;for(i(x,m),T=d.slice(p),E=0,C=T.length;E<C;E++)y=T[E],l(x,y,m);return x.sort(m).reverse()},g=function(d,p,m){var y,x,E,C,T,S,P,R,A;if(m==null&&(m=n),p*10<=d.length){if(E=d.slice(0,p).sort(m),!E.length)return E;for(x=E[E.length-1],P=d.slice(p),C=0,S=P.length;C<S;C++)y=P[C],m(y,x)<0&&(c(E,y,0,null,m),E.pop(),x=E[E.length-1]);return E}for(i(d,m),A=[],T=0,R=f(p,d.length);0<=R?T<R:T>R;0<=R?++T:--T)A.push(o(d,m));return A},w=function(d,p,m,y){var x,E,C;for(y==null&&(y=n),x=d[m];m>p;){if(C=m-1>>1,E=d[C],y(x,E)<0){d[m]=E,m=C;continue}break}return d[m]=x},b=function(d,p,m){var y,x,E,C,T;for(m==null&&(m=n),x=d.length,T=p,E=d[p],y=2*p+1;y<x;)C=y+1,C<x&&!(m(d[y],d[C])<0)&&(y=C),d[p]=d[y],p=y,y=2*p+1;return d[p]=E,w(d,T,p,m)},r=function(){d.push=s,d.pop=o,d.replace=u,d.pushpop=l,d.heapify=i,d.updateItem=h,d.nlargest=v,d.nsmallest=g;function d(p){this.cmp=p??n,this.nodes=[]}return d.prototype.push=function(p){return s(this.nodes,p,this.cmp)},d.prototype.pop=function(){return o(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},d.prototype.replace=function(p){return u(this.nodes,p,this.cmp)},d.prototype.pushpop=function(p){return l(this.nodes,p,this.cmp)},d.prototype.heapify=function(){return i(this.nodes,this.cmp)},d.prototype.updateItem=function(p){return h(this.nodes,p,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var p;return p=new d,p.nodes=this.nodes.slice(0),p},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,p){return t.exports=p()}(this,function(){return r})}).call(F1)}(wo)),wo.exports}var fl,gd;function q1(){return gd||(gd=1,fl=V1()),fl}var $1=q1(),Gi=Fi($1),G1=Ot({root:null,weight:function(e){return 1},directed:!1}),H1={dijkstra:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=G1(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=Te(a)?this.filter(a)[0]:a[0],c={},f={},v={},g=this.byGroup(),h=g.nodes,w=g.edges;w.unmergeBy(function(G){return G.isLoop()});for(var b=function(B){return c[B.id()]},d=function(B,k){c[B.id()]=k,p.updateItem(B)},p=new Gi(function(G,B){return b(G)-b(B)}),m=0;m<h.length;m++){var y=h[m];c[y.id()]=y.same(u)?0:1/0,p.push(y)}for(var x=function(B,k){for(var O=(o?B.edgesTo(k):B.edgesWith(k)).intersect(w),z=1/0,H,U=0;U<O.length;U++){var _=O[U],q=l(_);(q<z||!H)&&(z=q,H=_)}return{edge:H,dist:z}};p.size()>0;){var E=p.pop(),C=b(E),T=E.id();if(v[T]=C,C!==1/0)for(var S=E.neighborhood().intersect(h),P=0;P<S.length;P++){var R=S[P],A=R.id(),M=x(E,R),V=C+M.dist;V<b(R)&&(d(R,V),f[A]={node:E,edge:M.edge})}}return{distanceTo:function(B){var k=Te(B)?h.filter(B)[0]:B[0];return v[k.id()]},pathTo:function(B){var k=Te(B)?h.filter(B)[0]:B[0],O=[],z=k,H=z.id();if(k.length>0)for(O.unshift(k);f[H];){var U=f[H];O.unshift(U.edge),O.unshift(U.node),z=U.node,H=z.id()}return s.spawn(O)}}}},U1={kruskal:function(e){e=e||function(m){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,l=function(y){for(var x=0;x<o.length;x++){var E=o[x];if(E.has(y))return x}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var c=a.sort(function(m,y){return e(m)-e(y)}),f=0;f<c.length;f++){var v=c[f],g=v.source()[0],h=v.target()[0],w=l(g),b=l(h),d=o[w],p=o[b];w!==b&&(s.merge(v),d.merge(p),o.splice(b,1))}return s}},W1=Ot({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),K1={aStar:function(e){var r=this.cy(),n=W1(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),c=i.id(),f={},v={},g={},h=new Gi(function(H,U){return v[H.id()]-v[U.id()]}),w=new Na,b={},d={},p=function(U,_){h.push(U),w.add(_)},m,y,x=function(){m=h.pop(),y=m.id(),w.delete(y)},E=function(U){return w.has(U)};p(a,u),f[u]=0,v[u]=o(a);for(var C=0;h.size()>0;){if(x(),C++,y===c){for(var T=[],S=i,P=c,R=d[P];T.unshift(S),R!=null&&T.unshift(R),S=b[P],S!=null;)P=S.id(),R=d[P];return{found:!0,distance:f[y],path:this.spawn(T),steps:C}}g[y]=!0;for(var A=m._private.edges,M=0;M<A.length;M++){var V=A[M];if(this.hasElementWithId(V.id())&&!(s&&V.data("source")!==y)){var G=V.source(),B=V.target(),k=G.id()!==y?G:B,O=k.id();if(this.hasElementWithId(O)&&!g[O]){var z=f[y]+l(V);if(!E(O)){f[O]=z,v[O]=z+o(k),p(k,O),b[O]=m,d[O]=V;continue}z<f[O]&&(f[O]=z,v[O]=z+o(k),b[O]=m,d[O]=V)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}}},j1=Ot({weight:function(e){return 1},directed:!1}),Y1={floydWarshall:function(e){for(var r=this.cy(),n=j1(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=c*c,v=function(q){return l.indexOf(q)},g=function(q){return l[q]},h=new Array(f),w=0;w<f;w++){var b=w%c,d=(w-b)/c;d===b?h[w]=0:h[w]=1/0}for(var p=new Array(f),m=new Array(f),y=0;y<u.length;y++){var x=u[y],E=x.source()[0],C=x.target()[0];if(E!==C){var T=v(E),S=v(C),P=T*c+S,R=o(x);if(h[P]>R&&(h[P]=R,p[P]=S,m[P]=x),!i){var A=S*c+T;!i&&h[A]>R&&(h[A]=R,p[A]=T,m[A]=x)}}}for(var M=0;M<c;M++)for(var V=0;V<c;V++)for(var G=V*c+M,B=0;B<c;B++){var k=V*c+B,O=M*c+B;h[G]+h[O]<h[k]&&(h[k]=h[G]+h[O],p[k]=p[G])}var z=function(q){return(Te(q)?r.filter(q):q)[0]},H=function(q){return v(z(q))},U={distance:function(q,I){var F=H(q),$=H(I);return h[F*c+$]},path:function(q,I){var F=H(q),$=H(I),K=g(F);if(F===$)return K.collection();if(p[F*c+$]==null)return r.collection();var ee=r.collection(),Y=F,W;for(ee.merge(K);F!==$;)Y=F,F=p[F*c+$],W=m[Y*c+F],ee.merge(W),ee.merge(g(F));return ee}};return U}},X1=Ot({weight:function(e){return 1},directed:!1,root:null}),Z1={bellmanFord:function(e){var r=this,n=X1(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,v=c.nodes,g=v.length,h=new jr,w=!1,b=[];o=u.collection(o)[0],f.unmergeBy(function(ie){return ie.isLoop()});for(var d=f.length,p=function(le){var X=h.get(le.id());return X||(X={},h.set(le.id(),X)),X},m=function(le){return(Te(le)?u.$(le):le)[0]},y=function(le){return p(m(le)).dist},x=function(le){for(var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Q=m(le),Z=[],fe=Q;;){if(fe==null)return r.spawn();var oe=p(fe),he=oe.edge,pe=oe.pred;if(Z.unshift(fe[0]),fe.same(X)&&Z.length>0)break;he!=null&&Z.unshift(he),fe=pe}return l.spawn(Z)},E=0;E<g;E++){var C=v[E],T=p(C);C.same(o)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var S=!1,P=function(le,X,Q,Z,fe,oe){var he=Z.dist+oe;he<fe.dist&&!Q.same(Z.edge)&&(fe.dist=he,fe.pred=le,fe.edge=Q,S=!0)},R=1;R<g;R++){S=!1;for(var A=0;A<d;A++){var M=f[A],V=M.source(),G=M.target(),B=s(M),k=p(V),O=p(G);P(V,G,M,k,O,B),i||P(G,V,M,O,k,B)}if(!S)break}if(S)for(var z=[],H=0;H<d;H++){var U=f[H],_=U.source(),q=U.target(),I=s(U),F=p(_).dist,$=p(q).dist;if(F+I<$||!i&&$+I<F)if(w||(Ye("Graph contains a negative weight cycle for Bellman-Ford"),w=!0),e.findNegativeWeightCycles!==!1){var K=[];F+I<$&&K.push(_),!i&&$+I<F&&K.push(q);for(var ee=K.length,Y=0;Y<ee;Y++){var W=K[Y],J=[W];J.push(p(W).edge);for(var D=p(W).pred;J.indexOf(D)===-1;)J.push(D),J.push(p(D).edge),D=p(D).pred;J=J.slice(J.indexOf(D));for(var N=J[0].id(),j=0,ne=2;ne<J.length;ne+=2)J[ne].id()<N&&(N=J[ne].id(),j=ne);J=J.slice(j).concat(J.slice(0,j)),J.push(J[0]);var ce=J.map(function(ie){return ie.id()}).join(",");z.indexOf(ce)===-1&&(b.push(l.spawn(J)),z.push(ce))}}else break}return{distanceTo:y,pathTo:x,hasNegativeWeightCycle:w,negativeWeightCycles:b}}},Q1=Math.sqrt(2),J1=function(e,r,n){n.length===0&&st("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],l=r[o],u=n,c=u.length-1;c>=0;c--){var f=u[c],v=f[1],g=f[2];(r[v]===s&&r[g]===l||r[v]===l&&r[g]===s)&&u.splice(c,1)}for(var h=0;h<u.length;h++){var w=u[h];w[1]===l?(u[h]=w.slice(),u[h][1]=s):w[2]===l&&(u[h]=w.slice(),u[h][2]=s)}for(var b=0;b<r.length;b++)r[b]===l&&(r[b]=s);return u},dl=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=J1(i,e,r),n--}return r},ew={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(O){return O.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Q1);if(i<2){st("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<o;c++){var f=a[c];u.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var v=1/0,g=[],h=new Array(i),w=new Array(i),b=new Array(i),d=function(z,H){for(var U=0;U<i;U++)H[U]=z[U]},p=0;p<=s;p++){for(var m=0;m<i;m++)w[m]=m;var y=dl(w,u.slice(),i,l),x=y.slice();d(w,b);var E=dl(w,y,l,2),C=dl(b,x,l,2);E.length<=C.length&&E.length<v?(v=E.length,g=E,d(w,h)):C.length<=E.length&&C.length<v&&(v=C.length,g=C,d(b,h))}for(var T=this.spawn(g.map(function(O){return a[O[0]]})),S=this.spawn(),P=this.spawn(),R=h[0],A=0;A<h.length;A++){var M=h[A],V=n[A];M===R?S.merge(V):P.merge(V)}var G=function(z){var H=e.spawn();return z.forEach(function(U){H.merge(U),U.connectedEdges().forEach(function(_){e.contains(_)&&!T.contains(_)&&H.merge(_)})}),H},B=[G(S),G(P)],k={cut:T,components:B,partition1:S,partition2:P};return k}},tw=function(e){return{x:e.x,y:e.y}},ys=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},yp=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ya=function(e){return{x:e[0],y:e[1]}},rw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},nw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},aw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},iw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(v,g){return v-g});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},ow=function(e){return Math.PI*e/180},ao=function(e,r){return Math.atan2(r,e)-Math.PI/2},Vc=Math.log2||function(t){return Math.log(t)/Math.log(2)},qc=function(e){return e>0?1:e<0?-1:0},Jn=function(e,r){return Math.sqrt(qn(e,r))},qn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},sw=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},St=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Da=function(e,r,n,a){return{x:St(e.x,r.x,n.x,a),y:St(e.y,r.y,n.y,a)}},lw=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=Jn(e,r),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Di=function(e,r,n){return Math.max(e,Math.min(n,r))},ir=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},uw=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},cw=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},fw=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},bp=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},dw=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},xo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Co=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=bt(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},pd=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},$c=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Ma=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},vw=function(e,r){return Ma(e,r.x,r.y)},hw=function(e,r){return Ma(e,r.x1,r.y1)&&Ma(e,r.x2,r.y2)},wp=function(e,r,n,a,i,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?En(i,o):l,c=i/2,f=o/2;u=Math.min(u,c,f);var v=u!==c,g=u!==f,h;if(v){var w=n-c+u-s,b=a-f-s,d=n+c-u+s,p=b;if(h=vn(e,r,n,a,w,b,d,p,!1),h.length>0)return h}if(g){var m=n+c+s,y=a-f+u-s,x=m,E=a+f-u+s;if(h=vn(e,r,n,a,m,y,x,E,!1),h.length>0)return h}if(v){var C=n-c+u-s,T=a+f+s,S=n+c-u+s,P=T;if(h=vn(e,r,n,a,C,T,S,P,!1),h.length>0)return h}if(g){var R=n-c-s,A=a-f+u-s,M=R,V=a+f-u+s;if(h=vn(e,r,n,a,R,A,M,V,!1),h.length>0)return h}var G;{var B=n-c+u,k=a-f+u;if(G=ri(e,r,n,a,B,k,u+s),G.length>0&&G[0]<=B&&G[1]<=k)return[G[0],G[1]]}{var O=n+c-u,z=a-f+u;if(G=ri(e,r,n,a,O,z,u+s),G.length>0&&G[0]>=O&&G[1]<=z)return[G[0],G[1]]}{var H=n+c-u,U=a+f-u;if(G=ri(e,r,n,a,H,U,u+s),G.length>0&&G[0]>=H&&G[1]>=U)return[G[0],G[1]]}{var _=n-c+u,q=a+f-u;if(G=ri(e,r,n,a,_,q,u+s),G.length>0&&G[0]<=_&&G[1]>=q)return[G[0],G[1]]}return[]},gw=function(e,r,n,a,i,o,s){var l=s,u=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,o),v=Math.max(a,o);return u-l<=e&&e<=c+l&&f-l<=r&&r<=v+l},pw=function(e,r,n,a,i,o,s,l,u){var c={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},mw=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-r+o)/s,u=(-r-o)/s;return[l,u]},yw=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,l,u,c,f,v,g,h;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,s=l*l*l+u*u,i[1]=0,g=r/3,s>0){f=u+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),v=u-Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),i[0]=-g+f+v,g+=(f+v)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-v+f)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-g+2*h,i[4]=i[2]=-(h+g);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),h=2*Math.sqrt(l),i[0]=-g+h*Math.cos(c/3),i[2]=-g+h*Math.cos((c+2*Math.PI)/3),i[4]=-g+h*Math.cos((c+4*Math.PI)/3)},bw=function(e,r,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,f=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r,v=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,g=[];yw(u,c,f,v,g);for(var h=1e-7,w=[],b=0;b<6;b+=2)Math.abs(g[b+1])<h&&g[b]>=0&&g[b]<=1&&w.push(g[b]);w.push(1),w.push(0);for(var d=-1,p,m,y,x=0;x<w.length;x++)p=Math.pow(1-w[x],2)*n+2*(1-w[x])*w[x]*i+w[x]*w[x]*s,m=Math.pow(1-w[x],2)*a+2*(1-w[x])*w[x]*o+w[x]*w[x]*l,y=Math.pow(p-e,2)+Math.pow(m-r,2),d>=0?y<d&&(d=y):d=y;return d},ww=function(e,r,n,a,i,o){var s=[e-n,r-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*l[0]+s[1]*l[1],v=f*f/u;return f<0?c:v>u?(e-i)*(e-i)+(r-o)*(r-o):c-v},rr=function(e,r,n){for(var a,i,o,s,l,u=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>r&&u++;else continue;return u%2!==0},Qr=function(e,r,n,a,i,o,s,l,u){var c=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var v=Math.cos(-f),g=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(n[h*2]*v-n[h*2+1]*g),c[h*2+1]=s/2*(n[h*2+1]*v+n[h*2]*g),c[h*2]+=a,c[h*2+1]+=i;var w;if(u>0){var b=Wo(c,-u);w=Uo(b)}else w=c;return rr(e,r,w)},xw=function(e,r,n,a,i,o,s,l){for(var u=new Array(n.length*2),c=0;c<l.length;c++){var f=l[c];u[c*4+0]=f.startX,u[c*4+1]=f.startY,u[c*4+2]=f.stopX,u[c*4+3]=f.stopY;var v=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(v<=Math.pow(f.radius,2))return!0}return rr(e,r,u)},Uo=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,l,u,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var v=vn(n,a,i,o,s,l,u,c,!0);r[f*2]=v[0],r[f*2+1]=v[1]}return r},Wo=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,c=-(o-a),f=Math.sqrt(u*u+c*c),v=u/f,g=c/f;n[l*4]=a+v*r,n[l*4+1]=i+g*r,n[l*4+2]=o+v*r,n[l*4+3]=s+g*r}return n},Cw=function(e,r,n,a,i,o){var s=n-e,l=a-r;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(n-e)*f+e,(a-r)*f+r]},Kn=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},ri=function(e,r,n,a,i,o,s){var l=[n-e,a-r],u=[e-i,r-o],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),v=u[0]*u[0]+u[1]*u[1]-s*s,g=f*f-4*c*v;if(g<0)return[];var h=(-f+Math.sqrt(g))/(2*c),w=(-f-Math.sqrt(g))/(2*c),b=Math.min(h,w),d=Math.max(h,w),p=[];if(b>=0&&b<=1&&p.push(b),d>=0&&d<=1&&p.push(d),p.length===0)return[];var m=p[0]*l[0]+e,y=p[0]*l[1]+r;if(p.length>1){if(p[0]==p[1])return[m,y];var x=p[1]*l[0]+e,E=p[1]*l[1]+r;return[m,y,x,E]}else return[m,y]},vl=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},vn=function(e,r,n,a,i,o,s,l,u){var c=e-i,f=n-e,v=s-i,g=r-o,h=a-r,w=l-o,b=v*g-w*c,d=f*g-h*c,p=w*f-v*h;if(p!==0){var m=b/p,y=d/p,x=.001,E=0-x,C=1+x;return E<=m&&m<=C&&E<=y&&y<=C?[e+m*f,r+m*h]:u?[e+m*f,r+m*h]:[]}else return b===0||d===0?vl(e,n,s)===s?[s,l]:vl(e,n,i)===i?[i,o]:vl(i,s,n)===n?[n,a]:[]:[]},Pi=function(e,r,n,a,i,o,s,l){var u=[],c,f=new Array(n.length),v=!0;o==null&&(v=!1);var g;if(v){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*o+a,f[h*2+1]=n[h*2+1]*s+i;if(l>0){var w=Wo(f,-l);g=Uo(w)}else g=f}else g=n;for(var b,d,p,m,y=0;y<g.length/2;y++)b=g[y*2],d=g[y*2+1],y<g.length/2-1?(p=g[(y+1)*2],m=g[(y+1)*2+1]):(p=g[0],m=g[1]),c=vn(e,r,a,i,b,d,p,m),c.length!==0&&u.push(c[0],c[1]);return u},Ew=function(e,r,n,a,i,o,s,l,u){var c=[],f,v=new Array(n.length*2);u.forEach(function(p,m){m===0?(v[v.length-2]=p.startX,v[v.length-1]=p.startY):(v[m*4-2]=p.startX,v[m*4-1]=p.startY),v[m*4]=p.stopX,v[m*4+1]=p.stopY,f=ri(e,r,a,i,p.cx,p.cy,p.radius),f.length!==0&&c.push(f[0],f[1])});for(var g=0;g<v.length/4;g++)f=vn(e,r,a,i,v[g*4],v[g*4+1],v[g*4+2],v[g*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var h=[c[0],c[1]],w=Math.pow(h[0]-e,2)+Math.pow(h[1]-r,2),b=1;b<c.length/2;b++){var d=Math.pow(c[b*2]-e,2)+Math.pow(c[b*2+1]-r,2);d<=w&&(h[0]=c[b*2],h[1]=c[b*2+1],w=d)}return h}return c},io=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},Wt=function(e,r){var n=Xu(e,r);return n=xp(n),n},xp=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);for(var c=2/(s-i),f=2/(l-o),v=0;v<a;v++)r=e[2*v]=e[2*v]*c,n=e[2*v+1]=e[2*v+1]*f,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Xu=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},En=function(e,r){return Math.min(e/4,r/4,8)},Cp=function(e,r){return Math.min(e/10,r/10,8)},Gc=function(){return 8},Sw=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Zu=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function Tw(t,e){function r(f){for(var v=[],g=0;g<f.length;g++){var h=f[g],w=f[(g+1)%f.length],b={x:w.x-h.x,y:w.y-h.y},d={x:-b.y,y:b.x},p=Math.sqrt(d.x*d.x+d.y*d.y);v.push({x:d.x/p,y:d.y/p})}return v}function n(f,v){var g=1/0,h=-1/0,w=ar(f),b;try{for(w.s();!(b=w.n()).done;){var d=b.value,p=d.x*v.x+d.y*v.y;g=Math.min(g,p),h=Math.max(h,p)}}catch(m){w.e(m)}finally{w.f()}return{min:g,max:h}}function a(f,v){return!(f.max<v.min||v.max<f.min)}var i=[].concat(qo(r(t)),qo(r(e))),o=ar(i),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=n(t,l),c=n(e,l);if(!a(u,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var Dw=Ot({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Pw={pageRank:function(e){for(var r=Dw(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,v=f*f,g=c.length,h=new Array(v),w=new Array(f),b=(1-n)/f,d=0;d<f;d++){for(var p=0;p<f;p++){var m=d*f+p;h[m]=0}w[d]=0}for(var y=0;y<g;y++){var x=c[y],E=x.data("source"),C=x.data("target");if(E!==C){var T=u.indexOfId(E),S=u.indexOfId(C),P=o(x),R=S*f+T;h[R]+=P,w[T]+=P}}for(var A=1/f+b,M=0;M<f;M++)if(w[M]===0)for(var V=0;V<f;V++){var G=V*f+M;h[G]=A}else for(var B=0;B<f;B++){var k=B*f+M;h[k]=h[k]/w[M]+b}for(var O=new Array(f),z=new Array(f),H,U=0;U<f;U++)O[U]=1;for(var _=0;_<i;_++){for(var q=0;q<f;q++)z[q]=0;for(var I=0;I<f;I++)for(var F=0;F<f;F++){var $=I*f+F;z[I]+=h[$]*O[F]}sw(z),H=O,O=z,z=H;for(var K=0,ee=0;ee<f;ee++){var Y=H[ee]-O[ee];K+=Y*Y}if(K<a)break}var W={rank:function(D){return D=s.collection(D)[0],O[u.indexOf(D)]}};return W}},md=Ot({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Pa={degreeCentralityNormalized:function(e){e=md(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},v=0,g=0,h=0;h<a;h++){var w=n[h],b=w.id();e.root=w;var d=this.degreeCentrality(e);v<d.indegree&&(v=d.indegree),g<d.outdegree&&(g=d.outdegree),c[b]=d.indegree,f[b]=d.outdegree}return{indegree:function(m){return v==0?0:(Te(m)&&(m=r.filter(m)),c[m.id()]/v)},outdegree:function(m){return g===0?0:(Te(m)&&(m=r.filter(m)),f[m.id()]/g)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(m){return o===0?0:(Te(m)&&(m=r.filter(m)),i[m.id()]/o)}}}},degreeCentrality:function(e){e=md(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=r.collection(i)[0],s){for(var g=i.connectedEdges(),h=g.filter(function(E){return E.target().same(i)&&n.has(E)}),w=g.filter(function(E){return E.source().same(i)&&n.has(E)}),b=h.length,d=w.length,p=0,m=0,y=0;y<h.length;y++)p+=o(h[y]);for(var x=0;x<w.length;x++)m+=o(w[x]);return{indegree:Math.pow(b,1-l)*Math.pow(p,l),outdegree:Math.pow(d,1-l)*Math.pow(m,l)}}else{for(var u=i.connectedEdges().intersection(n),c=u.length,f=0,v=0;v<u.length;v++)f+=o(u[v]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};Pa.dc=Pa.degreeCentrality;Pa.dcn=Pa.degreeCentralityNormalised=Pa.degreeCentralityNormalized;var yd=Ot({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),ka={closenessCentralityNormalized:function(e){for(var r=yd(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},l=0,u=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<u.length;f++){for(var v=0,g=u[f],h=0;h<u.length;h++)if(f!==h){var w=c.distance(g,u[h]);n?v+=1/w:v+=w}n||(v=1/v),l<v&&(l=v),s[g.id()]=v}return{closeness:function(d){return l==0?0:(Te(d)?d=o.filter(d)[0].id():d=d.id(),s[d]/l)}}},closenessCentrality:function(e){var r=yd(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(n)){var v=s.distanceTo(f);o?l+=1/v:l+=v}}return o?l:1/l}};ka.cc=ka.closenessCentrality;ka.ccn=ka.closenessCentralityNormalised=ka.closenessCentralityNormalized;var kw=Ot({weight:null,directed:!1}),Qu={betweennessCentrality:function(e){for(var r=kw(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},c=0,f={set:function(m,y){u[m]=y,y>c&&(c=y)},get:function(m){return u[m]}},v=0;v<s.length;v++){var g=s[v],h=g.id();n?l[h]=g.outgoers().nodes():l[h]=g.openNeighborhood().nodes(),f.set(h,0)}for(var w=function(){for(var m=s[b].id(),y=[],x={},E={},C={},T=new Gi(function(I,F){return C[I]-C[F]}),S=0;S<s.length;S++){var P=s[S].id();x[P]=[],E[P]=0,C[P]=1/0}for(E[m]=1,C[m]=0,T.push(m);!T.empty();){var R=T.pop();if(y.push(R),i)for(var A=0;A<l[R].length;A++){var M=l[R][A],V=o.getElementById(R),G=void 0;V.edgesTo(M).length>0?G=V.edgesTo(M)[0]:G=M.edgesTo(V)[0];var B=a(G);M=M.id(),C[M]>C[R]+B&&(C[M]=C[R]+B,T.nodes.indexOf(M)<0?T.push(M):T.updateItem(M),E[M]=0,x[M]=[]),C[M]==C[R]+B&&(E[M]=E[M]+E[R],x[M].push(R))}else for(var k=0;k<l[R].length;k++){var O=l[R][k].id();C[O]==1/0&&(T.push(O),C[O]=C[R]+1),C[O]==C[R]+1&&(E[O]=E[O]+E[R],x[O].push(R))}}for(var z={},H=0;H<s.length;H++)z[s[H].id()]=0;for(;y.length>0;){for(var U=y.pop(),_=0;_<x[U].length;_++){var q=x[U][_];z[q]=z[q]+E[q]/E[U]*(1+z[U])}U!=s[b].id()&&f.set(U,f.get(U)+z[U])}},b=0;b<s.length;b++)w();var d={betweenness:function(m){var y=o.collection(m).id();return f.get(y)},betweennessNormalized:function(m){if(c==0)return 0;var y=o.collection(m).id();return f.get(y)/c}};return d.betweennessNormalised=d.betweennessNormalized,d}};Qu.bc=Qu.betweennessCentrality;var Aw=Ot({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Bw=function(e){return Aw(e)},Rw=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},Mw=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Ep=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},Lw=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*r[s*n+l]}return a},_w=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Lw(e,a,r);return e},Iw=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Ep(a,r),a},Ow=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},Nw=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],l=0;l<r;l++)Math.round(e[o*r+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},zw=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},Fw=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&zw(e[r],e[n])&&e.splice(n,1);return e},bd=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=Bw(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var l=r.length,u=l*l,c=new Array(u),f,v=0;v<u;v++)c[v]=0;for(var g=0;g<n.length;g++){var h=n[g],w=o[h.source().id()],b=o[h.target().id()],d=Rw(h,i.attributes);c[w*l+b]+=d,c[b*l+w]+=d}Mw(c,l,i.multFactor),Ep(c,l);for(var p=!0,m=0;p&&m<i.maxIterations;)p=!1,f=_w(c,l,i.expandFactor),c=Iw(f,l,i.inflateFactor),Ow(c,f,u,4)||(p=!0),m++;var y=Nw(c,l,r,a);return y=Fw(y),y},Vw={markovClustering:bd,mcl:bd},qw=function(e){return e},Sp=function(e,r){return Math.abs(r-e)},wd=function(e,r,n){return e+Sp(r,n)},xd=function(e,r,n){return e+Math.pow(n-r,2)},$w=function(e){return Math.sqrt(e)},Gw=function(e,r,n){return Math.max(e,Sp(r,n))},ja=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:qw,s=a,l,u,c=0;c<e;c++)l=r(c),u=n(c),s=i(s,l,u);return o(s)},La={euclidean:function(e,r,n){return e>=2?ja(e,r,n,0,xd,$w):ja(e,r,n,0,wd)},squaredEuclidean:function(e,r,n){return ja(e,r,n,0,xd)},manhattan:function(e,r,n){return ja(e,r,n,0,wd)},max:function(e,r,n){return ja(e,r,n,-1/0,Gw)}};La["squared-euclidean"]=La.squaredEuclidean;La.squaredeuclidean=La.squaredEuclidean;function bs(t,e,r,n,a,i){var o;return lt(t)?o=t:o=La[t]||La.euclidean,e===0&&lt(t)?o(a,i):o(e,r,n,a,i)}var Hw=Ot({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Hc=function(e){return Hw(e)},Ko=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(f){return n[f]}:function(f){return a[f](n)},l=function(v){return a[v](r)},u=n,c=r;return bs(e,a.length,s,l,u,c)},hl=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var c=0;c<r;c++){l=[];for(var f=0;f<a;f++)l[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=l}return s},Tp=function(e,r,n,a,i){for(var o=1/0,s=0,l=0;l<r.length;l++){var u=Ko(n,e,r[l],a,i);u<o&&(o=u,s=l)}return s},Dp=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},Uw=function(e,r,n){return Math.abs(r-e)<=n},Ww=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},Kw=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Cd=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];Kw(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Ed=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Ko("manhattan",r[i],e,n,"kMedoids");return a},jw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Hc(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=hl(n,i.k,i.attributes)):xt(i.testCentroids)==="object"?l=i.testCentroids:l=hl(n,i.k,i.attributes):l=hl(n,i.k,i.attributes);for(var u=!0,c=0;u&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],s[a.id()]=Tp(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var v=0;v<i.k;v++){var g=Dp(v,n,s);if(g.length!==0){for(var h=i.attributes.length,w=l[v],b=new Array(h),d=new Array(h),p=0;p<h;p++){d[p]=0;for(var m=0;m<g.length;m++)a=g[m],d[p]+=i.attributes[p](a);b[p]=d[p]/g.length,Uw(b[p],w[p],i.sensitivityThreshold)||(u=!0)}l[v]=b,o[v]=r.collection(g)}}c++}return o},Yw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Hc(e),o=new Array(i.k),s,l={},u,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(xt(i.testCentroids)==="object"?s=i.testCentroids:s=Cd(n,i.k)):s=Cd(n,i.k);for(var f=!0,v=0;f&&v<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],l[a.id()]=Tp(a,s,i.distance,i.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var w=Dp(h,n,l);if(w.length!==0){c[h]=Ed(s[h],w,i.attributes);for(var b=0;b<w.length;b++)u=Ed(w[b],w,i.attributes),u<c[h]&&(c[h]=u,s[h]=w[b],f=!0);o[h]=r.collection(w)}}v++}return o},Xw=function(e,r,n,a,i){for(var o,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var v=0;v<r.length;v++)o+=a[v][c]*i.attributes[f](r[v]),s+=a[v][c];e[c][f]=o/s}},Zw=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,l,u,c=2/(i.m-1),f=0;f<n.length;f++)for(var v=0;v<a.length;v++){s=0;for(var g=0;g<n.length;g++)l=Ko(i.distance,a[v],n[f],i.attributes,"cmeans"),u=Ko(i.distance,a[v],n[g],i.attributes,"cmeans"),s+=Math.pow(l/u,c);e[v][f]=1/s}},Qw=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var c=0;c<r[0].length;c++)r[u][c]>s&&(s=r[u][c],l=c);i[l].push(e[u])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},Sd=function(e){var r=this.cy(),n=this.nodes(),a=Hc(e),i,o,s,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(a.k);for(var v=0;v<n.length;v++){for(var g=0,h=0;h<a.k;h++)s[v][h]=Math.random(),g+=s[v][h];for(var w=0;w<a.k;w++)s[v][w]=s[v][w]/g}o=new Array(a.k);for(var b=0;b<a.k;b++)o[b]=new Array(a.attributes.length);u=new Array(n.length);for(var d=0;d<n.length;d++)u[d]=new Array(a.k);for(var p=!0,m=0;p&&m<a.maxIterations;)p=!1,Xw(o,n,s,u,a),Zw(s,l,o,n,a),Ww(s,l,a.sensitivityThreshold)||(p=!0),m++;return i=Qw(n,s,a,r),{clusters:i,degreeOfMembership:s}},Jw={kMeans:jw,kMedoids:Yw,fuzzyCMeans:Sd,fcm:Sd},ex=Ot({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),tx={single:"min",complete:"max"},rx=function(e){var r=ex(e),n=tx[r.linkage];return n!=null&&(r.linkage=n),r},Td=function(e,r,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,c=function(S,P){return bs(i.distance,u.length,function(R){return u[R](S)},function(R){return u[R](P)},S,P)},f=0;f<e.length;f++){var v=e[f].key,g=n[v][a[v]];g<s&&(o=v,s=g)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=r[o],w=r[a[o]],b;i.mode==="dendrogram"?b={left:h,right:w,key:h.key}:b={value:h.value.concat(w.value),key:h.key},e[h.index]=b,e.splice(w.index,1),r[h.key]=b;for(var d=0;d<e.length;d++){var p=e[d];h.key===p.key?l=1/0:i.linkage==="min"?(l=n[h.key][p.key],n[h.key][p.key]>n[w.key][p.key]&&(l=n[w.key][p.key])):i.linkage==="max"?(l=n[h.key][p.key],n[h.key][p.key]<n[w.key][p.key]&&(l=n[w.key][p.key])):i.linkage==="mean"?l=(n[h.key][p.key]*h.size+n[w.key][p.key]*w.size)/(h.size+w.size):i.mode==="dendrogram"?l=c(p.value,h.value):l=c(p.value[0],h.value[0]),n[h.key][p.key]=n[p.key][h.key]=l}for(var m=0;m<e.length;m++){var y=e[m].key;if(a[y]===h.key||a[y]===w.key){for(var x=y,E=0;E<e.length;E++){var C=e[E].key;n[y][C]<n[y][x]&&(x=C)}a[y]=x}e[m].index=m}return h.key=w.key=h.index=w.index=null,!0},ba=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&ba(e.left,r),e.right&&ba(e.right,r)))},Ju=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Ju(e.left,r),a=Ju(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},ec=function(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&ba(e.left,a),e.right&&ba(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&ba(e.left,a),e.right&&ba(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=ec(e.left,r-1,n)),e.right&&(i=ec(e.right,r-1,n)),a.concat(i))},Dd=function(e){for(var r=this.cy(),n=this.nodes(),a=rx(e),i=a.attributes,o=function(m,y){return bs(a.distance,i.length,function(x){return i[x](m)},function(x){return i[x](y)},m,y)},s=[],l=[],u=[],c=[],f=0;f<n.length;f++){var v={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=v,c[f]=v,l[f]=[],u[f]=0}for(var g=0;g<s.length;g++)for(var h=0;h<=g;h++){var w=void 0;a.mode==="dendrogram"?w=g===h?1/0:o(s[g].value,s[h].value):w=g===h?1/0:o(s[g].value[0],s[h].value[0]),l[g][h]=w,l[h][g]=w,w<l[g][u[g]]&&(u[g]=h)}for(var b=Td(s,c,l,u,a);b;)b=Td(s,c,l,u,a);var d;return a.mode==="dendrogram"?(d=ec(s[0],a.dendrogramDepth,r),a.addDendrogram&&Ju(s[0],r)):(d=new Array(s.length),s.forEach(function(p,m){p.key=p.index=null,d[m]=r.collection(p.value)})),d},nx={hierarchicalClustering:Dd,hca:Dd},ax=Ot({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ix=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||st("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ye(n)||st("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),ax(e)},ox=function(e,r,n,a){var i=function(s,l){return a[l](s)};return-bs(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},sx=function(e,r){var n=null;return r==="median"?n=iw(e):r==="mean"?n=aw(e):r==="min"?n=rw(e):r==="max"?n=nw(e):n=r,n},lx=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Pd=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>s&&(o=u,s=r[i*e+u])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},ux=function(e,r,n){for(var a=Pd(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,c=0;c<o.length;c++){for(var f=0,v=0;v<o.length;v++)f+=r[o[v]*e+o[c]];f>u&&(l=c,u=f)}n[i]=o[l]}return a=Pd(e,r,n),a},kd=function(e){for(var r=this.cy(),n=this.nodes(),a=ix(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,c,f,v;s=n.length,l=s*s,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var h=0;h<s;h++)for(var w=0;w<s;w++)h!==w&&(u[h*s+w]=ox(a.distance,n[h],n[w],a.attributes));c=sx(u,a.preference);for(var b=0;b<s;b++)u[b*s+b]=c;f=new Array(l);for(var d=0;d<l;d++)f[d]=0;v=new Array(l);for(var p=0;p<l;p++)v[p]=0;for(var m=new Array(s),y=new Array(s),x=new Array(s),E=0;E<s;E++)m[E]=0,y[E]=0,x[E]=0;for(var C=new Array(s*a.minIterations),T=0;T<C.length;T++)C[T]=0;var S;for(S=0;S<a.maxIterations;S++){for(var P=0;P<s;P++){for(var R=-1/0,A=-1/0,M=-1,V=0,G=0;G<s;G++)m[G]=f[P*s+G],V=v[P*s+G]+u[P*s+G],V>=R?(A=R,R=V,M=G):V>A&&(A=V);for(var B=0;B<s;B++)f[P*s+B]=(1-a.damping)*(u[P*s+B]-R)+a.damping*m[B];f[P*s+M]=(1-a.damping)*(u[P*s+M]-A)+a.damping*m[M]}for(var k=0;k<s;k++){for(var O=0,z=0;z<s;z++)m[z]=v[z*s+k],y[z]=Math.max(0,f[z*s+k]),O+=y[z];O-=y[k],y[k]=f[k*s+k],O+=y[k];for(var H=0;H<s;H++)v[H*s+k]=(1-a.damping)*Math.min(0,O-y[H])+a.damping*m[H];v[k*s+k]=(1-a.damping)*(O-y[k])+a.damping*m[k]}for(var U=0,_=0;_<s;_++){var q=v[_*s+_]+f[_*s+_]>0?1:0;C[S%a.minIterations*s+_]=q,U+=q}if(U>0&&(S>=a.minIterations-1||S==a.maxIterations-1)){for(var I=0,F=0;F<s;F++){x[F]=0;for(var $=0;$<a.minIterations;$++)x[F]+=C[$*s+F];(x[F]===0||x[F]===a.minIterations)&&I++}if(I===s)break}}for(var K=lx(s,f,v),ee=ux(s,u,K),Y={},W=0;W<K.length;W++)Y[K[W]]=[];for(var J=0;J<n.length;J++){var D=i[n[J].id()],N=ee[D];N!=null&&Y[N].push(n[J])}for(var j=new Array(K.length),ne=0;ne<K.length;ne++)j[ne]=r.collection(Y[K[ne]]);return j},cx={affinityPropagation:kd,ap:kd},fx=Ot({root:void 0,directed:!1}),dx={hierholzer:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=fx(e),a=n.root,i=n.directed,o=this,s=!1,l,u,c;a&&(c=Te(a)?this.filter(a)[0].id():a[0].id());var f={},v={};i?o.forEach(function(p){var m=p.id();if(p.isNode()){var y=p.indegree(!0),x=p.outdegree(!0),E=y-x,C=x-y;E==1?l?s=!0:l=m:C==1?u?s=!0:u=m:(C>1||E>1)&&(s=!0),f[m]=[],p.outgoers().forEach(function(T){T.isEdge()&&f[m].push(T.id())})}else v[m]=[void 0,p.target().id()]}):o.forEach(function(p){var m=p.id();if(p.isNode()){var y=p.degree(!0);y%2&&(l?u?s=!0:u=m:l=m),f[m]=[],p.connectedEdges().forEach(function(x){return f[m].push(x.id())})}else v[m]=[p.source().id(),p.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(u&&l)if(i){if(c&&u!=c)return g;c=u}else{if(c&&u!=c&&l!=c)return g;c||(c=u)}else c||(c=o[0].id());var h=function(m){for(var y=m,x=[m],E,C,T;f[y].length;)E=f[y].shift(),C=v[E][0],T=v[E][1],y!=T?(f[T]=f[T].filter(function(S){return S!=E}),y=T):!i&&y!=C&&(f[C]=f[C].filter(function(S){return S!=E}),y=C),x.unshift(E),x.unshift(y);return x},w=[],b=[];for(b=h(c);b.length!=1;)f[b[0]].length==0?(w.unshift(o.getElementById(b.shift())),w.unshift(o.getElementById(b.shift()))):b=h(b.shift()).concat(b);w.unshift(o.getElementById(b.shift()));for(var d in f)if(f[d].length)return g;return g.found=!0,g.trail=this.spawn(w,!0),g}},oo=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},l=function(v,g){for(var h=o.length-1,w=[],b=e.spawn();o[h].x!=v||o[h].y!=g;)w.push(o.pop().edge),h--;w.push(o.pop().edge),w.forEach(function(d){var p=d.connectedNodes().intersection(e);b.merge(d),p.forEach(function(m){var y=m.id(),x=m.connectedEdges().intersection(e);b.merge(m),r[y].cutVertex?b.merge(x.filter(function(E){return E.isLoop()})):b.merge(x)})}),i.push(b)},u=function(v,g,h){v===h&&(a+=1),r[g]={id:n,low:n++,cutVertex:!1};var w=e.getElementById(g).connectedEdges().intersection(e);if(w.size()===0)i.push(e.spawn(e.getElementById(g)));else{var b,d,p,m;w.forEach(function(y){b=y.source().id(),d=y.target().id(),p=b===g?d:b,p!==h&&(m=y.id(),s[m]||(s[m]=!0,o.push({x:g,y:p,edge:y})),p in r?r[g].low=Math.min(r[g].low,r[p].id):(u(v,p,g),r[g].low=Math.min(r[g].low,r[p].low),r[g].id<=r[p].low&&(r[g].cutVertex=!0,l(g,p))))})}};e.forEach(function(f){if(f.isNode()){var v=f.id();v in r||(a=0,u(v,v),r[v].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},vx={hopcroftTarjanBiconnected:oo,htbc:oo,htb:oo,hopcroftTarjanBiconnectedComponents:oo},so=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(w){var b=w.target().id();b!==u&&(b in r||s(b),r[b].explored||(r[u].low=Math.min(r[u].low,r[b].low)))}),r[u].index===r[u].low){for(var f=e.spawn();;){var v=i.pop();if(f.merge(e.getElementById(v)),r[v].low=r[u].index,r[v].explored=!0,v===u)break}var g=f.edgesWith(f),h=f.merge(g);a.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:o,components:a}},hx={tarjanStronglyConnected:so,tsc:so,tscc:so,tarjanStronglyConnectedComponents:so},Pp={};[Ti,H1,U1,K1,Y1,Z1,ew,Pw,Pa,ka,Qu,Vw,Jw,nx,cx,dx,vx,hx].forEach(function(t){Be(Pp,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var kp=0,Ap=1,Bp=2,Er=function(e){if(!(this instanceof Er))return new Er(e);this.id="Thenable/1.0.7",this.state=kp,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Er.prototype={fulfill:function(e){return Ad(this,Ap,"fulfillValue",e)},reject:function(e){return Ad(this,Bp,"rejectReason",e)},then:function(e,r){var n=this,a=new Er;return n.onFulfilled.push(Rd(e,a,"fulfill")),n.onRejected.push(Rd(r,a,"reject")),Rp(n),a.proxy}};var Ad=function(e,r,n,a){return e.state===kp&&(e.state=r,e[n]=a,Rp(e)),e},Rp=function(e){e.state===Ap?Bd(e,"onFulfilled",e.fulfillValue):e.state===Bp&&Bd(e,"onRejected",e.rejectReason)},Bd=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Rd=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}Mp(r,i)}}},Mp=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(xt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):Mp(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Er.all=function(t){return new Er(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(f){i(s,f)},function(f){r(f)});else{var c=l;i(s,c)}})(o)})};Er.resolve=function(t){return new Er(function(e,r){e(t)})};Er.reject=function(t){return new Er(function(e,r){r(t)})};var za=typeof Promise<"u"?Promise:Er,tc=function(e,r,n){var a=_c(e),i=!a,o=this._private=Be({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&lt(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},ea=tc.prototype;Be(ea,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),lr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new za(function(a,i){n.push(function(){a()})})}});ea.complete=ea.completed;ea.run=ea.play;ea.running=ea.playing;var gx={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var c=s.style();r=Be({},r,n);var f=Object.keys(r).length===0;if(f)return new tc(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var v=r.renderedPosition,g=s.pan(),h=s.zoom();r.position=yp(v,h,g)}if(l&&r.panBy!=null){var w=r.panBy,b=s.pan();r.pan={x:b.x+w.x,y:b.y+w.y}}var d=r.center||r.centre;if(l&&d!=null){var p=s.getCenterPan(d.eles,r.zoom);p!=null&&(r.pan=p)}if(l&&r.fit!=null){var m=r.fit,y=s.getFitViewport(m.eles||m.boundingBox,m.padding);y!=null&&(r.pan=y.pan,r.zoom=y.zoom)}if(l&&Ue(r.zoom)){var x=s.getZoomedViewport(r.zoom);x!=null?(x.zoomed&&(r.zoom=x.zoom),x.panned&&(r.pan=x.pan)):r.zoom=null}return new tc(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=Be({},r,n));for(var l=0;l<o.length;l++){var u=o[l],c=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],c=u._private,f=c.animation.current,v=0;v<f.length;v++){var g=f[v],h=g._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},gl,Md;function ws(){if(Md)return gl;Md=1;var t=Array.isArray;return gl=t,gl}var pl,Ld;function px(){if(Ld)return pl;Ld=1;var t=ws(),e=qi(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return pl=a,pl}var ml,_d;function mx(){if(_d)return ml;_d=1;var t=up(),e=Vi(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var l=t(s);return l==n||l==a||l==r||l==i}return ml=o,ml}var yl,Id;function yx(){if(Id)return yl;Id=1;var t=ps(),e=t["__core-js_shared__"];return yl=e,yl}var bl,Od;function bx(){if(Od)return bl;Od=1;var t=yx(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return bl=r,bl}var wl,Nd;function wx(){if(Nd)return wl;Nd=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return wl=r,wl}var xl,zd;function xx(){if(zd)return xl;zd=1;var t=mx(),e=bx(),r=Vi(),n=wx(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!r(v)||e(v))return!1;var g=t(v)?c:i;return g.test(n(v))}return xl=f,xl}var Cl,Fd;function Cx(){if(Fd)return Cl;Fd=1;function t(e,r){return e==null?void 0:e[r]}return Cl=t,Cl}var El,Vd;function Uc(){if(Vd)return El;Vd=1;var t=xx(),e=Cx();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return El=r,El}var Sl,qd;function xs(){if(qd)return Sl;qd=1;var t=Uc(),e=t(Object,"create");return Sl=e,Sl}var Tl,$d;function Ex(){if($d)return Tl;$d=1;var t=xs();function e(){this.__data__=t?t(null):{},this.size=0}return Tl=e,Tl}var Dl,Gd;function Sx(){if(Gd)return Dl;Gd=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Dl=t,Dl}var Pl,Hd;function Tx(){if(Hd)return Pl;Hd=1;var t=xs(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return Pl=a,Pl}var kl,Ud;function Dx(){if(Ud)return kl;Ud=1;var t=xs(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return kl=n,kl}var Al,Wd;function Px(){if(Wd)return Al;Wd=1;var t=xs(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Al=r,Al}var Bl,Kd;function kx(){if(Kd)return Bl;Kd=1;var t=Ex(),e=Sx(),r=Tx(),n=Dx(),a=Px();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Bl=i,Bl}var Rl,jd;function Ax(){if(jd)return Rl;jd=1;function t(){this.__data__=[],this.size=0}return Rl=t,Rl}var Ml,Yd;function Lp(){if(Yd)return Ml;Yd=1;function t(e,r){return e===r||e!==e&&r!==r}return Ml=t,Ml}var Ll,Xd;function Cs(){if(Xd)return Ll;Xd=1;var t=Lp();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Ll=e,Ll}var _l,Zd;function Bx(){if(Zd)return _l;Zd=1;var t=Cs(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return _l=n,_l}var Il,Qd;function Rx(){if(Qd)return Il;Qd=1;var t=Cs();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Il=e,Il}var Ol,Jd;function Mx(){if(Jd)return Ol;Jd=1;var t=Cs();function e(r){return t(this.__data__,r)>-1}return Ol=e,Ol}var Nl,ev;function Lx(){if(ev)return Nl;ev=1;var t=Cs();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Nl=e,Nl}var zl,tv;function _x(){if(tv)return zl;tv=1;var t=Ax(),e=Bx(),r=Rx(),n=Mx(),a=Lx();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,zl=i,zl}var Fl,rv;function Ix(){if(rv)return Fl;rv=1;var t=Uc(),e=ps(),r=t(e,"Map");return Fl=r,Fl}var Vl,nv;function Ox(){if(nv)return Vl;nv=1;var t=kx(),e=_x(),r=Ix();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Vl=n,Vl}var ql,av;function Nx(){if(av)return ql;av=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return ql=t,ql}var $l,iv;function Es(){if(iv)return $l;iv=1;var t=Nx();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return $l=e,$l}var Gl,ov;function zx(){if(ov)return Gl;ov=1;var t=Es();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Gl=e,Gl}var Hl,sv;function Fx(){if(sv)return Hl;sv=1;var t=Es();function e(r){return t(this,r).get(r)}return Hl=e,Hl}var Ul,lv;function Vx(){if(lv)return Ul;lv=1;var t=Es();function e(r){return t(this,r).has(r)}return Ul=e,Ul}var Wl,uv;function qx(){if(uv)return Wl;uv=1;var t=Es();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Wl=e,Wl}var Kl,cv;function $x(){if(cv)return Kl;cv=1;var t=Ox(),e=zx(),r=Fx(),n=Vx(),a=qx();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Kl=i,Kl}var jl,fv;function Gx(){if(fv)return jl;fv=1;var t=$x(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],l=i.cache;if(l.has(s))return l.get(s);var u=n.apply(this,o);return i.cache=l.set(s,u)||l,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,jl=r,jl}var Yl,dv;function Hx(){if(dv)return Yl;dv=1;var t=Gx(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Yl=r,Yl}var Xl,vv;function _p(){if(vv)return Xl;vv=1;var t=Hx(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,l,u){i.push(l?u.replace(r,"$1"):s||o)}),i});return Xl=n,Xl}var Zl,hv;function Ip(){if(hv)return Zl;hv=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Zl=t,Zl}var Ql,gv;function Ux(){if(gv)return Ql;gv=1;var t=Oc(),e=Ip(),r=ws(),n=qi(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return Ql=o,Ql}var Jl,pv;function Op(){if(pv)return Jl;pv=1;var t=Ux();function e(r){return r==null?"":t(r)}return Jl=e,Jl}var eu,mv;function Np(){if(mv)return eu;mv=1;var t=ws(),e=px(),r=_p(),n=Op();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return eu=a,eu}var tu,yv;function Wc(){if(yv)return tu;yv=1;var t=qi();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return tu=e,tu}var ru,bv;function Wx(){if(bv)return ru;bv=1;var t=Np(),e=Wc();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return ru=r,ru}var nu,wv;function Kx(){if(wv)return nu;wv=1;var t=Wx();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return nu=e,nu}var jx=Kx(),Yx=Fi(jx),au,xv;function Xx(){if(xv)return au;xv=1;var t=Uc(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return au=e,au}var iu,Cv;function Zx(){if(Cv)return iu;Cv=1;var t=Xx();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return iu=e,iu}var ou,Ev;function Qx(){if(Ev)return ou;Ev=1;var t=Zx(),e=Lp(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var l=i[o];(!(n.call(i,o)&&e(l,s))||s===void 0&&!(o in i))&&t(i,o,s)}return ou=a,ou}var su,Sv;function Jx(){if(Sv)return su;Sv=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return su=r,su}var lu,Tv;function eC(){if(Tv)return lu;Tv=1;var t=Qx(),e=Np(),r=Jx(),n=Vi(),a=Wc();function i(o,s,l,u){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,v=f-1,g=o;g!=null&&++c<f;){var h=a(s[c]),w=l;if(h==="__proto__"||h==="constructor"||h==="prototype")return o;if(c!=v){var b=g[h];w=u?u(b,h,g):void 0,w===void 0&&(w=n(b)?b:r(s[c+1])?[]:{})}t(g,h,w),g=g[h]}return o}return lu=i,lu}var uu,Dv;function tC(){if(Dv)return uu;Dv=1;var t=eC();function e(r,n,a){return r==null?r:t(r,n,a)}return uu=e,uu}var rC=tC(),nC=Fi(rC),cu,Pv;function aC(){if(Pv)return cu;Pv=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return cu=t,cu}var fu,kv;function iC(){if(kv)return fu;kv=1;var t=Ip(),e=aC(),r=ws(),n=qi(),a=_p(),i=Wc(),o=Op();function s(l){return r(l)?t(l,i):n(l)?[l]:e(a(o(l)))}return fu=s,fu}var oC=iC(),sC=Fi(oC),lC={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Be({},r,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],c=l?s[0]:s;if(Te(a)){var f=a.indexOf(".")!==-1,v=f&&sC(a);if(o.allowGetting&&i===void 0){var g;return c&&(o.beforeGet(c),v&&c._private[o.field][a]===void 0?g=Yx(c._private[o.field],v):g=c._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var w=Jg({},a,i);o.beforeSet(s,w);for(var b=0,d=u.length;b<d;b++){var p=u[b];o.canSet(p)&&(v&&c._private[o.field][a]===void 0?nC(p._private[o.field],v,i):p._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Ue(a)){var m=a,y,x,E=Object.keys(m);o.beforeSet(s,m);for(var C=0;C<E.length;C++){y=E[C],x=m[y];var T=!o.immutableKeys[y];if(T)for(var S=0;S<u.length;S++){var P=u[S];o.canSet(P)&&(P._private[o.field][y]=x)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&lt(a)){var R=a;s.on(o.bindingEvent,R)}else if(o.allowGetting&&a===void 0){var A;return c&&(o.beforeGet(c),A=c._private[o.field]),A}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Be({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Te(a)){for(var u=a.split(/\s+/),c=u.length,f=0;f<c;f++){var v=u[f];if(!xn(v)){var g=!i.immutableKeys[v];if(g)for(var h=0,w=l.length;h<w;h++)l[h]._private[i.field][v]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var b=0,d=l.length;b<d;b++)for(var p=l[b]._private[i.field],m=Object.keys(p),y=0;y<m.length;y++){var x=m[y],E=!i.immutableKeys[x];E&&(p[x]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},uC={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new za(function(s,l){var u=function(g){i.off.apply(i,f),s(g)},c=o.concat([u]),f=c.concat([]);i.on.apply(i,c)})}}},je={};[gx,lC,uC].forEach(function(t){Be(je,t)});var cC={animate:je.animate(),animation:je.animation(),animated:je.animated(),clearQueue:je.clearQueue(),delay:je.delay(),delayAnimation:je.delayAnimation(),stop:je.stop()},Eo={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Je(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Na(e),o=0;o<r.length;o++){for(var s=r[o],l=s._private,u=l.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=u.has(v);if(!g){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Je(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,c=!1,f=0;f<e.length;f++){var v=e[f],g=u.has(v),h=!1;r||a&&!g?(u.add(v),h=!0):(!r||a&&g)&&(u.delete(v),h=!0),!c&&h&&(i.push(l),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Eo.className=Eo.classNames=Eo.classes;var $e={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:wt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};$e.variable="(?:[\\w-.]|(?:\\\\"+$e.metaChar+"))+";$e.className="(?:[\\w-]|(?:\\\\"+$e.metaChar+"))+";$e.value=$e.string+"|"+$e.number;$e.id=$e.variable;(function(){var t,e,r;for(t=$e.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],$e.comparatorOp+="|@"+e;for(t=$e.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&($e.comparatorOp+="|\\!"+e)})();var Ze=function(){return{checks:[]}},xe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},rc=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return f1(t.selector,e.selector)}),fC=function(){for(var t={},e,r=0;r<rc.length;r++)e=rc[r],t[e.selector]=e.matches;return t}(),dC=function(e,r){return fC[e](r)},vC="("+rc.map(function(t){return t.selector}).join("|")+")",la=function(e){return e.replace(new RegExp("\\\\("+$e.metaChar+")","g"),function(r,n){return n})},ln=function(e,r,n){e[e.length-1]=n},nc=[{name:"group",query:!0,regex:"("+$e.group+")",populate:function(e,r,n){var a=bt(n,1),i=a[0];r.checks.push({type:xe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:vC,populate:function(e,r,n){var a=bt(n,1),i=a[0];r.checks.push({type:xe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+$e.id+")",populate:function(e,r,n){var a=bt(n,1),i=a[0];r.checks.push({type:xe.ID,value:la(i)})}},{name:"className",query:!0,regex:"\\.("+$e.className+")",populate:function(e,r,n){var a=bt(n,1),i=a[0];r.checks.push({type:xe.CLASS,value:la(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+$e.variable+")\\s*\\]",populate:function(e,r,n){var a=bt(n,1),i=a[0];r.checks.push({type:xe.DATA_EXIST,field:la(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+$e.variable+")\\s*("+$e.comparatorOp+")\\s*("+$e.value+")\\s*\\]",populate:function(e,r,n){var a=bt(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+$e.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:xe.DATA_COMPARE,field:la(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+$e.boolOp+")\\s*("+$e.variable+")\\s*\\]",populate:function(e,r,n){var a=bt(n,2),i=a[0],o=a[1];r.checks.push({type:xe.DATA_BOOL,field:la(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+$e.meta+")\\s*("+$e.comparatorOp+")\\s*("+$e.number+")\\s*\\]\\]",populate:function(e,r,n){var a=bt(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:xe.META_COMPARE,field:la(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:$e.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ze();return s}},{name:"directedEdge",separator:!0,regex:$e.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,i=Ze();return n.checks.push({type:xe.DIRECTED_EDGE,source:a,target:i}),ln(e,r,n),e.edgeCount++,i}else{var o=Ze(),s=r,l=Ze();return o.checks.push({type:xe.NODE_SOURCE,source:s,target:l}),ln(e,r,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:$e.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,i=Ze();return n.checks.push({type:xe.UNDIRECTED_EDGE,nodes:[a,i]}),ln(e,r,n),e.edgeCount++,i}else{var o=Ze(),s=r,l=Ze();return o.checks.push({type:xe.NODE_NEIGHBOR,node:s,neighbor:l}),ln(e,r,o),l}}},{name:"child",separator:!0,regex:$e.child,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),i=e[e.length-1];return n.checks.push({type:xe.CHILD,parent:i,child:a}),ln(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),c=Ze(),f=Ze();return o.checks.push({type:xe.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:xe.TRUE}],f.checks.push({type:xe.TRUE}),l.checks.push({type:xe.PARENT,parent:f,child:c}),ln(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var v=Ze(),g=Ze(),h=[{type:xe.PARENT,parent:v,child:g}];return v.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:$e.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),i=e[e.length-1];return n.checks.push({type:xe.DESCENDANT,ancestor:i,descendant:a}),ln(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),c=Ze(),f=Ze();return o.checks.push({type:xe.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:xe.TRUE}],f.checks.push({type:xe.TRUE}),l.checks.push({type:xe.ANCESTOR,ancestor:f,descendant:c}),ln(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var v=Ze(),g=Ze(),h=[{type:xe.ANCESTOR,ancestor:v,descendant:g}];return v.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:$e.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ye("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===xe.DIRECTED_EDGE?a.type=xe.NODE_TARGET:i===xe.UNDIRECTED_EDGE&&(a.type=xe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];nc.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var hC=function(e){for(var r,n,a,i=0;i<nc.length;i++){var o=nc[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,r=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},gC=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},pC=function(e){var r=this,n=r.inputText=e,a=r[0]=Ze();for(r.length=1,n=gC(n);;){var i=hC(n);if(i.expr==null)return Ye("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0)return Ye("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Ye("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Ye("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},mC=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return Te(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var v=c.type,g=c.value;switch(v){case xe.GROUP:{var h=e(g);return h.substring(0,h.length-1)}case xe.DATA_COMPARE:{var w=c.field,b=c.operator;return"["+w+n(e(b))+r(g)+"]"}case xe.DATA_BOOL:{var d=c.operator,p=c.field;return"["+e(d)+p+"]"}case xe.DATA_EXIST:{var m=c.field;return"["+m+"]"}case xe.META_COMPARE:{var y=c.operator,x=c.field;return"[["+x+n(e(y))+r(g)+"]]"}case xe.STATE:return g;case xe.ID:return"#"+g;case xe.CLASS:return"."+g;case xe.PARENT:case xe.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case xe.ANCESTOR:case xe.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case xe.COMPOUND_SPLIT:{var E=i(c.left,f),C=i(c.subject,f),T=i(c.right,f);return E+(E.length>0?" ":"")+C+T}case xe.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(v,g,h){return v+(f===c&&h===0?"$":"")+a(g,f)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},yC={parse:pC,toString:mC},zp=function(e,r,n){var a,i=Te(e),o=ye(e),s=Te(n),l,u,c=!1,f=!1,v=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(l=!i&&!o?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":v=!0,a=e>n;break;case">=":v=!0,a=e>=n;break;case"<":v=!0,a=e<n;break;case"<=":v=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!v)&&(a=!a),a},bC=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},wC=function(e){return e!==void 0},Kc=function(e,r){return e.data(r)},xC=function(e,r){return e[r]()},ut=[],it=function(e,r){return e.checks.every(function(n){return ut[n.type](n,r)})};ut[xe.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};ut[xe.STATE]=function(t,e){var r=t.value;return dC(r,e)};ut[xe.ID]=function(t,e){var r=t.value;return e.id()===r};ut[xe.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};ut[xe.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return zp(xC(e,r),n,a)};ut[xe.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return zp(Kc(e,r),n,a)};ut[xe.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return bC(Kc(e,r),n)};ut[xe.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,wC(Kc(e,r))};ut[xe.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return it(r,a)&&it(n,i)||it(n,a)&&it(r,i)};ut[xe.NODE_NEIGHBOR]=function(t,e){return it(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&it(t.neighbor,r)})};ut[xe.DIRECTED_EDGE]=function(t,e){return it(t.source,e.source())&&it(t.target,e.target())};ut[xe.NODE_SOURCE]=function(t,e){return it(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&it(t.target,r)})};ut[xe.NODE_TARGET]=function(t,e){return it(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&it(t.source,r)})};ut[xe.CHILD]=function(t,e){return it(t.child,e)&&it(t.parent,e.parent())};ut[xe.PARENT]=function(t,e){return it(t.parent,e)&&e.children().some(function(r){return it(t.child,r)})};ut[xe.DESCENDANT]=function(t,e){return it(t.descendant,e)&&e.ancestors().some(function(r){return it(t.ancestor,r)})};ut[xe.ANCESTOR]=function(t,e){return it(t.ancestor,e)&&e.descendants().some(function(r){return it(t.descendant,r)})};ut[xe.COMPOUND_SPLIT]=function(t,e){return it(t.subject,e)&&it(t.left,e)&&it(t.right,e)};ut[xe.TRUE]=function(){return!0};ut[xe.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};ut[xe.FILTER]=function(t,e){var r=t.value;return r(e)};var CC=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===xe.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(it(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},EC=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(it(a,e))return!0}return!1},SC={matches:EC,filter:CC},Sn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Te(e)&&e.match(/^\s*$/)||(lr(e)?this.addQuery({checks:[{type:xe.COLLECTION,value:e.collection()}]}):lt(e)?this.addQuery({checks:[{type:xe.FILTER,value:e}]}):Te(e)?this.parse(e)||(this.invalid=!0):st("A selector must be created from a string; found "))},Tn=Sn.prototype;[yC,SC].forEach(function(t){return Be(Tn,t)});Tn.text=function(){return this.inputText};Tn.size=function(){return this.length};Tn.eq=function(t){return this[t]};Tn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Tn.addQuery=function(t){this[this.length++]=t};Tn.selector=Tn.toString;var pn={allAre:function(e){var r=new Sn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Sn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};pn.allAreNeighbours=pn.allAreNeighbors;pn.has=pn.contains;pn.equal=pn.equals=pn.same;var vr=function(e,r){return function(a,i,o,s){var l=a,u=this,c;if(l==null?c="":lr(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,v=f.traversalCache=f.traversalCache||{},g=v[r]=v[r]||[],h=Qn(c),w=g[h];return w||(g[h]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},_a={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:vr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function jc(t,e,r,n){for(var a=[],i=new Na,o=t.cy(),s=o.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function Fp(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}_a.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jc(this,t,e,Fp)};function Vp(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}_a.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jc(this,t,e,Vp)};function TC(t,e,r){Vp(t,e,r),Fp(t,e,r)}_a.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jc(this,t,e,TC)};_a.ancestors=_a.parents;var ki,qp;ki=qp={data:je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:je.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:je.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};ki.attr=ki.data;ki.removeAttr=ki.removeData;var DC=qp,Ss={};function du(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}Be(Ss,{degree:du(function(t,e){return e.source().same(e.target())?2:1}),indegree:du(function(t,e){return e.target().same(t)?1:0}),outdegree:du(function(t,e){return e.source().same(t)?1:0})});function ua(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Be(Ss,{minDegree:ua("degree",function(t,e){return t<e}),maxDegree:ua("degree",function(t,e){return t>e}),minIndegree:ua("indegree",function(t,e){return t<e}),maxIndegree:ua("indegree",function(t,e){return t>e}),minOutdegree:ua("outdegree",function(t,e){return t<e}),maxOutdegree:ua("outdegree",function(t,e){return t>e})});Be(Ss,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var wr,$p,Gp=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Av={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Gp(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};wr=$p={position:je.data(Av),silentPosition:je.data(Be({},Av,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Gp(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Ue(e))r?this.silentPosition(e):this.position(e);else if(lt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Ue(e)?(a={x:ye(e.x)?e.x:0,y:ye(e.y)?e.y:0},n=r):Te(e)&&ye(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return Ue(e)?this.shift(e,!0):Te(e)&&ye(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Ue(e)?e:void 0,l=s!==void 0||r!==void 0&&Te(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(yp(s,i,o))}else{var f=n.position();return s=ys(f,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Ue(e)?e:void 0,o=i!==void 0||r!==void 0&&Te(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],c=s?u.parent():null,f=c&&c.length>0,v=f;f&&(c=c[0]);var g=v?c.position():{x:0,y:0};r!==void 0?u.position(e,r+g[e]):i!==void 0&&u.position({x:i.x+g.x,y:i.y+g.y})}else{var h=n.position(),w=s?n.parent():null,b=w&&w.length>0,d=b;b&&(w=w[0]);var p=d?w.position():{x:0,y:0};return i={x:h.x-p.x,y:h.y-p.y},e===void 0?i:i[e]}else if(!o)return;return this}};wr.modelPosition=wr.point=wr.position;wr.modelPositions=wr.points=wr.positions;wr.renderedPoint=wr.renderedPosition;wr.relativePoint=wr.relativePosition;var PC=$p,Aa,Bn;Aa=Bn={};Bn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};Bn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Bn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),v=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=v.x-f.w/2,f.x2=v.x+f.w/2,f.y1=v.y-f.h/2,f.y2=v.y+f.h/2);function g(S,P,R){var A=0,M=0,V=P+R;return S>0&&V>0&&(A=P/V*S,M=R/V*S),{biasDiff:A,biasComplementDiff:M}}function h(S,P,R,A){if(R.units==="%")switch(A){case"width":return S>0?R.pfValue*S:0;case"height":return P>0?R.pfValue*P:0;case"average":return S>0&&P>0?R.pfValue*(S+P)/2:0;case"min":return S>0&&P>0?S>P?R.pfValue*P:R.pfValue*S:0;case"max":return S>0&&P>0?S>P?R.pfValue*S:R.pfValue*P:0;default:return 0}else return R.units==="px"?R.pfValue:0}var w=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var b=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(b=b*100/c.width.val);var d=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(d=d*100/c.height.val);var p=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(p=p*100/c.height.val);var m=g(c.width.val-f.w,w,b),y=m.biasDiff,x=m.biasComplementDiff,E=g(c.height.val-f.h,d,p),C=E.biasDiff,T=E.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),v.x=(-y+f.x1+f.x2+x)/2,s.autoHeight=Math.max(f.h,c.height.val),v.y=(-C+f.y1+f.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var dr=function(e){return e===1/0||e===-1/0?0:e},yr=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},$n=function(e,r){return r==null?e:yr(e,r.x1,r.y1,r.x2,r.y2)},Ya=function(e,r,n){return tr(e,r,n)},lo=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=l-o,f.y1=u-o,f.x2=l+o,f.y2=u+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,xo(f,1),yr(e,f.x1,f.y1,f.x2,f.y2)}}},vu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),c=Ya(o,"labelWidth",n),f=Ya(o,"labelHeight",n),v=Ya(o,"labelX",n),g=Ya(o,"labelY",n),h=r.pstyle(a+"text-margin-x").pfValue,w=r.pstyle(a+"text-margin-y").pfValue,b=r.isEdge(),d=r.pstyle(a+"text-rotation"),p=r.pstyle("text-outline-width").pfValue,m=r.pstyle("text-border-width").pfValue,y=m/2,x=r.pstyle("text-background-padding").pfValue,E=2,C=f,T=c,S=T/2,P=C/2,R,A,M,V;if(b)R=v-S,A=v+S,M=g-P,V=g+P;else{switch(l.value){case"left":R=v-T,A=v;break;case"center":R=v-S,A=v+S;break;case"right":R=v,A=v+T;break}switch(u.value){case"top":M=g-C,V=g;break;case"center":M=g-P,V=g+P;break;case"bottom":M=g,V=g+C;break}}var G=h-Math.max(p,y)-x-E,B=h+Math.max(p,y)+x+E,k=w-Math.max(p,y)-x-E,O=w+Math.max(p,y)+x+E;R+=G,A+=B,M+=k,V+=O;var z=n||"main",H=i.labelBounds,U=H[z]=H[z]||{};U.x1=R,U.y1=M,U.x2=A,U.y2=V,U.w=A-R,U.h=V-M,U.leftPad=G,U.rightPad=B,U.topPad=k,U.botPad=O;var _=b&&d.strValue==="autorotate",q=d.pfValue!=null&&d.pfValue!==0;if(_||q){var I=_?Ya(i.rstyle,"labelAngle",n):d.pfValue,F=Math.cos(I),$=Math.sin(I),K=(R+A)/2,ee=(M+V)/2;if(!b){switch(l.value){case"left":K=A;break;case"right":K=R;break}switch(u.value){case"top":ee=V;break;case"bottom":ee=M;break}}var Y=function(ie,le){return ie=ie-K,le=le-ee,{x:ie*F-le*$+K,y:ie*$+le*F+ee}},W=Y(R,M),J=Y(R,V),D=Y(A,M),N=Y(A,V);R=Math.min(W.x,J.x,D.x,N.x),A=Math.max(W.x,J.x,D.x,N.x),M=Math.min(W.y,J.y,D.y,N.y),V=Math.max(W.y,J.y,D.y,N.y)}var j=z+"Rot",ne=H[j]=H[j]||{};ne.x1=R,ne.y1=M,ne.x2=A,ne.y2=V,ne.w=A-R,ne.h=V-M,yr(e,R,M,A,V),yr(i.labelBounds.all,R,M,A,V)}return e}},kC=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,s=a+i,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,f=-s*.5);var v=e.h*u-e.h,g=e.w*l-e.w;if(Co(e,[Math.ceil(v/2),Math.ceil(g/2)]),c!=0||f!==0){var h=fw(e,c,f);bp(e,h)}}}},AC=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=ir(),s=e._private,l=e.isNode(),u=e.isEdge(),c,f,v,g,h,w,b=s.rstyle,d=l&&a?e.pstyle("bounds-expansion").pfValue:[0],p=function(ce){return ce.pstyle("display").value!=="none"},m=!a||p(e)&&(!u||p(e.source())&&p(e.target()));if(m){var y=0,x=0;a&&r.includeOverlays&&(y=e.pstyle("overlay-opacity").value,y!==0&&(x=e.pstyle("overlay-padding").value));var E=0,C=0;a&&r.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(C=e.pstyle("underlay-padding").value));var T=Math.max(x,C),S=0,P=0;if(a&&(S=e.pstyle("width").pfValue,P=S/2),l&&r.includeNodes){var R=e.position();h=R.x,w=R.y;var A=e.outerWidth(),M=A/2,V=e.outerHeight(),G=V/2;c=h-M,f=h+M,v=w-G,g=w+G,yr(o,c,v,f,g),a&&r.includeOutlines&&kC(o,e)}else if(u&&r.includeEdges)if(a&&!i){var B=e.pstyle("curve-style").strValue;if(c=Math.min(b.srcX,b.midX,b.tgtX),f=Math.max(b.srcX,b.midX,b.tgtX),v=Math.min(b.srcY,b.midY,b.tgtY),g=Math.max(b.srcY,b.midY,b.tgtY),c-=P,f+=P,v-=P,g+=P,yr(o,c,v,f,g),B==="haystack"){var k=b.haystackPts;if(k&&k.length===2){if(c=k[0].x,v=k[0].y,f=k[1].x,g=k[1].y,c>f){var O=c;c=f,f=O}if(v>g){var z=v;v=g,g=z}yr(o,c-P,v-P,f+P,g+P)}}else if(B==="bezier"||B==="unbundled-bezier"||B.endsWith("segments")||B.endsWith("taxi")){var H;switch(B){case"bezier":case"unbundled-bezier":H=b.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":H=b.linePts;break}if(H!=null)for(var U=0;U<H.length;U++){var _=H[U];c=_.x-P,f=_.x+P,v=_.y-P,g=_.y+P,yr(o,c,v,f,g)}}}else{var q=e.source(),I=q.position(),F=e.target(),$=F.position();if(c=I.x,f=$.x,v=I.y,g=$.y,c>f){var K=c;c=f,f=K}if(v>g){var ee=v;v=g,g=ee}c-=P,f+=P,v-=P,g+=P,yr(o,c,v,f,g)}if(a&&r.includeEdges&&u&&(lo(o,e,"mid-source"),lo(o,e,"mid-target"),lo(o,e,"source"),lo(o,e,"target")),a){var Y=e.pstyle("ghost").value==="yes";if(Y){var W=e.pstyle("ghost-offset-x").pfValue,J=e.pstyle("ghost-offset-y").pfValue;yr(o,o.x1+W,o.y1+J,o.x2+W,o.y2+J)}}var D=s.bodyBounds=s.bodyBounds||{};pd(D,o),Co(D,d),xo(D,1),a&&(c=o.x1,f=o.x2,v=o.y1,g=o.y2,yr(o,c-T,v-T,f+T,g+T));var N=s.overlayBounds=s.overlayBounds||{};pd(N,o),Co(N,d),xo(N,1);var j=s.labelBounds=s.labelBounds||{};j.all!=null?cw(j.all):j.all=ir(),a&&r.includeLabels&&(r.includeMainLabels&&vu(o,e,null),u&&(r.includeSourceLabels&&vu(o,e,"source"),r.includeTargetLabels&&vu(o,e,"target")))}return o.x1=dr(o.x1),o.y1=dr(o.y1),o.x2=dr(o.x2),o.y2=dr(o.y2),o.w=dr(o.x2-o.x1),o.h=dr(o.y2-o.y1),o.w>0&&o.h>0&&m&&(Co(o,d),xo(o,1)),o},Hp=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Up=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return cd([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return cd([r(i.x),r(i.y)])}},Bv=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?Rv:Hp(r),s=o===Rv;if(n.bbCache==null?(a=AC(e,Ai),n.bbCache=a,n.bbCachePosKey=Up(e)):a=n.bbCache,!s){var l=e.isNode();a=ir(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?$n(a,n.overlayBounds):$n(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?$n(a,n.labelBounds.all):(r.includeMainLabels&&$n(a,n.labelBounds.mainRot),r.includeSourceLabels&&$n(a,n.labelBounds.sourceRot),r.includeTargetLabels&&$n(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ai={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Rv=Hp(Ai),Mv=Ot(Ai);Bn.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Ra(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==Up(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Ai:t=Mv(t),e=Bv(this[0],t);else{e=ir(),t=t||Ai;var a=Mv(t),i=this,o=i.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<i.length;l++){var u=i[l];n(u)&&u.dirtyBoundingBoxCache(),$n(e,Bv(u,a))}}return e.x1=dr(e.x1),e.y1=dr(e.y1),e.x2=dr(e.x2),e.y2=dr(e.y2),e.w=dr(e.x2-e.x1),e.h=dr(e.y2-e.y1),e};Bn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Bn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Ue(t)){var i=t;t=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=uw(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};Aa.boundingbox=Aa.bb=Aa.boundingBox;Aa.renderedBoundingbox=Aa.renderedBoundingBox;var BC=Bn,ni,Hi;ni=Hi={};var Wp=function(e){e.uppercaseName=Yf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Yf(e.outerName),ni[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ni["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-position").value,u;l==="center"?u=n.pstyle("border-width").pfValue:l==="outside"?u=2*n.pstyle("border-width").pfValue:u=0;var c=2*n.padding();return s+u+c}else return 1},ni["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},ni["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Wp({name:"width"});Wp({name:"height"});Hi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Hi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Hi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var RC=Hi,MC=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},LC=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return ys(r(e),n.zoom(),n.pan())}},_C=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return ys(o,i,a)})}},IC=function(e){return e.renderer().getControlPoints(e)},OC=function(e){return e.renderer().getSegmentPoints(e)},NC=function(e){return e.renderer().getSourceEndpoint(e)},zC=function(e){return e.renderer().getTargetEndpoint(e)},FC=function(e){return e.renderer().getEdgeMidpoint(e)},Lv={controlPoints:{get:IC,mult:!0},segmentPoints:{get:OC,mult:!0},sourceEndpoint:{get:NC},targetEndpoint:{get:zC},midpoint:{get:FC}},VC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},qC=Object.keys(Lv).reduce(function(t,e){var r=Lv[e],n=VC(e);return t[e]=function(){return MC(this,r.get)},r.mult?t[n]=function(){return _C(this,r.get)}:t[n]=function(){return LC(this,r.get)},t},{}),$C=Be({},PC,BC,RC,qC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Kp=function(e,r){this.recycle(e,r)};function Xa(){return!1}function uo(){return!0}Kp.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Xa,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?uo:Xa):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=uo;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=uo;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=uo,this.stopPropagation()},isDefaultPrevented:Xa,isPropagationStopped:Xa,isImmediatePropagationStopped:Xa};var jp=/^([^.]+)(\.(?:[^.]+))?$/,GC=".*",Yp={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},_v=Object.keys(Yp),HC={};function Ts(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:HC,e=arguments.length>1?arguments[1]:void 0,r=0;r<_v.length;r++){var n=_v[r];this[n]=t[n]||Yp[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Dn=Ts.prototype,Xp=function(e,r,n,a,i,o,s){lt(a)&&(i=a,a=null),s&&(o==null?o=s:o=Be({},o,s));for(var l=Je(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!xn(c)){var f=c.match(jp);if(f){var v=f[1],g=f[2]?f[2]:null,h=r(e,c,v,g,a,i,o);if(h===!1)break}}}},Iv=function(e,r){return e.addEventFields(e.context,r),new Kp(r.type,r)},UC=function(e,r,n){if(e1(n)){r(e,n);return}else if(Ue(n)){r(e,Iv(e,n));return}for(var a=Je(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!xn(o)){var s=o.match(jp);if(s){var l=s[1],u=s[2]?s[2]:null,c=Iv(e,{type:l,namespace:u,target:e.context});r(e,c)}}}};Dn.on=Dn.addListener=function(t,e,r,n,a){return Xp(this,function(i,o,s,l,u,c,f){lt(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:l,qualifier:u,conf:f})},t,e,r,n,a),this};Dn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Dn.removeListener=Dn.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=L1(this.listeners));for(var i=this.listeners,o=function(u){var c=i[u];Xp(a,function(f,v,g,h,w,b){if((c.type===g||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!w||f.qualifierCompare(c.qualifier,w))&&(!b||c.callback===b))return i.splice(u,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};Dn.removeAllListeners=function(){return this.removeListener("*")};Dn.emit=Dn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Je(e)||(e=[e]),UC(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(){var c=n[l];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===GC)&&i.eventMatches(i.context,c,o)){var f=[o];e!=null&&I1(f,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(h){return h!==c}));var v=i.callbackContext(i.context,c,o),g=c.callback.apply(v,f);i.afterEmit(i.context,c,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var WC={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&zi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},co=function(e){return Te(e)?new Sn(e):e},Zp={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Ts(WC,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=co(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=co(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=co(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=co(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};je.eventAliasesOn(Zp);var Qp={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Te(e)||lr(e))return new Sn(e).filter(this);if(lt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Te(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Te(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var c=s[u];l.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],v=f._private.data.id,g=u.hasElementWithId(v);g||n.push(f)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(c,f,v){for(var g=0;g<c.length;g++){var h=c[g],w=h._private.data.id,b=f.hasElementWithId(w);b?i.merge(h):v.push(h)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Te(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var c=this.length++;this[c]=s,i.set(l,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},We=Qp;We.u=We["|"]=We["+"]=We.union=We.or=We.add;We["\\"]=We["!"]=We["-"]=We.difference=We.relativeComplement=We.subtract=We.not;We.n=We["&"]=We["."]=We.and=We.intersection=We.intersect;We["^"]=We["(+)"]=We["(-)"]=We.symmetricDifference=We.symdiff=We.xor;We.fnFilter=We.filterFn=We.stdFilter=We.filter;We.complement=We.abscomp=We.absoluteComplement;var KC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Jp=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Nc:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=s(e)-s(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},jo={forEach:function(e,r){if(lt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!lt(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Jp)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Nc-1}else{var i=r.source,o=r.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};jo.each=jo.forEach;var jC=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":xt(Symbol))!=e&&xt(Symbol.iterator)!=e;r&&(jo[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return Jg({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};jC();var YC=Ot({nodeDimensionsIncludeLabels:!1}),So={layoutDimensions:function(e){e=YC(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(x){return!x.isParent()}),i=this.cy(),o=r.eles,s=function(E){return E.id()},l=Ra(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(E,C,T){var S={x:C.x1+C.w/2,y:C.y1+C.h/2},P={x:(T.x-S.x)*E,y:(T.y-S.y)*E};return{x:S.x+P.x,y:S.y+P.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var E=ir(),C=0;C<a.length;C++){var T=a[C],S=l(T,C);dw(E,S.x,S.y)}return E},v=f(),g=Ra(function(x,E){var C=l(x,E);if(c){var T=Math.abs(r.spacingFactor);C=u(T,v,C)}return r.transform!=null&&(C=r.transform(x,C)),C},s);if(r.animate){for(var h=0;h<a.length;h++){var w=a[h],b=g(w,h),d=r.animateFilter==null||r.animateFilter(w,h);if(d){var p=w.animation({position:b,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(p)}else w.position(b)}if(r.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else if(r.zoom!==void 0&&r.pan!==void 0){var y=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),za.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Be({},e,{eles:this}))}};So.createLayout=So.makeLayout=So.layout;function em(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Ds(t,e){return t=Qn(t),function(n){return em(t,e,n)}}function Ps(t,e){t=Qn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return em(t,r,a)}}var Lt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Ue(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Te(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function hu(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Yc(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||hu(i,n);var l=s.source,u=s.target;return r(l)&&(!o||hu(l,r))&&(l===u||r(u)&&(!o||hu(u,r)))}}}var Fa=Ds("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});Lt.takesUpSpace=Ps("takesUpSpace",Yc({ok:Fa}));var XC=Ds("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Fa(t)}),ZC=Ds("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Fa(t)});Lt.interactive=Ps("interactive",Yc({ok:XC,parentOk:ZC,edgeOkViaNode:Fa}));Lt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var QC=Ds("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Fa(t)}),JC=Fa;Lt.visible=Ps("visible",Yc({ok:QC,edgeOkViaNode:JC}));Lt.hidden=function(){var t=this[0];if(t)return!t.visible()};Lt.isBundledBezier=Ps("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Lt.bypass=Lt.css=Lt.style;Lt.renderedCss=Lt.renderedStyle;Lt.removeBypass=Lt.removeCss=Lt.removeStyle;Lt.pstyle=Lt.parsedStyle;var mn={};function Ov(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&lt(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Je(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&r.push(l))}var v=this.spawn(r);v.updateStyle(),v.emit(t.event),o&&v.emit(o)}return this}}function Va(t){mn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},mn[t.on]=Ov({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),mn[t.off]=Ov({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Va({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Va({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Va({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Va({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});mn.deselect=mn.unselect;mn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Va({field:"active",on:"activate",off:"unactivate"});Va({field:"pannable",on:"panify",off:"unpanify"});mn.inactive=function(){var t=this[0];if(t)return!t._private.active};var $t={},Nv=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),c=0;c<u.length;c++){var f=u[c],v=f.source(),g=f.target();if(e.noIncomingEdges&&g===s&&v!==s||e.noOutgoingEdges&&v===s&&g!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},zv=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),f=u.target();e.outgoing&&c===o?(a.push(u),a.push(f)):e.incoming&&f===o&&(a.push(u),a.push(c))}}return this.spawn(a,!0).filter(r)}},Fv=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=u.id();i[c]||(i[c]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};$t.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Be($t,{roots:Nv({noIncomingEdges:!0}),leaves:Nv({noOutgoingEdges:!0}),outgoers:vr(zv({outgoing:!0}),"outgoers"),successors:Fv({outgoing:!0}),incomers:vr(zv({incoming:!0}),"incomers"),predecessors:Fv({})});Be($t,{neighborhood:vr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),c=a===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});$t.neighbourhood=$t.neighborhood;$t.closedNeighbourhood=$t.closedNeighborhood;$t.openNeighbourhood=$t.openNeighborhood;Be($t,{source:vr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:vr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Vv({attr:"source"}),targets:Vv({attr:"target"})});function Vv(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}Be($t,{edgesWith:vr(qv(),"edgesWith"),edgesTo:vr(qv({thisIsSrc:!0}),"edgesTo")});function qv(t){return function(r){var n=[],a=this._private.cy,i=t||{};Te(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),v=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),g=f||v;g&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!v)||n.push(u))}return this.spawn(n,!0)}}Be($t,{connectedEdges:vr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:vr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:vr($v(),"parallelEdges"),codirectedEdges:vr($v({codirected:!0}),"codirectedEdges")});function $v(t){var e={codirected:!1};return t=Be({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var l=i[s],u=l._private,c=u.source,f=c._private.data.id,v=u.data.target,g=c._private.edges,h=0;h<g.length;h++){var w=g[h],b=w._private.data,d=b.target,p=b.source,m=d===v&&p===f,y=f===d&&v===p;(o.codirected&&m||!o.codirected&&(m||y))&&a.push(w)}return this.spawn(a,!0).filter(n)}}Be($t,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var l=function(){var c=n.collection();o.push(c);var f=i[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(g){return s(g,c)}}),c.forEach(function(v){v.connectedEdges().forEach(function(g){r.has(g)&&c.has(g.source())&&c.has(g.target())&&c.merge(g)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});$t.componentsOf=$t.components;var _t=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){st("A collection must have a reference to the core");return}var i=new jr,o=!1;if(!r)r=[];else if(r.length>0&&Ue(r[0])&&!zi(r[0])){o=!0;for(var s=[],l=new Na,u=0,c=r.length;u<c;u++){var f=r[u];f.data==null&&(f.data={});var v=f.data;if(v.id==null)v.id=pp();else if(e.hasElementWithId(v.id)||l.has(v.id))continue;var g=new ms(e,f,!1);s.push(g),l.add(v.id)}r=s}this.length=0;for(var h=0,w=r.length;h<w;h++){var b=r[h][0];if(b!=null){var d=b._private.data.id;(!n||!i.has(d))&&(n&&i.set(d,{index:this.length,ele:b}),this[this.length]=b,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(p){this.lazyMap=p},rebuildMap:function(){for(var m=this.lazyMap=new jr,y=this.eles,x=0;x<y.length;x++){var E=y[x];m.set(E.id(),{index:x,ele:E})}}},n&&(this._private.map=i),o&&!a&&this.restore()},nt=ms.prototype=_t.prototype=Object.create(Array.prototype);nt.instanceString=function(){return"collection"};nt.spawn=function(t,e){return new _t(this.cy(),t,e)};nt.spawnSelf=function(){return this.spawn(this)};nt.cy=function(){return this._private.cy};nt.renderer=function(){return this._private.cy.renderer()};nt.element=function(){return this[0]};nt.collection=function(){return rp(this)?this:new _t(this._private.cy,[this])};nt.unique=function(){return new _t(this._private.cy,this,!0)};nt.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};nt.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new _t(e)};nt.$id=nt.getElementById;nt.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};nt.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};nt.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};nt.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Ue(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,l=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(w,b,d){var p=t[w];p!=null&&p!==n[w]&&(p?e[b]():e[d]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var v={data:Mr(n.data),position:Mr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};v.classes="";var g=0;return n.classes.forEach(function(h){return v.classes+=g++===0?h:" "+h}),v}}};nt.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};nt.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new ms(t,a,!1);e.push(i)}return new _t(t,e)};nt.copy=nt.clone;nt.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,l=0,u=r.length;l<u;l++){var c=r[l];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,v=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var g=s[f],h=g._private,w=h.data;if(g.clearTraversalCache(),!(!e&&!h.removed)){if(w.id===void 0)w.id=pp();else if(ye(w.id))w.id=""+w.id;else if(xn(w.id)||!Te(w.id)){st("Can not create element with invalid string ID `"+w.id+"`"),v();continue}else if(n.hasElementWithId(w.id)){st("Can not create second element with ID `"+w.id+"`"),v();continue}}var b=w.id;if(g.isNode()){var d=h.position;d.x==null&&(d.x=0),d.y==null&&(d.y=0)}if(g.isEdge()){for(var p=g,m=["source","target"],y=m.length,x=!1,E=0;E<y;E++){var C=m[E],T=w[C];ye(T)&&(T=w[C]=""+w[C]),T==null||T===""?(st("Can not create edge `"+b+"` with unspecified "+C),x=!0):n.hasElementWithId(T)||(st("Can not create edge `"+b+"` with nonexistant "+C+" `"+T+"`"),x=!0)}if(x){v();continue}var S=n.getElementById(w.source),P=n.getElementById(w.target);S.same(P)?S._private.edges.push(p):(S._private.edges.push(p),P._private.edges.push(p)),p._private.source=S,p._private.target=P}h.map=new jr,h.map.set(b,{ele:g,index:0}),h.removed=!1,e&&n.addToPool(g)}for(var R=0;R<i.length;R++){var A=i[R],M=A._private.data;ye(M.parent)&&(M.parent=""+M.parent);var V=M.parent,G=V!=null;if(G||A._private.parent){var B=A._private.parent?n.collection().merge(A._private.parent):n.getElementById(V);if(B.empty())M.parent=void 0;else if(B[0].removed())Ye("Node added with missing parent, reference to parent removed"),M.parent=void 0,A._private.parent=null;else{for(var k=!1,O=B;!O.empty();){if(A.same(O)){k=!0,M.parent=void 0;break}O=O.parent()}k||(B[0]._private.children.push(A),A._private.parent=B[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var z=s.length===r.length?r:new _t(n,s),H=0;H<z.length;H++){var U=z[H];U.isNode()||(U.parallelEdges().clearTraversalCache(),U.source().clearTraversalCache(),U.target().clearTraversalCache())}var _;a.hasCompoundNodes?_=n.collection().merge(z).merge(z.connectedNodes()).merge(z.parent()):_=z,_.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?z.emitAndNotify("add"):e&&z.emit("add")}return r};nt.removed=function(){var t=this[0];return t&&t._private.removed};nt.inside=function(){var t=this[0];return t&&!t._private.removed};nt.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(V){for(var G=V._private.edges,B=0;B<G.length;B++)l(G[B])}function s(V){for(var G=V._private.children,B=0;B<G.length;B++)l(G[B])}function l(V){var G=a[V.id()];e&&V.removed()||G||(a[V.id()]=!0,V.isNode()?(n.push(V),o(V),s(V)):n.unshift(V))}for(var u=0,c=r.length;u<c;u++){var f=r[u];l(f)}function v(V,G){var B=V._private.edges;Cn(B,G),V.clearTraversalCache()}function g(V){V.clearTraversalCache()}var h=[];h.ids={};function w(V,G){G=G[0],V=V[0];var B=V._private.children,k=V.id();Cn(B,G),G._private.parent=null,h.ids[k]||(h.ids[k]=!0,h.push(V))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var b=0;b<n.length;b++){var d=n[b];if(d.isEdge()){var p=d.source()[0],m=d.target()[0];v(p,d),v(m,d);for(var y=d.parallelEdges(),x=0;x<y.length;x++){var E=y[x];g(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var C=d.parent();C.length!==0&&w(C,d)}e&&(d._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var S=0;S<T.length;S++){var P=T[S];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var R=new _t(this.cy(),n);R.size()>0&&(t?R.emitAndNotify("remove"):e&&R.emit("remove"));for(var A=0;A<h.length;A++){var M=h[A];(!e||!M.removed())&&M.updateStyle()}return R};nt.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var h=r[g],w=h._private.data;h.isEdge()&&(l&&(w.source=o),u&&(w.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var v=c===null?void 0:c;e.batch(function(){var g=r.remove(n,a);g.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var w=r[h],b=w._private.data;w.isNode()&&(b.parent=v)}g.restore(n,a)}),r.emitAndNotify("move")}}return this};[Pp,cC,Eo,pn,_a,DC,Ss,$C,Zp,Qp,KC,jo,So,Lt,mn,$t].forEach(function(t){Be(nt,t)});var eE={add:function(e){var r,n=this;if(lr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new _t(n,i)}}else if(Je(e)){var l=e;r=new _t(n,l)}else if(Ue(e)&&(Je(e.nodes)||Je(e.edges))){for(var u=e,c=[],f=["nodes","edges"],v=0,g=f.length;v<g;v++){var h=f[v],w=u[h];if(Je(w))for(var b=0,d=w.length;b<d;b++){var p=Be({group:h},w[b]);c.push(p)}}r=new _t(n,c)}else{var m=e;r=new ms(n,m).collection()}return r},remove:function(e){if(!lr(e)){if(Te(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function tE(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=c?new Float32Array(l):new Array(l);function g(P,R){return 1-3*R+3*P}function h(P,R){return 3*R-6*P}function w(P){return 3*P}function b(P,R,A){return((g(R,A)*P+h(R,A))*P+w(R))*P}function d(P,R,A){return 3*g(R,A)*P*P+2*h(R,A)*P+w(R)}function p(P,R){for(var A=0;A<a;++A){var M=d(R,t,r);if(M===0)return R;var V=b(R,t,r)-P;R-=V/M}return R}function m(){for(var P=0;P<l;++P)v[P]=b(P*u,t,r)}function y(P,R,A){var M,V,G=0;do V=R+(A-R)/2,M=b(V,t,r)-P,M>0?A=V:R=V;while(Math.abs(M)>o&&++G<s);return V}function x(P){for(var R=0,A=1,M=l-1;A!==M&&v[A]<=P;++A)R+=u;--A;var V=(P-v[A])/(v[A+1]-v[A]),G=R+V*u,B=d(G,t,r);return B>=i?p(P,G):B===0?G:y(P,R,R+u)}var E=!1;function C(){E=!0,(t!==e||r!==n)&&m()}var T=function(R){return E||C(),t===e&&r===n?R:R===0?0:R===1?1:b(x(R),e,n)};T.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return T.toString=function(){return S},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var rE=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,v,g,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,v=o!==null,v?(u=n(a,i),g=u/o*f):g=f;h=r(h||s,g),l.push(1+h.x),u+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return v?function(w){return l[w*(l.length-1)|0]}:u}}(),tt=function(e,r,n,a){var i=tE(e,r,n,a);return function(o,s,l){return o+(s-o)*i(l)}},To={linear:function(e,r,n){return e+(r-e)*n},ease:tt(.25,.1,.25,1),"ease-in":tt(.42,0,1,1),"ease-out":tt(0,0,.58,1),"ease-in-out":tt(.42,0,.58,1),"ease-in-sine":tt(.47,0,.745,.715),"ease-out-sine":tt(.39,.575,.565,1),"ease-in-out-sine":tt(.445,.05,.55,.95),"ease-in-quad":tt(.55,.085,.68,.53),"ease-out-quad":tt(.25,.46,.45,.94),"ease-in-out-quad":tt(.455,.03,.515,.955),"ease-in-cubic":tt(.55,.055,.675,.19),"ease-out-cubic":tt(.215,.61,.355,1),"ease-in-out-cubic":tt(.645,.045,.355,1),"ease-in-quart":tt(.895,.03,.685,.22),"ease-out-quart":tt(.165,.84,.44,1),"ease-in-out-quart":tt(.77,0,.175,1),"ease-in-quint":tt(.755,.05,.855,.06),"ease-out-quint":tt(.23,1,.32,1),"ease-in-out-quint":tt(.86,0,.07,1),"ease-in-expo":tt(.95,.05,.795,.035),"ease-out-expo":tt(.19,1,.22,1),"ease-in-out-expo":tt(1,0,0,1),"ease-in-circ":tt(.6,.04,.98,.335),"ease-out-circ":tt(.075,.82,.165,1),"ease-in-out-circ":tt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return To.linear;var a=rE(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":tt};function Gv(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Hv(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function ca(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=Hv(t,a),s=Hv(e,a);if(ye(o)&&ye(s))return Gv(i,o,s,r,n);if(Je(o)&&Je(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u];if(c!=null&&f!=null){var v=Gv(i,c,f,r,n);l.push(v)}else l.push(f)}return l}}function nE(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,l=o.startTime,u=n?t:t.cy(),c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=To.linear;else{var f;if(Te(s)){var v=c.parse("transition-timing-function",s);f=v.value}else f=s;var g,h;Te(f)?(g=f,h=[]):(g=f[1],h=f.slice(2).map(function(z){return+z})),h.length>0?(g==="spring"&&h.push(o.duration),o.easingImpl=To[g].apply(null,h)):o.easingImpl=To[g]}var w=o.easingImpl,b;if(o.duration===0?b=1:b=(r-l)/o.duration,o.applying&&(b=o.progress),b<0?b=0:b>1&&(b=1),o.delay==null){var d=o.startPosition,p=o.position;if(p&&a&&!t.locked()){var m={};Za(d.x,p.x)&&(m.x=ca(d.x,p.x,b,w)),Za(d.y,p.y)&&(m.y=ca(d.y,p.y,b,w)),t.position(m)}var y=o.startPan,x=o.pan,E=i.pan,C=x!=null&&n;C&&(Za(y.x,x.x)&&(E.x=ca(y.x,x.x,b,w)),Za(y.y,x.y)&&(E.y=ca(y.y,x.y,b,w)),t.emit("pan"));var T=o.startZoom,S=o.zoom,P=S!=null&&n;P&&(Za(T,S)&&(i.zoom=Di(i.minZoom,ca(T,S,b,w),i.maxZoom)),t.emit("zoom")),(C||P)&&t.emit("viewport");var R=o.style;if(R&&R.length>0&&a){for(var A=0;A<R.length;A++){var M=R[A],V=M.name,G=M,B=o.startStyle[V],k=c.properties[B.name],O=ca(B,G,b,w,k);c.overrideBypass(t,V,O)}t.emit("style")}}return o.progress=b,b}function Za(t,e){return t==null||e==null?!1:ye(t)&&ye(e)?!0:!!(t&&e)}function aE(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Uv(t,e){var r=e._private.aniEles,n=[];function a(c,f){var v=c._private,g=v.animation.current,h=v.animation.queue,w=!1;if(g.length===0){var b=h.shift();b&&g.push(b)}for(var d=function(E){for(var C=E.length-1;C>=0;C--){var T=E[C];T()}E.splice(0,E.length)},p=g.length-1;p>=0;p--){var m=g[p],y=m._private;if(y.stopped){g.splice(p,1),y.hooked=!1,y.playing=!1,y.started=!1,d(y.frames);continue}!y.playing&&!y.applying||(y.playing&&y.applying&&(y.applying=!1),y.started||aE(c,m,t),nE(c,m,t,f),y.applying&&(y.applying=!1),d(y.frames),y.step!=null&&y.step(t),m.completed()&&(g.splice(p,1),y.hooked=!1,y.playing=!1,y.started=!1,d(y.completes)),w=!0)}return!f&&g.length===0&&h.length===0&&n.push(c),w}for(var i=!1,o=0;o<r.length;o++){var s=r[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var iE={animate:je.animate(),animation:je.animation(),animated:je.animated(),clearQueue:je.clearQueue(),delay:je.delay(),delayAnimation:je.delayAnimation(),stop:je.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Go(function(i){Uv(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Uv(o,e)},n.beforeRenderPriorities.animations):r()}},oE={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&zi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},fo=function(e){return Te(e)?new Sn(e):e},tm={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ts(oE,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,fo(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,fo(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,fo(r),n),this},once:function(e,r,n){return this.emitter().one(e,fo(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};je.eventAliasesOn(tm);var ac={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};ac.jpeg=ac.jpg;var Do={layout:function(e){var r=this;if(e==null){st("Layout options must be specified to make a layout");return}if(e.name==null){st("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){st("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Te(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(Be({},e,{cy:r,eles:i}));return o}};Do.createLayout=Do.makeLayout=Do.layout;var sE={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},lE=Ot({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),ic={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){st("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ye("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=lE(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};ic.invalidateDimensions=ic.resize;var Po={collection:function(e,r){return Te(e)?this.$(e):lr(e)?e.collection():Je(e)?(r||(r={}),new _t(this,e,r.unique,r.removed)):new _t(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Po.elements=Po.filter=Po.$;var kt={},di="t",uE="f";kt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};kt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c=t[l]===di,f=e[l]===di,v=c!==f,g=u.mappedProperties.length>0;if(v||f&&g){var h=void 0;v&&g||v?h=u.properties:g&&(h=u.mappedProperties);for(var w=0;w<h.length;w++){for(var b=h[w],d=b.name,p=!1,m=l+1;m<r.length;m++){var y=r[m],x=e[m]===di;if(x&&(p=y.properties[b.name]!=null,p))break}!s[d]&&!p&&(s[d]=!0,o.push(d))}}}return n[a]=o,o};kt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=di:r+=uE}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};kt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===di;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};kt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],c=r.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,v=f.fnValue=u.value(r);if(v===f.prevFnValue)continue}var g=i[l]={prev:c};n.applyParsedProperty(r,u),g.next=r.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};kt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(D,N,j){return r.getPropertiesHash(D,N,j)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var c=a[u];e.styleKeys[c]=[Un,ma]}for(var f=function(D,N){return e.styleKeys[N][0]=Ei(D,e.styleKeys[N][0])},v=function(D,N){return e.styleKeys[N][1]=Si(D,e.styleKeys[N][1])},g=function(D,N){f(D,N),v(D,N)},h=function(D,N){for(var j=0;j<D.length;j++){var ne=D.charCodeAt(j);f(ne,N),v(ne,N)}},w=2e9,b=function(D){return-128<D&&D<128&&Math.floor(D)!==D?w-(D*1024|0):D},d=0;d<n.length;d++){var p=n[d],m=l[p];if(m!=null){var y=this.properties[p],x=y.type,E=y.groupKey,C=void 0;y.hashOverride!=null?C=y.hashOverride(t,m):m.pfValue!=null&&(C=m.pfValue);var T=y.enums==null?m.value:null,S=C!=null,P=T!=null,R=S||P,A=m.units;if(x.number&&R&&!x.multiple){var M=S?C:T;g(b(M),E),!S&&A!=null&&h(A,E)}else h(m.strValue,E)}}for(var V=[Un,ma],G=0;G<a.length;G++){var B=a[G],k=e.styleKeys[B];V[0]=Ei(k[0],V[0]),V[1]=Si(k[1],V[1])}e.styleKey=k1(V[0],V[1]);var O=e.styleKeys;e.labelDimsKey=sn(O.labelDimensions);var z=i(t,["label"],O.labelDimensions);if(e.labelKey=sn(z),e.labelStyleKey=sn(no(O.commonLabel,z)),!s){var H=i(t,["source-label"],O.labelDimensions);e.sourceLabelKey=sn(H),e.sourceLabelStyleKey=sn(no(O.commonLabel,H));var U=i(t,["target-label"],O.labelDimensions);e.targetLabelKey=sn(U),e.targetLabelStyleKey=sn(no(O.commonLabel,U))}if(s){var _=e.styleKeys,q=_.nodeBody,I=_.nodeBorder,F=_.nodeOutline,$=_.backgroundImage,K=_.compound,ee=_.pie,Y=_.stripe,W=[q,I,F,$,K,ee,Y].filter(function(J){return J!=null}).reduce(no,[Un,ma]);e.nodeKey=sn(W),e.hasPie=ee!=null&&ee[0]!==Un&&ee[1]!==ma,e.hasStripe=Y!=null&&Y[0]!==Un&&Y[1]!==ma}return o!==e.styleKey};kt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};kt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],c=u&&u.bypass,f=t._private,v="mapping",g=function(q){return q==null?null:q.pfValue!=null?q.pfValue:q.value},h=function(){var q=g(u),I=g(n);r.checkTriggers(t,n.name,q,I)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,h(),!0):!1:(h(),!0);var w=function(){Ye("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var b=n.field.split("."),d=f.data,p=0;p<b.length&&d;p++){var m=b[p];d=d[m]}if(d==null)return w(),!1;var y;if(ye(d)){var x=n.fieldMax-n.fieldMin;x===0?y=0:y=(d-n.fieldMin)/x}else return Ye("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+d+"` for `"+t.id()+"` is non-numeric)"),!1;if(y<0?y=0:y>1&&(y=1),s.color){var E=n.valueMin[0],C=n.valueMax[0],T=n.valueMin[1],S=n.valueMax[1],P=n.valueMin[2],R=n.valueMax[2],A=n.valueMin[3]==null?1:n.valueMin[3],M=n.valueMax[3]==null?1:n.valueMax[3],V=[Math.round(E+(C-E)*y),Math.round(T+(S-T)*y),Math.round(P+(R-P)*y),Math.round(A+(M-A)*y)];i={bypass:n.bypass,name:n.name,value:V,strValue:"rgb("+V[0]+", "+V[1]+", "+V[2]+")"}}else if(s.number){var G=n.valueMin+(n.valueMax-n.valueMin)*y;i=this.parse(n.name,G,n.bypass,v)}else return!1;if(!i)return w(),!1;i.mapping=n,n=i;break}case o.data:{for(var B=n.field.split("."),k=f.data,O=0;O<B.length&&k;O++){var z=B[O];k=k[z]}if(k!=null&&(i=this.parse(n.name,k,n.bypass,v)),!i)return w(),!1;i.mapping=n,n=i;break}case o.fn:{var H=n.value,U=n.fnValue!=null?n.fnValue:H(t);if(n.prevFnValue=U,U==null)return Ye("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,U,n.bypass,v),!i)return Ye("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Mr(n),n=i;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):c?u.bypassed=n:a[n.name]=n,h(),!0};kt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};kt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};kt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var c=a[u],f=t.pstyle(c),v=e[c];if(v){var g=v.prev,h=g,w=v.next!=null?v.next:f,b=!1,d=void 0,p=1e-6;h&&(ye(h.pfValue)&&ye(w.pfValue)?(b=w.pfValue-h.pfValue,d=h.pfValue+p*b):ye(h.value)&&ye(w.value)?(b=w.value-h.value,d=h.value+p*b):Je(h.value)&&Je(w.value)&&(b=h.value[0]!==w.value[0]||h.value[1]!==w.value[1]||h.value[2]!==w.value[2],d=h.strValue),b&&(s[c]=w.strValue,this.applyBypass(t,c,d),l=!0))}}if(!l)return;n.transitioning=!0,new za(function(m){o>0?t.delayAnimation(o).play().promise().then(m):m()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};kt.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);t.removed()||s!=null&&s(r,n,t)&&i(o)};kt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};kt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};kt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};kt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};kt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var Ui={};Ui.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,c=this.parse(u,r,!0);c&&i.push(c)}}else if(Te(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(Ue(e)){var v=e;n=r;for(var g=Object.keys(v),h=0;h<g.length;h++){var w=g[h],b=v[w];if(b===void 0&&(b=v[gs(w)]),b!==void 0){var d=this.parse(w,b,!0);d&&i.push(d)}}}else return!1;if(i.length===0)return!1;for(var p=!1,m=0;m<t.length;m++){for(var y=t[m],x={},E=void 0,C=0;C<i.length;C++){var T=i[C];if(n){var S=y.pstyle(T.name);E=x[T.name]={prev:S}}p=this.applyParsedProperty(y,Mr(T))||p,n&&(E.next=y.pstyle(T.name))}p&&this.updateStyleHints(y),n&&this.updateTransitions(y,x,o)}return p};Ui.overrideBypass=function(t,e,r){e=Ic(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};Ui.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Ui.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],c=i.pstyle(u.name);if(!(!c||!c.bypass)){var f="",v=this.parse(l,f,!0),g=o[u.name]={prev:c};this.applyParsedProperty(i,v),g.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var Xc={};Xc.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Xc.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var _r={};_r.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};_r.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[gs(i.name)]=o)}return n}};_r.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};_r.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&s!=null&&ye(s)){var c=t.cy().zoom(),f=function(b){return b*c},v=function(b,d){return f(b)+d},g=Je(s),h=g?l.every(function(w){return w!=null}):l!=null;return h?g?s.map(function(w,b){return v(w,l[b])}).join(" "):v(s,l):g?s.map(function(w){return Te(w)?w:""+f(w)}).join(" "):""+f(s)}else if(u!=null)return u}return null}};_r.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(Ue(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};_r.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[Ic(s)],c=this.parse(u.name,l);c&&r.push(c)}return r};_r.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Ei(s,n[0]),n[1]=Si(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=Ei(s,n[0]),n[1]=Si(s,n[1]);return n};_r.getPropertiesHash=_r.getNonDefaultPropertiesHash;var ks={};ks.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};ks.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};ks.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var Zc={};Zc.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ye("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var v=new Sn(f);if(v.invalid){Ye("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var g=c[2],h=!1;i=g;for(var w=[];;){var b=i.match(/^\s*$/);if(b)break;var d=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!d){Ye("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),h=!0;break}o=d[0];var p=d[1],m=d[2],y=e.properties[p];if(!y){Ye("Skipping property: Invalid property name in: "+o),l();continue}var x=r.parse(p,m);if(!x){Ye("Skipping property: Invalid property definition in: "+o),l();continue}w.push({name:p,val:m}),l()}if(h){s();break}r.selector(f);for(var E=0;E<w.length;E++){var C=w[E];r.css(C.name,C.val)}s()}return r};Zc.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var gt={};(function(){var t=wt,e=o1,r=l1,n=u1,a=c1,i=function(J){return"^"+J+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(J){var D=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+J+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+D+")\\s*\\,\\s*("+D+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];gt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(J,D){switch(J.length){case 2:return D[0]!=="deg"&&D[0]!=="rad"&&D[1]!=="deg"&&D[1]!=="rad";case 1:return Te(J[0])||D[0]==="deg"||D[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(J){var D=J.length;return D===1||D===2||D===4}}};var l={zeroNonZero:function(J,D){return(J==null||D==null)&&J!==D||J==0&&D!=0?!0:J!=0&&D==0},any:function(J,D){return J!=D},emptyNonEmpty:function(J,D){var N=xn(J),j=xn(D);return N&&!j||!N&&j}},u=gt.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],w=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],b=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(J,D,N){return J===D?!1:N.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],d=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],p=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],m=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],y=function(J,D){return D.value==="label"?-J.poolIndex():D.pfValue},x=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:y},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:y},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],E=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],C=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],T=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],S=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],P=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(J,D){return J===D?!1:J==="bezier"||D==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],R=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],A=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],M=[];gt.pieBackgroundN=16,M.push({name:"pie-size",type:u.sizeMaybePercent}),M.push({name:"pie-hole",type:u.sizeMaybePercent}),M.push({name:"pie-start-angle",type:u.angle});for(var V=1;V<=gt.pieBackgroundN;V++)M.push({name:"pie-"+V+"-background-color",type:u.color}),M.push({name:"pie-"+V+"-background-size",type:u.percent}),M.push({name:"pie-"+V+"-background-opacity",type:u.zeroOneNumber});var G=[];gt.stripeBackgroundN=16,G.push({name:"stripe-size",type:u.sizeMaybePercent}),G.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var B=1;B<=gt.stripeBackgroundN;B++)G.push({name:"stripe-"+B+"-background-color",type:u.color}),G.push({name:"stripe-"+B+"-background-size",type:u.percent}),G.push({name:"stripe-"+B+"-background-opacity",type:u.zeroOneNumber});var k=[],O=gt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(W){O.forEach(function(J){var D=J+"-"+W.name,N=W.type,j=W.triggersBounds;k.push({name:D,type:N,triggersBounds:j})})},{});var z=gt.properties=[].concat(w,m,b,d,p,R,h,g,c,f,v,x,E,C,T,M,G,S,P,k,A),H=gt.propertyGroups={behavior:w,transition:m,visibility:b,overlay:d,underlay:p,ghost:R,commonLabel:h,labelDimensions:g,mainLabel:c,sourceLabel:f,targetLabel:v,nodeBody:x,nodeBorder:E,nodeOutline:C,backgroundImage:T,pie:M,stripe:G,compound:S,edgeLine:P,edgeArrow:k,core:A},U=gt.propertyGroupNames={},_=gt.propertyGroupKeys=Object.keys(H);_.forEach(function(W){U[W]=H[W].map(function(J){return J.name}),H[W].forEach(function(J){return J.groupKey=W})});var q=gt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];gt.propertyNames=z.map(function(W){return W.name});for(var I=0;I<z.length;I++){var F=z[I];z[F.name]=F}for(var $=0;$<q.length;$++){var K=q[$],ee=z[K.pointsTo],Y={name:K.name,alias:!0,pointsTo:ee};z.push(Y),z[K.name]=Y}})();gt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};gt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Be({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=gt.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),v=u.value;l[f]=v}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=gt.stripeBackgroundN;c++){var f=u.name.replace("{{i}}",c),v=u.value;l[f]=v}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return gt.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,v=u.value;l[f]=v}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};gt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var As={};As.parse=function(t,e,r,n){var a=this;if(lt(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,l=vp(t,s,o,i),u=a.propCache=a.propCache||[],c;return(c=u[l])||(c=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Mr(c),c&&(c.value=Mr(c.value))),c};As.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ye("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ye("The style value of `label` is deprecated for `"+a.name+"`"),a};As.parseImpl=function(t,e,r,n){var a=this;t=Ic(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=Te(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(lt(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var v=s.data;return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var g=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var w=this.parse(t,f[5]);if(!w||w.mapped)return!1;if(h.pfValue===w.pfValue||h.strValue===w.strValue)return Ye("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(u.color){var b=h.value,d=w.value,p=b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&(b[3]===d[3]||(b[3]==null||b[3]===1)&&(d[3]==null||d[3]===1));if(p)return!1}return{name:t,value:f,strValue:""+e,mapped:g,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:w.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var m;if(l?m=e.split(/\s+/):Je(e)?m=e:m=[e],u.evenMultiple&&m.length%2!==0)return null;for(var y=[],x=[],E=[],C="",T=!1,S=0;S<m.length;S++){var P=a.parse(t,m[S],r,"multiple");T=T||Te(P.value),y.push(P.value),E.push(P.pfValue!=null?P.pfValue:P.value),x.push(P.units),C+=(S>0?" ":"")+P.strValue}return u.validate&&!u.validate(y,x)?null:u.singleEnum&&T?y.length===1&&Te(y[0])?{name:t,value:y[0],strValue:y[0],bypass:r}:null:{name:t,value:y,pfValue:E,strValue:C,bypass:r,units:x}}var R=function(){for(var Y=0;Y<u.enums.length;Y++){var W=u.enums[Y];if(W===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var A,M="px";if(u.units&&(A=u.units),u.implicitUnits&&(M=u.implicitUnits),!u.unitless)if(l){var V="px|em"+(u.allowPercent?"|\\%":"");A&&(V=A);var G=e.match("^("+wt+")("+V+")?$");G&&(e=G[1],A=G[2]||M)}else(!A||u.implicitUnits)&&(A=M);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,R();if(u.integer&&!Jb(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var B={name:t,value:e,strValue:""+e+(A||""),units:A,bypass:r};return u.unitless||A!=="px"&&A!=="em"?B.pfValue=e:B.pfValue=A==="px"||!A?e:this.getEmSizeInPixels()*e,(A==="ms"||A==="s")&&(B.pfValue=A==="ms"?e:1e3*e),(A==="deg"||A==="rad")&&(B.pfValue=A==="rad"?e:ow(e)),A==="%"&&(B.pfValue=e/100),B}else if(u.propList){var k=[],O=""+e;if(O!=="none"){for(var z=O.split(/\s*,\s*|\s+/),H=0;H<z.length;H++){var U=z[H].trim();a.properties[U]?k.push(U):Ye("`"+U+"` is not a valid property name")}if(k.length===0)return null}return{name:t,value:k,strValue:k.length===0?"none":k.join(" "),bypass:r}}else if(u.color){var _=op(e);return _?{name:t,value:_,pfValue:_,strValue:"rgb("+_[0]+","+_[1]+","+_[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var q=R();if(q)return q}for(var I=u.regexes?u.regexes:[u.regex],F=0;F<I.length;F++){var $=new RegExp(I[F]),K=$.exec(e);if(K)return{name:t,value:u.singleRegexMatchValue?K[1]:K,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?R():null};var Dt=function(e){if(!(this instanceof Dt))return new Dt(e);if(!_c(e)){st("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Gt=Dt.prototype;Gt.instanceString=function(){return"style"};Gt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Gt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Gt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Gt.selector=function(t){var e=t==="core"?null:new Sn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Gt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[gs(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Gt.style=Gt.css;Gt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Gt.append=function(t){return np(t)?t.appendToStyle(this):Je(t)?this.appendFromJson(t):Te(t)&&this.appendFromString(t),this};Dt.fromJson=function(t,e){var r=new Dt(t);return r.fromJson(e),r};Dt.fromString=function(t,e){return new Dt(t).fromString(e)};[kt,Ui,Xc,_r,ks,Zc,gt,As].forEach(function(t){Be(Gt,t)});Dt.types=Gt.types;Dt.properties=Gt.properties;Dt.propertyGroups=Gt.propertyGroups;Dt.propertyGroupNames=Gt.propertyGroupNames;Dt.propertyGroupKeys=Gt.propertyGroupKeys;var cE={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return np(e)?r.style=e.generateStyle(this):Je(e)?r.style=Dt.fromJson(this,e):Te(e)?r.style=Dt.fromString(this,e):r.style=Dt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},fE="single",ta={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=fE),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(Te(e[0]))return n=e[0],r[n];if(Ue(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,ye(o)&&(r.x=o),ye(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ye(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ue(e)&&(s=n[0],l=s.x,u=s.y,ye(l)&&(a.x+=l),ye(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&ye(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ye(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Te(e)){var a=e;e=this.$(a)}else if(r1(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else lr(e)||(e=this.mutableElements());if(!(lr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(r=ye(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*r)/n.w,(s-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ye(e)&&ye(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ye(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ye(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),ye(e)?o=e:Ue(e)&&(o=e.level,e.position!=null?i=ys(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!ye(o)||o===a||i!=null&&(!ye(i.x)||!ye(i.y)))return null;if(i!=null){var l=n,u=a,c=o,f={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(ye(e.zoom)||(n=!1),Ue(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;ye(u.x)&&(r.pan.x=u.x,s=!1),ye(u.y)&&(r.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Te(e)){var n=e;e=this.mutableElements().filter(n)}else lr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ta.centre=ta.center;ta.autolockNodes=ta.autolock;ta.autoungrabifyNodes=ta.autoungrabify;var Bi={data:je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Bi.attr=Bi.data;Bi.removeAttr=Bi.removeData;var Ri=function(e){var r=this;e=Be({},e);var n=e.container;n&&!$o(n)&&$o(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=yt!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Be({name:o?"grid":"null"},s.layout),s.renderer=Be({name:o?"canvas":"null"},s.renderer);var l=function(h,w,b){return w!==void 0?w:b!==void 0?b:h},u=this._private={container:n,ready:!1,options:s,elements:new _t(this),listeners:[],aniEles:new _t(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:ye(s.zoom)?s.zoom:1,pan:{x:Ue(s.pan)&&ye(s.pan.x)?s.pan.x:0,y:Ue(s.pan)&&ye(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,w){var b=h.some(n1);if(b)return za.all(h).then(w);w(h)};u.styleEnabled&&r.setStyle([]);var f=Be({},s,s.renderer);r.initRenderer(f);var v=function(h,w,b){r.notifications(!1);var d=r.mutableElements();d.length>0&&d.remove(),h!=null&&(Ue(h)||Je(h))&&r.add(h),r.one("layoutready",function(m){r.notifications(!0),r.emit(m),r.one("load",w),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",b),r.emit("done")});var p=Be({},r._private.options.layout);p.eles=r.elements(),r.layout(p).run()};c([s.style,s.elements],function(g){var h=g[0],w=g[1];u.styleEnabled&&r.style().append(h),v(w,function(){r.startAnimationLoop(),u.ready=!0,lt(s.ready)&&r.on("ready",s.ready);for(var b=0;b<i.length;b++){var d=i[b];r.on("ready",d)}a&&(a.readies=[]),r.emit("ready")},s.done)})},Yo=Ri.prototype;Be(Yo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return yt;var r=this._private.container.ownerDocument;return r===void 0||r==null?yt:r.defaultView||yt},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!$o(e)&&$o(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Be({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Mr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(y){return r.getElementById(y.id())};if(Ue(e)){if(r.startBatch(),e.elements){var o={},s=function(y,x){for(var E=[],C=[],T=0;T<y.length;T++){var S=y[T];if(!S.data.id){Ye("cy.json() cannot handle elements without an ID attribute");continue}var P=""+S.data.id,R=r.getElementById(P);o[P]=!0,R.length!==0?C.push({ele:R,json:S}):(x&&(S.group=x),E.push(S))}r.add(E);for(var A=0;A<C.length;A++){var M=C[A],V=M.ele,G=M.json;V.json(G)}};if(Je(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];Je(f)&&s(f,c)}var v=r.collection();a.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?v.merge(m):m.remove()}),v.forEach(function(m){return m.children().move({parent:null})}),v.forEach(function(m){return i(m).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<g.length;h++){var w=g[h];e[w]!=null&&r[w](e[w])}return r.endBatch(),this}else{var b=!!e,d={};b?d.elements=this.elements().map(function(m){return m.json()}):(d.elements={},a.forEach(function(m){var y=m.group();d.elements[y]||(d.elements[y]=[]),d.elements[y].push(m.json())})),this._private.styleEnabled&&(d.style=r.style().json()),d.data=Mr(r.data());var p=n.options;return d.zoomingEnabled=n.zoomingEnabled,d.userZoomingEnabled=n.userZoomingEnabled,d.zoom=n.zoom,d.minZoom=n.minZoom,d.maxZoom=n.maxZoom,d.panningEnabled=n.panningEnabled,d.userPanningEnabled=n.userPanningEnabled,d.pan=Mr(n.pan),d.boxSelectionEnabled=n.boxSelectionEnabled,d.renderer=Mr(p.renderer),d.hideEdgesOnViewport=p.hideEdgesOnViewport,d.textureOnViewport=p.textureOnViewport,d.wheelSensitivity=p.wheelSensitivity,d.motionBlur=p.motionBlur,d.multiClickDebounceTime=p.multiClickDebounceTime,d}}});Yo.$id=Yo.getElementById;[eE,iE,tm,ac,Do,sE,ic,Po,cE,ta,Bi].forEach(function(t){Be(Yo,t)});var dE={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},vE={maximal:!1,acyclic:!1},fa=function(e){return e.scratch("breadthfirst")},Wv=function(e,r){return e.scratch("breadthfirst",r)};function rm(t){this.options=Be({},dE,vE,t)}rm.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(le){return le.isChildless()}),a=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,l=e.extent(),u=ir(s?t.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),c;if(lr(t.roots))c=t.roots;else if(Je(t.roots)){for(var f=[],v=0;v<t.roots.length;v++){var g=t.roots[v],h=e.getElementById(g);f.push(h)}c=e.collection(f)}else if(Te(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var w=r.components();c=e.collection();for(var b=function(){var X=w[d],Q=X.maxDegree(!1),Z=X.filter(function(fe){return fe.degree(!1)===Q});c=c.add(Z)},d=0;d<w.length;d++)b()}var p=[],m={},y=function(X,Q){p[Q]==null&&(p[Q]=[]);var Z=p[Q].length;p[Q].push(X),Wv(X,{index:Z,depth:Q})},x=function(X,Q){var Z=fa(X),fe=Z.depth,oe=Z.index;p[fe][oe]=null,X.isChildless()&&y(X,Q)};a.bfs({roots:c,directed:t.directed,visit:function(X,Q,Z,fe,oe){var he=X[0],pe=he.id();he.isChildless()&&y(he,oe),m[pe]=!0}});for(var E=[],C=0;C<n.length;C++){var T=n[C];m[T.id()]||E.push(T)}var S=function(X){for(var Q=p[X],Z=0;Z<Q.length;Z++){var fe=Q[Z];if(fe==null){Q.splice(Z,1),Z--;continue}Wv(fe,{depth:X,index:Z})}},P=function(X,Q){for(var Z=fa(X),fe=X.incomers().filter(function(ke){return ke.isNode()&&r.has(ke)}),oe=-1,he=X.id(),pe=0;pe<fe.length;pe++){var ge=fe[pe],Ee=fa(ge);oe=Math.max(oe,Ee.depth)}if(Z.depth<=oe){if(!t.acyclic&&Q[he])return null;var we=oe+1;return x(X,we),Q[he]=we,!0}return!1};if(i&&o){var R=[],A={},M=function(X){return R.push(X)},V=function(){return R.shift()};for(n.forEach(function(le){return R.push(le)});R.length>0;){var G=V(),B=P(G,A);if(B)G.outgoers().filter(function(le){return le.isNode()&&r.has(le)}).forEach(M);else if(B===null){Ye("Detected double maximal shift for node `"+G.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var k=0;if(t.avoidOverlap)for(var O=0;O<n.length;O++){var z=n[O],H=z.layoutDimensions(t),U=H.w,_=H.h;k=Math.max(k,U,_)}var q={},I=function(X){if(q[X.id()])return q[X.id()];for(var Q=fa(X).depth,Z=X.neighborhood(),fe=0,oe=0,he=0;he<Z.length;he++){var pe=Z[he];if(!(pe.isEdge()||pe.isParent()||!n.has(pe))){var ge=fa(pe);if(ge!=null){var Ee=ge.index,we=ge.depth;if(!(Ee==null||we==null)){var ke=p[we].length;we<Q&&(fe+=Ee/ke,oe++)}}}}return oe=Math.max(1,oe),fe=fe/oe,oe===0&&(fe=0),q[X.id()]=fe,fe},F=function(X,Q){var Z=I(X),fe=I(Q),oe=Z-fe;return oe===0?ip(X.id(),Q.id()):oe};t.depthSort!==void 0&&(F=t.depthSort);for(var $=p.length,K=0;K<$;K++)p[K].sort(F),S(K);for(var ee=[],Y=0;Y<E.length;Y++)ee.push(E[Y]);var W=function(){for(var X=0;X<$;X++)S(X)};ee.length&&(p.unshift(ee),$=p.length,W());for(var J=0,D=0;D<$;D++)J=Math.max(p[D].length,J);var N={x:u.x1+u.w/2,y:u.y1+u.h/2},j=n.reduce(function(le,X){return function(Q){return{w:le.w===-1?Q.w:(le.w+Q.w)/2,h:le.h===-1?Q.h:(le.h+Q.h)/2}}(X.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ne=Math.max($===1?0:s?(u.h-t.padding*2-j.h)/($-1):(u.h-t.padding*2-j.h)/($+1),k),ce=p.reduce(function(le,X){return Math.max(le,X.length)},0),ie=function(X){var Q=fa(X),Z=Q.depth,fe=Q.index;if(t.circle){var oe=Math.min(u.w/2/$,u.h/2/$);oe=Math.max(oe,k);var he=oe*Z+oe-($>0&&p[0].length<=3?oe/2:0),pe=2*Math.PI/p[Z].length*fe;return Z===0&&p[0].length===1&&(he=1),{x:N.x+he*Math.cos(pe),y:N.y+he*Math.sin(pe)}}else{var ge=p[Z].length,Ee=Math.max(ge===1?0:s?(u.w-t.padding*2-j.w)/((t.grid?ce:ge)-1):(u.w-t.padding*2-j.w)/((t.grid?ce:ge)+1),k),we={x:N.x+(fe+1-(ge+1)/2)*Ee,y:N.y+(Z+1-($+1)/2)*ne};return we}};return r.nodes().layoutPositions(this,t,ie),this};var hE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function nm(t){this.options=Be({},hE,t)}nm.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=ir(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c,f=0,v=0;v<i.length;v++){var g=i[v],h=g.layoutDimensions(e),w=h.w,b=h.h;f=Math.max(f,w,b)}if(ye(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var d=Math.cos(u)-Math.cos(0),p=Math.sin(u)-Math.sin(0),m=Math.sqrt(f*f/(d*d+p*p));c=Math.max(m,c)}var y=function(E,C){var T=e.startAngle+C*u*(a?1:-1),S=c*Math.cos(T),P=c*Math.sin(T),R={x:s.x+S,y:s.y+P};return R};return n.nodes().layoutPositions(this,e,y),this};var gE={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function am(t){this.options=Be({},gE,t)}am.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=ir(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<i.length;c++){var f=i[c],v=void 0;v=e.concentric(f),l.push({value:v,node:f}),f._private.scratch.concentric=v}i.updateStyle();for(var g=0;g<i.length;g++){var h=i[g],w=h.layoutDimensions(e);u=Math.max(u,w.w,w.h)}l.sort(function(j,ne){return ne.value-j.value});for(var b=e.levelWidth(i),d=[[]],p=d[0],m=0;m<l.length;m++){var y=l[m];if(p.length>0){var x=Math.abs(p[0].value-y.value);x>=b&&(p=[],d.push(p))}p.push(y)}var E=u+e.minNodeSpacing;if(!e.avoidOverlap){var C=d.length>0&&d[0].length>1,T=Math.min(o.w,o.h)/2-E,S=T/(d.length+C?1:0);E=Math.min(E,S)}for(var P=0,R=0;R<d.length;R++){var A=d[R],M=e.sweep===void 0?2*Math.PI-2*Math.PI/A.length:e.sweep,V=A.dTheta=M/Math.max(1,A.length-1);if(A.length>1&&e.avoidOverlap){var G=Math.cos(V)-Math.cos(0),B=Math.sin(V)-Math.sin(0),k=Math.sqrt(E*E/(G*G+B*B));P=Math.max(k,P)}A.r=P,P+=E}if(e.equidistant){for(var O=0,z=0,H=0;H<d.length;H++){var U=d[H],_=U.r-z;O=Math.max(O,_)}z=0;for(var q=0;q<d.length;q++){var I=d[q];q===0&&(z=I.r),I.r=z,z+=O}}for(var F={},$=0;$<d.length;$++)for(var K=d[$],ee=K.dTheta,Y=K.r,W=0;W<K.length;W++){var J=K[W],D=e.startAngle+(r?1:-1)*ee*W,N={x:s.x+Y*Math.cos(D),y:s.y+Y*Math.sin(D)};F[J.node.id()]=N}return a.nodes().layoutPositions(this,e,function(j){var ne=j.id();return F[ne]}),this};var gu,pE={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Bs(t){this.options=Be({},pE,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(n)}Bs.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?gu=!0:gu=!1;var n=mE(e,r,t);gu&&bE(n),t.randomize&&wE(n);var a=Zr(),i=function(){xE(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(v){return!(r.stopped||v>=t.numIter||(CE(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var v=t.eles.nodes(),g=om(n,t,v);v.layoutPositions(r,t,g)}},l=0,u=!0;if(t.animate===!0){var c=function(){for(var v=0;u&&v<t.refresh;)u=o(l),l++,v++;if(!u)jv(n,t),s();else{var g=Zr();g-a>=t.animationThreshold&&i(),Go(c)}};c()}else{for(;u;)u=o(l),l++;jv(n,t),s()}return this};Bs.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Bs.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var mE=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=ir(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var f=l[c],v=0;v<f.length;v++){var g=f[v];u[g.id()]=c}for(var c=0;c<s.nodeSize;c++){var h=i[c],w=h.layoutDimensions(n),b={};b.isLocked=h.locked(),b.id=h.data("id"),b.parentId=h.data("parent"),b.cmptId=u[h.id()],b.children=[],b.positionX=h.position("x"),b.positionY=h.position("y"),b.offsetX=0,b.offsetY=0,b.height=w.w,b.width=w.h,b.maxX=b.positionX+b.width/2,b.minX=b.positionX-b.width/2,b.maxY=b.positionY+b.height/2,b.minY=b.positionY-b.height/2,b.padLeft=parseFloat(h.style("padding")),b.padRight=parseFloat(h.style("padding")),b.padTop=parseFloat(h.style("padding")),b.padBottom=parseFloat(h.style("padding")),b.nodeRepulsion=lt(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,s.layoutNodes.push(b),s.idToIndex[b.id]=c}for(var d=[],p=0,m=-1,y=[],c=0;c<s.nodeSize;c++){var h=s.layoutNodes[c],x=h.parentId;x!=null?s.layoutNodes[s.idToIndex[x]].children.push(h.id):(d[++m]=h.id,y.push(h.id))}for(s.graphSet.push(y);p<=m;){var E=d[p++],C=s.idToIndex[E],g=s.layoutNodes[C],T=g.children;if(T.length>0){s.graphSet.push(T);for(var c=0;c<T.length;c++)d[++m]=T[c]}}for(var c=0;c<s.graphSet.length;c++)for(var S=s.graphSet[c],v=0;v<S.length;v++){var P=s.idToIndex[S[v]];s.indexToGraph[P]=c}for(var c=0;c<s.edgeSize;c++){var R=a[c],A={};A.id=R.data("id"),A.sourceId=R.data("source"),A.targetId=R.data("target");var M=lt(n.idealEdgeLength)?n.idealEdgeLength(R):n.idealEdgeLength,V=lt(n.edgeElasticity)?n.edgeElasticity(R):n.edgeElasticity,G=s.idToIndex[A.sourceId],B=s.idToIndex[A.targetId],k=s.indexToGraph[G],O=s.indexToGraph[B];if(k!=O){for(var z=yE(A.sourceId,A.targetId,s),H=s.graphSet[z],U=0,b=s.layoutNodes[G];H.indexOf(b.id)===-1;)b=s.layoutNodes[s.idToIndex[b.parentId]],U++;for(b=s.layoutNodes[B];H.indexOf(b.id)===-1;)b=s.layoutNodes[s.idToIndex[b.parentId]],U++;M*=U*n.nestingFactor}A.idealLength=M,A.elasticity=V,s.layoutEdges.push(A)}return s},yE=function(e,r,n){var a=im(e,r,0,n);return 2>a.count?0:a.graph},im=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],c=a.layoutNodes[u].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],v=im(e,r,f,a);if(v.count!==0)if(v.count===1){if(o++,o===2)break}else return v}}return{count:o,graph:n}},bE,wE=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},om=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var u=(l.positionX-i.x1)/i.w,c=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+c*a.h}}else return{x:l.positionX,y:l.positionY}}},xE=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=om(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},CE=function(e,r,n){EE(e,r),DE(e),PE(e,r),kE(e),AE(e)},EE=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];SE(s,u,e,r)}},Kv=function(e){return-1+2*e*Math.random()},SE=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;s===0&&l===0&&(s=Kv(u),l=Kv(u));var c=TE(e,r,s,l);if(c>0)var f=a.nodeOverlap*c,v=Math.sqrt(s*s+l*l),g=f*s/v,h=f*l/v;else var w=Xo(e,s,l),b=Xo(r,-1*s,-1*l),d=b.x-w.x,p=b.y-w.y,m=d*d+p*p,v=Math.sqrt(m),f=(e.nodeRepulsion+r.nodeRepulsion)/m,g=f*d/v,h=f*p/v;e.isLocked||(e.offsetX-=g,e.offsetY-=h),r.isLocked||(r.offsetX+=g,r.offsetY+=h)}},TE=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Xo=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/r,u=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*u<=l&&l<=u?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*u<=l&&l<=u?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(l<=-1*u||l>=u)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},DE=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(!(u===0&&c===0)){var f=Xo(o,u,c),v=Xo(l,-1*u,-1*c),g=v.x-f.x,h=v.y-f.y,w=Math.sqrt(g*g+h*h),b=Math.pow(a.idealLength-w,2)/a.elasticity;if(w!==0)var d=b*g/w,p=b*h/w;else var d=0,p=0;o.isLocked||(o.offsetX+=d,o.offsetY+=p),l.isLocked||(l.offsetX-=d,l.offsetY-=p)}}},PE=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;for(var f=0;f<o;f++){var v=e.layoutNodes[e.idToIndex[i[f]]];if(!v.isLocked){var g=s-v.positionX,h=l-v.positionY,w=Math.sqrt(g*g+h*h);if(w>n){var b=r.gravity*g/w,d=r.gravity*h/w;v.offsetX+=b,v.offsetY+=d}}}}},kE=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,v=0;v<u.length;v++){var g=e.layoutNodes[e.idToIndex[u[v]]];g.offsetX+=c,g.offsetY+=f,n[++i]=u[v]}l.offsetX=0,l.offsetY=0}}},AE=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=BE(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,sm(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},BE=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},sm=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return sm(a,r)}},jv=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var v=c[f];c.x1=Math.min(c.x1,v.positionX-v.width/2),c.x2=Math.max(c.x2,v.positionX+v.width/2),c.y1=Math.min(c.y1,v.positionY-v.height/2),c.y2=Math.max(c.y2,v.positionY+v.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}a.sort(function(p,m){return m.w*m.h-p.w*p.h});for(var g=0,h=0,w=0,b=0,d=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var v=c[f];v.isLocked||(v.positionX+=g-c.x1,v.positionY+=h-c.y1)}g+=c.w+r.componentSpacing,w+=c.w+r.componentSpacing,b=Math.max(b,c.h),w>d&&(h+=b+r.componentSpacing,g=0,w=0,b=0)}}},RE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function lm(t){this.options=Be({},RE,t)}lm.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=ir(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(q){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),c=function(I){if(I==null)return Math.min(l,u);var F=Math.min(l,u);F==l?l=I:u=I},f=function(I){if(I==null)return Math.max(l,u);var F=Math.max(l,u);F==l?l=I:u=I},v=e.rows,g=e.cols!=null?e.cols:e.columns;if(v!=null&&g!=null)l=v,u=g;else if(v!=null&&g==null)l=v,u=Math.ceil(o/l);else if(v==null&&g!=null)u=g,l=Math.ceil(o/u);else if(u*l>o){var h=c(),w=f();(h-1)*w>=o?c(h-1):(w-1)*h>=o&&f(w-1)}else for(;u*l<o;){var b=c(),d=f();(d+1)*b>=o?f(d+1):c(b+1)}var p=i.w/u,m=i.h/l;if(e.condense&&(p=0,m=0),e.avoidOverlap)for(var y=0;y<a.length;y++){var x=a[y],E=x._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var C=x.layoutDimensions(e),T=e.avoidOverlapPadding,S=C.w+T,P=C.h+T;p=Math.max(p,S),m=Math.max(m,P)}for(var R={},A=function(I,F){return!!R["c-"+I+"-"+F]},M=function(I,F){R["c-"+I+"-"+F]=!0},V=0,G=0,B=function(){G++,G>=u&&(G=0,V++)},k={},O=0;O<a.length;O++){var z=a[O],H=e.position(z);if(H&&(H.row!==void 0||H.col!==void 0)){var U={row:H.row,col:H.col};if(U.col===void 0)for(U.col=0;A(U.row,U.col);)U.col++;else if(U.row===void 0)for(U.row=0;A(U.row,U.col);)U.row++;k[z.id()]=U,M(U.row,U.col)}}var _=function(I,F){var $,K;if(I.locked()||I.isParent())return!1;var ee=k[I.id()];if(ee)$=ee.col*p+p/2+i.x1,K=ee.row*m+m/2+i.y1;else{for(;A(V,G);)B();$=G*p+p/2+i.x1,K=V*m+m/2+i.y1,M(V,G),B()}return{x:$,y:K}};a.layoutPositions(this,e,_)}return this};var ME={ready:function(){},stop:function(){}};function Qc(t){this.options=Be({},ME,t)}Qc.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Qc.prototype.stop=function(){return this};var LE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function um(t){this.options=Be({},LE,t)}um.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=lt(t.positions);function a(i){if(t.positions==null)return tw(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var _E={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function cm(t){this.options=Be({},_E,t)}cm.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=ir(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var IE=[{name:"breadthfirst",impl:rm},{name:"circle",impl:nm},{name:"concentric",impl:am},{name:"cose",impl:Bs},{name:"grid",impl:lm},{name:"null",impl:Qc},{name:"preset",impl:um},{name:"random",impl:cm}];function fm(t){this.options=t,this.notifications=0}var Yv=function(){},Xv=function(){throw new Error("A headless instance can not render images")};fm.prototype={recalculateRenderedStyle:Yv,notify:function(){this.notifications++},init:Yv,isHeadless:function(){return!0},png:Xv,jpg:Xv};var Jc={};Jc.arrowShapeWidth=.3;Jc.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,c,f,v,g,h,w){var b=g.x-f/2-w,d=g.x+f/2+w,p=g.y-f/2-w,m=g.y+f/2+w,y=b<=u&&u<=d&&p<=c&&c<=m;return y},n=function(u,c,f,v,g){var h=u*Math.cos(v)-c*Math.sin(v),w=u*Math.sin(v)+c*Math.cos(v),b=h*f,d=w*f,p=b+g.x,m=d+g.y;return{x:p,y:m}},a=function(u,c,f,v){for(var g=[],h=0;h<u.length;h+=2){var w=u[h],b=u[h+1];g.push(n(w,b,c,f,v))}return g},i=function(u){for(var c=[],f=0;f<u.length;f++){var v=u[f];c.push(v.x,v.y)}return c},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,c){Te(c)&&(c=t[c]),t[u]=Be({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,g,h,w,b,d){var p=i(a(this.points,h+2*d,w,b)),m=rr(v,g,p);return m},roughCollide:r,draw:function(v,g,h,w){var b=a(this.points,g,h,w);e.arrowShapeImpl("polygon")(v,b)},spacing:function(v){return 0},gap:o},c)};s("none",{collide:Ho,roughCollide:Ho,draw:zc,spacing:dd,gap:dd}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,c,f,v,g){var h=a(this.points,c,f,v),w=this.controlPoint,b=n(w[0],w[1],c,f,v);e.arrowShapeImpl(this.name)(u,h,b)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,v,g,h,w){var b=i(a(this.points,f+2*w,v,g)),d=i(a(this.pointsTee,f+2*w,v,g)),p=rr(u,c,b)||rr(u,c,d);return p},draw:function(u,c,f,v,g){var h=a(this.points,c,f,v),w=a(this.pointsTee,c,f,v);e.arrowShapeImpl(this.name)(u,h,w)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,v,g,h,w){var b=g,d=Math.pow(b.x-u,2)+Math.pow(b.y-c,2)<=Math.pow((f+2*w)*this.radius,2),p=i(a(this.points,f+2*w,v,g));return rr(u,c,p)||d},draw:function(u,c,f,v,g){var h=a(this.pointsTr,c,f,v);e.arrowShapeImpl(this.name)(u,h,v.x,v.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),v=c/u,g=3,h=5;return f[g]=f[g]-v,f[h]=f[h]-v,f},collide:function(u,c,f,v,g,h,w){var b=i(a(this.points,f+2*w,v,g)),d=i(a(this.crossLinePts(f,h),f+2*w,v,g)),p=rr(u,c,b)||rr(u,c,d);return p},draw:function(u,c,f,v,g){var h=a(this.points,c,f,v),w=a(this.crossLinePts(c,g),c,f,v);e.arrowShapeImpl(this.name)(u,h,w)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,c,f,v,g,h,w){var b=g,d=Math.pow(b.x-u,2)+Math.pow(b.y-c,2)<=Math.pow((f+2*w)*this.radius,2);return d},draw:function(u,c,f,v,g){e.arrowShapeImpl(this.name)(u,v.x,v.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var na={};na.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),l=r.zoom(),u=((t-a)/o-s.x)/l,c=((e-i)/o-s.y)/l;return[u,c]};na.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(d){return parseFloat(r.getPropertyValue(d))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,c=i.left+i.right,f=e.width/(o+c),v=o-l,g=s-u,h=e.left+a.left+i.left,w=e.top+a.top+i.top;return this.containerBB=[h,w,v,g,f]};na.invalidateContainerClientCoordsCache=function(){this.containerBB=null};na.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};na.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),c=(n?24:8)/l,f=(n?8:2)/l,v=(n?8:2)/l,g=1/0,h,w;r&&(o=o.interactive);function b(C,T){if(C.isNode()){if(w)return;w=C,s.push(C)}if(C.isEdge()&&(T==null||T<g))if(h){if(h.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value){for(var S=0;S<s.length;S++)if(s[S].isEdge()){s[S]=C,h=C,g=T??g;break}}}else s.push(C),h=C,g=T??g}function d(C){var T=C.outerWidth()+2*f,S=C.outerHeight()+2*f,P=T/2,R=S/2,A=C.position(),M=C.pstyle("corner-radius").value==="auto"?"auto":C.pstyle("corner-radius").pfValue,V=C._private.rscratch;if(A.x-P<=t&&t<=A.x+P&&A.y-R<=e&&e<=A.y+R){var G=i.nodeShapes[a.getNodeShape(C)];if(G.checkPoint(t,e,0,T,S,A.x,A.y,M,V))return b(C,0),!0}}function p(C){var T=C._private,S=T.rscratch,P=C.pstyle("width").pfValue,R=C.pstyle("arrow-scale").value,A=P/2+c,M=A*A,V=A*2,O=T.source,z=T.target,G;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var B=S.allpts,k=0;k+3<B.length;k+=2)if(gw(t,e,B[k],B[k+1],B[k+2],B[k+3],V)&&M>(G=ww(t,e,B[k],B[k+1],B[k+2],B[k+3])))return b(C,G),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var B=S.allpts,k=0;k+5<S.allpts.length;k+=4)if(pw(t,e,B[k],B[k+1],B[k+2],B[k+3],B[k+4],B[k+5],V)&&M>(G=bw(t,e,B[k],B[k+1],B[k+2],B[k+3],B[k+4],B[k+5])))return b(C,G),!0}for(var O=O||T.source,z=z||T.target,H=a.getArrowWidth(P,R),U=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],k=0;k<U.length;k++){var _=U[k],q=i.arrowShapes[C.pstyle(_.name+"-arrow-shape").value],I=C.pstyle("width").pfValue;if(q.roughCollide(t,e,H,_.angle,{x:_.x,y:_.y},I,c)&&q.collide(t,e,H,_.angle,{x:_.x,y:_.y},I,c))return b(C),!0}u&&s.length>0&&(d(O),d(z))}function m(C,T,S){return tr(C,T,S)}function y(C,T){var S=C._private,P=v,R;T?R=T+"-":R="",C.boundingBox();var A=S.labelBounds[T||"main"],M=C.pstyle(R+"label").value,V=C.pstyle("text-events").strValue==="yes";if(!(!V||!M)){var G=m(S.rscratch,"labelX",T),B=m(S.rscratch,"labelY",T),k=m(S.rscratch,"labelAngle",T),O=C.pstyle(R+"text-margin-x").pfValue,z=C.pstyle(R+"text-margin-y").pfValue,H=A.x1-P-O,U=A.x2+P-O,_=A.y1-P-z,q=A.y2+P-z;if(k){var I=Math.cos(k),F=Math.sin(k),$=function(N,j){return N=N-G,j=j-B,{x:N*I-j*F+G,y:N*F+j*I+B}},K=$(H,_),ee=$(H,q),Y=$(U,_),W=$(U,q),J=[K.x+O,K.y+z,Y.x+O,Y.y+z,W.x+O,W.y+z,ee.x+O,ee.y+z];if(rr(t,e,J))return b(C),!0}else if(Ma(A,t,e))return b(C),!0}}for(var x=o.length-1;x>=0;x--){var E=o[x];E.isNode()?d(E)||y(E):p(E)||y(E)||y(E,"source")||y(E,"target")}return s};na.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,s=[],l=Math.min(t,r),u=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=l,r=u,e=c,n=f;var v=ir({x1:t,y1:e,x2:r,y2:n});function g(M,V,G){return tr(M,V,G)}function h(M,V){var G=M._private,B=o,k="";M.boundingBox();var O=G.labelBounds.main,z=g(G.rscratch,"labelX",V),H=g(G.rscratch,"labelY",V),U=g(G.rscratch,"labelAngle",V),_=M.pstyle(k+"text-margin-x").pfValue,q=M.pstyle(k+"text-margin-y").pfValue,I=O.x1-B-_,F=O.x2+B-_,$=O.y1-B-q,K=O.y2+B-q;if(U){var ee=Math.cos(U),Y=Math.sin(U),W=function(D,N){return D=D-z,N=N-H,{x:D*ee-N*Y+z,y:D*Y+N*ee+H}};return[W(I,$),W(F,$),W(F,K),W(I,K)]}else return[{x:I,y:$},{x:F,y:$},{x:F,y:K},{x:I,y:K}]}for(var w=0;w<a.length;w++){var b=a[w];if(b.isNode()){var d=b,p=d.pstyle("text-events").strValue==="yes",m=d.pstyle("box-select-labels").strValue==="yes",y=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:m&&p});if($c(v,y)){var x=h(d),E=[{x:v.x1,y:v.y1},{x:v.x2,y:v.y1},{x:v.x2,y:v.y2},{x:v.x1,y:v.y2}];Tw(x,E)&&s.push(d)}}else{var C=b,T=C._private,S=T.rscratch;if(S.startX!=null&&S.startY!=null&&!Ma(v,S.startX,S.startY)||S.endX!=null&&S.endY!=null&&!Ma(v,S.endX,S.endY))continue;if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"||S.edgeType==="segments"||S.edgeType==="haystack"){for(var P=T.rstyle.bezierPts||T.rstyle.linePts||T.rstyle.haystackPts,R=!0,A=0;A<P.length;A++)if(!vw(v,P[A])){R=!1;break}R&&s.push(C)}else(S.edgeType==="haystack"||S.edgeType==="straight")&&s.push(C)}}return s};var Zo={};Zo.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,c,f,v,g,d,p;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],v=e.haystackPts[2],g=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,v=e.arrowEndX,g=e.arrowEndY),d=e.midX,p=e.midY,i)l=c-e.segpts[0],u=f-e.segpts[1];else if(a||o||s||n){var h=e.allpts,w=St(h[0],h[2],h[4],.1),b=St(h[1],h[3],h[5],.1);l=c-w,u=f-b}else l=c-d,u=f-p;e.srcArrowAngle=ao(l,u);var d=e.midX,p=e.midY;if(r&&(d=(c+v)/2,p=(f+g)/2),l=v-c,u=g-f,i){var h=e.allpts;if(h.length/2%2===0){var m=h.length/2,y=m-2;l=h[m]-h[y],u=h[m+1]-h[y+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var m=h.length/2-1,y=m-2;l=h[m]-h[y],u=h[m+1]-h[y+1]}}else if(a||o||s){var h=e.allpts,x=e.ctrlpts,E,C,T,S;if(x.length/2%2===0){var P=h.length/2-1,R=P+2,A=R+2;E=St(h[P],h[R],h[A],0),C=St(h[P+1],h[R+1],h[A+1],0),T=St(h[P],h[R],h[A],1e-4),S=St(h[P+1],h[R+1],h[A+1],1e-4)}else{var R=h.length/2-1,P=R-2,A=R+2;E=St(h[P],h[R],h[A],.4999),C=St(h[P+1],h[R+1],h[A+1],.4999),T=St(h[P],h[R],h[A],.5),S=St(h[P+1],h[R+1],h[A+1],.5)}l=T-E,u=S-C}if(e.midtgtArrowAngle=ao(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var m=h.length/2-1,M=m+2;l=-(h[M]-h[m]),u=-(h[M+1]-h[m+1])}}}if(e.midsrcArrowAngle=ao(l,u),i)l=v-e.segpts[e.segpts.length-2],u=g-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,V=h.length,w=St(h[V-6],h[V-4],h[V-2],.9),b=St(h[V-5],h[V-3],h[V-1],.9);l=v-w,u=g-b}else l=v-d,u=g-p;e.tgtArrowAngle=ao(l,u)};Zo.getArrowWidth=Zo.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var oc,sc,Ar={},cr={},Zv,Qv,Wn,ko,Vr,zn,Gn,Pr,da,vo,dm,vm,lc,uc,Jv,eh=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},OE=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},NE=function(e,r,n,a,i){if(e!==Jv?eh(r,e,Ar):OE(cr,Ar),eh(r,n,cr),Zv=Ar.nx*cr.ny-Ar.ny*cr.nx,Qv=Ar.nx*cr.nx-Ar.ny*-cr.ny,Vr=Math.asin(Math.max(-1,Math.min(1,Zv))),Math.abs(Vr)<1e-6){oc=r.x,sc=r.y,Gn=da=0;return}Wn=1,ko=!1,Qv<0?Vr<0?Vr=Math.PI+Vr:(Vr=Math.PI-Vr,Wn=-1,ko=!0):Vr>0&&(Wn=-1,ko=!0),r.radius!==void 0?da=r.radius:da=a,zn=Vr/2,vo=Math.min(Ar.len/2,cr.len/2),i?(Pr=Math.abs(Math.cos(zn)*da/Math.sin(zn)),Pr>vo?(Pr=vo,Gn=Math.abs(Pr*Math.sin(zn)/Math.cos(zn))):Gn=da):(Pr=Math.min(vo,da),Gn=Math.abs(Pr*Math.sin(zn)/Math.cos(zn))),lc=r.x+cr.nx*Pr,uc=r.y+cr.ny*Pr,oc=lc-cr.ny*Gn*Wn,sc=uc+cr.nx*Gn*Wn,dm=r.x+Ar.nx*Pr,vm=r.y+Ar.ny*Pr,Jv=r};function hm(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function ef(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(NE(t,e,r,n,a),{cx:oc,cy:sc,radius:Gn,startX:dm,startY:vm,stopX:lc,stopY:uc,startAngle:Ar.ang+Math.PI/2*Wn,endAngle:cr.ang-Math.PI/2*Wn,counterClockwise:ko})}var Mi=.01,zE=Math.sqrt(2*Mi),Ht={};Ht.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(x,E,C,T){var S=T-E,P=C-x,R=Math.sqrt(P*P+S*S);return{x:-S/R,y:P/R}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(l){var f=this.manualEndptToPx(t.source()[0],o),v=bt(f,2),g=v[0],h=v[1],w=this.manualEndptToPx(t.target()[0],s),b=bt(w,2),d=b[0],p=b[1],m={x1:g,y1:h,x2:d,y2:p};a=u(g,h,d,p),i=m}else Ye("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Ht.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),f=s.width(),v=o.height(),g=s.height(),h=r.pstyle("haystack-radius").value,w=h/2;a.haystackPts=a.allpts=[a.source.x*c*w+l.x,a.source.y*v*w+l.y,a.target.x*f*w+u.x,a.target.y*g*w+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Ht.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],v=a.pfValue[c],g=1-f,h=f,w=this.findMidptPtsEtc(t,e),b=w.midptPts,d=w.vectorNormInverse,p={x:b.x1*g+b.x2*h,y:b.y1*g+b.y2*h};r.segpts.push(p.x+d.x*v,p.y+d.y*v),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:l),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:u)==="arc-radius")}};Ht.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var v=r,g=f;n&&(v=0,g=l);var h=u-Math.PI/2,w=h-c/2,b=h+c/2,d=u+"_"+c;v=i[d]===void 0?i[d]=0:++i[d],a.ctrlpts=[o.x+Math.cos(w)*1.4*g*(v/3+1),o.y+Math.sin(w)*1.4*g*(v/3+1),o.x+Math.cos(b)*1.4*g*(v/3+1),o.y+Math.sin(b)*1.4*g*(v/3+1)]};Ht.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),g=v?v.pfValue[0]:void 0,h=r,w=f;n&&(h=0,w=g);var b=50,d={x:i.x-s/2,y:i.y-l/2},p={x:o.x-u/2,y:o.y-c/2},m={x:Math.min(d.x,p.x),y:Math.min(d.y,p.y)},y=.5,x=Math.max(y,Math.log(s*Mi)),E=Math.max(y,Math.log(u*Mi));a.ctrlpts=[m.x,m.y-(1+Math.pow(b,1.12)/100)*w*(h/3+1)*x,m.x-(1+Math.pow(b,1.12)/100)*w*(h/3+1)*E,m.y]};Ht.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Ht.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,f=l.value[0],v=n;i.edgeType=v?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<u;g++){var h=(.5-e.eles.length/2+r)*o*(a?-1:1),w=void 0,b=qc(h);v&&(c=s?s.pfValue[g]:o,f=l.value[g]),n?w=c:w=c!==void 0?b*c:void 0;var d=w!==void 0?w:h,p=1-f,m=f,y=this.findMidptPtsEtc(t,e),x=y.midptPts,E=y.vectorNormInverse,C={x:x.x1*p+x.x2*m,y:x.y1*p+x.y2*m};i.ctrlpts.push(C.x+E.x*d,C.y+E.y*d)}};Ht.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,v=e.srcH,g=e.tgtW,h=e.tgtH,w=t.pstyle("edge-distances").value,b=w!=="node-position",d=t.pstyle("taxi-direction").value,p=d,m=t.pstyle("taxi-turn"),y=m.units==="%",x=m.pfValue,E=x<0,C=t.pstyle("taxi-turn-min-distance").pfValue,T=b?(f+g)/2:0,S=b?(v+h)/2:0,P=c.x2-c.x1,R=c.y2-c.y1,A=function(L,re){return L>0?Math.max(L-re,0):Math.min(L+re,0)},M=A(P,T),V=A(R,S),G=!1;p===u?d=Math.abs(M)>Math.abs(V)?a:n:p===l||p===s?(d=n,G=!0):(p===i||p===o)&&(d=a,G=!0);var B=d===n,k=B?V:M,O=B?R:P,z=qc(O),H=!1;!(G&&(y||E))&&(p===s&&O<0||p===l&&O>0||p===i&&O>0||p===o&&O<0)&&(z*=-1,k=z*Math.abs(k),H=!0);var U;if(y){var _=x<0?1+x:x;U=_*k}else{var q=x<0?k:0;U=q+x*z}var I=function(L){return Math.abs(L)<C||Math.abs(L)>=Math.abs(k)},F=I(U),$=I(Math.abs(k)-Math.abs(U)),K=F||$;if(K&&!H)if(B){var ee=Math.abs(O)<=v/2,Y=Math.abs(P)<=g/2;if(ee){var W=(c.x1+c.x2)/2,J=c.y1,D=c.y2;r.segpts=[W,J,W,D]}else if(Y){var N=(c.y1+c.y2)/2,j=c.x1,ne=c.x2;r.segpts=[j,N,ne,N]}else r.segpts=[c.x1,c.y2]}else{var ce=Math.abs(O)<=f/2,ie=Math.abs(R)<=h/2;if(ce){var le=(c.y1+c.y2)/2,X=c.x1,Q=c.x2;r.segpts=[X,le,Q,le]}else if(ie){var Z=(c.x1+c.x2)/2,fe=c.y1,oe=c.y2;r.segpts=[Z,fe,Z,oe]}else r.segpts=[c.x2,c.y1]}else if(B){var he=c.y1+U+(b?v/2*z:0),pe=c.x1,ge=c.x2;r.segpts=[pe,he,ge,he]}else{var Ee=c.x1+U+(b?f/2*z:0),we=c.y1,ke=c.y2;r.segpts=[Ee,we,Ee,ke]}if(r.isRound){var De=t.pstyle("taxi-radius").value,me=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(De),r.isArcRadius=new Array(r.segpts.length/2).fill(me)}};Ht.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,v=e.tgtCornerRadius,g=e.srcRs,h=e.tgtRs,w=!ye(r.startX)||!ye(r.startY),b=!ye(r.arrowStartX)||!ye(r.arrowStartY),d=!ye(r.endX)||!ye(r.endY),p=!ye(r.arrowEndX)||!ye(r.arrowEndY),m=3,y=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,x=m*y,E=Jn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),C=E<x,T=Jn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),S=T<x,P=!1;if(w||b||C){P=!0;var R={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},A=Math.sqrt(R.x*R.x+R.y*R.y),M={x:R.x/A,y:R.y/A},V=Math.max(i,o),G={x:r.ctrlpts[0]+M.x*2*V,y:r.ctrlpts[1]+M.y*2*V},B=u.intersectLine(n.x,n.y,i,o,G.x,G.y,0,f,g);C?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(x-E),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(x-E)):(r.ctrlpts[0]=B[0]+M.x*x,r.ctrlpts[1]=B[1]+M.y*x)}if(d||p||S){P=!0;var k={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},O=Math.sqrt(k.x*k.x+k.y*k.y),z={x:k.x/O,y:k.y/O},H=Math.max(i,o),U={x:r.ctrlpts[0]+z.x*2*H,y:r.ctrlpts[1]+z.y*2*H},_=c.intersectLine(a.x,a.y,s,l,U.x,U.y,0,v,h);S?(r.ctrlpts[0]=r.ctrlpts[0]+z.x*(x-T),r.ctrlpts[1]=r.ctrlpts[1]+z.y*(x-T)):(r.ctrlpts[0]=_[0]+z.x*x,r.ctrlpts[1]=_[1]+z.y*x)}P&&this.findEndpoints(t)}};Ht.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=St(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=St(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(ef({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},v=e.roundCorners[c/2];if(v.radius===0){var g={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-g.y,g.x-f.x]}else{var h=[f.x-v.cx,f.y-v.cy],w=v.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(b){return b*w}),e.midX=v.cx+h[0],e.midY=v.cy+h[1],e.midVector=h}}}}};Ht.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ye(e.startX)&&ye(e.startY)&&ye(e.endX)&&ye(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ye("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Ht.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new jr,o=function(S,P){return[].concat(qo(S),[P?1:0]).join("-")},s=[],l=[],u=0;u<t.length;u++){var c=t[u],f=c._private,v=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(v==="haystack"){l.push(c);continue}var g=v==="unbundled-bezier"||v.endsWith("segments")||v==="straight"||v==="straight-triangle"||v.endsWith("taxi"),h=v==="unbundled-bezier"||v==="bezier",w=f.source,b=f.target,d=w.poolIndex(),p=b.poolIndex(),m=[d,p].sort(),y=o(m,g),x=i.get(y);x==null&&(x={eles:[]},s.push({pairId:m,edgeIsUnbundled:g}),i.set(y,x)),x.eles.push(c),g&&(x.hasUnbundled=!0),h&&(x.hasBezier=!0)}}for(var E=function(){var S=s[C],P=S.pairId,R=S.edgeIsUnbundled,A=o(P,R),M=i.get(A),V;if(!M.hasUnbundled){var G=M.eles[0].parallelEdges().filter(function(me){return me.isBundledBezier()});Fc(M.eles),G.forEach(function(me){return M.eles.push(me)}),M.eles.sort(function(me,ue){return me.poolIndex()-ue.poolIndex()})}var B=M.eles[0],k=B.source(),O=B.target();if(k.poolIndex()>O.poolIndex()){var z=k;k=O,O=z}var H=M.srcPos=k.position(),U=M.tgtPos=O.position(),_=M.srcW=k.outerWidth(),q=M.srcH=k.outerHeight(),I=M.tgtW=O.outerWidth(),F=M.tgtH=O.outerHeight(),$=M.srcShape=r.nodeShapes[e.getNodeShape(k)],K=M.tgtShape=r.nodeShapes[e.getNodeShape(O)],ee=M.srcCornerRadius=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,Y=M.tgtCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,W=M.tgtRs=O._private.rscratch,J=M.srcRs=k._private.rscratch;M.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var D=0;D<M.eles.length;D++){var N=M.eles[D],j=N[0]._private.rscratch,ne=N.pstyle("curve-style").value,ce=ne==="unbundled-bezier"||ne.endsWith("segments")||ne.endsWith("taxi"),ie=!k.same(N.source());if(!M.calculatedIntersection&&k!==O&&(M.hasBezier||M.hasUnbundled)){M.calculatedIntersection=!0;var le=$.intersectLine(H.x,H.y,_,q,U.x,U.y,0,ee,J),X=M.srcIntn=le,Q=K.intersectLine(U.x,U.y,I,F,H.x,H.y,0,Y,W),Z=M.tgtIntn=Q,fe=M.intersectionPts={x1:le[0],x2:Q[0],y1:le[1],y2:Q[1]},oe=M.posPts={x1:H.x,x2:U.x,y1:H.y,y2:U.y},he=Q[1]-le[1],pe=Q[0]-le[0],ge=Math.sqrt(pe*pe+he*he);ye(ge)&&ge>=zE||(ge=Math.sqrt(Math.max(pe*pe,Mi)+Math.max(he*he,Mi)));var Ee=M.vector={x:pe,y:he},we=M.vectorNorm={x:Ee.x/ge,y:Ee.y/ge},ke={x:-we.y,y:we.x};M.nodesOverlap=!ye(ge)||K.checkPoint(le[0],le[1],0,I,F,U.x,U.y,Y,W)||$.checkPoint(Q[0],Q[1],0,_,q,H.x,H.y,ee,J),M.vectorNormInverse=ke,V={nodesOverlap:M.nodesOverlap,dirCounts:M.dirCounts,calculatedIntersection:!0,hasBezier:M.hasBezier,hasUnbundled:M.hasUnbundled,eles:M.eles,srcPos:U,srcRs:W,tgtPos:H,tgtRs:J,srcW:I,srcH:F,tgtW:_,tgtH:q,srcIntn:Z,tgtIntn:X,srcShape:K,tgtShape:$,posPts:{x1:oe.x2,y1:oe.y2,x2:oe.x1,y2:oe.y1},intersectionPts:{x1:fe.x2,y1:fe.y2,x2:fe.x1,y2:fe.y1},vector:{x:-Ee.x,y:-Ee.y},vectorNorm:{x:-we.x,y:-we.y},vectorNormInverse:{x:-ke.x,y:-ke.y}}}var De=ie?V:M;j.nodesOverlap=De.nodesOverlap,j.srcIntn=De.srcIntn,j.tgtIntn=De.tgtIntn,j.isRound=ne.startsWith("round"),a&&(k.isParent()||k.isChild()||O.isParent()||O.isChild())&&(k.parents().anySame(O)||O.parents().anySame(k)||k.same(O)&&k.isParent())?e.findCompoundLoopPoints(N,De,D,ce):k===O?e.findLoopPoints(N,De,D,ce):ne.endsWith("segments")?e.findSegmentsPoints(N,De):ne.endsWith("taxi")?e.findTaxiPoints(N,De):ne==="straight"||!ce&&M.eles.length%2===1&&D===Math.floor(M.eles.length/2)?e.findStraightEdgePoints(N):e.findBezierPoints(N,De,D,ce,ie),e.findEndpoints(N),e.tryToCorrectInvalidPoints(N,De),e.checkForInvalidEdgeWarning(N),e.storeAllpts(N),e.storeEdgeProjections(N),e.calculateArrowAngles(N),e.recalculateEdgeLabelProjections(N),e.calculateLabelAngles(N)}},C=0;C<s.length;C++)E();this.findHaystackPoints(l)}};function gm(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Ht.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return gm(e.segpts)};Ht.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return gm(e.ctrlpts)};Ht.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Wi={};Wi.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};Wi.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,v=a._private.rscratch,g=t.pstyle("curve-style").value,h=t._private.rscratch,w=h.edgeType,b=g==="taxi",d=w==="self"||w==="compound",p=w==="bezier"||w==="multibezier"||d,m=w!=="bezier",y=w==="straight"||w==="segments",x=w==="segments",E=p||m||y,C=d||b,T=t.pstyle("source-endpoint"),S=C?"outside-to-node":T.value,P=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,R=t.pstyle("target-endpoint"),A=C?"outside-to-node":R.value,M=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;h.srcManEndpt=T,h.tgtManEndpt=R;var V,G,B,k;if(p){var O=[h.ctrlpts[0],h.ctrlpts[1]],z=m?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:O;V=z,G=O}else if(y){var H=x?h.segpts.slice(0,2):[o.x,o.y],U=x?h.segpts.slice(h.segpts.length-2):[i.x,i.y];V=U,G=H}if(A==="inside-to-node")r=[o.x,o.y];else if(R.units)r=this.manualEndptToPx(a,R);else if(A==="outside-to-line")r=h.tgtIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?B=V:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(B=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),B[0],B[1],0,M,v),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var _=a._private.rscratch,q=_.labelWidth,I=_.labelHeight,F=_.labelX,$=_.labelY,K=q/2,ee=I/2,Y=a.pstyle("text-valign").value;Y==="top"?$-=ee:Y==="bottom"&&($+=ee);var W=a.pstyle("text-halign").value;W==="left"?F-=K:W==="right"&&(F+=K);var J=Pi(B[0],B[1],[F-K,$-ee,F+K,$-ee,F+K,$+ee,F-K,$+ee],o.x,o.y);if(J.length>0){var D=i,N=qn(D,ya(r)),j=qn(D,ya(J)),ne=N;if(j<N&&(r=J,ne=j),J.length>2){var ce=qn(D,{x:J[2],y:J[3]});ce<ne&&(r=[J[2],J[3]])}}}var ie=io(r,V,e.arrowShapes[s].spacing(t)+u),le=io(r,V,e.arrowShapes[s].gap(t)+u);if(h.endX=le[0],h.endY=le[1],h.arrowEndX=ie[0],h.arrowEndY=ie[1],S==="inside-to-node")r=[i.x,i.y];else if(T.units)r=this.manualEndptToPx(n,T);else if(S==="outside-to-line")r=h.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?k=G:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(k=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),k[0],k[1],0,P,f),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var X=n._private.rscratch,Q=X.labelWidth,Z=X.labelHeight,fe=X.labelX,oe=X.labelY,he=Q/2,pe=Z/2,ge=n.pstyle("text-valign").value;ge==="top"?oe-=pe:ge==="bottom"&&(oe+=pe);var Ee=n.pstyle("text-halign").value;Ee==="left"?fe-=he:Ee==="right"&&(fe+=he);var we=Pi(k[0],k[1],[fe-he,oe-pe,fe+he,oe-pe,fe+he,oe+pe,fe-he,oe+pe],i.x,i.y);if(we.length>0){var ke=o,De=qn(ke,ya(r)),me=qn(ke,ya(we)),ue=De;if(me<De&&(r=[we[0],we[1]],ue=me),we.length>2){var L=qn(ke,{x:we[2],y:we[3]});L<ue&&(r=[we[2],we[3]])}}}var re=io(r,G,e.arrowShapes[l].spacing(t)+c),ae=io(r,G,e.arrowShapes[l].gap(t)+c);h.startX=ae[0],h.startY=ae[1],h.arrowStartX=re[0],h.arrowStartY=re[1],E&&(!ye(h.startX)||!ye(h.startY)||!ye(h.endX)||!ye(h.endY)?h.badLine=!0:h.badLine=!1)};Wi.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Wi.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var tf={};function FE(t,e,r){for(var n=function(u,c,f,v){return St(u,c,f,v)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}tf.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)FE(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};tf.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Ir={};Ir.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!xn(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,v=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}f.labelX=r,f.labelY=n,v.labelX=r,v.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var pm=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},mm=function(e,r){var n=r.x-e.x,a=r.y-e.y;return pm(n,a)},VE=function(e,r,n,a){var i=Di(0,a-.001,1),o=Di(0,a+.001,1),s=Da(e,r,n,i),l=Da(e,r,n,o);return mm(s,l)};Ir.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(f,v,g){Ur(r.rscratch,f,v,g),Ur(r.rstyle,f,v,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=pm(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function(){if(l.cache)return l.cache;for(var f=[],v=0;v+5<n.allpts.length;v+=4){var g={x:n.allpts[v],y:n.allpts[v+1]},h={x:n.allpts[v+2],y:n.allpts[v+3]},w={x:n.allpts[v+4],y:n.allpts[v+5]};f.push({p0:g,p1:h,p2:w,startDist:0,length:0,segments:[]})}var b=r.rstyle.bezierPts,d=a.bezierProjPcts.length;function p(C,T,S,P,R){var A=Jn(T,S),M=C.segments[C.segments.length-1],V={p0:T,p1:S,t0:P,t1:R,startDist:M?M.startDist+M.length:0,length:A};C.segments.push(V),C.length+=A}for(var m=0;m<f.length;m++){var y=f[m],x=f[m-1];x&&(y.startDist=x.startDist+x.length),p(y,y.p0,b[m*d],0,a.bezierProjPcts[0]);for(var E=0;E<d-1;E++)p(y,b[m*d+E],b[m*d+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);p(y,b[m*d+d-1],y.p2,a.bezierProjPcts[d-1],1)}return l.cache=f},u=function(f){var v,g=f==="source";if(i[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var w=l(),b,d=0,p=0,m=0;m<w.length;m++){for(var y=w[g?m:w.length-1-m],x=0;x<y.segments.length;x++){var E=y.segments[g?x:y.segments.length-1-x],C=m===w.length-1&&x===y.segments.length-1;if(d=p,p+=E.length,p>=h||C){b={cp:y,segment:E};break}}if(b)break}var T=b.cp,S=b.segment,P=(h-d)/S.length,R=S.t1-S.t0,A=g?S.t0+R*P:S.t1-R*P;A=Di(0,A,1),e=Da(T.p0,T.p1,T.p2,A),v=VE(T.p0,T.p1,T.p2,A);break}case"straight":case"segments":case"haystack":{for(var M=0,V,G,B,k,O=n.allpts.length,z=0;z+3<O&&(g?(B={x:n.allpts[z],y:n.allpts[z+1]},k={x:n.allpts[z+2],y:n.allpts[z+3]}):(B={x:n.allpts[O-2-z],y:n.allpts[O-1-z]},k={x:n.allpts[O-4-z],y:n.allpts[O-3-z]}),V=Jn(B,k),G=M,M+=V,!(M>=h));z+=2);var H=h-G,U=H/V;U=Di(0,U,1),e=lw(B,k,U),v=mm(B,k);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,v)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Ir.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Ir.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=Qn(n,t._private.labelDimsKey);if(tr(r.rscratch,"prefixedLabelDimsKey",e)!==a){Ur(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,l=tr(r.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(l.length,1),c=i.height/u,f=c*o,v=i.width,g=i.height+(u-1)*(o-1)*c;Ur(r.rstyle,"labelWidth",e,v),Ur(r.rscratch,"labelWidth",e,v),Ur(r.rstyle,"labelHeight",e,g),Ur(r.rscratch,"labelHeight",e,g),Ur(r.rscratch,"labelLineHeight",e,f)}};Ir.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(q,I){return I?(Ur(r.rscratch,q,e,I),I):tr(r.rscratch,q,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="​",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,g=v==="anywhere",h=[],w=/[\s\u200b]+|$/g,b=0;b<c.length;b++){var d=c[b],p=this.calculateLabelDimensions(t,d),m=p.width;if(g){var y=d.split("").join(u);d=y}if(m>f){var x=d.matchAll(w),E="",C=0,T=ar(x),S;try{for(T.s();!(S=T.n()).done;){var P=S.value,R=P[0],A=d.substring(C,P.index);C=P.index+R.length;var M=E.length===0?A:E+A+R,V=this.calculateLabelDimensions(t,M),G=V.width;G<=f?E+=A+R:(E&&h.push(E),E=A+R)}}catch(_){T.e(_)}finally{T.f()}E.match(/^[\s\u200b]+$/)||h.push(E)}else h.push(d)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var B=t.pstyle("text-max-width").pfValue,k="",O="…",z=!1;if(this.calculateLabelDimensions(t,a).width<B)return a;for(var H=0;H<a.length;H++){var U=this.calculateLabelDimensions(t,k+a[H]+O).width;if(U>B)break;k+=a[H],H===a.length-1&&(z=!0)}return z||(k+=O),k}return a};Ir.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Ir.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var v=c.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}f.font="".concat(o," ").concat(u," ").concat(s,"px ").concat(l);for(var g=0,h=0,w=e.split(`
`),b=0;b<w.length;b++){var d=w[b],p=f.measureText(d),m=Math.ceil(p.width),y=s;g=Math.max(m,g),h+=y}return g+=i,h+=i,{width:g,height:h}};Ir.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Ir.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ym={},th=28,rh=!1;ym.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<th||t.height()<th))return rh||(Ye("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),rh=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Rs={};Rs.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var v=s[f];v(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Rs.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Rs.recalculateRenderedStyle=function(t,e){var r=function(y){return y._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,l=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(l.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(m){return!m._private.rstyle.clean&&m.isBundledBezier()})&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],f=c._private,v=f.rstyle,g=c.position();this.recalculateNodeLabelProjection(c),v.nodeX=g.x,v.nodeY=g.y,v.nodeW=c.pstyle("width").pfValue,v.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var w=n[h],b=w._private,d=b.rstyle,p=b.rscratch;d.srcX=p.arrowStartX,d.srcY=p.arrowStartY,d.tgtX=p.arrowEndX,d.tgtY=p.arrowEndY,d.midX=p.midX,d.midY=p.midY,d.labelAngle=p.labelAngle,d.sourceLabelAngle=p.sourceLabelAngle,d.targetLabelAngle=p.targetLabelAngle}}}};var Ms={};Ms.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Ms.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Ms.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Jp),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var bm={};[na,Zo,Ht,Wi,tf,Ir,ym,Rs,Ms].forEach(function(t){Be(bm,t)});var wm={};wm.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var qa={};qa.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var l=this.binder(s);i.push(l.on.apply(l,a))}}return i}var l=this.binder(t);return l.on.apply(l,a)};qa.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||t1(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(l,u,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};qa.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};qa.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};qa.load=function(){var t=this,e=t.cy.window(),r=function(L){return L.selected()},n=function(L){var re=L.getRootNode();if(re&&re.nodeType===11&&re.host!==void 0)return re},a=function(L,re,ae,se){L==null&&(L=t.cy);for(var de=0;de<re.length;de++){var Ce=re[de];L.emit({originalEvent:ae,type:Ce,position:se})}},i=function(L){return L.shiftKey||L.metaKey||L.ctrlKey},o=function(L,re){var ae=!0;if(t.cy.hasCompoundNodes()&&L&&L.pannable())for(var se=0;re&&se<re.length;se++){var L=re[se];if(L.isNode()&&L.isParent()&&!L.pannable()){ae=!1;break}}else ae=!0;return ae},s=function(L){L[0]._private.grabbed=!0},l=function(L){L[0]._private.grabbed=!1},u=function(L){L[0]._private.rscratch.inDragLayer=!0},c=function(L){L[0]._private.rscratch.inDragLayer=!1},f=function(L){L[0]._private.rscratch.isGrabTarget=!0},v=function(L){L[0]._private.rscratch.isGrabTarget=!1},g=function(L,re){var ae=re.addToList,se=ae.has(L);!se&&L.grabbable()&&!L.locked()&&(ae.merge(L),s(L))},h=function(L,re){if(L.cy().hasCompoundNodes()&&!(re.inDragLayer==null&&re.addToList==null)){var ae=L.descendants();re.inDragLayer&&(ae.forEach(u),ae.connectedEdges().forEach(u)),re.addToList&&g(ae,re)}},w=function(L,re){re=re||{};var ae=L.cy().hasCompoundNodes();re.inDragLayer&&(L.forEach(u),L.neighborhood().stdFilter(function(se){return!ae||se.isEdge()}).forEach(u)),re.addToList&&L.forEach(function(se){g(se,re)}),h(L,re),p(L,{inDragLayer:re.inDragLayer}),t.updateCachedGrabbedEles()},b=w,d=function(L){L&&(t.getCachedZSortedEles().forEach(function(re){l(re),c(re),v(re)}),t.updateCachedGrabbedEles())},p=function(L,re){if(!(re.inDragLayer==null&&re.addToList==null)&&L.cy().hasCompoundNodes()){var ae=L.ancestors().orphans();if(!ae.same(L)){var se=ae.descendants().spawnSelf().merge(ae).unmerge(L).unmerge(L.descendants()),de=se.connectedEdges();re.inDragLayer&&(de.forEach(u),se.forEach(u)),re.addToList&&se.forEach(function(Ce){g(Ce,re)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";y?(t.removeObserver=new MutationObserver(function(ue){for(var L=0;L<ue.length;L++){var re=ue[L],ae=re.removedNodes;if(ae)for(var se=0;se<ae.length;se++){var de=ae[se];if(de===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ue){t.destroy()});var E=$i(function(){t.cy.resize()},100);y&&(t.styleObserver=new MutationObserver(E),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",E),x&&(t.resizeObserver=new ResizeObserver(E),t.resizeObserver.observe(t.container));var C=function(L,re){for(;L!=null;)re(L),L=L.parentNode},T=function(){t.invalidateContainerClientCoordsCache()};C(t.container,function(ue){t.registerBinding(ue,"transitionend",T),t.registerBinding(ue,"animationend",T),t.registerBinding(ue,"scroll",T)}),t.registerBinding(t.container,"contextmenu",function(ue){ue.preventDefault()});var S=function(){return t.selection[4]!==0},P=function(L){for(var re=t.findContainerClientCoords(),ae=re[0],se=re[1],de=re[2],Ce=re[3],ve=L.touches?L.touches:[L],Se=!1,Ne=0;Ne<ve.length;Ne++){var qe=ve[Ne];if(ae<=qe.clientX&&qe.clientX<=ae+de&&se<=qe.clientY&&qe.clientY<=se+Ce){Se=!0;break}}if(!Se)return!1;for(var Re=t.container,ze=L.target,Le=ze.parentNode,Ie=!1;Le;){if(Le===Re){Ie=!0;break}Le=Le.parentNode}return!!Ie};t.registerBinding(t.container,"mousedown",function(L){if(P(L)&&!(t.hoverData.which===1&&L.which!==1)){L.preventDefault(),m(),t.hoverData.capture=!0,t.hoverData.which=L.which;var re=t.cy,ae=[L.clientX,L.clientY],se=t.projectIntoViewport(ae[0],ae[1]),de=t.selection,Ce=t.findNearestElements(se[0],se[1],!0,!1),ve=Ce[0],Se=t.dragData.possibleDragElements;t.hoverData.mdownPos=se,t.hoverData.mdownGPos=ae;var Ne=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Xe=t.hoverData.down;Xe?Xe.emit({originalEvent:L,type:"taphold",position:{x:se[0],y:se[1]}}):re.emit({originalEvent:L,type:"taphold",position:{x:se[0],y:se[1]}})}},t.tapholdDuration)};if(L.which==3){t.hoverData.cxtStarted=!0;var qe={originalEvent:L,type:"cxttapstart",position:{x:se[0],y:se[1]}};ve?(ve.activate(),ve.emit(qe),t.hoverData.down=ve):re.emit(qe),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(L.which==1){ve&&ve.activate();{if(ve!=null&&t.nodeIsGrabbable(ve)){var Re=function(Xe){return{originalEvent:L,type:Xe,position:{x:se[0],y:se[1]}}},ze=function(Xe){Xe.emit(Re("grab"))};if(f(ve),!ve.selected())Se=t.dragData.possibleDragElements=re.collection(),b(ve,{addToList:Se}),ve.emit(Re("grabon")).emit(Re("grab"));else{Se=t.dragData.possibleDragElements=re.collection();var Le=re.$(function(Ie){return Ie.isNode()&&Ie.selected()&&t.nodeIsGrabbable(Ie)});w(Le,{addToList:Se}),ve.emit(Re("grabon")),Le.forEach(ze)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ve,t.hoverData.downs=Ce,t.hoverData.downTime=new Date().getTime()}a(ve,["mousedown","tapstart","vmousedown"],L,{x:se[0],y:se[1]}),ve==null?(de[4]=1,t.data.bgActivePosistion={x:se[0],y:se[1]},t.redrawHint("select",!0),t.redraw()):ve.pannable()&&(de[4]=1),Ne()}de[0]=de[2]=se[0],de[1]=de[3]=se[1]}},!1);var R=n(t.container);t.registerBinding([e,R],"mousemove",function(L){var re=t.hoverData.capture;if(!(!re&&!P(L))){var ae=!1,se=t.cy,de=se.zoom(),Ce=[L.clientX,L.clientY],ve=t.projectIntoViewport(Ce[0],Ce[1]),Se=t.hoverData.mdownPos,Ne=t.hoverData.mdownGPos,qe=t.selection,Re=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Re=t.findNearestElement(ve[0],ve[1],!0,!1));var ze=t.hoverData.last,Le=t.hoverData.down,Ie=[ve[0]-qe[2],ve[1]-qe[3]],Xe=t.dragData.possibleDragElements,ht;if(Ne){var At=Ce[0]-Ne[0],Et=At*At,ct=Ce[1]-Ne[1],Bt=ct*ct,mt=Et+Bt;t.hoverData.isOverThresholdDrag=ht=mt>=t.desktopTapThreshold2}var Zt=i(L);ht&&(t.hoverData.tapholdCancelled=!0);var Sr=function(){var Tr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Tr.length===0?(Tr.push(Ie[0]),Tr.push(Ie[1])):(Tr[0]+=Ie[0],Tr[1]+=Ie[1])};ae=!0,a(Re,["mousemove","vmousemove","tapdrag"],L,{x:ve[0],y:ve[1]});var nn=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||se.emit({originalEvent:L,type:"boxstart",position:{x:ve[0],y:ve[1]}}),qe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(ht){var Nr={originalEvent:L,type:"cxtdrag",position:{x:ve[0],y:ve[1]}};Le?Le.emit(Nr):se.emit(Nr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Re!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:L,type:"cxtdragout",position:{x:ve[0],y:ve[1]}}),t.hoverData.cxtOver=Re,Re&&Re.emit({originalEvent:L,type:"cxtdragover",position:{x:ve[0],y:ve[1]}}))}}else if(t.hoverData.dragging){if(ae=!0,se.panningEnabled()&&se.userPanningEnabled()){var ia;if(t.hoverData.justStartedPan){var Yi=t.hoverData.mdownPos;ia={x:(ve[0]-Yi[0])*de,y:(ve[1]-Yi[1])*de},t.hoverData.justStartedPan=!1}else ia={x:Ie[0]*de,y:Ie[1]*de};se.panBy(ia),se.emit("dragpan"),t.hoverData.dragged=!0}ve=t.projectIntoViewport(L.clientX,L.clientY)}else if(qe[4]==1&&(Le==null||Le.pannable())){if(ht){if(!t.hoverData.dragging&&se.boxSelectionEnabled()&&(Zt||!se.panningEnabled()||!se.userPanningEnabled()))nn();else if(!t.hoverData.selecting&&se.panningEnabled()&&se.userPanningEnabled()){var Ln=o(Le,t.hoverData.downs);Ln&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,qe[4]=0,t.data.bgActivePosistion=ya(Se),t.redrawHint("select",!0),t.redraw())}Le&&Le.pannable()&&Le.active()&&Le.unactivate()}}else{if(Le&&Le.pannable()&&Le.active()&&Le.unactivate(),(!Le||!Le.grabbed())&&Re!=ze&&(ze&&a(ze,["mouseout","tapdragout"],L,{x:ve[0],y:ve[1]}),Re&&a(Re,["mouseover","tapdragover"],L,{x:ve[0],y:ve[1]}),t.hoverData.last=Re),Le)if(ht){if(se.boxSelectionEnabled()&&Zt)Le&&Le.grabbed()&&(d(Xe),Le.emit("freeon"),Xe.emit("free"),t.dragData.didDrag&&(Le.emit("dragfreeon"),Xe.emit("dragfree"))),nn();else if(Le&&Le.grabbed()&&t.nodeIsDraggable(Le)){var Qt=!t.dragData.didDrag;Qt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||w(Xe,{inDragLayer:!0});var zt={x:0,y:0};if(ye(Ie[0])&&ye(Ie[1])&&(zt.x+=Ie[0],zt.y+=Ie[1],Qt)){var Jt=t.hoverData.dragDelta;Jt&&ye(Jt[0])&&ye(Jt[1])&&(zt.x+=Jt[0],zt.y+=Jt[1])}t.hoverData.draggingEles=!0,Xe.silentShift(zt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Sr();ae=!0}if(qe[2]=ve[0],qe[3]=ve[1],ae)return L.stopPropagation&&L.stopPropagation(),L.preventDefault&&L.preventDefault(),!1}},!1);var A,M,V;t.registerBinding(e,"mouseup",function(L){if(!(t.hoverData.which===1&&L.which!==1&&t.hoverData.capture)){var re=t.hoverData.capture;if(re){t.hoverData.capture=!1;var ae=t.cy,se=t.projectIntoViewport(L.clientX,L.clientY),de=t.selection,Ce=t.findNearestElement(se[0],se[1],!0,!1),ve=t.dragData.possibleDragElements,Se=t.hoverData.down,Ne=i(L);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Se&&Se.unactivate(),t.hoverData.which===3){var qe={originalEvent:L,type:"cxttapend",position:{x:se[0],y:se[1]}};if(Se?Se.emit(qe):ae.emit(qe),!t.hoverData.cxtDragged){var Re={originalEvent:L,type:"cxttap",position:{x:se[0],y:se[1]}};Se?Se.emit(Re):ae.emit(Re)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(Ce,["mouseup","tapend","vmouseup"],L,{x:se[0],y:se[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Se,["click","tap","vclick"],L,{x:se[0],y:se[1]}),M=!1,L.timeStamp-V<=ae.multiClickDebounceTime()?(A&&clearTimeout(A),M=!0,V=null,a(Se,["dblclick","dbltap","vdblclick"],L,{x:se[0],y:se[1]})):(A=setTimeout(function(){M||a(Se,["oneclick","onetap","voneclick"],L,{x:se[0],y:se[1]})},ae.multiClickDebounceTime()),V=L.timeStamp)),Se==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(L)&&(ae.$(r).unselect(["tapunselect"]),ve.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ve=ae.collection()),Ce==Se&&!t.dragData.didDrag&&!t.hoverData.selecting&&Ce!=null&&Ce._private.selectable&&(t.hoverData.dragging||(ae.selectionType()==="additive"||Ne?Ce.selected()?Ce.unselect(["tapunselect"]):Ce.select(["tapselect"]):Ne||(ae.$(r).unmerge(Ce).unselect(["tapunselect"]),Ce.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var ze=ae.collection(t.getAllInBox(de[0],de[1],de[2],de[3]));t.redrawHint("select",!0),ze.length>0&&t.redrawHint("eles",!0),ae.emit({type:"boxend",originalEvent:L,position:{x:se[0],y:se[1]}});var Le=function(ht){return ht.selectable()&&!ht.selected()};ae.selectionType()==="additive"||Ne||ae.$(r).unmerge(ze).unselect(),ze.emit("box").stdFilter(Le).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!de[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ie=Se&&Se.grabbed();d(ve),Ie&&(Se.emit("freeon"),ve.emit("free"),t.dragData.didDrag&&(Se.emit("dragfreeon"),ve.emit("dragfree")))}}de[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var G=[],B=4,k,O=1e5,z=function(L,re){for(var ae=0;ae<L.length;ae++)if(L[ae]%re!==0)return!1;return!0},H=function(L){for(var re=Math.abs(L[0]),ae=1;ae<L.length;ae++)if(Math.abs(L[ae])!==re)return!1;return!0},U=function(L){var re=!1,ae=L.deltaY;if(ae==null&&(L.wheelDeltaY!=null?ae=L.wheelDeltaY/4:L.wheelDelta!=null&&(ae=L.wheelDelta/4)),k==null)if(G.length>=B){var se=G;if(k=z(se,5),!k){var de=Math.abs(se[0]);k=H(se)&&de>5}if(k)for(var Ce=0;Ce<se.length;Ce++)O=Math.min(Math.abs(se[Ce]),O)}else G.push(ae),re=!0;else k&&(O=Math.min(Math.abs(ae),O));if(!t.scrollingPage){var ve=t.cy,Se=ve.zoom(),Ne=ve.pan(),qe=t.projectIntoViewport(L.clientX,L.clientY),Re=[qe[0]*Se+Ne.x,qe[1]*Se+Ne.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S()){L.preventDefault();return}if(ve.panningEnabled()&&ve.userPanningEnabled()&&ve.zoomingEnabled()&&ve.userZoomingEnabled()){L.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ze;re&&Math.abs(ae)>5&&(ae=qc(ae)*5),ze=ae/-250,k&&(ze/=O,ze*=3),ze=ze*t.wheelSensitivity;var Le=L.deltaMode===1;Le&&(ze*=33);var Ie=ve.zoom()*Math.pow(10,ze);L.type==="gesturechange"&&(Ie=t.gestureStartZoom*L.scale),ve.zoom({level:Ie,renderedPosition:{x:Re[0],y:Re[1]}}),ve.emit(L.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",U,!0),t.registerBinding(e,"scroll",function(L){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(L){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||L.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ue){t.hasTouchStarted||U(ue)},!0),t.registerBinding(t.container,"mouseout",function(L){var re=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseout",position:{x:re[0],y:re[1]}})},!1),t.registerBinding(t.container,"mouseover",function(L){var re=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseover",position:{x:re[0],y:re[1]}})},!1);var _,q,I,F,$,K,ee,Y,W,J,D,N,j,ne=function(L,re,ae,se){return Math.sqrt((ae-L)*(ae-L)+(se-re)*(se-re))},ce=function(L,re,ae,se){return(ae-L)*(ae-L)+(se-re)*(se-re)},ie;t.registerBinding(t.container,"touchstart",ie=function(L){if(t.hasTouchStarted=!0,!!P(L)){m(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var re=t.cy,ae=t.touchData.now,se=t.touchData.earlier;if(L.touches[0]){var de=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);ae[0]=de[0],ae[1]=de[1]}if(L.touches[1]){var de=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);ae[2]=de[0],ae[3]=de[1]}if(L.touches[2]){var de=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);ae[4]=de[0],ae[5]=de[1]}if(L.touches[1]){t.touchData.singleTouchMoved=!0,d(t.dragData.touchDragEles);var Ce=t.findContainerClientCoords();W=Ce[0],J=Ce[1],D=Ce[2],N=Ce[3],_=L.touches[0].clientX-W,q=L.touches[0].clientY-J,I=L.touches[1].clientX-W,F=L.touches[1].clientY-J,j=0<=_&&_<=D&&0<=I&&I<=D&&0<=q&&q<=N&&0<=F&&F<=N;var ve=re.pan(),Se=re.zoom();$=ne(_,q,I,F),K=ce(_,q,I,F),ee=[(_+I)/2,(q+F)/2],Y=[(ee[0]-ve.x)/Se,(ee[1]-ve.y)/Se];var Ne=200,qe=Ne*Ne;if(K<qe&&!L.touches[2]){var Re=t.findNearestElement(ae[0],ae[1],!0,!0),ze=t.findNearestElement(ae[2],ae[3],!0,!0);Re&&Re.isNode()?(Re.activate().emit({originalEvent:L,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start=Re):ze&&ze.isNode()?(ze.activate().emit({originalEvent:L,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start=ze):re.emit({originalEvent:L,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(L.touches[2])re.boxSelectionEnabled()&&L.preventDefault();else if(!L.touches[1]){if(L.touches[0]){var Le=t.findNearestElements(ae[0],ae[1],!0,!0),Ie=Le[0];if(Ie!=null&&(Ie.activate(),t.touchData.start=Ie,t.touchData.starts=Le,t.nodeIsGrabbable(Ie))){var Xe=t.dragData.touchDragEles=re.collection(),ht=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ie.selected()?(ht=re.$(function(mt){return mt.selected()&&t.nodeIsGrabbable(mt)}),w(ht,{addToList:Xe})):b(Ie,{addToList:Xe}),f(Ie);var At=function(Zt){return{originalEvent:L,type:Zt,position:{x:ae[0],y:ae[1]}}};Ie.emit(At("grabon")),ht?ht.forEach(function(mt){mt.emit(At("grab"))}):Ie.emit(At("grab"))}a(Ie,["touchstart","tapstart","vmousedown"],L,{x:ae[0],y:ae[1]}),Ie==null&&(t.data.bgActivePosistion={x:de[0],y:de[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],L,{x:ae[0],y:ae[1]})},t.tapholdDuration)}}if(L.touches.length>=1){for(var Et=t.touchData.startPosition=[null,null,null,null,null,null],ct=0;ct<ae.length;ct++)Et[ct]=se[ct]=ae[ct];var Bt=L.touches[0];t.touchData.startGPosition=[Bt.clientX,Bt.clientY]}}},!1);var le;t.registerBinding(e,"touchmove",le=function(L){var re=t.touchData.capture;if(!(!re&&!P(L))){var ae=t.selection,se=t.cy,de=t.touchData.now,Ce=t.touchData.earlier,ve=se.zoom();if(L.touches[0]){var Se=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}if(L.touches[1]){var Se=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);de[2]=Se[0],de[3]=Se[1]}if(L.touches[2]){var Se=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);de[4]=Se[0],de[5]=Se[1]}var Ne=t.touchData.startGPosition,qe;if(re&&L.touches[0]&&Ne){for(var Re=[],ze=0;ze<de.length;ze++)Re[ze]=de[ze]-Ce[ze];var Le=L.touches[0].clientX-Ne[0],Ie=Le*Le,Xe=L.touches[0].clientY-Ne[1],ht=Xe*Xe,At=Ie+ht;qe=At>=t.touchTapThreshold2}if(re&&t.touchData.cxt){L.preventDefault();var Et=L.touches[0].clientX-W,ct=L.touches[0].clientY-J,Bt=L.touches[1].clientX-W,mt=L.touches[1].clientY-J,Zt=ce(Et,ct,Bt,mt),Sr=Zt/K,nn=150,Nr=nn*nn,ia=1.5,Yi=ia*ia;if(Sr>=Yi||Zt>=Nr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ln={originalEvent:L,type:"cxttapend",position:{x:de[0],y:de[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Ln),t.touchData.start=null):se.emit(Ln)}}if(re&&t.touchData.cxt){var Ln={originalEvent:L,type:"cxtdrag",position:{x:de[0],y:de[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Ln):se.emit(Ln),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Qt=t.findNearestElement(de[0],de[1],!0,!0);(!t.touchData.cxtOver||Qt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:L,type:"cxtdragout",position:{x:de[0],y:de[1]}}),t.touchData.cxtOver=Qt,Qt&&Qt.emit({originalEvent:L,type:"cxtdragover",position:{x:de[0],y:de[1]}}))}else if(re&&L.touches[2]&&se.boxSelectionEnabled())L.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||se.emit({originalEvent:L,type:"boxstart",position:{x:de[0],y:de[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,ae[4]=1,!ae||ae.length===0||ae[0]===void 0?(ae[0]=(de[0]+de[2]+de[4])/3,ae[1]=(de[1]+de[3]+de[5])/3,ae[2]=(de[0]+de[2]+de[4])/3+1,ae[3]=(de[1]+de[3]+de[5])/3+1):(ae[2]=(de[0]+de[2]+de[4])/3,ae[3]=(de[1]+de[3]+de[5])/3),t.redrawHint("select",!0),t.redraw();else if(re&&L.touches[1]&&!t.touchData.didSelect&&se.zoomingEnabled()&&se.panningEnabled()&&se.userZoomingEnabled()&&se.userPanningEnabled()){L.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var zt=t.dragData.touchDragEles;if(zt){t.redrawHint("drag",!0);for(var Jt=0;Jt<zt.length;Jt++){var Xi=zt[Jt]._private;Xi.grabbed=!1,Xi.rscratch.inDragLayer=!1}}var Tr=t.touchData.start,Et=L.touches[0].clientX-W,ct=L.touches[0].clientY-J,Bt=L.touches[1].clientX-W,mt=L.touches[1].clientY-J,af=ne(Et,ct,Bt,mt),Km=af/$;if(j){var jm=Et-_,Ym=ct-q,Xm=Bt-I,Zm=mt-F,Qm=(jm+Xm)/2,Jm=(Ym+Zm)/2,Ga=se.zoom(),_s=Ga*Km,Zi=se.pan(),of=Y[0]*Ga+Zi.x,sf=Y[1]*Ga+Zi.y,ey={x:-_s/Ga*(of-Zi.x-Qm)+of,y:-_s/Ga*(sf-Zi.y-Jm)+sf};if(Tr&&Tr.active()){var zt=t.dragData.touchDragEles;d(zt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Tr.unactivate().emit("freeon"),zt.emit("free"),t.dragData.didDrag&&(Tr.emit("dragfreeon"),zt.emit("dragfree"))}se.viewport({zoom:_s,pan:ey,cancelOnFailedZoom:!0}),se.emit("pinchzoom"),$=af,_=Et,q=ct,I=Bt,F=mt,t.pinching=!0}if(L.touches[0]){var Se=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}if(L.touches[1]){var Se=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);de[2]=Se[0],de[3]=Se[1]}if(L.touches[2]){var Se=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);de[4]=Se[0],de[5]=Se[1]}}else if(L.touches[0]&&!t.touchData.didSelect){var pr=t.touchData.start,Is=t.touchData.last,Qt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Qt=t.findNearestElement(de[0],de[1],!0,!0)),re&&pr!=null&&L.preventDefault(),re&&pr!=null&&t.nodeIsDraggable(pr))if(qe){var zt=t.dragData.touchDragEles,lf=!t.dragData.didDrag;lf&&w(zt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Ha={x:0,y:0};if(ye(Re[0])&&ye(Re[1])&&(Ha.x+=Re[0],Ha.y+=Re[1],lf)){t.redrawHint("eles",!0);var mr=t.touchData.dragDelta;mr&&ye(mr[0])&&ye(mr[1])&&(Ha.x+=mr[0],Ha.y+=mr[1])}t.hoverData.draggingEles=!0,zt.silentShift(Ha).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ce[0]&&t.touchData.startPosition[1]==Ce[1]&&t.redrawHint("eles",!0),t.redraw()}else{var mr=t.touchData.dragDelta=t.touchData.dragDelta||[];mr.length===0?(mr.push(Re[0]),mr.push(Re[1])):(mr[0]+=Re[0],mr[1]+=Re[1])}if(a(pr||Qt,["touchmove","tapdrag","vmousemove"],L,{x:de[0],y:de[1]}),(!pr||!pr.grabbed())&&Qt!=Is&&(Is&&Is.emit({originalEvent:L,type:"tapdragout",position:{x:de[0],y:de[1]}}),Qt&&Qt.emit({originalEvent:L,type:"tapdragover",position:{x:de[0],y:de[1]}})),t.touchData.last=Qt,re)for(var Jt=0;Jt<de.length;Jt++)de[Jt]&&t.touchData.startPosition[Jt]&&qe&&(t.touchData.singleTouchMoved=!0);if(re&&(pr==null||pr.pannable())&&se.panningEnabled()&&se.userPanningEnabled()){var ty=o(pr,t.touchData.starts);ty&&(L.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ya(t.touchData.startPosition)),t.swipePanning?(se.panBy({x:Re[0]*ve,y:Re[1]*ve}),se.emit("dragpan")):qe&&(t.swipePanning=!0,se.panBy({x:Le*ve,y:Xe*ve}),se.emit("dragpan"),pr&&(pr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Se=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}}for(var ze=0;ze<de.length;ze++)Ce[ze]=de[ze];re&&L.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var X;t.registerBinding(e,"touchcancel",X=function(L){var re=t.touchData.start;t.touchData.capture=!1,re&&re.unactivate()});var Q,Z,fe,oe;if(t.registerBinding(e,"touchend",Q=function(L){var re=t.touchData.start,ae=t.touchData.capture;if(ae)L.touches.length===0&&(t.touchData.capture=!1),L.preventDefault();else return;var se=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var de=t.cy,Ce=de.zoom(),ve=t.touchData.now,Se=t.touchData.earlier;if(L.touches[0]){var Ne=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);ve[0]=Ne[0],ve[1]=Ne[1]}if(L.touches[1]){var Ne=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);ve[2]=Ne[0],ve[3]=Ne[1]}if(L.touches[2]){var Ne=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);ve[4]=Ne[0],ve[5]=Ne[1]}re&&re.unactivate();var qe;if(t.touchData.cxt){if(qe={originalEvent:L,type:"cxttapend",position:{x:ve[0],y:ve[1]}},re?re.emit(qe):de.emit(qe),!t.touchData.cxtDragged){var Re={originalEvent:L,type:"cxttap",position:{x:ve[0],y:ve[1]}};re?re.emit(Re):de.emit(Re)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!L.touches[2]&&de.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var ze=de.collection(t.getAllInBox(se[0],se[1],se[2],se[3]));se[0]=void 0,se[1]=void 0,se[2]=void 0,se[3]=void 0,se[4]=0,t.redrawHint("select",!0),de.emit({type:"boxend",originalEvent:L,position:{x:ve[0],y:ve[1]}});var Le=function(Nr){return Nr.selectable()&&!Nr.selected()};ze.emit("box").stdFilter(Le).select().emit("boxselect"),ze.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(re!=null&&re.unactivate(),L.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!L.touches[1]){if(!L.touches[0]){if(!L.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ie=t.dragData.touchDragEles;if(re!=null){var Xe=re._private.grabbed;d(Ie),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Xe&&(re.emit("freeon"),Ie.emit("free"),t.dragData.didDrag&&(re.emit("dragfreeon"),Ie.emit("dragfree"))),a(re,["touchend","tapend","vmouseup","tapdragout"],L,{x:ve[0],y:ve[1]}),re.unactivate(),t.touchData.start=null}else{var ht=t.findNearestElement(ve[0],ve[1],!0,!0);a(ht,["touchend","tapend","vmouseup","tapdragout"],L,{x:ve[0],y:ve[1]})}var At=t.touchData.startPosition[0]-ve[0],Et=At*At,ct=t.touchData.startPosition[1]-ve[1],Bt=ct*ct,mt=Et+Bt,Zt=mt*Ce*Ce;t.touchData.singleTouchMoved||(re||de.$(":selected").unselect(["tapunselect"]),a(re,["tap","vclick"],L,{x:ve[0],y:ve[1]}),Z=!1,L.timeStamp-oe<=de.multiClickDebounceTime()?(fe&&clearTimeout(fe),Z=!0,oe=null,a(re,["dbltap","vdblclick"],L,{x:ve[0],y:ve[1]})):(fe=setTimeout(function(){Z||a(re,["onetap","voneclick"],L,{x:ve[0],y:ve[1]})},de.multiClickDebounceTime()),oe=L.timeStamp)),re!=null&&!t.dragData.didDrag&&re._private.selectable&&Zt<t.touchTapThreshold2&&!t.pinching&&(de.selectionType()==="single"?(de.$(r).unmerge(re).unselect(["tapunselect"]),re.select(["tapselect"])):re.selected()?re.unselect(["tapunselect"]):re.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Sr=0;Sr<ve.length;Sr++)Se[Sr]=ve[Sr];t.dragData.didDrag=!1,L.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),L.touches.length<2&&(L.touches.length===1&&(t.touchData.startGPosition=[L.touches[0].clientX,L.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var he=[],pe=function(L){return{clientX:L.clientX,clientY:L.clientY,force:1,identifier:L.pointerId,pageX:L.pageX,pageY:L.pageY,radiusX:L.width/2,radiusY:L.height/2,screenX:L.screenX,screenY:L.screenY,target:L.target}},ge=function(L){return{event:L,touch:pe(L)}},Ee=function(L){he.push(ge(L))},we=function(L){for(var re=0;re<he.length;re++){var ae=he[re];if(ae.event.pointerId===L.pointerId){he.splice(re,1);return}}},ke=function(L){var re=he.filter(function(ae){return ae.event.pointerId===L.pointerId})[0];re.event=L,re.touch=pe(L)},De=function(L){L.touches=he.map(function(re){return re.touch})},me=function(L){return L.pointerType==="mouse"||L.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ue){me(ue)||(ue.preventDefault(),Ee(ue),De(ue),ie(ue))}),t.registerBinding(t.container,"pointerup",function(ue){me(ue)||(we(ue),De(ue),Q(ue))}),t.registerBinding(t.container,"pointercancel",function(ue){me(ue)||(we(ue),De(ue),X(ue))}),t.registerBinding(t.container,"pointermove",function(ue){me(ue)||(ue.preventDefault(),ke(ue),De(ue),le(ue))})}};var tn={};tn.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s,l){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u,c){return Pi(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u,c){return Qr(n,a,this.points,l,u,o,s,[0,-1],i)}}};tn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,l){return Cw(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s,l){return Kn(e,r,a,i,o,s,n)}}};tn.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var c=i/2,f=o/2;s=s==="auto"?Cp(i,o):s;for(var v=new Array(e.length/2),g=0;g<e.length/2;g++)v[g]={x:n+c*e[g*2],y:a+f*e[g*2+1]};var h,w,b,d,p=v.length;for(w=v[p-1],h=0;h<p;h++)b=v[h%p],d=v[(h+1)%p],l[u][h]=ef(w,b,d,s),w=b,b=d;return l[u]},draw:function(n,a,i,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,l,u,"drawCorners"))},intersectLine:function(n,a,i,o,s,l,u,c,f){return Ew(s,l,this.points,n,a,i,o,u,this.getOrCreateCorners(n,a,i,o,c,f,"corners"))},checkPoint:function(n,a,i,o,s,l,u,c,f){return xw(n,a,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,c,f,"corners"))}}};tn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Wt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,l){return wp(i,o,e,r,n,a,s,l)},checkPoint:function(e,r,n,a,i,o,s,l){var u=a/2,c=i/2;l=l==="auto"?En(a,i):l,l=Math.min(u,c,l);var f=l*2;return!!(Qr(e,r,this.points,o,s,a,i-f,[0,-1],n)||Qr(e,r,this.points,o,s,a-f,i,[0,-1],n)||Kn(e,r,f,f,o-u+l,s-c+l,n)||Kn(e,r,f,f,o+u-l,s-c+l,n)||Kn(e,r,f,f,o+u-l,s+c-l,n)||Kn(e,r,f,f,o-u+l,s+c-l,n))}}};tn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Gc(),points:Wt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,o)},generateCutTrianglePts:function(e,r,n,a,i){var o=i==="auto"?this.cornerLength:i,s=r/2,l=e/2,u=n-l,c=n+l,f=a-s,v=a+s;return{topLeft:[u,f+o,u+o,f,u+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,v-o,c-o,v,c-o,v-o],bottomLeft:[u+o,v,u,v-o,u+o,v-o]}},intersectLine:function(e,r,n,a,i,o,s,l){var u=this.generateCutTrianglePts(n+2*s,a+2*s,e,r,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Pi(i,o,c,e,r)},checkPoint:function(e,r,n,a,i,o,s,l){var u=l==="auto"?this.cornerLength:l;if(Qr(e,r,this.points,o,s,a,i-2*u,[0,-1],n)||Qr(e,r,this.points,o,s,a-2*u,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,s);return rr(e,r,c.topLeft)||rr(e,r,c.topRight)||rr(e,r,c.bottomRight)||rr(e,r,c.bottomLeft)}}};tn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Wt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,l){var u=.15,c=.5,f=.85,v=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),g=function(b){var d=Da({x:b[0],y:b[1]},{x:b[2],y:b[3]},{x:b[4],y:b[5]},u),p=Da({x:b[0],y:b[1]},{x:b[2],y:b[3]},{x:b[4],y:b[5]},c),m=Da({x:b[0],y:b[1]},{x:b[2],y:b[3]},{x:b[4],y:b[5]},f);return[b[0],b[1],d.x,d.y,p.x,p.y,m.x,m.y,b[4],b[5]]},h=[].concat(g(v.topLeft),g(v.topRight),g(v.bottomRight),g(v.bottomLeft));return Pi(i,o,h,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,l=n+o,u=a-i,c=a+i,f=Zu(e,r),v=f.heightOffset,g=f.widthOffset,h=f.ctrlPtOffsetPct*e,w={topLeft:[s,u+v,s+h,u,s+g,u],topRight:[l-g,u,l-h,u,l,u+v],bottomRight:[l,c-v,l-h,c,l-g,c],bottomLeft:[s+g,c,s+h,c,s,c-v]};return w.topLeft.isTop=!0,w.topRight.isTop=!0,w.bottomLeft.isBottom=!0,w.bottomRight.isBottom=!0,w},checkPoint:function(e,r,n,a,i,o,s,l){var u=Zu(a,i),c=u.heightOffset,f=u.widthOffset;if(Qr(e,r,this.points,o,s,a,i-2*c,[0,-1],n)||Qr(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var v=this.generateBarrelBezierPts(a,i,o,s),g=function(T,S,P){var R=P[4],A=P[2],M=P[0],V=P[5],G=P[1],B=Math.min(R,M),k=Math.max(R,M),O=Math.min(V,G),z=Math.max(V,G);if(B<=T&&T<=k&&O<=S&&S<=z){var H=Sw(R,A,M),U=mw(H[0],H[1],H[2],T),_=U.filter(function(q){return 0<=q&&q<=1});if(_.length>0)return _[0]}return null},h=Object.keys(v),w=0;w<h.length;w++){var b=h[w],d=v[b],p=g(e,r,d);if(p!=null){var m=d[5],y=d[3],x=d[1],E=St(m,y,x,p);if(d.isTop&&E<=r||d.isBottom&&r<=E)return!0}}return!1}}};tn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Wt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,l){var u=e-(n/2+s),c=r-(a/2+s),f=c,v=e+(n/2+s),g=vn(i,o,e,r,u,c,v,f,!1);return g.length>0?g:wp(i,o,e,r,n,a,s,l)},checkPoint:function(e,r,n,a,i,o,s,l){l=l==="auto"?En(a,i):l;var u=2*l;if(Qr(e,r,this.points,o,s,a,i-u,[0,-1],n)||Qr(e,r,this.points,o,s,a-u,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,v=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(rr(e,r,v)||Kn(e,r,u,u,o+a/2-l,s+i/2-l,n)||Kn(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};tn.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Wt(3,0)),this.generateRoundPolygon("round-triangle",Wt(3,0)),this.generatePolygon("rectangle",Wt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Wt(5,0)),this.generateRoundPolygon("round-pentagon",Wt(5,0)),this.generatePolygon("hexagon",Wt(6,0)),this.generateRoundPolygon("round-hexagon",Wt(6,0)),this.generatePolygon("heptagon",Wt(7,0)),this.generateRoundPolygon("round-heptagon",Wt(7,0)),this.generatePolygon("octagon",Wt(8,0)),this.generateRoundPolygon("round-octagon",Wt(8,0));var n=new Array(20);{var a=Xu(5,0),i=Xu(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=xp(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,v;return(v=this[f])?v:e.generatePolygon(f,u)}};var Ki={};Ki.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Ki.redraw=function(t){t=t||mp();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Ki.beforeRender=function(t,e){if(!this.destroyed){e==null&&st("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var nh=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Ki.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){nh(t,!0,a);var i=Zr();t.render(t.renderOptions);var o=t.lastDrawTime=Zr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else nh(t,!1,a);t.skipFrame=!1,Go(r)}};Go(r)}};var qE=function(e){this.init(e)},xm=qE,$a=xm.prototype;$a.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];$a.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=a.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!l){var u=a.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",i.insertBefore(u,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Ye("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ye(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};$a.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};$a.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};$a.isHeadless=function(){return!1};[Jc,bm,wm,qa,tn,Ki].forEach(function(t){Be($a,t)});var pu=1e3/60,Cm={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=$i(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,c){var f=Zr(),v=a.averageRedrawTime,g=a.lastRedrawTime,h=[],w=a.cy.extent(),b=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var d=Zr(),p=d-f,m=d-c;if(g<pu){var y=pu-(u?v:0);if(m>=e.deqFastCost*y)break}else if(u){if(p>=e.deqCost*g||p>=e.deqAvgCost*v)break}else if(m>=e.deqNoDrawCost*pu)break;var x=e.deq(n,b,w);if(x.length>0)for(var E=0;E<x.length;E++)h.push(x[E]);else break}h.length>0&&(e.onDeqd(n,h),!u&&e.shouldRedraw(n,h,b,w)&&i())},s=e.priority||zc;a.beforeRender(o,s(n))}}}},$E=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ho;kn(this,t),this.idsByKey=new jr,this.keyForId=new jr,this.cachesByLvl=new jr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return An(t,[{key:"getIdsFor",value:function(r){r==null&&st("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Na,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new jr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),ah=25,ho=50,Ao=-4,cc=3,Em=7.99,GE=8,HE=1024,UE=1024,WE=1024,KE=.2,jE=.8,YE=10,XE=.15,ZE=.1,QE=.9,JE=.9,eS=100,tS=1,wa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},rS=Ot({getKey:null,doesEleInvalidateKey:Ho,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:hp,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ai=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=rS(r);Be(n,a),n.lookup=new $E(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Ct=ai.prototype;Ct.reasons=wa;Ct.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Ct.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};Ct.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Gi(function(r,n){return n.reqs-r.reqs});return e};Ct.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Ct.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Vc(s*r))),n<Ao)n=Ao;else if(s>=Em||n>cc)return null;var u=Math.pow(2,n),c=e.h*u,f=e.w*u,v=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,v))return null;var g=l.get(t,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var h;if(c<=ah?h=ah:c<=ho?h=ho:h=Math.ceil(c/ho)*ho,c>WE||f>UE)return null;var w=i.getTextureQueue(h),b=w[w.length-2],d=function(){return i.recycleTexture(h,f)||i.addTexture(h,f)};b||(b=w[w.length-1]),b||(b=d()),b.width-b.usedWidth<f&&(b=d());for(var p=function(B){return B&&B.scaledLabelShown===v},m=a&&a===wa.dequeue,y=a&&a===wa.highQuality,x=a&&a===wa.downscale,E,C=n+1;C<=cc;C++){var T=l.get(t,C);if(T){E=T;break}}var S=E&&E.level===n+1?E:null,P=function(){b.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,b.usedWidth,0,f,c)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,f,h),p(S))P();else if(p(E))if(y){for(var R=E.level;R>n;R--)S=i.getElement(t,e,r,R,wa.downscale);P()}else return i.queueElement(t,E.level-1),E;else{var A;if(!m&&!y&&!x)for(var M=n-1;M>=Ao;M--){var V=l.get(t,M);if(V){A=V;break}}if(p(A))return i.queueElement(t,n),A;b.context.translate(b.usedWidth,0),b.context.scale(u,u),this.drawElement(b.context,t,e,v,!1),b.context.scale(1/u,1/u),b.context.translate(-b.usedWidth,0)}return g={x:b.usedWidth,texture:b,level:n,scale:u,width:f,height:c,scaledLabelShown:v},b.usedWidth+=Math.ceil(f+GE),b.eleCaches.push(g),l.set(t,n,g),i.checkTextureFullness(b),g};Ct.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Ct.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Ao;i<=cc;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Ct.checkTextureUtility=function(t){t.invalidatedWidth>=KE*t.width&&this.retireTexture(t)};Ct.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>jE&&t.fullnessChecks>=YE?Cn(r,t):t.fullnessChecks++};Ct.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Cn(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Fc(i);var l=e.getRetiredTextureQueue(r);l.push(t)};Ct.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(HE,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Ct.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Fc(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Cn(a,o),n.push(o),o}};Ct.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};Ct.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<tS&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],c=i.hasCache(u,s.level);if(n[l]=null,c)continue;a.push(s);var f=e.getBoundingBox(u);e.getElement(u,f,t,s.level,wa.dequeue)}return a};Ct.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Nc,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};Ct.onDequeue=function(t){this.onDequeues.push(t)};Ct.offDequeue=function(t){Cn(this.onDequeues,t)};Ct.setupDequeueing=Cm.setupDequeueing({deqRedrawThreshold:eS,deqCost:XE,deqAvgCost:ZE,deqNoDrawCost:QE,deqFastCost:JE,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if($c(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var nS=1,vi=-4,Qo=2,aS=3.99,iS=50,oS=50,sS=.15,lS=.1,uS=.9,cS=.9,fS=1,ih=250,dS=4e3*4e3,oh=32767,vS=!0,Sm=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Zr()-2*ih,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=$i(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},oS),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=ih?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};r.layersQueue=new Gi(i),r.setupDequeueing()},Nt=Sm.prototype,sh=0,hS=Math.pow(2,53)-1;Nt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:sh=++sh%hS,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o};Nt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Vc(o*e)),r<vi)r=vi;else if(o>=aS||r>Qo)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[],f,v=n.levelIsComplete(r,t),g,h=function(){var P=function(G){if(n.validateLayersElesOrdering(G,t),n.levelIsComplete(G,t))return g=l[G],!0},R=function(G){if(!g)for(var B=r+G;vi<=B&&B<=Qo&&!P(B);B+=G);};R(1),R(-1);for(var A=c.length-1;A>=0;A--){var M=c[A];M.invalid&&Cn(c,M)}};if(!v)h();else return c;var w=function(){if(!f){f=ir();for(var P=0;P<t.length;P++)bp(f,t[P].boundingBox())}return f},b=function(P){P=P||{};var R=P.after;w();var A=Math.ceil(f.w*u),M=Math.ceil(f.h*u);if(A>oh||M>oh)return null;var V=A*M;if(V>dS)return null;var G=n.makeLayer(f,r);if(R!=null){var B=c.indexOf(R)+1;c.splice(B,0,G)}else(P.insert===void 0||P.insert)&&c.unshift(G);return G};if(n.skipping&&!s)return null;for(var d=null,p=t.length/nS,m=!s,y=0;y<t.length;y++){var x=t[y],E=x._private.rscratch,C=E.imgLayerCaches=E.imgLayerCaches||{},T=C[r];if(T){d=T;continue}if((!d||d.eles.length>=p||!hw(d.bb,x.boundingBox()))&&(d=b({insert:!0,after:d}),!d))return null;g||m?n.queueLayer(d,x):n.drawEleInLayer(d,x,r,e),d.eles.push(x),C[r]=d}return g||(m?null:c)};Nt.getEleLevelForLayerLevel=function(t,e){return t};Nt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,vS),i.setImgSmoothing(o,!0))};Nt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};Nt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};Nt.updateElementsInLayers=function(t,e){for(var r=this,n=zi(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=vi;u<=Qo;u++){var c=l[u];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};Nt.haveLayers=function(){for(var t=this,e=!1,r=vi;r<=Qo;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Nt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Zr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Nt.invalidateLayer=function(t){if(this.lastInvalidationTime=Zr(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Cn(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Nt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Nt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Nt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Nt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<fS&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Nt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};Nt.requestRedraw=$i(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Nt.setupDequeueing=Cm.setupDequeueing({deqRedrawThreshold:iS,deqCost:sS,deqAvgCost:lS,deqNoDrawCost:uS,deqFastCost:cS,deq:function(e,r){return e.dequeue(r)},onDeqd:zc,shouldRedraw:hp,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Tm={},lh;function gS(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function pS(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function uh(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function mS(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function yS(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Tm.arrowShapeImpl=function(t){return(lh||(lh={polygon:gS,"triangle-backcurve":pS,"triangle-tee":uh,"circle-triangle":mS,"triangle-cross":uh,circle:yS}))[t]};var Or={};Or.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Or.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Or.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Or.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=r.getElement(e,u,n,a,i);if(c!=null){var f=s(l,e);if(f===0)return;var v=o(l,e),g=u.x1,h=u.y1,w=u.w,b=u.h,d,p,m,y,x;if(v!==0){var E=r.getRotationPoint(e);m=E.x,y=E.y,t.translate(m,y),t.rotate(v),x=l.getImgSmoothing(t),x||l.setImgSmoothing(t,!0);var C=r.getRotationOffset(e);d=C.x,p=C.y}else d=g,p=h;var T;f!==1&&(T=t.globalAlpha,t.globalAlpha=T*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,p,w,b),f!==1&&(t.globalAlpha=T),v!==0&&(t.rotate(-v),t.translate(-m,-y),x||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var bS=function(){return 0},wS=function(e,r){return e.getTextAngle(r,null)},xS=function(e,r){return e.getTextAngle(r,"source")},CS=function(e,r){return e.getTextAngle(r,"target")},ES=function(e,r){return r.effectiveOpacity()},mu=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Or.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,v=e.boundingBox(),g=i===!0?l.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!n||$c(v,n))){var h=e.isEdge(),w=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,r,a,g,bS,ES),(!h||!w)&&o.drawCachedElementPortion(t,e,u,r,a,g,wS,mu),h&&!w&&(o.drawCachedElementPortion(t,e,c,r,a,g,xS,mu),o.drawCachedElementPortion(t,e,f,r,a,g,CS,mu)),o.drawElementOverlay(t,e)}};Or.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Or.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Or.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};Or.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var rn={};rn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,w=e.pstyle("line-outline-width").value,b=e.pstyle("line-outline-color").value,d=u*c,p=u*c,m=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d;f==="straight-triangle"?(o.eleStrokeStyle(t,e,G),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=g,t.lineCap=h,o.eleStrokeStyle(t,e,G),o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},y=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d;if(t.lineWidth=g+w,t.lineCap=h,w>0)o.colorStrokeStyle(t,b[0],b[1],b[2],G);else{t.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},x=function(){a&&o.drawEdgeOverlay(t,e)},E=function(){a&&o.drawEdgeUnderlay(t,e)},C=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;o.drawArrowheads(t,e,G)},T=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var P=e.pstyle("ghost-offset-x").pfValue,R=e.pstyle("ghost-offset-y").pfValue,A=e.pstyle("ghost-opacity").value,M=d*A;t.translate(P,R),m(M),C(M),t.translate(-P,-R)}else y();E(),m(),C(),x(),T(),r&&t.translate(l.x1,l.y1)}};var Dm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};rn.drawEdgeOverlay=Dm("overlay");rn.drawEdgeUnderlay=Dm("underlay");rn.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),v=a.pathCacheKey&&a.pathCacheKey===f;v?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=f,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<r.length;g+=4)e.quadraticCurveTo(r[g],r[g+1],r[g+2],r[g+3]);break;case"straight":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break;case"segments":if(a.isRound){var w=ar(a.roundCorners),b;try{for(w.s();!(b=w.n()).done;){var d=b.value;hm(e,d)}}catch(m){w.e(m)}finally{w.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var p=2;p+1<r.length;p+=2)e.lineTo(r[p],r[p+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};rn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};rn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};rn.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,v=e.pstyle(r+"-arrow-width"),g=v.value==="match-line"?f:v.pfValue;v.units==="%"&&(g*=f);var h=e.pstyle("opacity").value;o===void 0&&(o=h);var w=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,f,l,g,n,a,i),t.globalCompositeOperation=w);var b=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,b[0],b[1],b[2],o),s.colorStrokeStyle(t,b[0],b[1],b[2],o),s.drawArrowShape(e,t,c,f,l,g,n,a,i)}}};rn.drawArrowShape=function(t,e,r,n,a,i,o,s,l){var u=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,v,g=e,h={x:o,y:s},w=t.pstyle("arrow-scale").value,b=this.getArrowWidth(n,w),d=u.arrowShapes[a];if(c){var p=u.arrowPathCache=u.arrowPathCache||[],m=Qn(a),y=p[m];y!=null?(v=e=y,f=!0):(v=e=new Path2D,p[m]=v)}f||(e.beginPath&&e.beginPath(),c?d.draw(e,1,0,{x:0,y:0},1):d.draw(e,b,l,h,n),e.closePath&&e.closePath()),e=g,c&&(e.translate(o,s),e.rotate(l),e.scale(b,b)),(r==="filled"||r==="both")&&(c?e.fill(v):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?b:1),e.lineJoin="miter",c?e.stroke(v):e.stroke()),c&&(e.scale(1/b,1/b),e.rotate(-l),e.translate(-o,-s))};var rf={};rf.safeDrawImage=function(t,e,r,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,o,s,l,u)}catch(c){Ye(c)}};rf.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),f=c(r,"background-fit","value",n),v=c(r,"background-repeat","value",n),g=r.width(),h=r.height(),w=r.padding()*2,b=g+(c(r,"background-width-relative-to","value",n)==="inner"?0:w),d=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:w),p=r._private.rscratch,m=c(r,"background-clip","value",n),y=m==="node",x=c(r,"background-image-opacity","value",n)*a,E=c(r,"background-image-smoothing","value",n),C=r.pstyle("corner-radius").value;C!=="auto"&&(C=r.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,S=e.height||e.cachedH;(T==null||S==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var P=T,R=S;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?P=c(r,"background-width","pfValue",n)*b:P=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?R=c(r,"background-height","pfValue",n)*d:R=c(r,"background-height","pfValue",n)),!(P===0||R===0)){if(f==="contain"){var A=Math.min(b/P,d/R);P*=A,R*=A}else if(f==="cover"){var A=Math.max(b/P,d/R);P*=A,R*=A}var M=s-b/2,V=c(r,"background-position-x","units",n),G=c(r,"background-position-x","pfValue",n);V==="%"?M+=(b-P)*G:M+=G;var B=c(r,"background-offset-x","units",n),k=c(r,"background-offset-x","pfValue",n);B==="%"?M+=(b-P)*k:M+=k;var O=l-d/2,z=c(r,"background-position-y","units",n),H=c(r,"background-position-y","pfValue",n);z==="%"?O+=(d-R)*H:O+=H;var U=c(r,"background-offset-y","units",n),_=c(r,"background-offset-y","pfValue",n);U==="%"?O+=(d-R)*_:O+=_,p.pathCache&&(M-=s,O-=l,s=0,l=0);var q=t.globalAlpha;t.globalAlpha=x;var I=i.getImgSmoothing(t),F=!1;if(E==="no"&&I?(i.setImgSmoothing(t,!1),F=!0):E==="yes"&&!I&&(i.setImgSmoothing(t,!0),F=!0),v==="no-repeat")y&&(t.save(),p.pathCache?t.clip(p.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,b,d,C,p),t.clip())),i.safeDrawImage(t,e,0,0,T,S,M,O,P,R),y&&t.restore();else{var $=t.createPattern(e,v);t.fillStyle=$,i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,b,d,C,p),t.translate(M,O),t.fill(),t.translate(-M,-O)}t.globalAlpha=q,F&&i.setImgSmoothing(t,I)}};var aa={};aa.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Vc(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};aa.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),v=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var g=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),a==null?(o.drawText(t,e,null,g,i),e.isEdge()&&(o.drawText(t,e,"source",g,i),o.drawText(t,e,"target",g,i))):o.drawText(t,e,a,g,i),r&&t.translate(h.x1,h.y1)};aa.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};aa.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};function yu(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}aa.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=tr(a,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};aa.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=tr(o,"labelX",r),u=tr(o,"labelY",r),c,f,v=this.getLabelText(e,r);if(v!=null&&v!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var g=r?r+"-":"",h=tr(o,"labelWidth",r),w=tr(o,"labelHeight",r),b=e.pstyle(g+"text-margin-x").pfValue,d=e.pstyle(g+"text-margin-y").pfValue,p=e.isEdge(),m=e.pstyle("text-halign").value,y=e.pstyle("text-valign").value;p&&(m="center",y="center"),l+=b,u+=d;var x;switch(n?x=this.getTextAngle(e,r):x=0,x!==0&&(c=l,f=u,t.translate(c,f),t.rotate(x),l=0,u=0),y){case"top":break;case"center":u+=w/2;break;case"bottom":u+=w;break}var E=e.pstyle("text-background-opacity").value,C=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,P=e.pstyle("text-background-shape").strValue,R=P.indexOf("round")===0,A=2;if(E>0||T>0&&C>0){var M=l-S;switch(m){case"left":M-=h;break;case"center":M-=h/2;break}var V=u-w-S,G=h+2*S,B=w+2*S;if(E>0){var k=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+E*s+")",R?yu(t,M,V,G,B,A):t.fillRect(M,V,G,B),t.fillStyle=k}if(T>0&&C>0){var z=t.strokeStyle,H=t.lineWidth,U=e.pstyle("text-border-color").value,_=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+U[0]+","+U[1]+","+U[2]+","+C*s+")",t.lineWidth=T,t.setLineDash)switch(_){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(R?yu(t,M,V,G,B,A,"stroke"):t.strokeRect(M,V,G,B),_==="double"){var q=T/2;R?yu(t,M+q,V+q,G-q*2,B-q*2,A,"stroke"):t.strokeRect(M+q,V+q,G-q*2,B-q*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=H,t.strokeStyle=z}}var I=2*e.pstyle("text-outline-width").pfValue;if(I>0&&(t.lineWidth=I),e.pstyle("text-wrap").value==="wrap"){var F=tr(o,"labelWrapCachedLines",r),$=tr(o,"labelLineHeight",r),K=h/2,ee=this.getLabelJustification(e);switch(ee==="auto"||(m==="left"?ee==="left"?l+=-h:ee==="center"&&(l+=-K):m==="center"?ee==="left"?l+=-K:ee==="right"&&(l+=K):m==="right"&&(ee==="center"?l+=K:ee==="right"&&(l+=h))),y){case"top":u-=(F.length-1)*$;break;case"center":case"bottom":u-=(F.length-1)*$;break}for(var Y=0;Y<F.length;Y++)I>0&&t.strokeText(F[Y],l,u),t.fillText(F[Y],l,u),u+=$}else I>0&&t.strokeText(v,l,u),t.fillText(v,l,u);x!==0&&(t.rotate(-x),t.translate(-c,-f))}}};var Rn={};Rn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,c=u.rscratch,f=e.position();if(!(!ye(f.x)||!ye(f.y))&&!(i&&!e.visible())){var v=i?e.effectiveOpacity():1,g=o.usePaths(),h,w=!1,b=e.padding();s=e.width()+2*b,l=e.height()+2*b;var d;r&&(d=r,t.translate(-d.x1,-d.y1));for(var p=e.pstyle("background-image"),m=p.value,y=new Array(m.length),x=new Array(m.length),E=0,C=0;C<m.length;C++){var T=m[C],S=y[C]=T!=null&&T!=="none";if(S){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",C);E++,x[C]=o.getCachedImage(T,P,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var R=e.pstyle("background-blacken").value,A=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*v,V=e.pstyle("border-color").value,G=e.pstyle("border-style").value,B=e.pstyle("border-join").value,k=e.pstyle("border-cap").value,O=e.pstyle("border-position").value,z=e.pstyle("border-dash-pattern").pfValue,H=e.pstyle("border-dash-offset").pfValue,U=e.pstyle("border-opacity").value*v,_=e.pstyle("outline-width").pfValue,q=e.pstyle("outline-color").value,I=e.pstyle("outline-style").value,F=e.pstyle("outline-opacity").value*v,$=e.pstyle("outline-offset").value,K=e.pstyle("corner-radius").value;K!=="auto"&&(K=e.pstyle("corner-radius").pfValue);var ee=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;o.eleFillStyle(t,e,me)},Y=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U;o.colorStrokeStyle(t,V[0],V[1],V[2],me)},W=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;o.colorStrokeStyle(t,q[0],q[1],q[2],me)},J=function(me,ue,L,re){var ae=o.nodePathCache=o.nodePathCache||[],se=vp(L==="polygon"?L+","+re.join(","):L,""+ue,""+me,""+K),de=ae[se],Ce,ve=!1;return de!=null?(Ce=de,ve=!0,c.pathCache=Ce):(Ce=new Path2D,ae[se]=c.pathCache=Ce),{path:Ce,cacheHit:ve}},D=e.pstyle("shape").strValue,N=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var j=J(s,l,D,N);h=j.path,w=j.cacheHit}var ne=function(){if(!w){var me=f;g&&(me={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,me.x,me.y,s,l,K,c)}g?t.fill(h):t.fill()},ce=function(){for(var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=u.backgrounding,re=0,ae=0;ae<x.length;ae++){var se=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ae);if(ue&&se==="over"||!ue&&se==="inside"){re++;continue}y[ae]&&x[ae].complete&&!x[ae].error&&(re++,o.drawInscribedImage(t,x[ae],e,ae,me))}u.backgrounding=re!==E,L!==u.backgrounding&&e.updateStyle(!1)},ie=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasPie(e)&&(o.drawPie(t,e,ue),me&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,K,c)))},le=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasStripe(e)&&(t.save(),g?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,K,c),t.clip()),o.drawStripe(t,e,ue),t.restore(),me&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,K,c)))},X=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ue=(R>0?R:-R)*me,L=R>0?0:255;R!==0&&(o.colorFillStyle(t,L,L,L,ue),g?t.fill(h):t.fill())},Q=function(){if(A>0){if(t.lineWidth=A,t.lineCap=k,t.lineJoin=B,t.setLineDash)switch(G){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(z),t.lineDashOffset=H;break;case"solid":case"double":t.setLineDash([]);break}if(O!=="center"){if(t.save(),t.lineWidth*=2,O==="inside")g?t.clip(h):t.clip();else{var me=new Path2D;me.rect(-s/2-A,-l/2-A,s+2*A,l+2*A),me.addPath(h),t.clip(me,"evenodd")}g?t.stroke(h):t.stroke(),t.restore()}else g?t.stroke(h):t.stroke();if(G==="double"){t.lineWidth=A/3;var ue=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=ue}t.setLineDash&&t.setLineDash([])}},Z=function(){if(_>0){if(t.lineWidth=_,t.lineCap="butt",t.setLineDash)switch(I){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var me=f;g&&(me={x:0,y:0});var ue=o.getNodeShape(e),L=A;O==="inside"&&(L=0),O==="outside"&&(L*=2);var re=(s+L+(_+$))/s,ae=(l+L+(_+$))/l,se=s*re,de=l*ae,Ce=o.nodeShapes[ue].points,ve;if(g){var Se=J(se,de,ue,Ce);ve=Se.path}if(ue==="ellipse")o.drawEllipsePath(ve||t,me.x,me.y,se,de);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ue)){var Ne=0,qe=0,Re=0;ue==="round-diamond"?Ne=(L+$+_)*1.4:ue==="round-heptagon"?(Ne=(L+$+_)*1.075,Re=-(L/2+$+_)/35):ue==="round-hexagon"?Ne=(L+$+_)*1.12:ue==="round-pentagon"?(Ne=(L+$+_)*1.13,Re=-(L/2+$+_)/15):ue==="round-tag"?(Ne=(L+$+_)*1.12,qe=(L/2+_+$)*.07):ue==="round-triangle"&&(Ne=(L+$+_)*(Math.PI/2),Re=-(L+$/2+_)/Math.PI),Ne!==0&&(re=(s+Ne)/s,se=s*re,["round-hexagon","round-tag"].includes(ue)||(ae=(l+Ne)/l,de=l*ae)),K=K==="auto"?Cp(se,de):K;for(var ze=se/2,Le=de/2,Ie=K+(L+_+$)/2,Xe=new Array(Ce.length/2),ht=new Array(Ce.length/2),At=0;At<Ce.length/2;At++)Xe[At]={x:me.x+qe+ze*Ce[At*2],y:me.y+Re+Le*Ce[At*2+1]};var Et,ct,Bt,mt,Zt=Xe.length;for(ct=Xe[Zt-1],Et=0;Et<Zt;Et++)Bt=Xe[Et%Zt],mt=Xe[(Et+1)%Zt],ht[Et]=ef(ct,Bt,mt,Ie),ct=Bt,Bt=mt;o.drawRoundPolygonPath(ve||t,me.x+qe,me.y+Re,s*re,l*ae,Ce,ht)}else if(["roundrectangle","round-rectangle"].includes(ue))K=K==="auto"?En(se,de):K,o.drawRoundRectanglePath(ve||t,me.x,me.y,se,de,K+(L+_+$)/2);else if(["cutrectangle","cut-rectangle"].includes(ue))K=K==="auto"?Gc():K,o.drawCutRectanglePath(ve||t,me.x,me.y,se,de,null,K+(L+_+$)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ue))K=K==="auto"?En(se,de):K,o.drawBottomRoundRectanglePath(ve||t,me.x,me.y,se,de,K+(L+_+$)/2);else if(ue==="barrel")o.drawBarrelPath(ve||t,me.x,me.y,se,de);else if(ue.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ue)){var Sr=(L+_+$)/s;Ce=Uo(Wo(Ce,Sr)),o.drawPolygonPath(ve||t,me.x,me.y,s,l,Ce)}else{var nn=(L+_+$)/s;Ce=Uo(Wo(Ce,-nn)),o.drawPolygonPath(ve||t,me.x,me.y,s,l,Ce)}if(g?t.stroke(ve):t.stroke(),I==="double"){t.lineWidth=L/3;var Nr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(ve):t.stroke(),t.globalCompositeOperation=Nr}t.setLineDash&&t.setLineDash([])}},fe=function(){a&&o.drawNodeOverlay(t,e,f,s,l)},oe=function(){a&&o.drawNodeUnderlay(t,e,f,s,l)},he=function(){o.drawElementText(t,e,null,n)},pe=e.pstyle("ghost").value==="yes";if(pe){var ge=e.pstyle("ghost-offset-x").pfValue,Ee=e.pstyle("ghost-offset-y").pfValue,we=e.pstyle("ghost-opacity").value,ke=we*v;t.translate(ge,Ee),W(),Z(),ee(we*M),ne(),ce(ke,!0),Y(we*U),Q(),ie(R!==0||A!==0),le(R!==0||A!==0),ce(ke,!1),X(ke),t.translate(-ge,-Ee)}g&&t.translate(-f.x,-f.y),oe(),g&&t.translate(f.x,f.y),W(),Z(),ee(),ne(),ce(v,!0),Y(),Q(),ie(R!==0||A!==0),le(R!==0||A!==0),ce(v,!1),X(),g&&t.translate(-f.x,-f.y),he(),fe(),r&&t.translate(d.x1,d.y1)}};var Pm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,v=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}s.colorFillStyle(r,c[0],c[1],c[2],u),s.nodeShapes[f].draw(r,a.x,a.y,i+l*2,o+l*2,v),r.fill()}}}};Rn.drawNodeOverlay=Pm("overlay");Rn.drawNodeUnderlay=Pm("underlay");Rn.hasPie=function(t){return t=t[0],t._private.hasPie};Rn.hasStripe=function(t){return t=t[0],t._private.hasStripe};Rn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,l=n.x,u=n.y,c=e.width(),f=e.height(),v=Math.min(c,f)/2,g,h=0,w=this.usePaths();if(w&&(l=0,u=0),i.units==="%"?v=v*i.pfValue:i.pfValue!==void 0&&(v=i.pfValue/2),o.units==="%"?g=v*o.pfValue:o.pfValue!==void 0&&(g=o.pfValue/2),!(g>=v))for(var b=1;b<=a.pieBackgroundN;b++){var d=e.pstyle("pie-"+b+"-background-size").value,p=e.pstyle("pie-"+b+"-background-color").value,m=e.pstyle("pie-"+b+"-background-opacity").value*r,y=d/100;y+h>1&&(y=1-h);var x=1.5*Math.PI+2*Math.PI*h;x+=s;var E=2*Math.PI*y,C=x+E;d===0||h>=1||h+y>1||(g===0?(t.beginPath(),t.moveTo(l,u),t.arc(l,u,v,x,C),t.closePath()):(t.beginPath(),t.arc(l,u,v,x,C),t.arc(l,u,g,C,x,!0),t.closePath()),this.colorFillStyle(t,p[0],p[1],p[2],m),t.fill(),h+=y)}};Rn.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,s=e.width(),l=e.height(),u=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,v=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var g=s,h=l;v.units==="%"?(g=g*v.pfValue,h=h*v.pfValue):v.pfValue!==void 0&&(g=v.pfValue,h=v.pfValue),c&&(i=0,o=0),o-=g/2,i-=h/2;for(var w=1;w<=a.stripeBackgroundN;w++){var b=e.pstyle("stripe-"+w+"-background-size").value,d=e.pstyle("stripe-"+w+"-background-color").value,p=e.pstyle("stripe-"+w+"-background-opacity").value*r,m=b/100;m+u>1&&(m=1-u),!(b===0||u>=1||u+m>1)&&(t.beginPath(),t.rect(i,o+h*u,g,h*m),t.closePath(),this.colorFillStyle(t,d[0],d[1],d[2],p),t.fill(),u+=m)}t.restore()};var Yt={},SS=100;Yt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Yt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Yt.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),v=Jn(u,f),g=Jn(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(v,g))}else{var h=o?{x:0,y:0}:r.position(),w=r.paddedWidth(),b=r.paddedHeight();i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(w,b))}else if(r.isEdge()){var d=r.sourceEndpoint(),p=r.targetEndpoint();i=t.createLinearGradient(d.x,d.y,p.x,p.y)}else{var m=o?{x:0,y:0}:r.position(),y=r.paddedWidth(),x=r.paddedHeight(),E=y/2,C=x/2,T=r.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=t.createLinearGradient(m.x,m.y-C,m.x,m.y+C);break;case"to-top":i=t.createLinearGradient(m.x,m.y+C,m.x,m.y-C);break;case"to-left":i=t.createLinearGradient(m.x+E,m.y,m.x-E,m.y);break;case"to-right":i=t.createLinearGradient(m.x-E,m.y,m.x+E,m.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(m.x-E,m.y-C,m.x+E,m.y+C);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(m.x-E,m.y+C,m.x+E,m.y-C);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(m.x+E,m.y-C,m.x-E,m.y+C);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(m.x+E,m.y+C,m.x-E,m.y-C);break}}if(!i)return null;for(var S=l.length===s.length,P=s.length,R=0;R<P;R++)i.addColorStop(S?l[R]:R/(P-1),"rgba("+s[R][0]+","+s[R][1]+","+s[R][2]+","+a+")");return i};Yt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Yt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Yt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Yt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Yt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Yt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Yt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)c=r.canvases[v],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";for(var v=0;v<e.BUFFER_COUNT;v++)c=r.bufferCanvases[v],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=o}};Yt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Yt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Yt.render=function(t){var e=this;t=t||mp();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,h=r.hasCompoundNodes(),w=e.hoverData.draggingEles,b=!!(e.hoverData.selecting||e.touchData.selecting);v=v&&!n&&e.motionBlurEnabled&&!b;var d=v;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),v&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(d=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var p=r.style(),m=r.zoom(),y=o!==void 0?o:m,x=r.pan(),E={x:x.x,y:x.y},C={zoom:m,pan:{x:x.x,y:x.y}},T=e.prevViewport,S=T===void 0||C.zoom!==T.zoom||C.pan.x!==T.pan.x||C.pan.y!==T.pan.y;!S&&!(w&&!h)&&(e.motionBlurPxRatio=1),s&&(E=s),y*=l,E.x*=l,E.y*=l;var P=e.getCachedZSortedEles();function R(Y,W,J,D,N){var j=Y.globalCompositeOperation;Y.globalCompositeOperation="destination-out",e.colorFillStyle(Y,255,255,255,e.motionBlurTransparency),Y.fillRect(W,J,D,N),Y.globalCompositeOperation=j}function A(Y,W){var J,D,N,j;!e.clearingMotionBlur&&(Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(J={x:x.x*g,y:x.y*g},D=m*g,N=e.canvasWidth*g,j=e.canvasHeight*g):(J=E,D=y,N=e.canvasWidth,j=e.canvasHeight),Y.setTransform(1,0,0,1,0,0),W==="motionBlur"?R(Y,0,0,N,j):!n&&(W===void 0||W)&&Y.clearRect(0,0,N,j),a||(Y.translate(J.x,J.y),Y.scale(D,D)),s&&Y.translate(s.x,s.y),o&&Y.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var M=e.data.bufferContexts[e.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var C=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};C.mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var V=u.contexts[e.NODE],G=e.textureCache.texture,C=e.textureCache.viewport;V.setTransform(1,0,0,1,0,0),v?R(V,0,0,C.width,C.height):V.clearRect(0,0,C.width,C.height);var B=p.core("outside-texture-bg-color").value,k=p.core("outside-texture-bg-opacity").value;e.colorFillStyle(V,B[0],B[1],B[2],k),V.fillRect(0,0,C.width,C.height);var m=r.zoom();A(V,!1),V.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l),V.drawImage(G,C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var O=r.extent(),z=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),H=e.hideEdgesOnViewport&&z,U=[];if(U[e.NODE]=!c[e.NODE]&&v&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,U[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),U[e.DRAG]=!c[e.DRAG]&&v&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,U[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||U[e.NODE]){var _=v&&!U[e.NODE]&&g!==1,V=n||(_?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),q=v&&!_?"motionBlur":void 0;A(V,q),H?e.drawCachedNodes(V,P.nondrag,l,O):e.drawLayeredElements(V,P.nondrag,l,O),e.debug&&e.drawDebugPoints(V,P.nondrag),!a&&!v&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||U[e.DRAG])){var _=v&&!U[e.DRAG]&&g!==1,V=n||(_?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);A(V,v&&!_?"motionBlur":void 0),H?e.drawCachedNodes(V,P.drag,l,O):e.drawCachedElements(V,P.drag,l,O),e.debug&&e.drawDebugPoints(V,P.drag),!a&&!v&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,A),v&&g!==1){var I=u.contexts[e.NODE],F=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],$=u.contexts[e.DRAG],K=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ee=function(W,J,D){W.setTransform(1,0,0,1,0,0),D||!d?W.clearRect(0,0,e.canvasWidth,e.canvasHeight):R(W,0,0,e.canvasWidth,e.canvasHeight);var N=g;W.drawImage(J,0,0,e.canvasWidth*N,e.canvasHeight*N,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||U[e.NODE])&&(ee(I,F,U[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||U[e.DRAG])&&(ee($,K,U[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=C,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),v&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},SS)),n||r.emit("render")};var Qa;Yt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,l=a.canvasNeedsRedraw,u=t.forcedContext;if(r.showFps||!o&&l[r.SELECT_BOX]&&!s){var c=u||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),v=i.core("selection-box-border-width").value/f;c.lineWidth=v,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),v>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),g=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(g.x,g.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var w=Math.round(1e3/h),b="1 frame = "+h+" ms = "+w+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Qa){var d=c.measureText(b);Qa=d.actualBoundingBoxAscent}c.fillText(b,0,Qa);var p=60;c.strokeRect(0,Qa+10,250,20),c.fillRect(0,Qa+10,250*Math.min(w/p,1),20)}s||(l[r.SELECT_BOX]=!1)}};function ch(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function TS(t,e,r){var n=ch(t,t.VERTEX_SHADER,e),a=ch(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function DS(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function nf(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function PS(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function kS(t,e,r,n,a){var i=n*r+e.x,o=a*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function AS(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function BS(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Fn(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,o=e,s=r||new Array(4);return s[0]=n*o,s[1]=a*o,s[2]=i*o,s[3]=o,s}function va(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function RS(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function MS(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function km(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Am(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function LS(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function _S(t,e,r,n){var a=km(t,e),i=bt(a,2),o=i[0],s=i[1],l=Am(t,s,n),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),u}function kr(t,e,r,n){var a=km(t,r),i=bt(a,3),o=i[0],s=i[1],l=i[2],u=Am(t,s,e*o),c=o*l,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var v=new Array(e),g=0;g<e;g++)v[g]=LS(t,s,u,c,o,g);return f.dataArray=u,f.stride=c,f.size=o,f.getView=function(h){return v[h]},f.setPoint=function(h,w,b){var d=v[h];d[0]=w,d[1]=b},f.bufferSubData=function(h){t.bindBuffer(t.ARRAY_BUFFER,f),h?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,h*o):t.bufferSubData(t.ARRAY_BUFFER,0,u)},f}function IS(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var s=o*n*4;i[o]=new Float32Array(a.buffer,s,n)}var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var u=0;u<3;u++){var c=r+u;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,u*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),l.getMatrixView=function(f){return i[f]},l.setData=function(f,v){i[v].set(f,0)},l.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,a)},l}function OS(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var fh=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function bu(){var t=new fh(9);return fh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function dh(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function NS(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=r[0],g=r[1],h=r[2],w=r[3],b=r[4],d=r[5],p=r[6],m=r[7],y=r[8];return t[0]=v*n+g*o+h*u,t[1]=v*a+g*s+h*c,t[2]=v*i+g*l+h*f,t[3]=w*n+b*o+d*u,t[4]=w*a+b*s+d*c,t[5]=w*i+b*l+d*f,t[6]=p*n+m*o+y*u,t[7]=p*a+m*s+y*c,t[8]=p*i+m*l+y*f,t}function Bo(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=r[0],g=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=l,t[6]=v*n+g*o+u,t[7]=v*a+g*s+c,t[8]=v*i+g*l+f,t}function vh(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],v=Math.sin(r),g=Math.cos(r);return t[0]=g*n+v*o,t[1]=g*a+v*s,t[2]=g*i+v*l,t[3]=g*o-v*n,t[4]=g*s-v*a,t[5]=g*l-v*i,t[6]=u,t[7]=c,t[8]=f,t}function fc(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function zS(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var FS=function(){function t(e,r,n,a){kn(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return An(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,o=this.texSize,s=i/a,l=n*s,u=a*s;return l>o&&(s=o/n,l=n*s,u=a*s),{scale:s,texW:l,texH:u}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,l=this.texHeight,u=this.getScale(n),c=u.scale,f=u.texW,v=u.texH,g=function(m,y){if(a&&y){var x=y.context,E=m.x,C=m.row,T=E,S=l*C;x.save(),x.translate(T,S),x.scale(c,c),a(x,n),x.restore()}},h=[null,null],w=function(){g(i.freePointer,i.canvas),h[0]={x:i.freePointer.x,y:i.freePointer.row*l,w:f,h:v},h[1]={x:i.freePointer.x+f,y:i.freePointer.row*l,w:0,h:v},i.freePointer.x+=f,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},b=function(){var m=i.scratch,y=i.canvas;m.clear(),g({x:0,row:0},m);var x=o-i.freePointer.x,E=f-x,C=l;{var T=i.freePointer.x,S=i.freePointer.row*l,P=x;y.context.drawImage(m,0,0,P,C,T,S,P,C),h[0]={x:T,y:S,w:P,h:v}}{var R=x,A=(i.freePointer.row+1)*l,M=E;y&&y.context.drawImage(m,R,0,M,C,0,A,M,C),h[1]={x:0,y:A,w:M,h:v}}i.freePointer.x=E,i.freePointer.row++},d=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=o)w();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(d(),w()):this.enableWrapping?b():(d(),w())}return this.keyToLocation.set(r,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=MS(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),VS=function(){function t(e,r,n,a){kn(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return An(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new FS(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,s=ar(this.atlases),l;try{var u=function(){var f=l.value,v=f.getKeys(),g=qS(n,v);if(g.size===0)return a.push(f),v.forEach(function(x){return i.set(x,f)}),1;o||(o=r._createAtlas(),a.push(o));var h=ar(v),w;try{for(h.s();!(w=h.n()).done;){var b=w.value;if(!g.has(b)){var d=f.getOffsets(b),p=bt(d,2),m=p[0],y=p[1];o.canFit({w:m.w+y.w,h:m.h})||(o.lock(),o=r._createAtlas(),a.push(o)),f.canvas&&(r._copyTextureToNewAtlas(b,f,o),i.set(b,o))}}}catch(x){h.e(x)}finally{h.f()}f.dispose()};for(s.s();!(l=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),o=bt(i,2),s=o[0],l=o[1];if(l.w===0)a.draw(r,s,function(v){v.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,s.w,0,l.w,l.h);var c=s.w+l.w,f=s.h;a.draw(r,{w:c,h:f},function(v){v.drawImage(u,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function qS(t,e){return t.intersection?t.intersection(e):new Set(qo(t).filter(function(r){return e.has(r)}))}var $S=function(){function t(e,r){kn(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return An(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,s=n.texRows,l=this._cacheScratchCanvas(o),u=new VS(this.r,i,s,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=Be({type:r,atlasCollection:i},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(o,s,l,u){return u?((!i||s!=n||l!=a)&&(n=s,a=l,i=r(o,s,l)),i):r(o,s,l)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,s=a.filterEle,l=s===void 0?function(){return!0}:s,u=a.filterType,c=u===void 0?function(){return!0}:u,f=!1,v=!1,g=ar(r),h;try{for(g.s();!(h=g.n()).done;){var w=h.value;if(l(w)){var b=ar(this.renderTypes.values()),d;try{var p=function(){var y=d.value,x=y.type;if(c(x)){var E=n.collections.get(y.collection),C=y.getKey(w),T=Array.isArray(C)?C:[C];if(o)T.forEach(function(A){return E.markKeyForGC(A)}),v=!0;else{var S=y.getID?y.getID(w):w.id(),P=n._key(x,S),R=n.typeAndIdToKey.get(P);R!==void 0&&!BS(T,R)&&(f=!0,n.typeAndIdToKey.delete(P),R.forEach(function(A){return E.markKeyForGC(A)}))}}};for(b.s();!(d=b.n()).done;)p()}catch(m){b.e(m)}finally{b.f()}}}}catch(m){g.e(m)}finally{g.f()}return v&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=ar(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),l=!1,u=s.draw(i,a,function(v){o.drawClipped?(v.save(),v.beginPath(),v.rect(0,0,a.w,a.h),v.clip(),o.drawElement(v,r,a,!0,!0),v.restore()):o.drawElement(v,r,a,!0,!0),l=!0});if(l){var c=o.getID?o.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return u}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(l){var u=i.getBoundingBox(r,l),c=a.getOrCreateAtlas(r,n,u,l),f=c.getOffsets(l),v=bt(f,2),g=v[0],h=v[1];return{atlas:c,tex:g,tex1:g,tex2:h,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],n=ar(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=bt(a.value,2),o=i[0],s=i[1],l=s.getCounts(),u=l.keyCount,c=l.atlasCount;r.push({type:o,keyCount:u,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),GS=function(){function t(e){kn(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return An(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),HS=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,US=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,WS=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,KS=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,hi={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Jo={IGNORE:1,USE_BB:2},wu=0,hh=1,gh=2,xu=3,ha=4,go=5,Ja=6,ei=7,jS=function(){function t(e,r,n){kn(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=DS,this.atlasManager=new $S(e,n),this.batchManager=new GS(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(hi.SCREEN),this.pickingProgram=this._createShaderProgram(hi.PICKING),this.vao=this._createVAO()}return An(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(s){return s===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(wu,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(ha," || aVertType == ").concat(ei,` 
             || aVertType == `).concat(go," || aVertType == ").concat(Ja,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(hh,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(gh,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(xu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(HS,`
      `).concat(US,`
      `).concat(WS,`
      `).concat(KS,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(wu,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(xu,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(ha,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(ha," || vVertType == ").concat(ei,` 
          || vVertType == `).concat(go," || vVertType == ").concat(Ja,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(ha,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ei,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ei,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=TS(n,a,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(l)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),_S(a,"vec2",i.aPosition,r),this.transformBuffer=IS(a,n,i.aTransform),this.indexBuffer=kr(a,n,"vec4",i.aIndex),this.vertTypeBuffer=kr(a,n,"int",i.aVertType),this.atlasIdBuffer=kr(a,n,"int",i.aAtlasId),this.texBuffer=kr(a,n,"vec4",i.aTex),this.pointAPointBBuffer=kr(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=kr(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=kr(a,n,"vec2",i.aLineWidth),this.colorBuffer=kr(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=kr(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=kr(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hi.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,o=this.batchManager,s=i.getRenderTypeOpts(a);if(this._isVisible(r,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var l=s.getTexPickingMode(r);if(l===Jo.IGNORE)return;if(l==Jo.USE_BB){this.drawPickingRectangle(r,n,a);return}}var u=i.getAtlasInfo(r,a),c=ar(u),f;try{for(c.s();!(f=c.n()).done;){var v=f.value,g=v.atlas,h=v.tex1,w=v.tex2;o.canAddToCurrentBatch(g)||this.endBatch();for(var b=o.getAtlasIndexForBatch(g),d=0,p=[[h,!0],[w,!1]];d<p.length;d++){var m=bt(p[d],2),y=m[0],x=m[1];if(y.w!=0){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=wu;var C=this.indexBuffer.getView(E);va(n,C);var T=this.atlasIdBuffer.getView(E);T[0]=b;var S=this.texBuffer.getView(E);S[0]=y.x,S[1]=y.y,S[2]=y.w,S[3]=y.h;var P=this.transformBuffer.getMatrixView(E);this.setTransformMatrix(r,P,s,v,x),this.instanceCount++,x||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(R){c.e(R)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(a.shapeProps&&a.shapeProps.padding&&(s=r.pstyle(a.shapeProps.padding).pfValue),i){var l=i.bb,u=i.tex1,c=i.tex2,f=u.w/(u.w+c.w);o||(f=1-f);var v=this._getAdjustedBB(l,s,o,f);this._applyTransformMatrix(n,v,a,r)}else{var g=a.getBoundingBox(r),h=this._getAdjustedBB(g,s,!0,1);this._applyTransformMatrix(n,h,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var o,s;dh(r);var l=a.getRotation?a.getRotation(i):0;if(l!==0){var u=a.getRotationPoint(i),c=u.x,f=u.y;Bo(r,r,[c,f]),vh(r,r,l);var v=a.getRotationOffset(i);o=v.x+(n.xOffset||0),s=v.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Bo(r,r,[o,s]),fc(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var o=r.x1,s=r.y1,l=r.w,u=r.h,c=r.yOffset;n&&(o-=n,s-=n,l+=2*n,u+=2*n);var f=0,v=l*i;return a&&i<1?l=v:!a&&i<1&&(f=l-v,o+=f,l=v),{x1:o,y1:s,w:l,h:u,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=ha;var s=this.indexBuffer.getView(o);va(n,s);var l=this.colorBuffer.getView(o);Fn([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,u,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var o=i.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=s,s===go||s===Ja){var u=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,u),f=this.cornerRadiusBuffer.getView(l);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Ja&&(f[0]=0,f[2]=0)}var v=this.indexBuffer.getView(l);va(n,v);var g=r.pstyle(o.color).value,h=r.pstyle(o.opacity).value,w=this.colorBuffer.getView(l);Fn(g,h,w);var b=this.lineWidthBuffer.getView(l);if(b[0]=0,b[1]=0,o.border){var d=r.pstyle("border-width").value;if(d>0){var p=r.pstyle("border-color").value,m=r.pstyle("border-opacity").value,y=this.borderColorBuffer.getView(l);Fn(p,m,y);var x=r.pstyle("border-position").value;if(x==="inside")b[0]=0,b[1]=-d;else if(x==="outside")b[0]=d,b[1]=0;else{var E=d/2;b[0]=E,b[1]=-E}}}var C=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,C,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return ha;case"ellipse":return ei;case"roundrectangle":case"round-rectangle":return go;case"bottom-round-rectangle":return Ja;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,o=a.h;if(r.pstyle(n).value==="auto")return En(i,o);var s=r.pstyle(n).pfValue,l=i/2,u=o/2;return Math.min(s,u,l)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,o,s,l;if(a==="source"?(o=i.arrowStartX,s=i.arrowStartY,l=i.srcArrowAngle):(o=i.arrowEndX,s=i.arrowEndY,l=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(l)||l==null)){var u=r.pstyle(a+"-arrow-shape").value;if(u!=="none"){var c=r.pstyle(a+"-arrow-color").value,f=r.pstyle("opacity").value,v=r.pstyle("line-opacity").value,g=f*v,h=r.pstyle("width").pfValue,w=r.pstyle("arrow-scale").value,b=this.r.getArrowWidth(h,w),d=this.instanceCount,p=this.transformBuffer.getMatrixView(d);dh(p),Bo(p,p,[o,s]),fc(p,p,[b,b]),vh(p,p,l),this.vertTypeBuffer.getView(d)[0]=xu;var m=this.indexBuffer.getView(d);va(n,m);var y=this.colorBuffer.getView(d);Fn(c,g,y),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=hh;var f=this.indexBuffer.getView(c);va(n,f);var v=this.colorBuffer.getView(c);Fn(l,u,v);var g=this.lineWidthBuffer.getView(c);g[0]=s;var h=this.pointAPointBBuffer.getView(c);h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var w=0;w<a.length-2;w+=2){var b=this.instanceCount;this.vertTypeBuffer.getView(b)[0]=gh;var d=this.indexBuffer.getView(b);va(n,d);var p=this.colorBuffer.getView(b);Fn(l,u,p);var m=this.lineWidthBuffer.getView(b);m[0]=s;var y=a[w-2],x=a[w-1],E=a[w],C=a[w+1],T=a[w+2],S=a[w+3],P=a[w+4],R=a[w+5];w==0&&(y=2*E-T+.001,x=2*C-S+.001),w==a.length-4&&(P=2*T-E+.001,R=2*S-C+.001);var A=this.pointAPointBBuffer.getView(b);A[0]=y,A[1]=x,A[2]=E,A[3]=C;var M=this.pointCPointDBuffer.getView(b);M[0]=T,M[1]=S,M[2]=P,M[3]=R,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var o=i/n;this._setCurvePoint(r,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var l=(1-n)*r[s]+n*r[s+2],u=(1-n)*r[s+1]+n*r[s+3];o[s]=l,o[s+1]=u}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var s=ar(this.buffers),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.bufferSubData(i)}}catch(h){s.e(h)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var v=0;v<c.length;v++)r.activeTexture(r.TEXTURE0+v),r.bindTexture(r.TEXTURE_2D,c[v].texture),r.uniform1i(o.uTextures[v],v);r.uniform1f(o.uZoom,PS(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var g=Fn(this.bgColor,1);r.uniform4fv(o.uBGColor,g),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,s){return o+s.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),Bm={};Bm.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=YS(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=OS(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new jS(r,n,t);var a=function(f){return function(v){return r.getTextAngle(v,f)}},i=function(f){return function(v){var g=v.pstyle(f);return g&&g.value}},o=function(f){return function(v){return v.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var v=f.pstyle("text-events").strValue==="yes";return v?Jo.USE_BB:Jo.IGNORE},l=function(f){var v=f.position(),g=v.x,h=v.y,w=f.outerWidth(),b=f.outerHeight();return{w,h:b,x1:g-w/2,y1:h-b/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:AS,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:Cu(e.getLabelKey,null),getBoundingBox:Eu(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:Cu(e.getSourceLabelKey,"source"),getBoundingBox:Eu(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:Cu(e.getTargetLabelKey,"target"),getBoundingBox:Eu(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var u=$i(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var v=!1;f&&f.length>0&&(v|=r.drawing.invalidate(f)),v&&u()}),XS(r)};function YS(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return op(r)}function Rm(t,e){var r=t._private.rscratch;return tr(r,"labelWrapCachedLines",e)||[]}var Cu=function(e,r){return function(n){var a=e(n),i=Rm(n,r);return i.length>1?i.map(function(o,s){return"".concat(a,"_").concat(s)}):a}},Eu=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var s=Number(a.substring(o+1)),l=Rm(n,r),u=i.h/l.length,c=u*s,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:u,yOffset:c}}}return i}};function XS(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>Em?(ZS(t),e.call(t,i)):(QS(t),Lm(t,i,hi.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,s,l){return aT(t,i,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,o){a.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function ZS(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function QS(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function JS(t){var e=t.canvasWidth,r=t.canvasHeight,n=nf(t),a=n.pan,i=n.zoom,o=bu();Bo(o,o,[a.x,a.y]),fc(o,o,[i,i]);var s=bu();zS(s,e,r);var l=bu();return NS(l,s,o),l}function Mm(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=nf(t),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(o,o)}function eT(t,e){t.drawSelectionRectangle(e,function(r){return Mm(t,r)})}function tT(t){var e=t.data.contexts[t.NODE];e.save(),Mm(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function rT(t){var e=function(a,i,o){for(var s=a.atlasManager.getAtlasCollection(i),l=t.data.contexts[t.NODE],u=s.atlases,c=0;c<u.length;c++){var f=u[c],v=f.canvas;if(v){var g=v.width,h=v.height,w=g*c,b=v.height*o,d=.4;l.save(),l.scale(d,d),l.drawImage(v,w,b),l.strokeStyle="black",l.rect(w,b,g,h),l.stroke(),l.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function nT(t,e,r,n,a){var i,o,s,l,u=nf(t),c=u.pan,f=u.zoom;{var v=kS(t,c,f,e,r),g=bt(v,2),h=g[0],w=g[1],b=6;i=h-b/2,o=w-b/2,s=b,l=b}if(s===0||l===0)return[];var d=t.data.contexts[t.WEBGL];d.bindFramebuffer(d.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(d.viewport(0,0,d.canvas.width,d.canvas.height),Lm(t,null,hi.PICKING),t.pickingFrameBuffer.needsDraw=!1);var p=s*l,m=new Uint8Array(p*4);d.readPixels(i,o,s,l,d.RGBA,d.UNSIGNED_BYTE,m),d.bindFramebuffer(d.FRAMEBUFFER,null);for(var y=new Set,x=0;x<p;x++){var E=m.slice(x*4,x*4+4),C=RS(E)-1;C>=0&&y.add(C)}return y}function aT(t,e,r){var n=nT(t,e,r),a=t.getCachedZSortedEles(),i,o,s=ar(n),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=a[u];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(f){s.e(f)}finally{s.f()}return[i,o].filter(Boolean)}function Su(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function Lm(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&eT(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=JS(t),l=t.getCachedZSortedEles();if(i=l.length,a.startFrame(s,r),r.screen){for(var u=0;u<l.nondrag.length;u++)Su(t,u,l.nondrag[u]);for(var c=0;c<l.drag.length;c++)Su(t,c,l.drag[c])}else if(r.picking)for(var f=0;f<l.length;f++)Su(t,f,l[f]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(tT(t),rT(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var v=performance.now(),g=!1,h=Math.ceil(v-n),w=a.getDebugInfo(),b=["".concat(i," elements"),"".concat(w.totalInstances," instances"),"".concat(w.batchCount," batches"),"".concat(w.totalAtlases," atlases"),"".concat(w.wrappedCount," wrapped textures"),"".concat(w.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(r.name,") - time ").concat(h,"ms, ").concat(b));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(h,"ms")),console.log("Totals:"),console.log("  ".concat(b)),console.log("Texture Atlases Used:");var d=w.atlasInfo,p=ar(d),m;try{for(p.s();!(m=p.n()).done;){var y=m.value;console.log("  ".concat(y.type,": ").concat(y.keyCount," keys, ").concat(y.atlasCount," atlases"))}}catch(x){p.e(x)}finally{p.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var Mn={};Mn.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+o*i[l*2],r+s*i[l*2+1]);t.closePath()};Mn.drawRoundPolygonPath=function(t,e,r,n,a,i,o){o.forEach(function(s){return hm(t,s)}),t.closePath()};Mn.drawRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=i==="auto"?En(n,a):Math.min(i,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,l),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.arcTo(e-o,r-s,e,r-s,l),t.lineTo(e,r-s),t.closePath()};Mn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=i==="auto"?En(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};Mn.drawCutRectanglePath=function(t,e,r,n,a,i,o){var s=n/2,l=a/2,u=o==="auto"?Gc():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+u,r-l),t.lineTo(e+s-u,r-l),t.lineTo(e+s,r-l+u),t.lineTo(e+s,r+l-u),t.lineTo(e+s-u,r+l),t.lineTo(e-s+u,r+l),t.lineTo(e-s,r+l-u),t.lineTo(e-s,r-l+u),t.closePath()};Mn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=r-o,c=r+o,f=Zu(n,a),v=f.widthOffset,g=f.heightOffset,h=f.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(s,u+g),t.lineTo(s,c-g),t.quadraticCurveTo(s+h,c,s+v,c),t.lineTo(l-v,c),t.quadraticCurveTo(l-h,c,l,c-g),t.lineTo(l,u+g),t.quadraticCurveTo(l-h,u,l-v,u),t.lineTo(s+v,u),t.quadraticCurveTo(s+h,u,s,u+g),t.closePath()};var ph=Math.sin(0),mh=Math.cos(0),dc={},vc={},_m=Math.PI/40;for(var ga=0*Math.PI;ga<2*Math.PI;ga+=_m)dc[ga]=Math.sin(ga),vc[ga]=Math.cos(ga);Mn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=_m)i=e-s*dc[u]*ph+s*vc[u]*mh,o=r+l*vc[u]*ph+l*dc[u]*mh,u===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var ji={};ji.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};ji.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=ye(t.maxWidth)||ye(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,u=t.scale;else if(s){var c=1/0,f=1/0;ye(t.maxWidth)&&(c=u*t.maxWidth/i),ye(t.maxHeight)&&(f=u*t.maxHeight/o),u=Math.min(c,f),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var v=document.createElement("canvas");v.width=i,v.height=o,v.style.width=i+"px",v.style.height=o+"px";var g=v.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)g.translate(-n.x1*u,-n.y1*u),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(n.x1*u,n.y1*u);else{var w=e.pan(),b={x:w.x*u,y:w.y*u};u*=e.zoom(),g.translate(b.x,b.y),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(-b.x,-b.y)}t.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=t.bg,g.rect(0,0,i,o),g.fill())}return v};function iT(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function yh(t){var e=t.indexOf(",");return t.substr(e+1)}function Im(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new za(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return iT(yh(n()),r);case"base64":return yh(n());case"base64uri":default:return n()}}ji.png=function(t){return Im(t,this.bufferCanvasImage(t),"image/png")};ji.jpg=function(t){return Im(t,this.bufferCanvasImage(t),"image/jpeg")};var Om={};Om.nodeShapeImpl=function(t,e,r,n,a,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,s);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var oT=Nm,Fe=Nm.prototype;Fe.CANVAS_LAYERS=3;Fe.SELECT_BOX=0;Fe.DRAG=1;Fe.NODE=2;Fe.WEBGL=3;Fe.CANVAS_TYPES=["2d","2d","2d","webgl2"];Fe.BUFFER_COUNT=3;Fe.TEXTURE_BUFFER=0;Fe.MOTIONBLUR_BUFFER_NODE=1;Fe.MOTIONBLUR_BUFFER_DRAG=2;function Nm(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Fe.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Fe.CANVAS_LAYERS),contexts:new Array(Fe.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Fe.CANVAS_LAYERS),bufferCanvases:new Array(Fe.BUFFER_COUNT),bufferContexts:new Array(Fe.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[a]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};a1()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<Fe.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=n.createElement("canvas"),f=Fe.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(f),e.data.contexts[u]||st("Could not create canvas of type "+f),Object.keys(l).forEach(function(Y){c.style[Y]=l[Y]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(Fe.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Fe.NODE].setAttribute("data-id","layer"+Fe.NODE+"-node"),e.data.canvases[Fe.SELECT_BOX].setAttribute("data-id","layer"+Fe.SELECT_BOX+"-selectbox"),e.data.canvases[Fe.DRAG].setAttribute("data-id","layer"+Fe.DRAG+"-drag"),e.data.canvases[Fe.WEBGL]&&e.data.canvases[Fe.WEBGL].setAttribute("data-id","layer"+Fe.WEBGL+"-webgl");for(var u=0;u<Fe.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=n.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var v=ir(),g=function(W){return{x:(W.x1+W.x2)/2,y:(W.y1+W.y2)/2}},h=function(W){return{x:-W.w/2,y:-W.h/2}},w=function(W){var J=W[0]._private,D=J.oldBackgroundTimestamp===J.backgroundTimestamp;return!D},b=function(W){return W[0]._private.nodeKey},d=function(W){return W[0]._private.labelStyleKey},p=function(W){return W[0]._private.sourceLabelStyleKey},m=function(W){return W[0]._private.targetLabelStyleKey},y=function(W,J,D,N,j){return e.drawElement(W,J,D,!1,!1,j)},x=function(W,J,D,N,j){return e.drawElementText(W,J,D,N,"main",j)},E=function(W,J,D,N,j){return e.drawElementText(W,J,D,N,"source",j)},C=function(W,J,D,N,j){return e.drawElementText(W,J,D,N,"target",j)},T=function(W){return W.boundingBox(),W[0]._private.bodyBounds},S=function(W){return W.boundingBox(),W[0]._private.labelBounds.main||v},P=function(W){return W.boundingBox(),W[0]._private.labelBounds.source||v},R=function(W){return W.boundingBox(),W[0]._private.labelBounds.target||v},A=function(W,J){return J},M=function(W){return g(T(W))},V=function(W,J,D){var N=W?W+"-":"";return{x:J.x+D.pstyle(N+"text-margin-x").pfValue,y:J.y+D.pstyle(N+"text-margin-y").pfValue}},G=function(W,J,D){var N=W[0]._private.rscratch;return{x:N[J],y:N[D]}},B=function(W){return V("",G(W,"labelX","labelY"),W)},k=function(W){return V("source",G(W,"sourceLabelX","sourceLabelY"),W)},O=function(W){return V("target",G(W,"targetLabelX","targetLabelY"),W)},z=function(W){return h(T(W))},H=function(W){return h(P(W))},U=function(W){return h(R(W))},_=function(W){var J=S(W),D=h(S(W));if(W.isNode()){switch(W.pstyle("text-halign").value){case"left":D.x=-J.w-(J.leftPad||0);break;case"right":D.x=-(J.rightPad||0);break}switch(W.pstyle("text-valign").value){case"top":D.y=-J.h-(J.topPad||0);break;case"bottom":D.y=-(J.botPad||0);break}}return D},q=e.data.eleTxrCache=new ai(e,{getKey:b,doesEleInvalidateKey:w,drawElement:y,getBoundingBox:T,getRotationPoint:M,getRotationOffset:z,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),I=e.data.lblTxrCache=new ai(e,{getKey:d,drawElement:x,getBoundingBox:S,getRotationPoint:B,getRotationOffset:_,isVisible:A}),F=e.data.slbTxrCache=new ai(e,{getKey:p,drawElement:E,getBoundingBox:P,getRotationPoint:k,getRotationOffset:H,isVisible:A}),$=e.data.tlbTxrCache=new ai(e,{getKey:m,drawElement:C,getBoundingBox:R,getRotationPoint:O,getRotationOffset:U,isVisible:A}),K=e.data.lyrTxrCache=new Sm(e);e.onUpdateEleCalcs(function(W,J){q.invalidateElements(J),I.invalidateElements(J),F.invalidateElements(J),$.invalidateElements(J),K.invalidateElements(J);for(var D=0;D<J.length;D++){var N=J[D]._private;N.oldBackgroundTimestamp=N.backgroundTimestamp}});var ee=function(W){for(var J=0;J<W.length;J++)K.enqueueElementRefinement(W[J].ele)};q.onDequeue(ee),I.onDequeue(ee),F.onDequeue(ee),$.onDequeue(ee),t.webgl&&e.initWebgl(t,{getStyleKey:b,getLabelKey:d,getSourceLabelKey:p,getTargetLabelKey:m,drawElement:y,drawLabel:x,drawSourceLabel:E,drawTargetLabel:C,getElementBox:T,getLabelBox:S,getSourceLabelBox:P,getTargetLabelBox:R,getElementRotationPoint:M,getElementRotationOffset:z,getLabelRotationPoint:B,getSourceLabelRotationPoint:k,getTargetLabelRotationPoint:O,getLabelRotationOffset:_,getSourceLabelRotationOffset:H,getTargetLabelRotationOffset:U})}Fe.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Fe.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Fe.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Fe.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var sT=typeof Path2D<"u";Fe.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Fe.usePaths=function(){return sT&&this.pathsEnabled};Fe.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Fe.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Fe.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":xt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[Tm,Or,rn,rf,aa,Rn,Yt,Bm,Mn,ji,Om].forEach(function(t){Be(Fe,t)});var lT=[{name:"null",impl:fm},{name:"base",impl:xm},{name:"canvas",impl:oT}],uT=[{type:"layout",extensions:IE},{type:"renderer",extensions:lT}],zm={},Fm={};function Vm(t,e,r){var n=r,a=function(T){Ye("Can not register `"+e+"` for `"+t+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ri.prototype[e])return a(e);Ri.prototype[e]=r}else if(t==="collection"){if(_t.prototype[e])return a(e);_t.prototype[e]=r}else if(t==="layout"){for(var i=function(T){this.options=T,r.call(this,T),Ue(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var C=this.options;if(C&&C.animate){var T=this.animations;if(T)for(var S=0;S<T.length;S++)T[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(T){return T._private.cy},v={addEventFields:function(T,S){S.layout=T,S.cy=f(T),S.target=T},bubble:function(){return!0},parent:function(T){return f(T)}};Be(o,{createEmitter:function(){return this._private.emitter=new Ts(v,this),this},emitter:function(){return this._private.emitter},on:function(T,S){return this.emitter().on(T,S),this},one:function(T,S){return this.emitter().one(T,S),this},once:function(T,S){return this.emitter().one(T,S),this},removeListener:function(T,S){return this.emitter().removeListener(T,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,S){return this.emitter().emit(T,S),this}}),je.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var g=qm("renderer","base"),h=g.prototype,w=r,b=r.prototype,d=function(){g.apply(this,arguments),w.apply(this,arguments)},p=d.prototype;for(var m in h){var y=h[m],x=b[m]!=null;if(x)return a(m);p[m]=y}for(var E in b)p[E]=b[E];h.clientFunctions.forEach(function(C){p[C]=p[C]||function(){st("Renderer does not implement `renderer."+C+"()` on its prototype")}}),n=d}else if(t==="__proto__"||t==="constructor"||t==="prototype")return st(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return sp({map:zm,keys:[t,e],value:n})}function qm(t,e){return lp({map:zm,keys:[t,e]})}function cT(t,e,r,n,a){return sp({map:Fm,keys:[t,e,r,n],value:a})}function fT(t,e,r,n){return lp({map:Fm,keys:[t,e,r,n]})}var hc=function(){if(arguments.length===2)return qm.apply(null,arguments);if(arguments.length===3)return Vm.apply(null,arguments);if(arguments.length===4)return fT.apply(null,arguments);if(arguments.length===5)return cT.apply(null,arguments);st("Invalid extension access syntax")};Ri.prototype.extension=hc;uT.forEach(function(t){t.extensions.forEach(function(e){Vm(t.type,e.name,e.impl)})});var es=function(){if(!(this instanceof es))return new es;this.length=0},ra=es.prototype;ra.instanceString=function(){return"stylesheet"};ra.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};ra.css=function(t,e){var r=this.length-1;if(Te(t))this[r].properties.push({name:t,value:e});else if(Ue(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=Dt.properties[o]||Dt.properties[gs(o)];if(l!=null){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this};ra.style=ra.css;ra.generateStyle=function(t){var e=new Dt(t);return this.appendToStyle(e)};ra.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var dT="3.32.0",Jr=function(e){if(e===void 0&&(e={}),Ue(e))return new Ri(e);if(Te(e))return hc.apply(hc,arguments)};Jr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Jr),t.apply(null,e),this};Jr.warnings=function(t){return gp(t)};Jr.version=dT;Jr.stylesheet=Jr.Stylesheet=es;function $m(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tu={exports:{}},bh={},wh;function vT(){return wh||(wh=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),bh}var Du,xh;function hT(){return xh||(xh=1,Du=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),s=r?Math.floor(i.y/e):Math.round(i.y/e),l={x:(o+r)*e,y:(s+r)*e};return l},n.snapNode=function(i){var o=i.position(),s=n.snapPos(o);i.position(s)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var l=o.position();return n.snapPos(l)}),t.endBatch()},n.onFreeNode=function(i){var o,s=i.target||i.cyTarget;s.selected()?o=i.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),Du}var Pu,Ch;function gT(){return Ch||(Ch=1,Pu=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(c){if(!(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)){var f=c.target||c.cyTarget;f.selected()?a=c.cy.$(":selected"):a=f,i=c.position||c.cyPosition,f.grabbable()&&!f.locked()&&(n=f,n.lock(),t.on("tapdrag",u),t.on("tapend",s))}};var s=function(c){t.off("tapdrag",u),t.off("tapend",s),n.unlock(),c.preventDefault()},l=function(){return{x:o.x-i.x,y:o.y-i.y}},u=function(c){n.position(),o=c.position||c.cyPosition,o=e.snapPos(o);var f=l();if(f.x!=0||f.y!=0){n.unlock();var v=a.union(a.descendants());v.filter(":childless").positions(function(g,h){typeof g=="number"&&(g=h);var w=g.position();return e.snapPos({x:w.x+f.x,y:w.y+f.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),Pu}var ku,Eh;function pT(){return Eh||(Eh=1,ku=function(t,e,r){var n=t,a=function(g){n=g},i=function(g){var h=g.getBoundingClientRect();return{top:h.top+document.documentElement.scrollTop,left:h.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),l=o.getContext("2d");s.appendChild(o);var u=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};u();var c=function(){var g=e.zoom(),h=e.width(),w=e.height(),b=n.gridSpacing*g,d=e.pan(),p=d.x%b,m=d.y%b;l.strokeStyle=n.gridColor,l.lineWidth=n.lineWidth;var y='	<svg width="'+h+'" height="'+w+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+b+'" height="'+b+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+b+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+b+'" height="'+b+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+b+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+m+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+p+`, 0)" />
	        </svg>
`,x=new Image;y=encodeURIComponent(y),x.onload=function(){f(),l.drawImage(x,0,0)},x.src="data:image/svg+xml,"+y},f=function(){var g=e.width(),h=e.height();l.clearRect(0,0,g,h)},v=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var g=i(o),h=i(s);o.style.top=-(g.top-h.top),o.style.left=-(g.left-h.left),c()},0)},250);return{initCanvas:v,resizeCanvas:v,resetCanvas:u,clearCanvas:f,drawGrid:c,changeOptions:a,sizeCanvas:c}}),ku}var Au,Sh;function mT(){return Sh||(Sh=1,Au=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),s=i.height(),l=Math.round((o-t)/(t*2))*(t*2),u=Math.round((s-t)/(t*2))*(t*2);l=l>0?l+t:t,u=u>0?u+t:t,(o!=l||s!=u)&&(i.style({width:l,height:u}),r(i).resize={oldWidth:o,oldHeight:s})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),Au}var Bu,Th;function yT(){return Th||(Th=1,Bu=function(t,e,r,n,a,i,o,s){var l=function(I){return function(F){I(F)}},u={snapToGridDuringDrag:new l(h),resize:new l(d),snapToGridOnRelease:new l(x),drawGrid:new l(T),guidelines:new l(B),parentPadding:new l(z)};function c(I,F){return function($){var K=$.target||$.cyTarget;(!K.is(":parent")||F)&&I(K)}}function f(I){return function(){t.nodes().not(":parent").each(function(F,$){typeof F=="number"&&(F=$),I(F)})}}function v(I){return function(){t.nodes().each(function(F,$){typeof F=="number"&&(F=$),I(F)})}}function g(I){return I?"on":"off"}function h(I){t[g(I)]("tapstart","node",n.onTapStartNode)}var w=f(r.resizeNode);c(r.resizeNode);var b=f(r.recoverNodeDimensions);function d(I){t[g(I)]("ready",w),I?w():b()}var p=v(e.snapNodesTopDown),m=v(e.recoverSnapNode),y=c(e.snapNode,!0);function x(I){t[g(I)]("add","node",y),t[g(I)]("ready",p),t[g(I)]("free","node",e.onFreeNode),I?p():m()}var E=function(){U.zoomDash&&a.drawGrid()},C=function(){U.panGrid&&a.drawGrid()};function T(I){t[g(I)]("zoom",E),t[g(I)]("pan",C),I?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var S=null,P=function(I){var F=I.target||I.cyTarget,$=F.selected()?I.cy.$(":selected"):F;S=i.getTopMostNodes($.nodes()),i.lines.init(S)},R=function(I){this.id()==S.id()&&(i.lines.update(S),U.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(S))},A=function(I){U.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(S),i.lines.destroy(),S=null},M=function(I){i.lines.resize()},V=function(I){i.getMousePos(I)},G=function(I){S&&(i.setMousePos(t.pan()),i.lines.init(S))};function B(I){I?(i.resizeCanvas(),t.on("tapstart","node",V),t.on("grab",P),t.on("pan",G),t.on("drag","node",R),t.on("free",A),window.addEventListener("resize",M)):(t.off("tapstart","node",V),t.off("grab",P),t.off("pan",G),t.off("drag","node",R),t.off("free",A),i.resetCanvas(),window.removeEventListener("resize",M))}var k=function(I){o.setPaddingOfParent(t.nodes(":parent"),I)},O=function(I){o.setPaddingOfParent(I,!0)};function z(I){k(I),t[g(I)]("ready",k),t[g(I)]("add","node:parent",c(O,!0))}var H={},U,_={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function q(I){U=Object.extend({},I),I.guidelines=I.initPosAlignment||I.distributionGuidelines||I.geometricGuideline;for(var F in I)if(H[F]!=I[F])if(u.hasOwnProperty(F))u[F](I[F]);else for(var $ in _){var K=_[$];K.indexOf(F)>=0&&($=="drawGrid"&&(a.changeOptions(I),I.drawGrid&&a.resizeCanvas()),$=="snapToGridOnRelease"&&(e.changeOptions(I),I.snapToGridOnRelease&&p()),$=="guidelines"&&i.changeOptions(I),$=="resize"&&(r.changeOptions(I),I.resize&&w()),$=="parentPadding"&&o.changeOptions(I))}H=Object.extend({},H,I)}return{init:q,syncWithOptions:q}}),Bu}var Ru,Dh;function bT(){if(Dh)return Ru;Dh=1,Ru=b;var t=0,e=1;function r(d,p,m,y,x,E){this._color=d,this.key=p,this.value=m,this.left=y,this.right=x,this._count=E}function n(d){return new r(d._color,d.key,d.value,d.left,d.right,d._count)}function a(d,p){return new r(d,p.key,p.value,p.left,p.right,p._count)}function i(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function o(d,p){this._compare=d,this.root=p}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var d=[];return this.forEach(function(p,m){d.push(p)}),d}}),Object.defineProperty(s,"values",{get:function(){var d=[];return this.forEach(function(p,m){d.push(m)}),d}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(d,p){for(var m=this._compare,y=this.root,x=[],E=[];y;){var C=m(d,y.key);x.push(y),E.push(C),C<=0?y=y.left:y=y.right}x.push(new r(t,d,p,null,null,1));for(var T=x.length-2;T>=0;--T){var y=x[T];E[T]<=0?x[T]=new r(y._color,y.key,y.value,x[T+1],y.right,y._count+1):x[T]=new r(y._color,y.key,y.value,y.left,x[T+1],y._count+1)}for(var T=x.length-1;T>1;--T){var S=x[T-1],y=x[T];if(S._color===e||y._color===e)break;var P=x[T-2];if(P.left===S)if(S.left===y){var R=P.right;if(R&&R._color===t)S._color=e,P.right=a(e,R),P._color=t,T-=1;else{if(P._color=t,P.left=S.right,S._color=e,S.right=P,x[T-2]=S,x[T-1]=y,i(P),i(S),T>=3){var A=x[T-3];A.left===P?A.left=S:A.right=S}break}}else{var R=P.right;if(R&&R._color===t)S._color=e,P.right=a(e,R),P._color=t,T-=1;else{if(S.right=y.left,P._color=t,P.left=y.right,y._color=e,y.left=S,y.right=P,x[T-2]=y,x[T-1]=S,i(P),i(S),i(y),T>=3){var A=x[T-3];A.left===P?A.left=y:A.right=y}break}}else if(S.right===y){var R=P.left;if(R&&R._color===t)S._color=e,P.left=a(e,R),P._color=t,T-=1;else{if(P._color=t,P.right=S.left,S._color=e,S.left=P,x[T-2]=S,x[T-1]=y,i(P),i(S),T>=3){var A=x[T-3];A.right===P?A.right=S:A.left=S}break}}else{var R=P.left;if(R&&R._color===t)S._color=e,P.left=a(e,R),P._color=t,T-=1;else{if(S.left=y.right,P._color=t,P.right=y.left,y._color=e,y.right=S,y.left=P,x[T-2]=y,x[T-1]=S,i(P),i(S),i(y),T>=3){var A=x[T-3];A.right===P?A.right=y:A.left=y}break}}}return x[0]._color=e,new o(m,x[0])};function l(d,p){if(p.left){var m=l(d,p.left);if(m)return m}var m=d(p.key,p.value);if(m)return m;if(p.right)return l(d,p.right)}function u(d,p,m,y){var x=p(d,y.key);if(x<=0){if(y.left){var E=u(d,p,m,y.left);if(E)return E}var E=m(y.key,y.value);if(E)return E}if(y.right)return u(d,p,m,y.right)}function c(d,p,m,y,x){var E=m(d,x.key),C=m(p,x.key),T;if(E<=0&&(x.left&&(T=c(d,p,m,y,x.left),T)||C>0&&(T=y(x.key,x.value),T)))return T;if(C>0&&x.right)return c(d,p,m,y,x.right)}s.forEach=function(p,m,y){if(this.root)switch(arguments.length){case 1:return l(p,this.root);case 2:return u(m,this._compare,p,this.root);case 3:return this._compare(m,y)>=0?void 0:c(m,y,this._compare,p,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var d=[],p=this.root;p;)d.push(p),p=p.left;return new f(this,d)}}),Object.defineProperty(s,"end",{get:function(){for(var d=[],p=this.root;p;)d.push(p),p=p.right;return new f(this,d)}}),s.at=function(d){if(d<0)return new f(this,[]);for(var p=this.root,m=[];;){if(m.push(p),p.left){if(d<p.left._count){p=p.left;continue}d-=p.left._count}if(!d)return new f(this,m);if(d-=1,p.right){if(d>=p.right._count)break;p=p.right}else break}return new f(this,[])},s.ge=function(d){for(var p=this._compare,m=this.root,y=[],x=0;m;){var E=p(d,m.key);y.push(m),E<=0&&(x=y.length),E<=0?m=m.left:m=m.right}return y.length=x,new f(this,y)},s.gt=function(d){for(var p=this._compare,m=this.root,y=[],x=0;m;){var E=p(d,m.key);y.push(m),E<0&&(x=y.length),E<0?m=m.left:m=m.right}return y.length=x,new f(this,y)},s.lt=function(d){for(var p=this._compare,m=this.root,y=[],x=0;m;){var E=p(d,m.key);y.push(m),E>0&&(x=y.length),E<=0?m=m.left:m=m.right}return y.length=x,new f(this,y)},s.le=function(d){for(var p=this._compare,m=this.root,y=[],x=0;m;){var E=p(d,m.key);y.push(m),E>=0&&(x=y.length),E<0?m=m.left:m=m.right}return y.length=x,new f(this,y)},s.find=function(d){for(var p=this._compare,m=this.root,y=[];m;){var x=p(d,m.key);if(y.push(m),x===0)return new f(this,y);x<=0?m=m.left:m=m.right}return new f(this,[])},s.remove=function(d){var p=this.find(d);return p?p.remove():this},s.get=function(d){for(var p=this._compare,m=this.root;m;){var y=p(d,m.key);if(y===0)return m.value;y<=0?m=m.left:m=m.right}};function f(d,p){this.tree=d,this._stack=p}var v=f.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new f(this.tree,this._stack.slice())};function g(d,p){d.key=p.key,d.value=p.value,d.left=p.left,d.right=p.right,d._color=p._color,d._count=p._count}function h(d){for(var p,m,y,x,E=d.length-1;E>=0;--E){if(p=d[E],E===0){p._color=e;return}if(m=d[E-1],m.left===p){if(y=m.right,y.right&&y.right._color===t){if(y=m.right=n(y),x=y.right=n(y.right),m.right=y.left,y.left=m,y.right=x,y._color=m._color,p._color=e,m._color=e,x._color=e,i(m),i(y),E>1){var C=d[E-2];C.left===m?C.left=y:C.right=y}d[E-1]=y;return}else if(y.left&&y.left._color===t){if(y=m.right=n(y),x=y.left=n(y.left),m.right=x.left,y.left=x.right,x.left=m,x.right=y,x._color=m._color,m._color=e,y._color=e,p._color=e,i(m),i(y),i(x),E>1){var C=d[E-2];C.left===m?C.left=x:C.right=x}d[E-1]=x;return}if(y._color===e)if(m._color===t){m._color=e,m.right=a(t,y);return}else{m.right=a(t,y);continue}else{if(y=n(y),m.right=y.left,y.left=m,y._color=m._color,m._color=t,i(m),i(y),E>1){var C=d[E-2];C.left===m?C.left=y:C.right=y}d[E-1]=y,d[E]=m,E+1<d.length?d[E+1]=p:d.push(p),E=E+2}}else{if(y=m.left,y.left&&y.left._color===t){if(y=m.left=n(y),x=y.left=n(y.left),m.left=y.right,y.right=m,y.left=x,y._color=m._color,p._color=e,m._color=e,x._color=e,i(m),i(y),E>1){var C=d[E-2];C.right===m?C.right=y:C.left=y}d[E-1]=y;return}else if(y.right&&y.right._color===t){if(y=m.left=n(y),x=y.right=n(y.right),m.left=x.right,y.right=x.left,x.right=m,x.left=y,x._color=m._color,m._color=e,y._color=e,p._color=e,i(m),i(y),i(x),E>1){var C=d[E-2];C.right===m?C.right=x:C.left=x}d[E-1]=x;return}if(y._color===e)if(m._color===t){m._color=e,m.left=a(t,y);return}else{m.left=a(t,y);continue}else{if(y=n(y),m.left=y.right,y.right=m,y._color=m._color,m._color=t,i(m),i(y),E>1){var C=d[E-2];C.right===m?C.right=y:C.left=y}d[E-1]=y,d[E]=m,E+1<d.length?d[E+1]=p:d.push(p),E=E+2}}}}v.remove=function(){var d=this._stack;if(d.length===0)return this.tree;var p=new Array(d.length),m=d[d.length-1];p[p.length-1]=new r(m._color,m.key,m.value,m.left,m.right,m._count);for(var y=d.length-2;y>=0;--y){var m=d[y];m.left===d[y+1]?p[y]=new r(m._color,m.key,m.value,p[y+1],m.right,m._count):p[y]=new r(m._color,m.key,m.value,m.left,p[y+1],m._count)}if(m=p[p.length-1],m.left&&m.right){var x=p.length;for(m=m.left;m.right;)p.push(m),m=m.right;var E=p[x-1];p.push(new r(m._color,E.key,E.value,m.left,m.right,m._count)),p[x-1].key=m.key,p[x-1].value=m.value;for(var y=p.length-2;y>=x;--y)m=p[y],p[y]=new r(m._color,m.key,m.value,m.left,p[y+1],m._count);p[x-1].left=p[x]}if(m=p[p.length-1],m._color===t){var C=p[p.length-2];C.left===m?C.left=null:C.right===m&&(C.right=null),p.pop();for(var y=0;y<p.length;++y)p[y]._count--;return new o(this.tree._compare,p[0])}else if(m.left||m.right){m.left?g(m,m.left):m.right&&g(m,m.right),m._color=e;for(var y=0;y<p.length-1;++y)p[y]._count--;return new o(this.tree._compare,p[0])}else{if(p.length===1)return new o(this.tree._compare,null);for(var y=0;y<p.length;++y)p[y]._count--;var T=p[p.length-2];h(p),T.left===m?T.left=null:T.right=null}return new o(this.tree._compare,p[0])},Object.defineProperty(v,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var d=0,p=this._stack;if(p.length===0){var m=this.tree.root;return m?m._count:0}else p[p.length-1].left&&(d=p[p.length-1].left._count);for(var y=p.length-2;y>=0;--y)p[y+1]===p[y].right&&(++d,p[y].left&&(d+=p[y].left._count));return d},enumerable:!0}),v.next=function(){var d=this._stack;if(d.length!==0){var p=d[d.length-1];if(p.right)for(p=p.right;p;)d.push(p),p=p.left;else for(d.pop();d.length>0&&d[d.length-1].right===p;)p=d[d.length-1],d.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var d=this._stack;if(d.length===0)return!1;if(d[d.length-1].right)return!0;for(var p=d.length-1;p>0;--p)if(d[p-1].left===d[p])return!0;return!1}}),v.update=function(d){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var m=new Array(p.length),y=p[p.length-1];m[m.length-1]=new r(y._color,y.key,d,y.left,y.right,y._count);for(var x=p.length-2;x>=0;--x)y=p[x],y.left===p[x+1]?m[x]=new r(y._color,y.key,y.value,m[x+1],y.right,y._count):m[x]=new r(y._color,y.key,y.value,y.left,m[x+1],y._count);return new o(this.tree._compare,m[0])},v.prev=function(){var d=this._stack;if(d.length!==0){var p=d[d.length-1];if(p.left)for(p=p.left;p;)d.push(p),p=p.right;else for(d.pop();d.length>0&&d[d.length-1].left===p;)p=d[d.length-1],d.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var d=this._stack;if(d.length===0)return!1;if(d[d.length-1].left)return!0;for(var p=d.length-1;p>0;--p)if(d[p-1].right===d[p])return!0;return!1}});function w(d,p){return d<p?-1:d>p?1:0}function b(d){return new o(d||w,null)}return Ru}var Mu,Ph;function wT(){return Ph||(Ph=1,Mu=function(t,e,r){var n=bT(),a=t,i=function(B){a=B,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(B){var k=B.getBoundingClientRect();return{top:k.top+document.documentElement.scrollTop,left:k.left+document.documentElement.scrollLeft}},s=r(function(){l(),u.height=e.height(),u.width=e.width(),u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){u.height=e.height(),u.width=e.width();var B=o(u),k=o(c);u.style.top=-(B.top-k.top),u.style.left=-(B.left-k.left)},0)},250),l=function(){var B=e.width(),k=e.height();f.clearRect(0,0,B,k)},u=document.createElement("canvas"),c=e.container(),f=u.getContext("2d");c.appendChild(u);var v=function(){u.height=0,u.width=0,u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder};v();var g=null,h=null,w,b,d={},p={},m={h:null,v:null};d.getDims=function(B){var k=B.renderedPosition(),O=B.renderedWidth(),z=B.renderedHeight(),H={left:Number(B.renderedStyle("padding-left").replace("px","")),right:Number(B.renderedStyle("padding-right").replace("px","")),top:Number(B.renderedStyle("padding-top").replace("px","")),bottom:Number(B.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:k.x,left:Math.round(k.x-(H.left+O/2)),right:Math.round(k.x+(H.right+O/2))},vertical:{center:k.y,top:Math.round(k.y-(H.top+z/2)),bottom:Math.round(k.y+(H.bottom+z/2))}}},d.init=function(B){g=n(),h=n(),w||(p.x=e.pan("x"),p.y=e.pan("y"),w=B.renderedPosition());var k=e.nodes(":visible");b=B.union(B.ancestors()),b=b.union(B.descendants()),k.not(b).each(function(O,z){typeof O=="number"&&(O=z);var H=d.getDims(O);["left","center","right"].forEach(function(U){var _=H.horizontal[U];h.get(_)?h.get(_).push(O):h=h.insert(_,[O])}),["top","center","bottom"].forEach(function(U){var _=H.vertical[U];g.get(_)?g.get(_).push(O):g=g.insert(_,[O])})}),f.lineWidth=a.lineWidth,d.update(B)},d.destroy=function(){d.clear(),g=null,h=null,w=null,E={},m={h:null,v:null},G&&(G.unlock(),G=void 0)},d.clear=l,d.drawLine=function(B,k,O,z){f.setLineDash(z),f.beginPath(),f.moveTo(B.x,B.y),f.lineTo(k.x,k.y),f.strokeStyle=O,f.stroke()},d.drawArrow=function(B,k){k=="right"?(f.setLineDash([]),f.beginPath(),f.moveTo(B.x-5,B.y-5),f.lineTo(B.x,B.y),f.lineTo(B.x-5,B.y+5),f.stroke()):k=="left"?(f.setLineDash([]),f.beginPath(),f.moveTo(B.x+5,B.y-5),f.lineTo(B.x,B.y),f.lineTo(B.x+5,B.y+5),f.stroke()):k=="top"?(f.setLineDash([]),f.beginPath(),f.moveTo(B.x-5,B.y+5),f.lineTo(B.x,B.y),f.lineTo(B.x+5,B.y+5),f.stroke()):k=="bottom"&&(f.setLineDash([]),f.beginPath(),f.moveTo(B.x-5,B.y-5),f.lineTo(B.x,B.y),f.lineTo(B.x+5,B.y-5),f.stroke())},d.drawCross=function(B){f.setLineDash([]),f.beginPath(),f.moveTo(B.x-5,B.y+5),f.lineTo(B.x+5,B.y-5),f.moveTo(B.x-5,B.y-5),f.lineTo(B.x+5,B.y+5),f.stroke()};var y=function(B,k){for(var O=B[0],z=d.getDims(O)[k].center,H=B[0],U=d.getDims(H)[k].center,_=0;_<B.length;_++){var q=B[_];d.getDims(q)[k].center<z&&(z=d.getDims(q)[k].center,O=q),d.getDims(q)[k].center>U&&(U=d.getDims(q)[k].center,H=q)}if(k=="horizontal")var I=(z+U)/2<d.getDims(B[1])[k].center?U+(.5*H.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():z-(.5*O.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var I=(z+U)/2<d.getDims(B[1])[k].center?U+(.5*H.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():z-(.5*O.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return I};d.horizontalDistribution=function(B){var k=null,O=null,z=d.getDims(B),H=z.horizontal.center,U=z.vertical.center;if(h.forEach(function(I,F){for(var $=0;$<F.length;$++){var K=F[$],ee=d.getDims(K);if(Math.abs(ee.vertical.center-z.vertical.center)<a.guidelinesStyle.range*e.zoom()&&ee.horizontal.right==I&&z.horizontal.left-ee.horizontal.right>a.guidelinesStyle.minDistRange){var Y=Math.round(2*H)-I;h.forEach(function(W,J){for(var D=0;D<J.length;D++){var N=J[D];Math.abs(d.getDims(N).vertical.center-U)<a.guidelinesStyle.range*e.zoom()&&Math.abs(Y-d.getDims(N).horizontal.left)<2*a.guidelinesTolerance&&(k=K,O=N)}},Y-a.guidelinesTolerance,Y+a.guidelinesTolerance)}}},H-a.guidelinesStyle.range*e.zoom(),H),k){m.hd=H-(d.getDims(O).horizontal.left+d.getDims(k).horizontal.right)/2,(!a.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd);var _=y([k,B,O],"vertical");d.drawLine({x:d.getDims(k).horizontal.right,y:_},{x:z.horizontal.left,y:_},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(O).horizontal.left,y:_},{x:z.horizontal.right,y:_},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(k).horizontal.right,y:_},{x:d.getDims(k).horizontal.right,y:d.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(O).horizontal.left,y:_},{x:d.getDims(O).horizontal.left,y:d.getDims(O).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:z.horizontal.left,y:_},{x:z.horizontal.left,y:U},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:z.horizontal.right,y:_},{x:z.horizontal.right,y:U},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawArrow({x:d.getDims(k).horizontal.right,y:_},"left"),d.drawArrow({x:z.horizontal.left,y:_},"right"),d.drawArrow({x:z.horizontal.right,y:_},"left"),d.drawArrow({x:d.getDims(O).horizontal.left,y:_},"right")}else{var q=d.horizontalDistributionNext(B,"left");q||d.horizontalDistributionNext(B,"right")}},d.verticalDistribution=function(B){var k=null,O=null,z=d.getDims(B),H=z.horizontal.center,U=z.vertical.center;if(g.forEach(function(I,F){for(var $=0;$<F.length;$++){var K=F[$],ee=d.getDims(K);if(Math.abs(ee.horizontal.center-z.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&ee.vertical.bottom==I&&z.vertical.top-ee.vertical.bottom>a.guidelinesStyle.minDistRange){var Y=Math.round(2*U-I);g.forEach(function(W,J){for(var D=0;D<J.length;D++){var N=J[D];Math.abs(d.getDims(N).horizontal.center-H)<a.guidelinesStyle.range*e.zoom()&&Math.abs(Y-d.getDims(N).vertical.top)<2*a.guidelinesTolerance&&(k=K,O=N)}},Y-a.guidelinesTolerance,Y+a.guidelinesTolerance)}}},U-a.guidelinesStyle.range*e.zoom(),U),k){m.vd=U-(d.getDims(k).vertical.bottom+d.getDims(O).vertical.top)/2,(!a.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd);var _=y([k,B,O],"horizontal");d.drawLine({y:d.getDims(k).vertical.bottom,x:_},{y:z.vertical.top,x:_},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(O).vertical.top,x:_},{y:z.vertical.bottom,x:_},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(k).vertical.bottom,x:_},{y:d.getDims(k).vertical.bottom,x:d.getDims(k).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(O).vertical.top,x:_},{y:d.getDims(O).vertical.top,x:d.getDims(O).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:z.vertical.bottom,x:_},{y:z.vertical.bottom,x:H},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:z.vertical.top,x:_},{y:z.vertical.top,x:H},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawArrow({x:_,y:d.getDims(k).vertical.bottom},"top"),d.drawArrow({x:_,y:z.vertical.top},"bottom"),d.drawArrow({x:_,y:d.getDims(O).vertical.top},"bottom"),d.drawArrow({x:_,y:z.vertical.bottom},"top")}else{var q=d.verticalDistributionNext(B,"below");q||d.verticalDistributionNext(B,"above")}},d.searchForLine=function(B,k){var O,z,H,U,_,q,I,F=d.getDims(k)[B],$=Number.MAX_SAFE_INTEGER;B=="horizontal"?(q=h,U="y",_="x",m.h=null):(q=g,U="x",_="y",m.v=null),H=k.renderedPosition(U);for(var K in F)if(O=F[K],q.forEach(function(ee,Y){for(var W=0;W<Y.length;W++){var J=Y[W];if(a.centerToEdgeAlignment||K!="center"&&J.renderedPosition(_)!=ee||K=="center"&&J.renderedPosition(_)==ee){var D=Math.abs(H-J.renderedPosition(U));D<$&&D<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(z=J,$=D,I=ee)}}},O-Number(a.guidelinesTolerance),O+Number(a.guidelinesTolerance)),z){$=d.getDims(k)[B][K],B=="horizontal"?(m.h=$-I,d.drawLine({x:$,y:k.renderedPosition("y")},{x:$,y:z.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(m.v=$-I,d.drawLine({x:k.renderedPosition("x"),y:$},{x:z.renderedPosition("x"),y:$},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},d.horizontalDistributionNext=function(B,k){var O=null,z=null,H=d.getDims(B),U=H.horizontal.center,_=H.vertical.center,q="right",I="left",F=U;if(k=="left"){q="left",I="right";var F=U-a.guidelinesStyle.range*e.zoom()}var $={left:function(K,ee){return ee-K>a.guidelinesStyle.minDistRange},right:function(K,ee){return K-ee>a.guidelinesStyle.minDistRange}};return h.forEach(function(K,ee){for(var Y=0;Y<ee.length;Y++){var W=ee[Y],J=d.getDims(W);if(Math.abs(J.vertical.center-H.vertical.center)<a.guidelinesStyle.range*e.zoom()&&J.horizontal[I]==K&&$[k](J.horizontal[I],H.horizontal[q])){var D=J.horizontal[q]-(H.horizontal[q]-K);h.forEach(function(N,j){for(var ne=0;ne<j.length;ne++){var ce=j[ne];Math.abs(d.getDims(ce).vertical.center-_)<a.guidelinesStyle.range*e.zoom()&&Math.abs(D-d.getDims(ce).horizontal[I])<2*a.guidelinesTolerance&&(O=W,z=ce)}},D-a.guidelinesTolerance,D+a.guidelinesTolerance)}}},F,F+a.guidelinesStyle.range*e.zoom()),O?(m.hd=d.getDims(B).horizontal[q]-d.getDims(O).horizontal[I]-(d.getDims(O).horizontal[q]-d.getDims(z).horizontal[I]),(!a.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd),d.drawDH(B,O,z,k),!0):(a.geometricGuideline||(m.h=null),!1)},d.drawDH=function(B,k,O,z){var H=d.getDims(B).vertical.center,U="right",_="left";z=="left"&&(U="left",_="right");var q=y([k,B,O],"vertical");d.drawLine({x:d.getDims(k).horizontal[_],y:q},{x:d.getDims(B).horizontal[U],y:q},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(B).horizontal[U],y:q},{x:d.getDims(B).horizontal[U],y:H},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(O).horizontal[_],y:q},{x:d.getDims(k).horizontal[U],y:q},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(O).horizontal[_],y:q},{x:d.getDims(O).horizontal[_],y:d.getDims(O).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(k).horizontal[_],y:q},{x:d.getDims(k).horizontal[_],y:d.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(k).horizontal[U],y:q},{x:d.getDims(k).horizontal[U],y:d.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawArrow({x:d.getDims(B).horizontal[U],y:q},_),d.drawArrow({x:d.getDims(k).horizontal[_],y:q},U),d.drawArrow({x:d.getDims(k).horizontal[U],y:q},_),d.drawArrow({x:d.getDims(O).horizontal[_],y:q},U)},d.verticalDistributionNext=function(B,k){var O=null,z=null,H=d.getDims(B),U=H.horizontal.center,_=H.vertical.center,q="top",I="bottom",F=_-a.guidelinesStyle.range*e.zoom();k=="above"&&(q="bottom",I="top",F=_);var $={below:function(K,ee){return ee-K>a.guidelinesStyle.minDistRange},above:function(K,ee){return K-ee>a.guidelinesStyle.minDistRange}};return g.forEach(function(K,ee){for(var Y=0;Y<ee.length;Y++){var W=ee[Y],J=d.getDims(W);if(Math.abs(J.horizontal.center-H.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&J.vertical[I]==K&&$[k](J.vertical[I],H.vertical[q])){var D=J.vertical[q]-(H.vertical[q]-K);g.forEach(function(N,j){for(var ne=0;ne<j.length;ne++){var ce=j[ne];Math.abs(d.getDims(ce).horizontal.center-U)<a.guidelinesStyle.range*e.zoom()&&Math.abs(D-d.getDims(ce).vertical[I])<2*a.guidelinesTolerance&&(O=W,z=ce)}},D-a.guidelinesTolerance,D+a.guidelinesTolerance)}}},F,F+a.guidelinesStyle.range*e.zoom()),O?(m.vd=d.getDims(B).vertical[q]-d.getDims(O).vertical[I]-(d.getDims(O).vertical[q]-d.getDims(z).vertical[I]),(!a.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd),d.drawDV(B,O,z,k),!0):(a.geometricGuideline||(m.v=null),!1)},d.drawDV=function(B,k,O,z){var H=d.getDims(B),U=H.horizontal.center,_="top",q="bottom";z=="above"&&(_="bottom",q="top");var I=y([k,B,O],"horizontal");d.drawLine({x:I,y:H.vertical[_]},{x:I,y:d.getDims(k).vertical[q]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:I,y:d.getDims(k).vertical[_]},{x:I,y:d.getDims(O).vertical[q]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:U,y:H.vertical[_]},{x:I,y:H.vertical[_]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:d.getDims(k).horizontal.center,y:d.getDims(k).vertical[q]},{x:I,y:d.getDims(k).vertical[q]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:d.getDims(k).horizontal.center,y:d.getDims(k).vertical[_]},{x:I,y:d.getDims(k).vertical[_]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:I,y:d.getDims(O).vertical[q]},{x:d.getDims(O).horizontal.center,y:d.getDims(O).vertical[q]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawArrow({x:I,y:H.vertical[_]},q),d.drawArrow({x:I,y:d.getDims(k).vertical[q]},_),d.drawArrow({x:I,y:d.getDims(k).vertical[_]},q),d.drawArrow({x:I,y:d.getDims(O).vertical[q]},_)},d.update=function(B){d.clear(),a.initPosAlignment&&P(B),B.each(function(k,O){typeof k=="number"&&(k=O),a.geometricGuideline&&(d.searchForLine("horizontal",k),d.searchForLine("vertical",k)),a.distributionGuidelines&&(d.horizontalDistribution(k),d.verticalDistribution(k))})},d.resize=function(){s()};function x(B){for(var k={},O=0;O<B.length;O++)k[B[O].id()]=!0;var z=B.filter(function(H,U){typeof H=="number"&&(H=U);for(var _=H.parent()[0];_!=null;){if(k[_.id()])return!1;_=_.parent()[0]}return!0});return z}var E={},C={},T=function(B){E=B.renderedPosition||B.cyRenderedPosition,C.x=E.x,C.y=E.y},S=function(B){C.x+=B.x-p.x,C.y+=B.y-p.y,p.x=B.x,p.y=B.y},P=function(B){var k=B.renderedPosition();Math.abs(w.y-k.y)<a.guidelinesTolerance?(d.drawLine({x:C.x,y:E.y},{x:k.x,y:E.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),E.y==C.y?d.drawCross(C):d.drawCross(E)):Math.abs(w.x-k.x)<a.guidelinesTolerance&&(d.drawLine({x:E.x,y:C.y},{x:E.x,y:k.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),E.x==C.x?d.drawCross(C):d.drawCross(E))};function R(B,k){var O=x(k),z=O.union(O.descendants());z.filter(":childless").forEach(function(H,U){typeof H=="number"&&(H=U);var _={x:B.x+H.renderedPosition("x"),y:B.y+H.renderedPosition("y")};H.renderedPosition(_)})}var A;e.on("tapstart","node",function(){A=this});var M,V={x:0,y:0};e.on("mousemove",function(B){M=B.renderedPosition||B.cyRenderedPosition,G&&G.each(function(k,O){if(typeof k=="number"&&(k=O),k.locked()&&(Math.abs(M.x-V.x)>2*a.guidelinesTolerance||Math.abs(M.y-V.y)>2*a.guidelinesTolerance)){k.unlock();var z={};z.x=M.x-A.renderedPosition("x"),z.y=M.y-A.renderedPosition("y"),R(z,k)}})});var G;return d.snapToAlignmentLocation=function(B){G=B,B.each(function(k,O){typeof k=="number"&&(k=O);var z=k.renderedPosition();m.h&&(V=M,z.x-=m.h,k.renderedPosition(z)),m.v&&(V=M,z.y-=m.v,k.renderedPosition(z)),(m.v||m.h)&&(m.h=null,m.v=null,G.lock())}),d.update(B)},{changeOptions:i,lines:d,getTopMostNodes:x,getMousePos:T,setMousePos:S,resizeCanvas:s,resetCanvas:v}}),Mu}var Lu,kh;function xT(){return kh||(kh=1,Lu=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(l){r=l,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function s(l,u){u?l.addClass(n):l.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),Lu}var _u,Ah;function CT(){return Ah||(Ah=1,_u=function(t,e,r){function n(l,u,c){var f=l.union(l.descendants());f.filter(":childless").positions(function(v,g){typeof v=="number"&&(v=g);var h=v.position();return{x:h.x+u,y:h.y+c}})}function a(l){for(var u={},c=0;c<l.length;c++)u[l[c].id()]=!0;var f=l.filter(function(v,g){typeof v=="number"&&(v=g);for(var h=v.parent()[0];h!=null;){if(u[h.id()])return!1;h=h.parent()[0]}return!0});return f}if(r||t("collection","align",function(l,u,c){var f=a(this.nodes(":visible")),v=c||f[0];f=f.not(v),l=l||"none",u=u||"none";var g=0,h=0;u=="left"?g=-1:u=="right"&&(g=1),l=="top"?h=-1:l=="bottom"&&(h=1);for(var w=0;w<f.length;w++){var b=f[w],d=Object.assign({},b.position()),p=Object.assign({},b.position());u!="none"&&(p.x=v.position("x")+g*(v.outerWidth()-b.outerWidth())/2),l!="none"&&(p.y=v.position("y")+h*(v.outerHeight()-b.outerHeight())/2),n(b,p.x-d.x,p.y-d.y)}return this}),e.undoRedo){let l=function(){for(var c={},f=e.nodes(),v=0;v<f.length;v++){var g=f[v];c[g.id()]={x:g.position("x"),y:g.position("y")}}return c},u=function(c){var f={};return e.nodes().not(":parent").positions(function(v,g){typeof v=="number"&&(v=g),f[v.id()]={x:v.position("x"),y:v.position("y")};var h=c[v.id()];return{x:h.x,y:h.y}}),f};var o=l,s=u,i=e.undoRedo(null,!0);i.action("align",function(c){var f;return c.firstTime?(f=l(),c.nodes.align(c.horizontal,c.vertical,c.alignTo)):f=u(c),f},function(c){return u(c)})}}),_u}var Iu,Bh;function ET(){if(Bh)return Iu;Bh=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(s,l,u){var c,f,v,g,h,w,b,d=0,p=!1,m=!0;if(typeof s!="function")throw new TypeError(e);if(l=l<0?0:+l||0,u===!0){var y=!0;m=!1}else o(u)&&(y=!!u.leading,p="maxWait"in u&&r(+u.maxWait||0,l),m="trailing"in u?!!u.trailing:m);function x(){w&&clearTimeout(w),f&&clearTimeout(f),d=0,f=w=b=void 0}function E(P,R){R&&clearTimeout(R),f=w=b=void 0,P&&(d=a(),v=s.apply(h,c),!w&&!f&&(c=h=void 0))}function C(){var P=l-(a()-g);P<=0||P>l?E(b,f):w=setTimeout(C,P)}function T(){E(m,w)}function S(){if(c=arguments,g=a(),h=this,b=m&&(w||!y),p===!1)var P=y&&!w;else{!f&&!y&&(d=g);var R=p-(g-d),A=R<=0||R>p;A?(f&&(f=clearTimeout(f)),d=g,v=s.apply(h,c)):f||(f=setTimeout(T,R))}return A&&w?w=clearTimeout(w):!w&&l!==p&&(w=setTimeout(C,l)),P&&(A=!0,v=s.apply(h,c)),A&&!w&&!f&&(c=h=void 0),v}return S.cancel=x,S}function o(s){var l=typeof s;return!!s&&(l=="object"||l=="function")}return i}();return Iu=t,Iu}var Rh;function ST(){return Rh||(Rh=1,function(t){(function(){var e=function(r){if(!r)return;vT();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=hT(),o=gT(),s=pT(),l=mT(),u=yT(),c=wT(),f=xT(),v=CT(),g=ET();function h(w){return w.scratch("_gridGuide")||w.scratch("_gridGuide",{}),w.scratch("_gridGuide")}r("core","gridGuide",function(w){var b=this,d=h(b),p=Object.extend({},d.options||a,w);if(d.options=p,d.initialized){var C=d.eventsController;C.syncWithOptions(p)}else{var m,y,x,E,C,T,S;m=i(b,p.gridSpacing,p.snapToGridCenter),y=l(p.gridSpacing),x=o(b,m),E=s(p,b,g),T=c(p,b,g),S=f(p,b),C=u(b,m,y,x,E,T,S,p),v(r,b,n),n=!0,C.init(p),d.initialized=!0,d.eventsController=C}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()}(Tu)),Tu.exports}var TT=ST();const DT=$m(TT);var Ro={exports:{}},PT=Ro.exports,Mh;function kT(){return Mh||(Mh=1,function(t,e){(function(r,n){t.exports=n()})(PT,function(){return(()=>{var r={621:(i,o,s)=>{function l(_,q){(q==null||q>_.length)&&(q=_.length);for(var I=0,F=new Array(q);I<q;I++)F[I]=_[I];return F}function u(_,q){var I={};for(var F in _)I[F]=_[F];for(var $ in q)I[$]instanceof Array?I[$]=I[$].concat(q[$]):I[$]=q[$];return I}function c(_){for(var q="",I=0;I<_.length;I++)q+=_[I],I!==_.length-1&&(q+=" ");return q}function f(_,q,I){I?_.setAttribute(q,""):_.removeAttribute(q)}function v(_,q,I){customElements.get(_)===void 0&&customElements.define(_,q,{extends:I})}s.r(o),s.d(o,{contextMenus:()=>U});var g="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function w(_){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q})(_)}function b(_,q){var I;if(typeof Symbol>"u"||_[Symbol.iterator]==null){if(Array.isArray(_)||(I=function(W,J){if(W){if(typeof W=="string")return d(W,J);var D=Object.prototype.toString.call(W).slice(8,-1);return D==="Object"&&W.constructor&&(D=W.constructor.name),D==="Map"||D==="Set"?Array.from(W):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?d(W,J):void 0}}(_))||q){I&&(_=I);var F=0,$=function(){};return{s:$,n:function(){return F>=_.length?{done:!0}:{done:!1,value:_[F++]}},e:function(W){throw W},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K,ee=!0,Y=!1;return{s:function(){I=_[Symbol.iterator]()},n:function(){var W=I.next();return ee=W.done,W},e:function(W){Y=!0,K=W},f:function(){try{ee||I.return==null||I.return()}finally{if(Y)throw K}}}}function d(_,q){(q==null||q>_.length)&&(q=_.length);for(var I=0,F=new Array(q);I<q;I++)F[I]=_[I];return F}function p(_,q){if(!(_ instanceof q))throw new TypeError("Cannot call a class as a function")}function m(_,q){for(var I=0;I<q.length;I++){var F=q[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(_,F.key,F)}}function y(_,q,I){return q&&m(_.prototype,q),I&&m(_,I),_}function x(_,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(q&&q.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),q&&M(_,q)}function E(_){var q=A();return function(){var I,F=V(_);if(q){var $=V(this).constructor;I=Reflect.construct(F,arguments,$)}else I=F.apply(this,arguments);return C(this,I)}}function C(_,q){return!q||w(q)!=="object"&&typeof q!="function"?T(_):q}function T(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function S(_,q,I){return(S=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(F,$,K){var ee=function(W,J){for(;!Object.prototype.hasOwnProperty.call(W,J)&&(W=V(W))!==null;);return W}(F,$);if(ee){var Y=Object.getOwnPropertyDescriptor(ee,$);return Y.get?Y.get.call(K):Y.value}})(_,q,I||_)}function P(_){var q=typeof Map=="function"?new Map:void 0;return(P=function(I){if(I===null||(F=I,Function.toString.call(F).indexOf("[native code]")===-1))return I;var F;if(typeof I!="function")throw new TypeError("Super expression must either be null or a function");if(q!==void 0){if(q.has(I))return q.get(I);q.set(I,$)}function $(){return R(I,arguments,V(this).constructor)}return $.prototype=Object.create(I.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),M($,I)})(_)}function R(_,q,I){return(R=A()?Reflect.construct:function(F,$,K){var ee=[null];ee.push.apply(ee,$);var Y=new(Function.bind.apply(F,ee));return K&&M(Y,K.prototype),Y}).apply(null,arguments)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function M(_,q){return(M=Object.setPrototypeOf||function(I,F){return I.__proto__=F,I})(_,q)}function V(_){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)})(_)}function G(_){_.preventDefault(),_.stopPropagation()}var B=function(_){x(I,_);var q=E(I);function I(F,$,K){var ee,Y,W,J,D,N,j,ne,ce,ie;p(this,I),S((Y=T(ie=q.call(this)),V(I.prototype)),"setAttribute",Y).call(Y,"id",F.id);var le=ie._getMenuItemClassStr(K.cxtMenuItemClasses,F.hasTrailingDivider);if(S((W=T(ie),V(I.prototype)),"setAttribute",W).call(W,"class",le),S((J=T(ie),V(I.prototype)),"setAttribute",J).call(J,"title",(ee=F.tooltipText)!==null&&ee!==void 0?ee:""),F.disabled&&f(T(ie),"disabled",!0),F.image){var X=document.createElement("img");X.src=F.image.src,X.width=F.image.width,X.height=F.image.height,X.style.position="absolute",X.style.top=F.image.y+"px",X.style.left=F.image.x+"px",S((D=T(ie),V(I.prototype)),"appendChild",D).call(D,X)}if(ie.innerHTML+=F.content,ie.onMenuItemClick=$,ie.data={},ie.clickFns=[],ie.selector=F.selector,ie.hasTrailingDivider=F.hasTrailingDivider,ie.show=F.show===void 0||F.show,ie.coreAsWell=F.coreAsWell||!1,ie.scratchpad=K,F.onClickFunction===void 0&&F.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return ie.onClickFunction=F.onClickFunction,F.submenu instanceof Array&&ie._createSubmenu(F.submenu),S((N=T(ie),V(I.prototype)),"addEventListener",N).call(N,"mousedown",G),S((j=T(ie),V(I.prototype)),"addEventListener",j).call(j,"mouseup",G),S((ne=T(ie),V(I.prototype)),"addEventListener",ne).call(ne,"touchstart",G),S((ce=T(ie),V(I.prototype)),"addEventListener",ce).call(ce,"touchend",G),ie}return y(I,[{key:"bindOnClickFunction",value:function(F){this.clickFns.push(F),S(V(I.prototype),"addEventListener",this).call(this,"click",F)}},{key:"unbindOnClickFunctions",value:function(){var F,$=b(this.clickFns);try{for($.s();!(F=$.n()).done;){var K=F.value;S(V(I.prototype),"removeEventListener",this).call(this,"click",K)}}catch(ee){$.e(ee)}finally{$.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(F){this.hasTrailingDivider=F}},{key:"hasSubmenu",value:function(){return this.submenu instanceof k}},{key:"appendSubmenuItem",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(F,$)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(F){var $=this.getBoundingClientRect(),K=function(D){D.style.opacity="0",D.style.display="block";var N=D.getBoundingClientRect();return D.style.opacity="1",D.style.display="none",N}(this.submenu),ee=$.right+K.width>window.innerWidth,Y=$.top+K.height>window.innerHeight;ee||Y?ee&&!Y?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):ee&&Y?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var W=Array.from(this.submenu.children).filter(function(D){if(D instanceof I)return D.isVisible()}),J=W.length;W.forEach(function(D,N){D instanceof I&&(N<J-1&&D.getHasTrailingDivider()?D.classList.add(g):D.getHasTrailingDivider()&&D.classList.remove(g))})}},{key:"_onMouseLeave",value:function(F){var $,K,ee,Y,W;$={x:F.clientX,y:F.clientY},K=this.submenu,Y=$.y,(ee=$.x)>=(W=K.getBoundingClientRect()).left&&ee<=W.right&&Y>=W.top&&Y<=W.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new k(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var $,K=b(F);try{for(K.s();!($=K.n()).done;){var ee=$.value,Y=new I(ee,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(Y)}}catch(W){K.e(W)}finally{K.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(F,$){return $?F+" "+g:F}}],[{key:"define",value:function(){v("ctx-menu-item",I,"button")}}]),I}(P(HTMLButtonElement)),k=function(_){x(I,_);var q=E(I);function I(F,$){var K,ee;return p(this,I),S((K=T(ee=q.call(this)),V(I.prototype)),"setAttribute",K).call(K,"class",$.cxtMenuClasses),ee.style.position="absolute",ee.onMenuItemClick=F,ee.scratchpad=$,ee}return y(I,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var F,$=b(this.children);try{for($.s();!(F=$.n()).done;){var K=F.value;K instanceof HTMLElement?K.style.display="none":console.warn("".concat(K," is not a HTMLElement"))}}catch(ee){$.e(ee)}finally{$.f()}}},{key:"hideSubmenus",value:function(){var F,$=b(this.children);try{for($.s();!(F=$.n()).done;){var K=F.value;K instanceof B&&K.submenu&&K.submenu.hide()}}catch(ee){$.e(ee)}finally{$.f()}}},{key:"appendMenuItem",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if($!==void 0){if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of the context menu"));this.insertBefore(F,$)}else this.appendChild(F);F.isClickable()&&this._performBindings(F)}},{key:"moveBefore",value:function(F,$){if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of context menu"));if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of context menu"));this.removeChild(F),this.insertBefore(F,$)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var F=this.lastChild;F instanceof B?this._removeImmediateMenuItem(F):(console.warn("Found non menu item in the context menu: ",F),this.removeChild(F))}}},{key:"_removeImmediateMenuItem",value:function(F){if(!this._detachImmediateMenuItem(F))throw new Error("menu item(id=".concat(F.id,") is not in the context menu"));F.detachSubmenu(),F.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(F){if(F.parentNode===this){if(this.removeChild(F),this.children.length<=0){var $=this.parentNode;$ instanceof B&&$.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(F){var $=this._bindOnClick(F.onClickFunction);F.bindOnClickFunction($),F.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(F){var $=this;return function(){var K=$.scratchpad.currentCyEvent;F(K)}}}],[{key:"define",value:function(){v("menu-item-list",I,"div")}}]),I}(P(HTMLDivElement)),O=function(_){x(I,_);var q=E(I);function I(F,$){var K;return p(this,I),(K=q.call(this,F,$)).onMenuItemClick=function(ee){G(ee),K.hide(),F()},K}return y(I,[{key:"removeMenuItem",value:function(F){var $=F.parentElement;$ instanceof k&&this.contains($)&&$._removeImmediateMenuItem(F)}},{key:"appendMenuItem",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(F.id),S(V(I.prototype),"appendMenuItem",this).call(this,F,$)}},{key:"insertMenuItem",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=$.before,ee=$.parent;if(this.ensureDoesntContain(F.id),K!==void 0){if(!this.contains(K))throw new Error("before(id=".concat(K.id,") is not in the context menu"));var Y=K.parentNode;if(!(Y instanceof k))throw new Error("Parent of before(id=".concat(K.id,") is not a submenu"));Y.appendMenuItem(F,K)}else if(ee!==void 0){if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not a descendant of the context menu"));ee.appendSubmenuItem(F)}else this.appendMenuItem(F)}},{key:"moveBefore",value:function(F,$){var K=F.parentElement;if(!this.contains(K))throw new Error("parent(id=".concat(K.id,") is not in the contex menu"));if(!this.contains($))throw new Error("before(id=".concat($.id,") is not in the context menu"));K.removeChild(F),this.insertMenuItem(F,{before:$})}},{key:"moveToSubmenu",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ee=F.parentElement;if(!(ee instanceof k))throw new Error("current parent(id=".concat(ee.id,") is not a submenu"));if(!this.contains(ee))throw new Error("parent of the menu item(id=".concat(ee.id,") is not in the context menu"));if($!==null){if(!this.contains($))throw new Error("parent(id=".concat($.id,") is not in the context menu"));ee._detachImmediateMenuItem(F),$.appendSubmenuItem(F)}else K!==null&&(F.selector=K.selector,F.coreAsWell=K.coreAsWell),ee._detachImmediateMenuItem(F),this.appendMenuItem(F)}},{key:"ensureDoesntContain",value:function(F){var $=document.getElementById(F);if($!==void 0&&this.contains($))throw new Error("There is already an element with id=".concat(F," in the context menu"))}},{key:"ensureContains",value:function(F){var $=document.getElementById(F);if($==null||$==null||!this.contains($))throw new Error("An element with id '".concat(F,"' does not exist!"))}}],[{key:"define",value:function(){v("ctx-menu",I,"div")}}]),I}(k);function z(_,q){var I;if(typeof Symbol>"u"||_[Symbol.iterator]==null){if(Array.isArray(_)||(I=function(W,J){if(W){if(typeof W=="string")return H(W,J);var D=Object.prototype.toString.call(W).slice(8,-1);return D==="Object"&&W.constructor&&(D=W.constructor.name),D==="Map"||D==="Set"?Array.from(W):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?H(W,J):void 0}}(_))||q){I&&(_=I);var F=0,$=function(){};return{s:$,n:function(){return F>=_.length?{done:!0}:{done:!1,value:_[F++]}},e:function(W){throw W},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K,ee=!0,Y=!1;return{s:function(){I=_[Symbol.iterator]()},n:function(){var W=I.next();return ee=W.done,W},e:function(W){Y=!0,K=W},f:function(){try{ee||I.return==null||I.return()}finally{if(Y)throw K}}}}function H(_,q){(q==null||q>_.length)&&(q=_.length);for(var I=0,F=new Array(q);I<q;I++)F[I]=_[I];return F}function U(_){var q=this;q.scratch("cycontextmenus")||q.scratch("cycontextmenus",{});var I,F,$=function(X){return q.scratch("cycontextmenus")[X]},K=function(X,Q){return q.scratch("cycontextmenus")[X]=Q},ee=$("options"),Y=$("cxtMenu"),W=function(X){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Z=D(X);if(Q!==void 0){var fe=j(Q);Y.insertMenuItem(Z,{parent:fe})}else Y.insertMenuItem(Z)},J=function(X){for(var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Z=0;Z<X.length;Z++)W(X[Z],Q)},D=function(X){var Q=q.scratch("cycontextmenus");return new B(X,Y.onMenuItemClick,Q)},N=function(){$("active")&&(Y.removeAllMenuItems(),q.off("tapstart",$("eventCyTapStart")),q.off(ee.evtType,$("onCxttap")),q.off("viewport",$("onViewport")),document.removeEventListener("mouseup",$("hideOnNonCyClick")),Y.parentNode.removeChild(Y),Y=void 0,K("cxtMenu",void 0),K("active",!1),K("anyVisibleChild",!1),K("onCxttap",void 0),K("onViewport",void 0),K("hideOnNonCyClick",void 0))},j=function(X){var Q=document.getElementById(X);if(Q instanceof B)return Q;throw new Error("The item with id=".concat(X," is not a menu item"))},ne=function(){var X,Q=!1,Z=z(Y.children);try{for(Z.s();!(X=Z.n()).done;){var fe=X.value;if(fe instanceof B&&fe.show&&fe.style.display!="none"){Q=!0;break}}}catch(oe){Z.e(oe)}finally{Z.f()}Q?Y.display():Y.hide()};if(_!=="get"){B.define(),k.define(),O.define(),ee=u(h,_),K("options",ee),$("active")&&N(),K("active",!0),K("submenuIndicatorGen",(function(X){var Q=document.createElement("img");return Q.src=X.src,Q.width=X.width,Q.height=X.height,Q.classList.add("cy-context-menus-submenu-indicator"),Q}).bind(void 0,ee.submenuIndicator));var ce=c(ee.contextMenuClasses);K("cxtMenuClasses",ce);var ie=q.scratch("cycontextmenus");Y=new O(function(){return K("cxtMenuPosition",void 0)},ie),K("cxtMenu",Y),q.container().appendChild(Y),K("cxtMenuItemClasses",c(ee.menuItemClasses));var le=ee.menuItems;J(le),F=function(X){K("currentCyEvent",X),function(ge){var Ee,we=q.container(),ke=$("cxtMenuPosition"),De=ge.position||ge.cyPosition;if(ke!=De){Y.hideMenuItems(),K("anyVisibleChild",!1),K("cxtMenuPosition",De);var me={top:(Ee=we.getBoundingClientRect()).top,left:Ee.left},ue=ge.renderedPosition||ge.cyRenderedPosition,L=getComputedStyle(we)["border-width"],re=parseInt(L.replace("px",""))||0;re>0&&(me.top+=re,me.left+=re);var ae=we.clientHeight,se=we.clientWidth,de=ae/2,Ce=se/2;ue.y>de&&ue.x<=Ce?(Y.style.left=ue.x+"px",Y.style.bottom=ae-ue.y+"px",Y.style.right="auto",Y.style.top="auto"):ue.y>de&&ue.x>Ce?(Y.style.right=se-ue.x+"px",Y.style.bottom=ae-ue.y+"px",Y.style.left="auto",Y.style.top="auto"):ue.y<=de&&ue.x<=Ce?(Y.style.left=ue.x+"px",Y.style.top=ue.y+"px",Y.style.right="auto",Y.style.bottom="auto"):(Y.style.right=se-ue.x+"px",Y.style.top=ue.y+"px",Y.style.left="auto",Y.style.bottom="auto")}}(X);var Q,Z=X.target||X.cyTarget,fe=z(Y.children);try{for(fe.s();!(Q=fe.n()).done;){var oe=Q.value;oe instanceof B&&(Z===q?oe.coreAsWell:Z.is(oe.selector))&&oe.show&&(Y.display(),K("anyVisibleChild",!0),oe.display())}}catch(ge){fe.e(ge)}finally{fe.f()}var he=Array.from(Y.children).filter(function(ge){if(ge instanceof B)return ge.isVisible()}),pe=he.length;he.forEach(function(ge,Ee){ge instanceof B&&(Ee<pe-1&&ge.getHasTrailingDivider()?ge.classList.add(g):ge.getHasTrailingDivider()&&ge.classList.remove(g))}),!$("anyVisibleChild")&&!function(ge){return ge.offsetWidth<=0&&ge.offsetHeight<=0||ge.style&&ge.style.display||getComputedStyle(ge).display}(Y)&&Y.hide()},q.on(ee.evtType,F),K("onCxttap",F),function(){var X=function(Z){if(Y.contains(Z.originalEvent.target))return!1;Y.hide(),K("cxtMenuPosition",void 0),K("currentCyEvent",void 0)};q.on("tapstart",X),K("eventCyTapStart",X);var Q=function(){Y.hide()};q.on("viewport",Q),K("onViewport",Q)}(),I=function(X){q.container().contains(X.target)||Y.contains(X.target)||(Y.hide(),K("cxtMenuPosition",void 0))},document.addEventListener("mouseup",I),K("hideOnNonCyClick",I),function(){var X,Q=function(Z,fe){var oe;if(typeof Symbol>"u"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(oe=function(ke,De){if(ke){if(typeof ke=="string")return l(ke,De);var me=Object.prototype.toString.call(ke).slice(8,-1);return me==="Object"&&ke.constructor&&(me=ke.constructor.name),me==="Map"||me==="Set"?Array.from(ke):me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me)?l(ke,De):void 0}}(Z))||fe){oe&&(Z=oe);var he=0,pe=function(){};return{s:pe,n:function(){return he>=Z.length?{done:!0}:{done:!1,value:Z[he++]}},e:function(ke){throw ke},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ge,Ee=!0,we=!1;return{s:function(){oe=Z[Symbol.iterator]()},n:function(){var ke=oe.next();return Ee=ke.done,ke},e:function(ke){we=!0,ge=ke},f:function(){try{Ee||oe.return==null||oe.return()}finally{if(we)throw ge}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(Q.s();!(X=Q.n()).done;)X.value.addEventListener("contextmenu",function(Z){return Z.preventDefault()})}catch(Z){Q.e(Z)}finally{Q.f()}}()}return function(X){return{isActive:function(){return $("active")},appendMenuItem:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return W(Q,Z),X},appendMenuItems:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return J(Q,Z),X},removeMenuItem:function(Q){var Z=j(Q);return Y.removeMenuItem(Z),X},setTrailingDivider:function(Q,Z){var fe=j(Q);return fe.setHasTrailingDivider(Z),Z?fe.classList.add(g):fe.classList.remove(g),X},insertBeforeMenuItem:function(Q,Z){var fe=D(Q),oe=j(Z);return Y.insertMenuItem(fe,{before:oe}),X},moveToSubmenu:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,fe=j(Q);if(Z===null)Y.moveToSubmenu(fe);else if(typeof Z=="string"){var oe=j(Z.toString());Y.moveToSubmenu(fe,oe)}else Z.coreAsWell!==void 0||Z.selector!==void 0?Y.moveToSubmenu(fe,null,Z):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return X},moveBeforeOtherMenuItem:function(Q,Z){var fe=j(Q),oe=j(Z);return Y.moveBefore(fe,oe),X},disableMenuItem:function(Q){return j(Q).disable(),X},enableMenuItem:function(Q){return j(Q).enable(),X},hideMenuItem:function(Q){return j(Q).hide(),ne(),X},showMenuItem:function(Q){return j(Q).display(),ne(),X},destroy:function(){return N(),X},getOptions:function(){return u(h,ee)},swapItems:function(Q,Z){Y.ensureContains(Q),Y.ensureContains(Z);var fe=document.getElementById(Q),oe=document.getElementById(Z),he=fe.nextSibling,pe=oe.nextSibling,ge=fe.parentNode,Ee=oe.parentNode;if(!ge.isSameNode(Ee))throw new Error("To swap, the items should have the same parent!");he&&he.isSameNode(oe)?ge.insertBefore(oe,fe):pe&&pe.isSameNode(fe)?ge.insertBefore(fe,oe):(ge.insertBefore(oe,fe),ge.insertBefore(fe,pe))}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(c){c&&c("core","contextMenus",l)};typeof cytoscape<"u"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})}(Ro)),Ro.exports}var AT=kT();const BT=$m(AT);Jr.use(DT);Jr.use(BT);let qr=null;function Gm(){return{initCytoscape:(n,a)=>(qr&&(qr.destroy(),qr=null),qr=Jr({container:n,elements:a,style:[{selector:"node",style:{"background-color":"#e0e0e0","border-color":"#555","border-width":2,label:"data(name)","text-valign":"center","text-halign":"center",padding:"10px","font-size":"10px","text-wrap":"wrap","text-max-width":"80px",height:"60px",width:"60px","line-height":1.2,"border-style":"solid","z-index":10}},{selector:'node[nodeType="plate"]',style:{"background-color":"#f0f8ff","border-color":"#4682b4","border-style":"dashed",shape:"round-rectangle","corner-radius":"10px"}},{selector:":parent",style:{"text-valign":"top","text-halign":"center",padding:"15px","background-opacity":.2,"z-index":5}},{selector:'node[nodeType="stochastic"]',style:{"background-color":"#ffe0e0","border-color":"#dc3545",shape:"ellipse"}},{selector:'node[nodeType="deterministic"]',style:{"background-color":"#e0ffe0","border-color":"#28a745",shape:"round-rectangle"}},{selector:'node[nodeType="constant"]',style:{"background-color":"#e9ecef","border-color":"#6c757d",shape:"rectangle"}},{selector:'node[nodeType="observed"]',style:{"background-color":"#e0f0ff","border-color":"#007bff","border-style":"dashed",shape:"ellipse"}},{selector:"edge",style:{width:3,"line-color":"#a0a0a0","target-arrow-color":"#a0a0a0","target-arrow-shape":"triangle","curve-style":"bezier","z-index":1,label:"data(name)","font-size":"8px","text-rotation":"autorotate","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"3px","text-border-width":1,"text-border-color":"#ccc"}},{selector:'edge[relationshipType="stochastic"]',style:{"line-color":"#dc3545","target-arrow-color":"#dc3545","line-style":"dashed"}},{selector:'edge[relationshipType="deterministic"]',style:{"line-color":"#28a745","target-arrow-color":"#28a745","line-style":"solid"}},{selector:".cy-selected",style:{"border-width":3,"border-color":"#007acc","overlay-color":"#007acc","overlay-opacity":.2}},{selector:".cy-connecting",style:{"background-color":"#007acc","border-color":"#0060a0",color:"#ffffff","overlay-color":"#007acc","overlay-opacity":.2}}],layout:{name:"preset"},minZoom:.1,maxZoom:2,boxSelectionEnabled:!0,wheelSensitivity:.2,autounselectify:!1}),qr.gridGuide({drawGrid:!1,snapToGridOnRelease:!0,snapToGridDuringDrag:!0,gridSpacing:20}),qr.contextMenus({menuItems:[{id:"remove",content:"Remove",selector:"node, edge",onClickFunction:o=>o.target.remove()}]}),qr),destroyCytoscape:n=>{n&&(n.destroy(),qr=null)},getCyInstance:()=>qr}}function RT(t){const e=He(!1),r=He(20),n=pt(()=>`${r.value}px`),a=()=>{const l=t();if(l){const u=l.container();u&&(e.value&&r.value>0?(u.classList.add("grid-background"),u.style.setProperty("--grid-size",n.value)):(u.classList.remove("grid-background"),u.style.removeProperty("--grid-size")))}},i=()=>{e.value=!0,a(),console.log(`Visual grid enabled with ${r.value}px.`)},o=()=>{e.value=!1,a(),console.log("Visual grid disabled.")},s=l=>{r.value=l,e.value&&a()};return gr([e,r],a),{isGridEnabledRef:e,gridSizeRef:r,cssGridSize:n,enableGridSnapping:i,disableGridSnapping:o,setGridSize:s}}const MT=It({__name:"GraphCanvas",props:{elements:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{}},emits:["canvas-tap","node-dragged","node-dropped"],setup(t,{emit:e}){const r=t,n=e,a=He(null);let i=null;const{initCytoscape:o,destroyCytoscape:s,getCyInstance:l}=Gm(),{enableGridSnapping:u,disableGridSnapping:c,setGridSize:f}=RT(l),v=["stochastic","deterministic","constant","observed","plate"],g=h=>h.map(w=>w.type==="node"?{group:"nodes",data:{...w},position:w.position}:{group:"edges",data:{...w}});return Ia(()=>{a.value&&(i=o(a.value,g(r.elements)),f(r.gridSize),r.isGridEnabled?u():c(),i.on("tap",h=>{n("canvas-tap",h)}),i.on("dragfree","node",h=>{const w=h.target,b={x:Math.round(w.position("x")/r.gridSize)*r.gridSize,y:Math.round(w.position("y")/r.gridSize)*r.gridSize};w.position(b),n("node-dragged",{...w.data(),position:b})}),i.on("tap","node, edge",h=>{i==null||i.elements().removeClass("cy-selected"),h.target.addClass("cy-selected")}),i.on("tap",h=>{h.target===i&&(i==null||i.elements().removeClass("cy-selected"))}),a.value.addEventListener("dragover",h=>{h.preventDefault(),h.dataTransfer&&(h.dataTransfer.dropEffect="copy")}),a.value.addEventListener("drop",h=>{var w;if(h.preventDefault(),h.dataTransfer){const b=h.dataTransfer.getData("text/plain");if(v.includes(b)){const d=(w=a.value)==null?void 0:w.getBoundingClientRect();if(d&&i){const p=h.clientX,m=h.clientY,y={x:p-d.left,y:m-d.top},x=i.panzoom().renderedPositionToModelPosition(y);n("node-dropped",{nodeType:b,position:x})}}}}))}),Oa(()=>{i&&s(i)}),gr(()=>r.isGridEnabled,h=>{h?u():c()}),gr(()=>r.gridSize,h=>{f(h),r.isGridEnabled&&u()}),gr(()=>r.elements,h=>{if(!i)return;const w=new Set(h.map(b=>b.id));i.batch(()=>{i.elements().forEach(b=>{w.has(b.id())||b.remove()}),h.forEach(b=>{const d=i.getElementById(b.id);if(d.empty()){const p=g([b])[0];i.add(p)}else if(d.data(b),b.type==="node"){const p=b.position,m=d.position();(p.x!==m.x||p.y!==m.y)&&d.position(p)}})})},{deep:!0}),(h,w)=>(Ae(),_e("div",{ref_key:"cyContainer",ref:a,class:ot(["cytoscape-container",{"grid-background":h.isGridEnabled&&h.gridSize>0,"mode-add-node":h.currentMode==="add-node","mode-add-edge":h.currentMode==="add-edge","mode-select":h.currentMode==="select"}]),style:Xn({"--grid-size":`${h.gridSize}px`})},null,6))}}),Xt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},LT=Xt(MT,[["__scopeId","data-v-9d2b54db"]]),_T=["disabled"],IT=It({__name:"BaseButton",props:{type:{},size:{},disabled:{type:Boolean}},setup(t){const e=t,r=pt(()=>({"base-button":!0,[`button-${e.type||"default"}`]:!0,[`button-${e.size||"medium"}`]:!0,"button-disabled":e.disabled}));return(n,a)=>(Ae(),_e("button",{class:ot(r.value),disabled:n.disabled},[Ta(n.$slots,"default",{},void 0,!0)],10,_T))}}),ft=Xt(IT,[["__scopeId","data-v-d8435000"]]),OT={class:"canvas-toolbar"},NT={key:0,class:"node-type-selector"},zT=["value"],FT=["value"],VT={key:1,class:"connecting-message"},qT=It({__name:"CanvasToolbar",props:{currentMode:{},currentNodeType:{},isConnecting:{type:Boolean},sourceNodeName:{}},emits:["update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=e,n=[{label:"Stochastic Node",value:"stochastic"},{label:"Deterministic Node",value:"deterministic"},{label:"Constant Node",value:"constant"},{label:"Observed Node",value:"observed"},{label:"Plate (Loop)",value:"plate"}],a=o=>{r("update:currentMode",o)},i=o=>{const s=o.target;r("update:currentNodeType",s.value)};return(o,s)=>(Ae(),_e("div",OT,[be(ft,{class:ot({active:o.currentMode==="select"}),onClick:s[0]||(s[0]=l=>a("select"))},{default:Me(()=>s[3]||(s[3]=[Ve(" Select ")])),_:1,__:[3]},8,["class"]),be(ft,{class:ot({active:o.currentMode==="add-node"}),onClick:s[1]||(s[1]=l=>a("add-node"))},{default:Me(()=>s[4]||(s[4]=[Ve(" Add Node ")])),_:1,__:[4]},8,["class"]),be(ft,{class:ot({active:o.currentMode==="add-edge"}),onClick:s[2]||(s[2]=l=>a("add-edge"))},{default:Me(()=>s[5]||(s[5]=[Ve(" Add Edge ")])),_:1,__:[5]},8,["class"]),o.currentMode==="add-node"?(Ae(),_e("div",NT,[s[6]||(s[6]=te("label",{for:"node-type"},"Node Type:",-1)),te("select",{id:"node-type",value:o.currentNodeType,onChange:i},[(Ae(),_e(at,null,Zn(n,l=>te("option",{key:l.value,value:l.value},nr(l.label),9,FT)),64))],40,zT)])):Kt("",!0),o.isConnecting?(Ae(),_e("span",VT,[s[7]||(s[7]=Ve(" Connecting from: ")),te("strong",null,nr(o.sourceNodeName),1),s[8]||(s[8]=Ve(" (Click target node) "))])):Kt("",!0)]))}}),$T=Xt(qT,[["__scopeId","data-v-76d273f4"]]),Ls=Qg("graph",()=>{const t=He(new Map),e=He(null),r=pt(()=>e.value&&t.value.has(e.value)?t.value.get(e.value).elements:[]),n=u=>{e.value=u,u&&!t.value.has(u)&&l(u)},a=u=>{const c={graphId:u,elements:[]};t.value.set(u,c),s(u,c)},i=(u,c)=>{if(t.value.has(u)){const f=t.value.get(u);f.elements=c,s(u,f)}},o=u=>{t.value.delete(u),localStorage.removeItem(`doodlebugs-graph-${u}`),e.value===u&&(e.value=null)},s=(u,c)=>{localStorage.setItem(`doodlebugs-graph-${u}`,JSON.stringify(c))},l=u=>{const c=localStorage.getItem(`doodlebugs-graph-${u}`);if(c){const f=JSON.parse(c);return t.value.set(u,f),f}return null};return{graphContents:t,currentGraphId:e,currentGraphElements:r,selectGraph:n,createNewGraphContent:a,updateGraphElements:i,deleteGraphContent:o,saveGraph:s,loadGraph:l}});function Hm(){const t=Ls(),e=He(null),r=pt({get:()=>t.currentGraphElements,set:o=>{t.currentGraphId&&t.updateGraphElements(t.currentGraphId,o)}});return{elements:r,selectedElement:e,addElement:o=>{r.value=[...r.value,o],e.value=o},updateElement:o=>{var s;r.value=r.value.map(l=>l.id===o.id?o:l),((s=e.value)==null?void 0:s.id)===o.id&&(e.value=o)},deleteElement:o=>{var s;r.value=r.value.filter(l=>l.id!==o),((s=e.value)==null?void 0:s.id)===o&&(e.value=null)}}}const GT={class:"graph-editor-container"},HT=It({__name:"GraphEditor",props:{isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{}},emits:["element-selected","update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=t,n=e,{elements:a,addElement:i,updateElement:o}=Hm(),{getCyInstance:s}=Gm(),l=He(null),u=He(!1),c=g=>{var x,E;const{position:h,target:w}=g,b=s();if(!b)return;const d=w===b,p=!d&&w.isNode()&&w.data("nodeType")==="plate",m=!d&&w.isNode(),y=!d&&w.isEdge();switch(r.currentMode){case"add-node":if(d||p){if(r.currentNodeType==="plate"&&p){alert("Nesting plates is not currently supported.");return}const T={id:`node_${crypto.randomUUID().substring(0,8)}`,name:`${r.currentNodeType} ${a.value.filter(S=>S.type==="node").length+1}`,type:"node",nodeType:r.currentNodeType,position:{x:h.x,y:h.y},parent:p?w.id():void 0,distribution:r.currentNodeType==="stochastic"?"dnorm":void 0,equation:r.currentNodeType==="deterministic"?"":void 0,observed:r.currentNodeType==="observed"?!0:void 0,loopVariable:r.currentNodeType==="plate"?"i":void 0,loopRange:r.currentNodeType==="plate"?"1:N":void 0};i(T),n("element-selected",T),n("update:currentMode","select")}break;case"add-edge":if(m){const C=w;if(l.value&&l.value.id()!==C.id()){const T={id:`edge_${crypto.randomUUID().substring(0,8)}`,type:"edge",source:l.value.id(),target:C.id(),name:`Edge ${l.value.data("name")} -> ${C.data("name")}`,relationshipType:"deterministic"};i(T),(x=l.value)==null||x.removeClass("cy-connecting"),l.value=null,u.value=!1,n("update:currentMode","select"),n("element-selected",T)}else l.value||(l.value=C,l.value.addClass("cy-connecting"),u.value=!0,n("element-selected",l.value.data()))}else d&&((E=l.value)==null||E.removeClass("cy-connecting"),l.value=null,u.value=!1,n("element-selected",null));break;default:m||y?n("element-selected",w.data()):d&&n("element-selected",null);break}},f=g=>{o(g)},v=g=>{const{nodeType:h,position:w}=g,b=s();let d;if(b){const y=b.nodes('[nodeType="plate"]');for(const x of y){const E=x.boundingBox();if(w.x>E.x1&&w.x<E.x2&&w.y>E.y1&&w.y<E.y2){if(h==="plate"){alert("Nesting plates is not currently supported.");return}d=x.id();break}}}const m={id:`node_${crypto.randomUUID().substring(0,8)}`,name:`${h} ${a.value.filter(y=>y.type==="node").length+1}`,type:"node",nodeType:h,position:w,parent:d,distribution:h==="stochastic"?"dnorm":void 0,equation:h==="deterministic"?"":void 0,observed:h==="observed"?!0:void 0,loopVariable:h==="plate"?"i":void 0,loopRange:h==="plate"?"1:N":void 0};i(m),n("element-selected",m),n("update:currentMode","select")};return gr(()=>r.currentMode,g=>{var h;g!=="add-edge"&&((h=l.value)==null||h.removeClass("cy-connecting"),l.value=null,u.value=!1)}),(g,h)=>{var w;return Ae(),_e("div",GT,[be($T,{"current-mode":r.currentMode,"current-node-type":r.currentNodeType,"onUpdate:currentMode":h[0]||(h[0]=b=>n("update:currentMode",b)),"onUpdate:currentNodeType":h[1]||(h[1]=b=>n("update:currentNodeType",b)),"is-connecting":u.value,"source-node-name":(w=l.value)==null?void 0:w.data("name")},null,8,["current-mode","current-node-type","is-connecting","source-node-name"]),be(LT,{elements:fr(a),"is-grid-enabled":g.isGridEnabled,"grid-size":g.gridSize,"current-mode":r.currentMode,onCanvasTap:c,onNodeDragged:f,onNodeDropped:v},null,8,["elements","is-grid-enabled","grid-size","current-mode"])])}}}),UT=Xt(HT,[["__scopeId","data-v-364a311e"]]),Um=Qg("project",()=>{const t=He([]),e=He(null),r=Ls(),n=v=>{const g={id:`project_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:v,createdAt:Date.now(),lastModified:Date.now(),graphs:[]};t.value.push(g),c(),a(g.id)},a=v=>{if(e.value=v,v){const g=t.value.find(h=>h.id===v);g&&g.graphs.length>0?r.selectGraph(g.graphs[0].id):r.selectGraph(null)}else r.selectGraph(null)},i=v=>{const g=t.value.find(h=>h.id===v);g&&(g.graphs.forEach(h=>{r.deleteGraphContent(h.id)}),t.value=t.value.filter(h=>h.id!==v),e.value===v&&(e.value=null,r.selectGraph(null)),c())},o=pt(()=>t.value.find(v=>v.id===e.value)||null),s=(v,g)=>{const h=t.value.find(w=>w.id===v);if(h){const w={id:`graph_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:g,createdAt:Date.now(),lastModified:Date.now()};h.graphs.push(w),h.lastModified=Date.now(),c(),r.createNewGraphContent(w.id),r.selectGraph(w.id)}},l=(v,g)=>{const h=t.value.find(w=>w.id===v);h&&(h.graphs=h.graphs.filter(w=>w.id!==g),h.lastModified=Date.now(),c(),r.deleteGraphContent(g))},u=v=>{var g;return((g=t.value.find(h=>h.id===v))==null?void 0:g.graphs)||[]},c=()=>{localStorage.setItem("doodlebugs-projects",JSON.stringify(t.value))},f=()=>{const v=localStorage.getItem("doodlebugs-projects");v&&(t.value=JSON.parse(v))};return gr(e,v=>{if(v){const g=t.value.find(h=>h.id===v);g&&g.graphs.length>0?(!r.currentGraphId||!g.graphs.some(h=>h.id===r.currentGraphId))&&r.selectGraph(g.graphs[0].id):r.selectGraph(null)}else r.selectGraph(null)},{immediate:!0}),{projects:t,currentProjectId:e,currentProject:o,createProject:n,selectProject:a,deleteProject:i,addGraphToProject:s,deleteGraphFromProject:l,getGraphsForProject:u,loadProjects:f}}),WT={class:"modal-content",role:"dialog","aria-modal":"true"},KT={key:0,class:"modal-header"},jT={key:1,class:"modal-body"},YT={key:2,class:"modal-footer"},Li=It({__name:"BaseModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e,n=a=>{a.key==="Escape"&&r("close")};return Ia(()=>{document.addEventListener("keydown",n)}),Oa(()=>{document.removeEventListener("keydown",n)}),(a,i)=>(Ae(),Ba(Mc,{name:"modal-fade"},{default:Me(()=>[a.isOpen?(Ae(),_e("div",{key:0,class:"modal-overlay",onClick:i[0]||(i[0]=Gr(o=>r("close"),["self"]))},[te("div",WT,[a.$slots.header?(Ae(),_e("header",KT,[Ta(a.$slots,"header")])):Kt("",!0),a.$slots.body?(Ae(),_e("section",jT,[Ta(a.$slots,"body")])):Kt("",!0),a.$slots.footer?(Ae(),_e("footer",YT,[Ta(a.$slots,"footer")])):Kt("",!0)])])):Kt("",!0)]),_:3}))}}),XT={class:"project-manager"},ZT={class:"header"},QT={key:0,class:"empty-state"},JT={key:1,class:"project-list"},e2=["onClick"],t2={class:"project-name"},r2=["onClick"],n2={key:0,class:"graph-list"},a2=["onClick"],i2=["onClick"],o2={key:0,class:"empty-state-inner"},s2={key:0},l2={key:0},u2=It({__name:"ProjectManager",emits:["newProject","newGraph"],setup(t,{emit:e}){const r=Um(),n=Ls(),a=He(!1),i=He(null),o=He(null),s=He(null),l=pt(()=>r.currentProject),u=pt(()=>l.value?r.getGraphsForProject(l.value.id):[]),c=m=>{s.value&&!s.value.contains(m.target)&&(o.value=null)};Ia(()=>{r.loadProjects(),r.projects.length>0&&!r.currentProjectId&&r.selectProject(r.projects[0].id),document.addEventListener("click",c)}),Oa(()=>{document.removeEventListener("click",c)});const f=m=>{n.selectGraph(m)},v=async(m,y,x)=>{m.stopPropagation(),m.preventDefault(),o.value=null,await Pc(),o.value={type:y,id:x,x:m.clientX,y:m.clientY}},g=(m,y,x,E)=>{i.value={type:m,id:y,name:x,projectId:E},a.value=!0,o.value=null},h=()=>{i.value&&(i.value.type==="project"?r.deleteProject(i.value.id):i.value.type==="graph"&&i.value.projectId&&(r.deleteGraphFromProject(i.value.projectId,i.value.id),n.currentGraphId===i.value.id&&n.selectGraph(null)),a.value=!1,i.value=null)},w=()=>{a.value=!1,i.value=null},b=e,d=()=>{b("newProject"),o.value=null},p=()=>{b("newGraph"),o.value=null};return(m,y)=>(Ae(),_e("div",XT,[te("div",ZT,[y[3]||(y[3]=te("h4",null,"Projects",-1)),be(ft,{onClick:d,type:"primary",size:"small",class:"add-project-btn",title:"New Project"},{default:Me(()=>y[2]||(y[2]=[te("i",{class:"fas fa-plus"},null,-1)])),_:1,__:[2]})]),fr(r).projects.length===0?(Ae(),_e("div",QT,[y[5]||(y[5]=te("p",null,"No projects yet.",-1)),be(ft,{onClick:d,type:"primary"},{default:Me(()=>y[4]||(y[4]=[Ve("Create New Project")])),_:1,__:[4]})])):(Ae(),_e("div",JT,[(Ae(!0),_e(at,null,Zn(fr(r).projects,x=>(Ae(),_e("div",{key:x.id,class:"project-item"},[te("div",{class:ot(["project-header",{active:fr(r).currentProjectId===x.id}]),onClick:E=>fr(r).selectProject(x.id)},[te("i",{class:ot(["icon-chevron fas fa-chevron-right",{open:fr(r).currentProjectId===x.id}])},null,2),y[7]||(y[7]=te("i",{class:"icon-folder fas fa-folder"},null,-1)),te("span",t2,nr(x.name),1),te("button",{onClick:E=>v(E,"project",x.id),class:"context-menu-btn"},y[6]||(y[6]=[te("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,r2)],10,e2),be(Mc,{name:"slide-fade"},{default:Me(()=>{var E;return[((E=fr(r).currentProject)==null?void 0:E.id)===x.id?(Ae(),_e("div",n2,[(Ae(!0),_e(at,null,Zn(u.value,C=>(Ae(),_e("div",{key:C.id,class:ot(["graph-item",{active:fr(n).currentGraphId===C.id}]),onClick:T=>f(C.id)},[y[9]||(y[9]=te("i",{class:"icon-file fas fa-file-alt"},null,-1)),te("span",null,nr(C.name),1),te("button",{onClick:T=>v(T,"graph",C.id),class:"context-menu-btn"},y[8]||(y[8]=[te("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,i2)],10,a2))),128)),u.value.length===0?(Ae(),_e("div",o2,[y[11]||(y[11]=te("p",null,"No graphs in this project.",-1)),be(ft,{onClick:p,type:"secondary",size:"small"},{default:Me(()=>y[10]||(y[10]=[Ve("Create New Graph")])),_:1,__:[10]})])):Kt("",!0)])):Kt("",!0)]}),_:2},1024)]))),128))])),o.value?(Ae(),_e("div",{key:2,ref_key:"contextMenuRef",ref:s,class:"context-menu",style:Xn({top:`${o.value.y}px`,left:`${o.value.x}px`})},[o.value.type==="project"?(Ae(),_e(at,{key:0},[te("div",{class:"context-menu-item",onClick:p},y[12]||(y[12]=[te("i",{class:"fas fa-plus"},null,-1),Ve(" New Graph")])),te("div",{class:"context-menu-item danger",onClick:y[0]||(y[0]=x=>g("project",o.value.id,fr(r).projects.find(E=>E.id===o.value.id).name))},y[13]||(y[13]=[te("i",{class:"fas fa-trash-alt"},null,-1),Ve(" Delete Project")]))],64)):Kt("",!0),o.value.type==="graph"?(Ae(),_e("div",{key:1,class:"context-menu-item danger",onClick:y[1]||(y[1]=x=>g("graph",o.value.id,u.value.find(E=>E.id===o.value.id).name,l.value.id))},y[14]||(y[14]=[te("i",{class:"fas fa-trash-alt"},null,-1),Ve(" Delete Graph")]))):Kt("",!0)],4)):Kt("",!0),be(Li,{"is-open":a.value,onClose:w},{header:Me(()=>y[15]||(y[15]=[te("h3",null,"Confirm Deletion",-1)])),body:Me(()=>[i.value?(Ae(),_e("p",s2,[Ve(" Are you sure you want to delete the "+nr(i.value.type)+" ",1),te("strong",null,'"'+nr(i.value.name)+'"',1),y[16]||(y[16]=Ve("? ")),i.value.type==="project"?(Ae(),_e("span",l2,"This will also delete all of its graphs.")):Kt("",!0),y[17]||(y[17]=Ve(" This action cannot be undone. "))])):Kt("",!0)]),footer:Me(()=>[be(ft,{onClick:w,type:"secondary"},{default:Me(()=>y[18]||(y[18]=[Ve("Cancel")])),_:1,__:[18]}),be(ft,{onClick:h,type:"danger"},{default:Me(()=>y[19]||(y[19]=[Ve("Delete")])),_:1,__:[19]})]),_:1},8,["is-open"])]))}}),c2=Xt(u2,[["__scopeId","data-v-4d50aaa4"]]),f2={class:"node-palette"},d2={class:"palette-section"},v2={class:"palette-grid"},h2=["onDragstart","onClick","title"],g2={class:"card-label"},p2={class:"palette-section"},m2={class:"palette-grid"},y2=["onDragstart","onClick","title"],b2={class:"card-label"},w2=It({__name:"NodePalette",emits:["select-palette-item"],setup(t,{emit:e}){const r=e,n=[{label:"Stochastic",type:"stochastic",icon:"~",styleClass:"stochastic",description:"Random variable with a distribution"},{label:"Deterministic",type:"deterministic",icon:"<-",styleClass:"deterministic",description:"Logical function of parents"},{label:"Constant",type:"constant",icon:"C",styleClass:"constant",description:"A fixed value or parameter"},{label:"Observed",type:"observed",icon:"O",styleClass:"observed",description:"A data node with a fixed value"},{label:"Plate",type:"plate",icon:"[]",styleClass:"plate",description:"Represents a loop structure"}],a=[{label:"Stochastic (~)",type:"add-stochastic-edge",styleClass:"stochastic",description:"Stochastic dependency"},{label:"Deterministic (<--)",type:"add-deterministic-edge",styleClass:"deterministic",description:"Logical dependency"}],i=(s,l)=>{s.dataTransfer&&(s.dataTransfer.setData("text/plain",l),s.dataTransfer.effectAllowed="copy")},o=s=>{r("select-palette-item",s)};return(s,l)=>(Ae(),_e("div",f2,[te("div",d2,[l[0]||(l[0]=te("h5",{class:"section-title"},"Nodes",-1)),te("div",v2,[(Ae(),_e(at,null,Zn(n,u=>te("div",{key:u.type,class:ot(["palette-card",u.styleClass]),draggable:"true",onDragstart:c=>i(c,u.type),onClick:c=>o(u.type),title:u.description},[te("div",{class:ot(["card-icon",`icon-${u.type}`])},nr(u.icon),3),te("span",g2,nr(u.label),1)],42,h2)),64))])]),te("div",p2,[l[1]||(l[1]=te("h5",{class:"section-title"},"Connections",-1)),te("div",m2,[(Ae(),_e(at,null,Zn(a,u=>te("div",{key:u.type,class:ot(["palette-card",u.styleClass]),draggable:"true",onDragstart:c=>i(c,u.type),onClick:c=>o(u.type),title:u.description},[te("div",{class:ot(["card-icon connection-icon",`icon-${u.type}`])},null,2),te("span",b2,nr(u.label),1)],42,y2)),64))])])]))}}),x2=Xt(w2,[["__scopeId","data-v-7e763033"]]),C2={class:"data-input-panel"},E2=It({__name:"DataInputPanel",setup(t){return(e,r)=>(Ae(),_e("div",C2,r[0]||(r[0]=[te("h4",null,"BUGS Model Data",-1),te("div",{class:"data-section"},[te("p",null,"Manage input data for your BUGS model here."),te("p",null," Currently, this section is a placeholder for defining observed variables and uploading/entering their values. "),te("div",{class:"data-placeholder"},[te("i",{class:"icon-data"},"📊"),te("span",null,"Data definitions and values will appear here.")])],-1)])))}}),S2=Xt(E2,[["__scopeId","data-v-08146f1d"]]),T2=["type","value","placeholder","disabled","readonly"],D2=It({__name:"BaseInput",props:{modelValue:{},type:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","change","input","keyup.enter"],setup(t,{emit:e}){const r=t,n=e,a=pt(()=>r.type||"text"),i=l=>{const u=l.target;n("update:modelValue",u.value),n("input",l)},o=l=>{n("change",l)},s=l=>{l.key==="Enter"&&n("keyup.enter",l)};return(l,u)=>(Ae(),_e("input",{type:a.value,value:l.modelValue,placeholder:l.placeholder,disabled:l.disabled,readonly:l.readonly,onInput:i,onChange:o,onKeyup:s,class:"base-input"},null,40,T2))}}),er=Xt(D2,[["__scopeId","data-v-2a347463"]]),P2=["value","disabled"],k2=["value"],A2=It({__name:"BaseSelect",props:{modelValue:{},options:{},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:e}){const r=t,n=e,a=o=>{const s=o.target;n("update:modelValue",s.value),n("change",o)},i=pt(()=>({"base-select":!0,"select-disabled":r.disabled}));return(o,s)=>(Ae(),_e("select",{value:o.modelValue,onChange:a,disabled:o.disabled,class:ot(i.value)},[(Ae(!0),_e(at,null,Zn(o.options,l=>(Ae(),_e("option",{key:l.value,value:l.value},nr(l.label),9,k2))),128))],42,P2))}}),Ou=Xt(A2,[["__scopeId","data-v-0a02e59a"]]),B2={class:"node-properties-panel"},R2={key:0,class:"no-selection-message"},M2={key:1,class:"properties-form"},L2={class:"form-group"},_2={class:"form-group"},I2={class:"form-group"},O2={class:"form-group"},N2={class:"form-group"},z2={class:"form-group"},F2={class:"form-group"},V2={class:"form-group checkbox-group"},q2={class:"form-group"},$2={class:"form-group"},G2={class:"form-group"},H2={class:"form-group"},U2={class:"form-group"},W2={class:"form-group"},K2={class:"form-group"},j2={class:"action-buttons"},Y2=It({__name:"NodePropertiesPanel",props:{selectedElement:{}},emits:["update-element","delete-element"],setup(t,{emit:e}){const r=t,n=e,a=He(null),i=He(!1);gr(()=>r.selectedElement,b=>{if(b){const d=JSON.parse(JSON.stringify(b));d.type==="node"?(d.distribution=d.distribution??"",d.equation=d.equation??"",typeof d.initialValue=="object"&&d.initialValue!==null?d.initialValue=JSON.stringify(d.initialValue):d.initialValue=d.initialValue??"",d.indices=d.indices??"",d.loopVariable=d.loopVariable??"",d.loopRange=d.loopRange??""):d.type==="edge"&&(d.relationshipType=d.relationshipType??"",d.name=d.name??""),a.value=d}else a.value=null},{deep:!0,immediate:!0});const o=pt(()=>{var b;return((b=a.value)==null?void 0:b.type)==="node"}),s=pt(()=>{var b;return((b=a.value)==null?void 0:b.type)==="edge"}),l=pt(()=>o.value&&a.value.nodeType==="plate"),u=[{value:"stochastic",label:"Stochastic"},{value:"deterministic",label:"Deterministic"},{value:"constant",label:"Constant"},{value:"observed",label:"Observed"},{value:"plate",label:"Plate"}],c=[{value:"dnorm",label:"Normal (dnorm)"},{value:"dbeta",label:"Beta (dbeta)"},{value:"dgamma",label:"Gamma (dgamma)"},{value:"dbin",label:"Binomial (dbin)"},{value:"dpois",label:"Poisson (dpois)"},{value:"dt",label:"Student-t (dt)"},{value:"dchisqr",label:"Chi-squared (dchisqr)"},{value:"dweib",label:"Weibull (dweib)"},{value:"dexp",label:"Exponential (dexp)"},{value:"dloglik",label:"Log-Likelihood (dloglik)"}],f=[{value:"stochastic",label:"Stochastic (~)"},{value:"deterministic",label:"Deterministic (<--)"}],v=()=>{a.value&&n("update-element",a.value)},g=()=>{a.value&&(i.value=!0)},h=()=>{a.value&&(n("delete-element",a.value.id),a.value=null),i.value=!1},w=()=>{i.value=!1};return(b,d)=>(Ae(),_e("div",B2,[d[37]||(d[37]=te("h4",null,"Properties",-1)),a.value?(Ae(),_e("div",M2,[te("div",L2,[d[13]||(d[13]=te("label",{for:"element-id"},"ID:",-1)),be(er,{id:"element-id","model-value":a.value.id,disabled:""},null,8,["model-value"])]),te("div",_2,[d[14]||(d[14]=te("label",{for:"element-name"},"Name:",-1)),be(er,{id:"element-name",modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=p=>a.value.name=p),onInput:v},null,8,["modelValue"])]),o.value?(Ae(),_e(at,{key:0},[te("div",I2,[d[15]||(d[15]=te("label",{for:"node-type"},"Node Type:",-1)),be(Ou,{id:"node-type",modelValue:a.value.nodeType,"onUpdate:modelValue":d[1]||(d[1]=p=>a.value.nodeType=p),options:u,onChange:v},null,8,["modelValue"])]),l.value?(Ae(),_e(at,{key:1},[d[27]||(d[27]=te("div",{class:"form-section-header"},"Plate Properties",-1)),te("div",G2,[d[25]||(d[25]=te("label",{for:"plate-loop-variable"},"Loop Variable:",-1)),be(er,{id:"plate-loop-variable",modelValue:a.value.loopVariable,"onUpdate:modelValue":d[9]||(d[9]=p=>a.value.loopVariable=p),placeholder:"e.g., i",onInput:v},null,8,["modelValue"])]),te("div",H2,[d[26]||(d[26]=te("label",{for:"plate-loop-range"},"Loop Range:",-1)),be(er,{id:"plate-loop-range",modelValue:a.value.loopRange,"onUpdate:modelValue":d[10]||(d[10]=p=>a.value.loopRange=p),placeholder:"e.g., 1:N",onInput:v},null,8,["modelValue"])]),d[28]||(d[28]=te("small",{class:"help-text"},"Define the iteration for this plate, e.g., 'i' in '1:N'",-1))],64)):(Ae(),_e(at,{key:0},[te("div",O2,[d[16]||(d[16]=te("label",{for:"node-position-x"},"Position X:",-1)),be(er,{id:"node-position-x",type:"number",modelValue:a.value.position.x,"onUpdate:modelValue":d[2]||(d[2]=p=>a.value.position.x=p),modelModifiers:{number:!0},onInput:v},null,8,["modelValue"])]),te("div",N2,[d[17]||(d[17]=te("label",{for:"node-position-y"},"Position Y:",-1)),be(er,{id:"node-position-y",type:"number",modelValue:a.value.position.y,"onUpdate:modelValue":d[3]||(d[3]=p=>a.value.position.y=p),modelModifiers:{number:!0},onInput:v},null,8,["modelValue"])]),d[24]||(d[24]=te("div",{class:"form-section-header"},"BUGS Specific Properties",-1)),te("div",z2,[d[18]||(d[18]=te("label",{for:"distribution"},"Distribution (~):",-1)),be(Ou,{id:"distribution",modelValue:a.value.distribution,"onUpdate:modelValue":d[4]||(d[4]=p=>a.value.distribution=p),options:c,onChange:v},null,8,["modelValue"])]),te("div",F2,[d[19]||(d[19]=te("label",{for:"equation"},"Equation (<--):",-1)),be(er,{id:"equation",modelValue:a.value.equation,"onUpdate:modelValue":d[5]||(d[5]=p=>a.value.equation=p),placeholder:"e.g., a + b * x",onInput:v},null,8,["modelValue"])]),te("div",V2,[d[20]||(d[20]=te("label",{for:"observed"},"Observed:",-1)),$r(te("input",{type:"checkbox",id:"observed","onUpdate:modelValue":d[6]||(d[6]=p=>a.value.observed=p),onChange:v},null,544),[[Tb,a.value.observed]])]),te("div",q2,[d[21]||(d[21]=te("label",{for:"initial-value"},"Initial Value:",-1)),be(er,{id:"initial-value",modelValue:a.value.initialValue,"onUpdate:modelValue":d[7]||(d[7]=p=>a.value.initialValue=p),placeholder:"e.g., 0.5 or list(value=0.5)",onInput:v},null,8,["modelValue"])]),te("div",$2,[d[22]||(d[22]=te("label",{for:"variable-indices"},"Indices (e.g., i,j):",-1)),be(er,{id:"variable-indices",modelValue:a.value.indices,"onUpdate:modelValue":d[8]||(d[8]=p=>a.value.indices=p),placeholder:"e.g., i,j or 1:N",onInput:v},null,8,["modelValue"]),d[23]||(d[23]=te("small",{class:"help-text"},"Use comma-separated for multiple indices, e.g., 'i,j' or '1:N, 1:M'",-1))])],64))],64)):s.value?(Ae(),_e(at,{key:1},[te("div",U2,[d[29]||(d[29]=te("label",{for:"edge-source"},"Source Node ID:",-1)),be(er,{id:"edge-source","model-value":a.value.source,disabled:""},null,8,["model-value"])]),te("div",W2,[d[30]||(d[30]=te("label",{for:"edge-target"},"Target Node ID:",-1)),be(er,{id:"edge-target","model-value":a.value.target,disabled:""},null,8,["model-value"])]),te("div",K2,[d[31]||(d[31]=te("label",{for:"edge-type"},"Relationship Type:",-1)),be(Ou,{id:"edge-type",modelValue:a.value.relationshipType,"onUpdate:modelValue":d[11]||(d[11]=p=>a.value.relationshipType=p),options:f,onChange:v},null,8,["modelValue"])])],64)):Kt("",!0),te("div",j2,[be(ft,{onClick:v,type:"primary"},{default:Me(()=>d[32]||(d[32]=[Ve("Apply Changes")])),_:1,__:[32]}),be(ft,{onClick:g,type:"danger"},{default:Me(()=>d[33]||(d[33]=[Ve("Delete Element")])),_:1,__:[33]})])])):(Ae(),_e("div",R2,d[12]||(d[12]=[te("p",null,"Select a node or edge on the canvas to view/edit its properties.",-1)]))),be(Li,{"is-open":i.value,onClose:w},{header:Me(()=>d[34]||(d[34]=[te("h3",null,"Confirm Deletion",-1)])),body:Me(()=>{var p,m;return[te("p",null,'Are you sure you want to delete "'+nr(((p=a.value)==null?void 0:p.name)||((m=a.value)==null?void 0:m.id))+'"? This action cannot be undone. ',1)]}),footer:Me(()=>[be(ft,{onClick:w,type:"secondary"},{default:Me(()=>d[35]||(d[35]=[Ve("Cancel")])),_:1,__:[35]}),be(ft,{onClick:h,type:"danger"},{default:Me(()=>d[36]||(d[36]=[Ve("Delete")])),_:1,__:[36]})]),_:1},8,["is-open"])]))}}),X2=Xt(Y2,[["__scopeId","data-v-883d21b3"]]),Z2={class:"code-preview-panel"},Q2={class:"code-output"},J2=It({__name:"CodePreviewPanel",setup(t){return(e,r)=>(Ae(),_e("div",Z2,[r[3]||(r[3]=te("h4",null,"Generated BUGS Code",-1)),te("div",Q2,[r[1]||(r[1]=te("p",null,"BUGS model code will be generated and displayed here.",-1)),r[2]||(r[2]=te("pre",{class:"code-block"},[Ve("        "),te("code",null,`
model {
  # Example: Define a normal distribution
  # mu ~ dnorm(0, 1.0E-6)
  # tau ~ dgamma(0.01, 0.01)

  # Example: A simple deterministic relationship
  # theta <- exp(mu) / (1 + exp(mu))

  # Example: A loop for indexed variables (Plate)
  # for (i in 1:N) {
  #   y[i] ~ dbin(theta[i], n[i])
  # }

  # Add your nodes and connections visually to generate code!
}
        `),Ve(`
      `)],-1)),be(ft,{class:"copy-button",type:"secondary"},{default:Me(()=>r[0]||(r[0]=[Ve("Copy Code")])),_:1,__:[0]})])]))}}),eD=Xt(J2,[["__scopeId","data-v-f06a8382"]]),tD=It({__name:"DropdownMenu",setup(t){const e=He(!1),r=He(null),n=()=>{e.value=!e.value},a=()=>{e.value=!1},i=o=>{r.value&&!r.value.contains(o.target)&&a()};return Ia(()=>{document.addEventListener("click",i,!0)}),Oa(()=>{document.removeEventListener("click",i,!0)}),(o,s)=>(Ae(),_e("div",{class:"menu-item-wrapper",ref_key:"dropdownRef",ref:r},[te("div",{onClick:n,class:"menu-toggle"},[Ta(o.$slots,"trigger",{},void 0,!0)]),be(Mc,{name:"dropdown-animation"},{default:Me(()=>[e.value?(Ae(),_e("div",{key:0,class:"dropdown-content",onClick:a},[Ta(o.$slots,"content",{},void 0,!0)])):Kt("",!0)]),_:3})],512))}}),po=Xt(tD,[["__scopeId","data-v-9c130f59"]]),rD={class:"navbar"},nD={class:"navbar-left"},aD={class:"navbar-menu"},iD=["onClick"],oD=["checked"],sD={class:"navbar-right"},lD={class:"pane-toggles"},uD={class:"project-name"},cD=It({__name:"TheNavbar",props:{projectName:{},activeGraphName:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},isLeftSidebarOpen:{type:Boolean},isRightSidebarOpen:{type:Boolean}},emits:["update:isGridEnabled","update:gridSize","update:currentMode","update:currentNodeType","new-project","new-graph","save-current-graph","toggle-left-sidebar","toggle-right-sidebar","open-about-modal"],setup(t,{emit:e}){const r=t,n=e,a=pt(()=>r.projectName&&r.activeGraphName?`${r.projectName} — ${r.activeGraphName}`:r.projectName?r.projectName:"No Project Selected"),i=[{label:"Stochastic Node",value:"stochastic"},{label:"Deterministic Node",value:"deterministic"},{label:"Constant Node",value:"constant"},{label:"Observed Node",value:"observed"},{label:"Plate (Loop)",value:"plate"}],o=l=>{n("update:currentNodeType",l),n("update:currentMode","add-node")},s=l=>{const u=l.target;n("update:gridSize",Number(u.value))};return(l,u)=>(Ae(),_e("nav",rD,[te("div",nD,[u[21]||(u[21]=te("div",{class:"navbar-brand"},"DoodleBUGS",-1)),te("div",aD,[be(po,null,{trigger:Me(()=>[be(ft,{type:"ghost",size:"small"},{default:Me(()=>u[10]||(u[10]=[Ve("Project")])),_:1,__:[10]})]),content:Me(()=>[te("a",{href:"#",onClick:u[0]||(u[0]=Gr(c=>n("new-project"),["prevent"]))},"New Project..."),te("a",{href:"#",onClick:u[1]||(u[1]=Gr(c=>n("new-graph"),["prevent"]))},"New Graph..."),te("a",{href:"#",onClick:u[2]||(u[2]=Gr(c=>n("save-current-graph"),["prevent"]))},"Save Current Graph")]),_:1}),be(po,null,{trigger:Me(()=>[be(ft,{type:"ghost",size:"small"},{default:Me(()=>u[11]||(u[11]=[Ve("Add")])),_:1,__:[11]})]),content:Me(()=>[u[12]||(u[12]=te("div",{class:"dropdown-section-title"},"Nodes",-1)),(Ae(),_e(at,null,Zn(i,c=>te("a",{key:c.value,href:"#",onClick:Gr(f=>o(c.value),["prevent"])},nr(c.label),9,iD)),64)),u[13]||(u[13]=te("div",{class:"dropdown-divider"},null,-1)),te("a",{href:"#",onClick:u[3]||(u[3]=Gr(c=>n("update:currentMode","add-edge"),["prevent"]))},"Add Edge")]),_:1}),be(po,null,{trigger:Me(()=>[be(ft,{type:"ghost",size:"small"},{default:Me(()=>u[14]||(u[14]=[Ve("View")])),_:1,__:[14]})]),content:Me(()=>[te("label",{class:"dropdown-checkbox",onClick:u[5]||(u[5]=Gr(()=>{},["stop"]))},[te("input",{type:"checkbox",checked:l.isGridEnabled,onChange:u[4]||(u[4]=c=>n("update:isGridEnabled",c.target.checked))},null,40,oD),u[15]||(u[15]=Ve(" Show Grid "))]),te("div",{class:"dropdown-input-group",onClick:u[6]||(u[6]=Gr(()=>{},["stop"]))},[u[16]||(u[16]=te("label",{for:"grid-size-nav"},"Grid Size:",-1)),be(er,{id:"grid-size-nav",type:"number","model-value":l.gridSize,onInput:s,min:"10",max:"100",step:"5",class:"w-20"},null,8,["model-value"]),u[17]||(u[17]=te("span",null,"px",-1))])]),_:1}),be(po,null,{trigger:Me(()=>[be(ft,{type:"ghost",size:"small"},{default:Me(()=>u[18]||(u[18]=[Ve("Help")])),_:1,__:[18]})]),content:Me(()=>[te("a",{href:"#",onClick:u[7]||(u[7]=Gr(c=>n("open-about-modal"),["prevent"]))},"About DoodleBUGS"),u[19]||(u[19]=te("span",{class:"dropdown-item-placeholder"},"Documentation (Coming Soon)",-1)),u[20]||(u[20]=te("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl/issues/new?template=doodlebugs.md",target:"_blank",rel:"noopener noreferrer",class:"report-issue-link"},[Ve(" Report an Issue "),te("i",{class:"fas fa-external-link-alt external-link-icon"})],-1))]),_:1})])]),te("div",sD,[te("div",lD,[te("button",{onClick:u[8]||(u[8]=c=>n("toggle-left-sidebar")),class:ot({active:l.isLeftSidebarOpen}),title:"Toggle Left Sidebar"},u[22]||(u[22]=[te("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[te("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2),te("button",{onClick:u[9]||(u[9]=c=>n("toggle-right-sidebar")),class:ot({active:l.isRightSidebarOpen}),title:"Toggle Right Sidebar"},u[23]||(u[23]=[te("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",transform:"matrix(-1, 0, 0, 1, 0, 0)"},[te("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2)]),te("span",uD,nr(a.value),1)])]))}}),fD=Xt(cD,[["__scopeId","data-v-7d068b99"]]),dD=It({__name:"AboutModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e;return(n,a)=>(Ae(),Ba(Li,{"is-open":n.isOpen,onClose:a[1]||(a[1]=i=>r("close"))},{header:Me(()=>a[2]||(a[2]=[te("h3",null,"About DoodleBUGS",-1)])),body:Me(()=>a[3]||(a[3]=[te("div",{class:"about-content"},[te("p",null,[te("strong",null,"DoodleBUGS"),Ve(" is a graphical modeling tool designed to simplify the creation of Bayesian models for analysis with BUGS language -- "),te("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl",target:"_blank",rel:"noopener noreferrer"},"JuliaBUGS.jl"),Ve(". ")]),te("p",null," Our goal is to provide an intuitive, visual interface for statisticians, researchers, and students to build, understand, and share complex probabilistic models. "),te("hr"),te("p",null,[te("strong",null,"Version:"),Ve(" Alpha Phase -- We are just experimenting with things now!")])],-1)])),footer:Me(()=>[te("button",{onClick:a[0]||(a[0]=i=>r("close")),class:"primary"},"Close")]),_:1},8,["is-open"]))}}),vD=Xt(dD,[["__scopeId","data-v-f99eb7f3"]]),hD={class:"main-layout"},gD={class:"content-area"},pD={class:"vertical-tabs-container"},mD={class:"graph-editor-wrapper"},yD={class:"tabs-header"},bD={class:"tabs-content"},wD=It({__name:"MainLayout",setup(t){const e=Um(),r=Ls(),{selectedElement:n,updateElement:a,deleteElement:i}=Hm(),o=He("project"),s=He("properties"),l=He(!0),u=He(!0),c=He("select"),f=He("stochastic"),v=He(!0),g=He(20),h=He(!1),w=He(""),b=He(!1),d=He(""),p=He(!1),m=pt(()=>{var O;return((O=e.currentProject)==null?void 0:O.name)||null}),y=pt(()=>{if(e.currentProject&&r.currentGraphId){const O=e.currentProject.graphs.find(z=>z.id===r.currentGraphId);return(O==null?void 0:O.name)||null}return null}),x=O=>{o.value===O&&l.value?l.value=!1:(l.value=!0,o.value=O)},E=()=>{l.value=!l.value},C=()=>{u.value=!u.value},T=pt(()=>({width:l.value?"var(--sidebar-content-width-left)":"0",opacity:l.value?"1":"0",pointerEvents:l.value?"auto":"none"})),S=pt(()=>({"left-sidebar":!0,"sidebar-collapsed-content":!l.value})),P=pt(()=>({width:u.value?"var(--sidebar-width-right)":"0",opacity:u.value?"1":"0",pointerEvents:u.value?"auto":"none",borderLeft:u.value?"1px solid var(--color-border)":"none"})),R=O=>{n.value=O},A=O=>{a(O)},M=O=>{i(O)},V=O=>{O==="add-stochastic-edge"||O==="add-deterministic-edge"?c.value="add-edge":(c.value="add-node",f.value=O),l.value=!1},G=()=>{w.value.trim()&&(e.createProject(w.value.trim()),h.value=!1,w.value="",o.value="project",l.value=!0)},B=()=>{e.currentProject&&d.value.trim()&&(e.addGraphToProject(e.currentProject.id,d.value.trim()),b.value=!1,d.value="",o.value="project",l.value=!0)},k=()=>{r.currentGraphId?(r.saveGraph(r.currentGraphId,r.graphContents.get(r.currentGraphId)),console.log(`Graph "${r.currentGraphId}" saved.`)):console.warn("No graph currently selected to save.")};return gr(n,O=>{console.log("Selected element changed in MainLayout:",O)},{deep:!0}),(O,z)=>(Ae(),_e("div",hD,[be(fD,{"project-name":m.value,"active-graph-name":y.value,"is-grid-enabled":v.value,"onUpdate:isGridEnabled":z[0]||(z[0]=H=>v.value=H),"grid-size":g.value,"onUpdate:gridSize":z[1]||(z[1]=H=>g.value=H),"current-mode":c.value,"onUpdate:currentMode":z[2]||(z[2]=H=>c.value=H),"current-node-type":f.value,"onUpdate:currentNodeType":z[3]||(z[3]=H=>f.value=H),"is-left-sidebar-open":l.value,"is-right-sidebar-open":u.value,onToggleLeftSidebar:E,onToggleRightSidebar:C,onNewProject:z[4]||(z[4]=H=>h.value=!0),onNewGraph:z[5]||(z[5]=H=>b.value=!0),onSaveCurrentGraph:k,onOpenAboutModal:z[6]||(z[6]=H=>p.value=!0)},null,8,["project-name","active-graph-name","is-grid-enabled","grid-size","current-mode","current-node-type","is-left-sidebar-open","is-right-sidebar-open"]),te("div",gD,[te("aside",{class:ot(S.value)},[te("div",pD,[te("button",{class:ot({active:o.value==="project"}),onClick:z[7]||(z[7]=H=>x("project")),title:"Project Manager"},[z[23]||(z[23]=te("i",{class:"fas fa-folder"},null,-1)),z[24]||(z[24]=Ve()),$r(te("span",null,"Project",512),[[on,l.value]])],2),te("button",{class:ot({active:o.value==="palette"}),onClick:z[8]||(z[8]=H=>x("palette")),title:"Node Palette"},[z[25]||(z[25]=te("i",{class:"fas fa-shapes"},null,-1)),z[26]||(z[26]=Ve()),$r(te("span",null,"Palette",512),[[on,l.value]])],2),te("button",{class:ot({active:o.value==="data"}),onClick:z[9]||(z[9]=H=>x("data")),title:"Data Input"},[z[27]||(z[27]=te("i",{class:"fas fa-database"},null,-1)),z[28]||(z[28]=Ve()),$r(te("span",null,"Data",512),[[on,l.value]])],2)]),te("div",{class:"left-sidebar-content",style:Xn(T.value)},[$r(te("div",null,[be(c2,{onNewProject:z[10]||(z[10]=H=>h.value=!0),onNewGraph:z[11]||(z[11]=H=>b.value=!0)})],512),[[on,o.value==="project"]]),$r(te("div",null,[be(x2,{onSelectPaletteItem:V})],512),[[on,o.value==="palette"]]),$r(te("div",null,[be(S2)],512),[[on,o.value==="data"]])],4)],2),te("main",mD,[be(UT,{"is-grid-enabled":v.value,"grid-size":g.value,"current-mode":c.value,elements:fr(r).currentGraphElements,"current-node-type":f.value,"onUpdate:currentMode":z[12]||(z[12]=H=>c.value=H),"onUpdate:currentNodeType":z[13]||(z[13]=H=>f.value=H),onElementSelected:R},null,8,["is-grid-enabled","grid-size","current-mode","elements","current-node-type"])]),te("aside",{class:"right-sidebar",style:Xn(P.value)},[te("div",yD,[te("button",{class:ot({active:s.value==="properties"}),onClick:z[14]||(z[14]=H=>s.value="properties")},"Properties",2),te("button",{class:ot({active:s.value==="code"}),onClick:z[15]||(z[15]=H=>s.value="code")},"Code",2)]),te("div",bD,[$r(te("div",null,[be(X2,{"selected-element":fr(n),onUpdateElement:A,onDeleteElement:M},null,8,["selected-element"])],512),[[on,s.value==="properties"]]),$r(te("div",null,[be(eD)],512),[[on,s.value==="code"]])])],4)]),be(Li,{"is-open":h.value,onClose:z[18]||(z[18]=H=>h.value=!1)},{header:Me(()=>z[29]||(z[29]=[te("h3",null,"Create New Project",-1)])),body:Me(()=>[z[30]||(z[30]=te("label",{for:"new-project-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Project Name:",-1)),be(er,{id:"new-project-name",modelValue:w.value,"onUpdate:modelValue":z[16]||(z[16]=H=>w.value=H),placeholder:"Enter project name",onKeyup:Hf(G,["enter"])},null,8,["modelValue"])]),footer:Me(()=>[be(ft,{onClick:z[17]||(z[17]=H=>h.value=!1),type:"secondary"},{default:Me(()=>z[31]||(z[31]=[Ve("Cancel")])),_:1,__:[31]}),be(ft,{onClick:G,type:"primary"},{default:Me(()=>z[32]||(z[32]=[Ve("Create")])),_:1,__:[32]})]),_:1},8,["is-open"]),be(Li,{"is-open":b.value,onClose:z[21]||(z[21]=H=>b.value=!1)},{header:Me(()=>z[33]||(z[33]=[te("h3",null,"Create New Graph",-1)])),body:Me(()=>[z[34]||(z[34]=te("label",{for:"new-graph-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Graph Name:",-1)),be(er,{id:"new-graph-name",modelValue:d.value,"onUpdate:modelValue":z[19]||(z[19]=H=>d.value=H),placeholder:"Enter graph name",onKeyup:Hf(B,["enter"])},null,8,["modelValue"])]),footer:Me(()=>[be(ft,{onClick:z[20]||(z[20]=H=>b.value=!1),type:"secondary"},{default:Me(()=>z[35]||(z[35]=[Ve("Cancel")])),_:1,__:[35]}),be(ft,{onClick:B,type:"primary"},{default:Me(()=>z[36]||(z[36]=[Ve("Create")])),_:1,__:[36]})]),_:1},8,["is-open"]),be(vD,{"is-open":p.value,onClose:z[22]||(z[22]=H=>p.value=!1)},null,8,["is-open"])]))}}),xD=Xt(wD,[["__scopeId","data-v-26f17d69"]]),CD=It({__name:"App",setup(t){return(e,r)=>(Ae(),Ba(xD))}}),Wm=Mb(CD);Wm.use(Ib());Wm.mount("#app");
