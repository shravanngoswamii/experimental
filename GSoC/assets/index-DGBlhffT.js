(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function mc(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Qe={},Ca=[],_r=()=>{},ay=()=>!1,is=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),yc=t=>t.startsWith("onUpdate:"),kt=Object.assign,bc=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},iy=Object.prototype.hasOwnProperty,Ke=(t,e)=>iy.call(t,e),ke=Array.isArray,Ea=t=>Oi(t)==="[object Map]",os=t=>Oi(t)==="[object Set]",vf=t=>Oi(t)==="[object Date]",Oe=t=>typeof t=="function",gt=t=>typeof t=="string",Er=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",zh=t=>(et(t)||Oe(t))&&Oe(t.then)&&Oe(t.catch),Fh=Object.prototype.toString,Oi=t=>Fh.call(t),oy=t=>Oi(t).slice(8,-1),Vh=t=>Oi(t)==="[object Object]",wc=t=>gt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,si=mc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ss=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},sy=/-(\w)/g,yn=ss(t=>t.replace(sy,(e,r)=>r?r.toUpperCase():"")),ly=/\B([A-Z])/g,Pn=ss(t=>t.replace(ly,"-$1").toLowerCase()),$h=ss(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fs=ss(t=>t?`on${$h(t)}`:""),hn=(t,e)=>!Object.is(t,e),wo=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},qh=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},zu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},uy=t=>{const e=gt(t)?Number(t):NaN;return isNaN(e)?t:e};let hf;const ls=()=>hf||(hf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zn(t){if(ke(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=gt(n)?vy(n):Zn(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(gt(t)||et(t))return t}const cy=/;(?![^(]*\))/g,fy=/:([^]+)/,dy=/\/\*[^]*?\*\//g;function vy(t){const e={};return t.replace(dy,"").split(cy).forEach(r=>{if(r){const n=r.split(fy);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function at(t){let e="";if(gt(t))e=t;else if(ke(t))for(let r=0;r<t.length;r++){const n=at(t[r]);n&&(e+=n+" ")}else if(et(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const hy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gy=mc(hy);function Gh(t){return!!t||t===""}function py(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=us(t[n],e[n]);return r}function us(t,e){if(t===e)return!0;let r=vf(t),n=vf(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=Er(t),n=Er(e),r||n)return t===e;if(r=ke(t),n=ke(e),r||n)return r&&n?py(t,e):!1;if(r=et(t),n=et(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const o in t){const s=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(s&&!l||!s&&l||!us(t[o],e[o]))return!1}}return String(t)===String(e)}function Hh(t,e){return t.findIndex(r=>us(r,e))}const Uh=t=>!!(t&&t.__v_isRef===!0),Zt=t=>gt(t)?t:t==null?"":ke(t)||et(t)&&(t.toString===Fh||!Oe(t.toString))?Uh(t)?Zt(t.value):JSON.stringify(t,Wh,2):String(t),Wh=(t,e)=>Uh(e)?Wh(t,e.value):Ea(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[Vs(n,i)+" =>"]=a,r),{})}:os(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Vs(r))}:Er(e)?Vs(e):et(e)&&!ke(e)&&!Vh(e)?String(e):e,Vs=(t,e="")=>{var r;return Er(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class Kh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Vt;try{return Vt=this,e()}finally{Vt=r}}}on(){++this._on===1&&(this.prevScope=Vt,Vt=this)}off(){this._on>0&&--this._on===0&&(Vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function jh(t){return new Kh(t)}function Yh(){return Vt}function my(t,e=!1){Vt&&Vt.cleanups.push(t)}let rt;const $s=new WeakSet;class Xh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$s.has(this)&&($s.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gf(this),Jh(this);const e=rt,r=xr;rt=this,xr=!0;try{return this.fn()}finally{eg(this),rt=e,xr=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ec(e);this.deps=this.depsTail=void 0,gf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$s.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fu(this)&&this.run()}get dirty(){return Fu(this)}}let Zh=0,li,ui;function Qh(t,e=!1){if(t.flags|=8,e){t.next=ui,ui=t;return}t.next=li,li=t}function xc(){Zh++}function Cc(){if(--Zh>0)return;if(ui){let e=ui;for(ui=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;li;){let e=li;for(li=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Jh(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function eg(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),Ec(n),yy(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function Fu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(tg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function tg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===mi)||(t.globalVersion=mi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Fu(t))))return;t.flags|=2;const e=t.dep,r=rt,n=xr;rt=t,xr=!0;try{Jh(t);const a=t.fn(t._value);(e.version===0||hn(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{rt=r,xr=n,eg(t),t.flags&=-3}}function Ec(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)Ec(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function yy(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let xr=!0;const rg=[];function Xr(){rg.push(xr),xr=!1}function Zr(){const t=rg.pop();xr=t===void 0?!0:t}function gf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=rt;rt=void 0;try{e()}finally{rt=r}}}let mi=0;class by{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!rt||!xr||rt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==rt)r=this.activeLink=new by(rt,this),rt.deps?(r.prevDep=rt.depsTail,rt.depsTail.nextDep=r,rt.depsTail=r):rt.deps=rt.depsTail=r,ng(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=rt.depsTail,r.nextDep=void 0,rt.depsTail.nextDep=r,rt.depsTail=r,rt.deps===r&&(rt.deps=n)}return r}trigger(e){this.version++,mi++,this.notify(e)}notify(e){xc();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Cc()}}}function ng(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)ng(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const _o=new WeakMap,Yn=Symbol(""),Vu=Symbol(""),yi=Symbol("");function qt(t,e,r){if(xr&&rt){let n=_o.get(t);n||_o.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new Sc),a.map=n,a.key=r),a.track()}}function Kr(t,e,r,n,a,i){const o=_o.get(t);if(!o){mi++;return}const s=l=>{l&&l.trigger()};if(xc(),e==="clear")o.forEach(s);else{const l=ke(t),u=l&&wc(r);if(l&&r==="length"){const c=Number(n);o.forEach((f,d)=>{(d==="length"||d===yi||!Er(d)&&d>=c)&&s(f)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),u&&s(o.get(yi)),e){case"add":l?u&&s(o.get("length")):(s(o.get(Yn)),Ea(t)&&s(o.get(Vu)));break;case"delete":l||(s(o.get(Yn)),Ea(t)&&s(o.get(Vu)));break;case"set":Ea(t)&&s(o.get(Yn));break}}Cc()}function wy(t,e){const r=_o.get(t);return r&&r.get(e)}function sa(t){const e=He(t);return e===t?e:(qt(e,"iterate",yi),gr(t)?e:e.map(Lt))}function cs(t){return qt(t=He(t),"iterate",yi),t}const xy={__proto__:null,[Symbol.iterator](){return qs(this,Symbol.iterator,Lt)},concat(...t){return sa(this).concat(...t.map(e=>ke(e)?sa(e):e))},entries(){return qs(this,"entries",t=>(t[1]=Lt(t[1]),t))},every(t,e){return Vr(this,"every",t,e,void 0,arguments)},filter(t,e){return Vr(this,"filter",t,e,r=>r.map(Lt),arguments)},find(t,e){return Vr(this,"find",t,e,Lt,arguments)},findIndex(t,e){return Vr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vr(this,"findLast",t,e,Lt,arguments)},findLastIndex(t,e){return Vr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gs(this,"includes",t)},indexOf(...t){return Gs(this,"indexOf",t)},join(t){return sa(this).join(t)},lastIndexOf(...t){return Gs(this,"lastIndexOf",t)},map(t,e){return Vr(this,"map",t,e,void 0,arguments)},pop(){return Ka(this,"pop")},push(...t){return Ka(this,"push",t)},reduce(t,...e){return pf(this,"reduce",t,e)},reduceRight(t,...e){return pf(this,"reduceRight",t,e)},shift(){return Ka(this,"shift")},some(t,e){return Vr(this,"some",t,e,void 0,arguments)},splice(...t){return Ka(this,"splice",t)},toReversed(){return sa(this).toReversed()},toSorted(t){return sa(this).toSorted(t)},toSpliced(...t){return sa(this).toSpliced(...t)},unshift(...t){return Ka(this,"unshift",t)},values(){return qs(this,"values",Lt)}};function qs(t,e,r){const n=cs(t),a=n[e]();return n!==t&&!gr(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=r(i.value)),i}),a}const Cy=Array.prototype;function Vr(t,e,r,n,a,i){const o=cs(t),s=o!==t&&!gr(t),l=o[e];if(l!==Cy[e]){const f=l.apply(t,i);return s?Lt(f):f}let u=r;o!==t&&(s?u=function(f,d){return r.call(this,Lt(f),d,t)}:r.length>2&&(u=function(f,d){return r.call(this,f,d,t)}));const c=l.call(o,u,n);return s&&a?a(c):c}function pf(t,e,r,n){const a=cs(t);let i=r;return a!==t&&(gr(t)?r.length>3&&(i=function(o,s,l){return r.call(this,o,s,l,t)}):i=function(o,s,l){return r.call(this,o,Lt(s),l,t)}),a[e](i,...n)}function Gs(t,e,r){const n=He(t);qt(n,"iterate",yi);const a=n[e](...r);return(a===-1||a===!1)&&Pc(r[0])?(r[0]=He(r[0]),n[e](...r)):a}function Ka(t,e,r=[]){Xr(),xc();const n=He(t)[e].apply(t,r);return Cc(),Zr(),n}const Ey=mc("__proto__,__v_isRef,__isVue"),ag=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Er));function Sy(t){Er(t)||(t=String(t));const e=He(this);return qt(e,"has",t),e.hasOwnProperty(t)}class ig{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?Iy:ug:i?lg:sg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=ke(e);if(!a){let l;if(o&&(l=xy[r]))return l;if(r==="hasOwnProperty")return Sy}const s=Reflect.get(e,r,ht(e)?e:n);return(Er(r)?ag.has(r):Ey(r))||(a||qt(e,"get",r),i)?s:ht(s)?o&&wc(r)?s:s.value:et(s)?a?cg(s):fs(s):s}}class og extends ig{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];if(!this._isShallow){const l=bn(i);if(!gr(n)&&!bn(n)&&(i=He(i),n=He(n)),!ke(e)&&ht(i)&&!ht(n))return l?!1:(i.value=n,!0)}const o=ke(e)&&wc(r)?Number(r)<e.length:Ke(e,r),s=Reflect.set(e,r,n,ht(e)?e:a);return e===He(a)&&(o?hn(n,i)&&Kr(e,"set",r,n):Kr(e,"add",r,n)),s}deleteProperty(e,r){const n=Ke(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Kr(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!Er(r)||!ag.has(r))&&qt(e,"has",r),n}ownKeys(e){return qt(e,"iterate",ke(e)?"length":Yn),Reflect.ownKeys(e)}}class Ty extends ig{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const Dy=new og,Py=new Ty,ky=new og(!0);const $u=t=>t,to=t=>Reflect.getPrototypeOf(t);function Ay(t,e,r){return function(...n){const a=this.__v_raw,i=He(a),o=Ea(i),s=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=a[t](...n),c=r?$u:e?Oo:Lt;return!e&&qt(i,"iterate",l?Vu:Yn),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function ro(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ry(t,e){const r={get(a){const i=this.__v_raw,o=He(i),s=He(a);t||(hn(a,s)&&qt(o,"get",a),qt(o,"get",s));const{has:l}=to(o),u=e?$u:t?Oo:Lt;if(l.call(o,a))return u(i.get(a));if(l.call(o,s))return u(i.get(s));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&qt(He(a),"iterate",Yn),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=He(i),s=He(a);return t||(hn(a,s)&&qt(o,"has",a),qt(o,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const o=this,s=o.__v_raw,l=He(s),u=e?$u:t?Oo:Lt;return!t&&qt(l,"iterate",Yn),s.forEach((c,f)=>a.call(i,u(c),u(f),o))}};return kt(r,t?{add:ro("add"),set:ro("set"),delete:ro("delete"),clear:ro("clear")}:{add(a){!e&&!gr(a)&&!bn(a)&&(a=He(a));const i=He(this);return to(i).has.call(i,a)||(i.add(a),Kr(i,"add",a,a)),this},set(a,i){!e&&!gr(i)&&!bn(i)&&(i=He(i));const o=He(this),{has:s,get:l}=to(o);let u=s.call(o,a);u||(a=He(a),u=s.call(o,a));const c=l.call(o,a);return o.set(a,i),u?hn(i,c)&&Kr(o,"set",a,i):Kr(o,"add",a,i),this},delete(a){const i=He(this),{has:o,get:s}=to(i);let l=o.call(i,a);l||(a=He(a),l=o.call(i,a)),s&&s.call(i,a);const u=i.delete(a);return l&&Kr(i,"delete",a,void 0),u},clear(){const a=He(this),i=a.size!==0,o=a.clear();return i&&Kr(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=Ay(a,t,e)}),r}function Tc(t,e){const r=Ry(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Ke(r,a)&&a in n?r:n,a,i)}const By={get:Tc(!1,!1)},My={get:Tc(!1,!0)},Ly={get:Tc(!0,!1)};const sg=new WeakMap,lg=new WeakMap,ug=new WeakMap,Iy=new WeakMap;function _y(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Oy(t){return t.__v_skip||!Object.isExtensible(t)?0:_y(oy(t))}function fs(t){return bn(t)?t:Dc(t,!1,Dy,By,sg)}function Ny(t){return Dc(t,!1,ky,My,lg)}function cg(t){return Dc(t,!0,Py,Ly,ug)}function Dc(t,e,r,n,a){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Oy(t);if(i===0)return t;const o=a.get(t);if(o)return o;const s=new Proxy(t,i===2?n:r);return a.set(t,s),s}function gn(t){return bn(t)?gn(t.__v_raw):!!(t&&t.__v_isReactive)}function bn(t){return!!(t&&t.__v_isReadonly)}function gr(t){return!!(t&&t.__v_isShallow)}function Pc(t){return t?!!t.__v_raw:!1}function He(t){const e=t&&t.__v_raw;return e?He(e):t}function kc(t){return!Ke(t,"__v_skip")&&Object.isExtensible(t)&&qh(t,"__v_skip",!0),t}const Lt=t=>et(t)?fs(t):t,Oo=t=>et(t)?cg(t):t;function ht(t){return t?t.__v_isRef===!0:!1}function qe(t){return zy(t,!1)}function zy(t,e){return ht(t)?t:new Fy(t,e)}class Fy{constructor(e,r){this.dep=new Sc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:He(e),this._value=r?e:Lt(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||gr(e)||bn(e);e=n?e:He(e),hn(e,r)&&(this._rawValue=e,this._value=n?e:Lt(e),this.dep.trigger())}}function st(t){return ht(t)?t.value:t}const Vy={get:(t,e,r)=>e==="__v_raw"?t:st(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return ht(a)&&!ht(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function fg(t){return gn(t)?t:new Proxy(t,Vy)}function $y(t){const e=ke(t)?new Array(t.length):{};for(const r in t)e[r]=Gy(t,r);return e}class qy{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return wy(He(this._object),this._key)}}function Gy(t,e,r){const n=t[e];return ht(n)?n:new qy(t,e,r)}class Hy{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Sc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&rt!==this)return Qh(this,!0),!0}get value(){const e=this.dep.track();return tg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Uy(t,e,r=!1){let n,a;return Oe(t)?n=t:(n=t.get,a=t.set),new Hy(n,a,r)}const no={},No=new WeakMap;let Vn;function Wy(t,e=!1,r=Vn){if(r){let n=No.get(r);n||No.set(r,n=[]),n.push(t)}}function Ky(t,e,r=Qe){const{immediate:n,deep:a,once:i,scheduler:o,augmentJob:s,call:l}=r,u=b=>a?b:gr(b)||a===!1||a===0?jr(b,1):jr(b);let c,f,d,g,h=!1,w=!1;if(ht(t)?(f=()=>t.value,h=gr(t)):gn(t)?(f=()=>u(t),h=!0):ke(t)?(w=!0,h=t.some(b=>gn(b)||gr(b)),f=()=>t.map(b=>{if(ht(b))return b.value;if(gn(b))return u(b);if(Oe(b))return l?l(b,2):b()})):Oe(t)?e?f=l?()=>l(t,2):t:f=()=>{if(d){Xr();try{d()}finally{Zr()}}const b=Vn;Vn=c;try{return l?l(t,3,[g]):t(g)}finally{Vn=b}}:f=_r,e&&a){const b=f,x=a===!0?1/0:a;f=()=>jr(b(),x)}const y=Yh(),v=()=>{c.stop(),y&&y.active&&bc(y.effects,c)};if(i&&e){const b=e;e=(...x)=>{b(...x),v()}}let m=w?new Array(t.length).fill(no):no;const p=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(e){const x=c.run();if(a||h||(w?x.some((C,E)=>hn(C,m[E])):hn(x,m))){d&&d();const C=Vn;Vn=c;try{const E=[x,m===no?void 0:w&&m[0]===no?[]:m,g];m=x,l?l(e,3,E):e(...E)}finally{Vn=C}}}else c.run()};return s&&s(p),c=new Xh(f),c.scheduler=o?()=>o(p,!1):p,g=b=>Wy(b,!1,c),d=c.onStop=()=>{const b=No.get(c);if(b){if(l)l(b,4);else for(const x of b)x();No.delete(c)}},e?n?p(!0):m=c.run():o?o(p.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function jr(t,e=1/0,r){if(e<=0||!et(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,ht(t))jr(t.value,e,r);else if(ke(t))for(let n=0;n<t.length;n++)jr(t[n],e,r);else if(os(t)||Ea(t))t.forEach(n=>{jr(n,e,r)});else if(Vh(t)){for(const n in t)jr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&jr(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ni(t,e,r,n){try{return n?t(...n):t()}catch(a){ds(a,e,r)}}function Sr(t,e,r,n){if(Oe(t)){const a=Ni(t,e,r,n);return a&&zh(a)&&a.catch(i=>{ds(i,e,r)}),a}if(ke(t)){const a=[];for(let i=0;i<t.length;i++)a.push(Sr(t[i],e,r,n));return a}}function ds(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,l,u)===!1)return}s=s.parent}if(i){Xr(),Ni(i,null,10,[t,l,u]),Zr();return}}jy(t,r,a,n,o)}function jy(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const Xt=[];let Mr=-1;const Sa=[];let cn=null,ma=0;const dg=Promise.resolve();let zo=null;function Ac(t){const e=zo||dg;return t?e.then(this?t.bind(this):t):e}function Yy(t){let e=Mr+1,r=Xt.length;for(;e<r;){const n=e+r>>>1,a=Xt[n],i=bi(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function Rc(t){if(!(t.flags&1)){const e=bi(t),r=Xt[Xt.length-1];!r||!(t.flags&2)&&e>=bi(r)?Xt.push(t):Xt.splice(Yy(e),0,t),t.flags|=1,vg()}}function vg(){zo||(zo=dg.then(gg))}function Xy(t){ke(t)?Sa.push(...t):cn&&t.id===-1?cn.splice(ma+1,0,t):t.flags&1||(Sa.push(t),t.flags|=1),vg()}function mf(t,e,r=Mr+1){for(;r<Xt.length;r++){const n=Xt[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Xt.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function hg(t){if(Sa.length){const e=[...new Set(Sa)].sort((r,n)=>bi(r)-bi(n));if(Sa.length=0,cn){cn.push(...e);return}for(cn=e,ma=0;ma<cn.length;ma++){const r=cn[ma];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}cn=null,ma=0}}const bi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function gg(t){try{for(Mr=0;Mr<Xt.length;Mr++){const e=Xt[Mr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ni(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Mr<Xt.length;Mr++){const e=Xt[Mr];e&&(e.flags&=-2)}Mr=-1,Xt.length=0,hg(),zo=null,(Xt.length||Sa.length)&&gg()}}let Dt=null,pg=null;function Fo(t){const e=Dt;return Dt=t,pg=t&&t.type.__scopeId||null,e}function Le(t,e=Dt,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&Pf(-1);const i=Fo(e);let o;try{o=t(...a)}finally{Fo(i),n._d&&Pf(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function br(t,e){if(Dt===null)return t;const r=ms(Dt),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,o,s,l=Qe]=e[a];i&&(Oe(i)&&(i={mounted:i,updated:i}),i.deep&&jr(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:s,modifiers:l}))}return t}function In(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const s=a[o];i&&(s.oldValue=i[o].value);let l=s.dir[n];l&&(Xr(),Sr(l,r,8,[t.el,s,t,e]),Zr())}}const Zy=Symbol("_vte"),mg=t=>t.__isTeleport,fn=Symbol("_leaveCb"),ao=Symbol("_enterCb");function Qy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Na(()=>{t.isMounted=!0}),Tg(()=>{t.isUnmounting=!0}),t}const fr=[Function,Array],yg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fr,onEnter:fr,onAfterEnter:fr,onEnterCancelled:fr,onBeforeLeave:fr,onLeave:fr,onAfterLeave:fr,onLeaveCancelled:fr,onBeforeAppear:fr,onAppear:fr,onAfterAppear:fr,onAppearCancelled:fr},bg=t=>{const e=t.subTree;return e.component?bg(e.component):e},Jy={name:"BaseTransition",props:yg,setup(t,{slots:e}){const r=Y0(),n=Qy();return()=>{const a=e.default&&Cg(e.default(),!0);if(!a||!a.length)return;const i=wg(a),o=He(t),{mode:s}=o;if(n.isLeaving)return Hs(i);const l=yf(i);if(!l)return Hs(i);let u=qu(l,o,n,r,f=>u=f);l.type!==Gt&&wi(l,u);let c=r.subTree&&yf(r.subTree);if(c&&c.type!==Gt&&!Hn(l,c)&&bg(r).type!==Gt){let f=qu(c,o,n,r);if(wi(c,f),s==="out-in"&&l.type!==Gt)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,c=void 0},Hs(i);s==="in-out"&&l.type!==Gt?f.delayLeave=(d,g,h)=>{const w=xg(n,c);w[String(c.key)]=c,d[fn]=()=>{g(),d[fn]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{h(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function wg(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Gt){e=r;break}}return e}const e0=Jy;function xg(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function qu(t,e,r,n,a){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:d,onLeave:g,onAfterLeave:h,onLeaveCancelled:w,onBeforeAppear:y,onAppear:v,onAfterAppear:m,onAppearCancelled:p}=e,b=String(t.key),x=xg(r,t),C=(S,P)=>{S&&Sr(S,n,9,P)},E=(S,P)=>{const L=P[1];C(S,P),ke(S)?S.every(A=>A.length<=1)&&L():S.length<=1&&L()},T={mode:o,persisted:s,beforeEnter(S){let P=l;if(!r.isMounted)if(i)P=y||l;else return;S[fn]&&S[fn](!0);const L=x[b];L&&Hn(t,L)&&L.el[fn]&&L.el[fn](),C(P,[S])},enter(S){let P=u,L=c,A=f;if(!r.isMounted)if(i)P=v||u,L=m||c,A=p||f;else return;let _=!1;const V=S[ao]=q=>{_||(_=!0,q?C(A,[S]):C(L,[S]),T.delayedLeave&&T.delayedLeave(),S[ao]=void 0)};P?E(P,[S,V]):V()},leave(S,P){const L=String(t.key);if(S[ao]&&S[ao](!0),r.isUnmounting)return P();C(d,[S]);let A=!1;const _=S[fn]=V=>{A||(A=!0,P(),V?C(w,[S]):C(h,[S]),S[fn]=void 0,x[L]===t&&delete x[L])};x[L]=t,g?E(g,[S,_]):_()},clone(S){const P=qu(S,e,r,n,a);return a&&a(P),P}};return T}function Hs(t){if(vs(t))return t=wn(t),t.children=null,t}function yf(t){if(!vs(t))return mg(t.type)&&t.children?wg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Oe(r.default))return r.default()}}function wi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Cg(t,e=!1,r){let n=[],a=0;for(let i=0;i<t.length;i++){let o=t[i];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===it?(o.patchFlag&128&&a++,n=n.concat(Cg(o.children,e,s))):(e||o.type!==Gt)&&n.push(s!=null?wn(o,{key:s}):o)}if(a>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function At(t,e){return Oe(t)?kt({name:t.name},e,{setup:t}):t}function Eg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Vo(t,e,r,n,a=!1){if(ke(t)){t.forEach((h,w)=>Vo(h,e&&(ke(e)?e[w]:e),r,n,a));return}if(Ta(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Vo(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?ms(n.component):n.el,o=a?null:i,{i:s,r:l}=t,u=e&&e.r,c=s.refs===Qe?s.refs={}:s.refs,f=s.setupState,d=He(f),g=f===Qe?()=>!1:h=>Ke(d,h);if(u!=null&&u!==l&&(gt(u)?(c[u]=null,g(u)&&(f[u]=null)):ht(u)&&(u.value=null)),Oe(l))Ni(l,s,12,[o,c]);else{const h=gt(l),w=ht(l);if(h||w){const y=()=>{if(t.f){const v=h?g(l)?f[l]:c[l]:l.value;a?ke(v)&&bc(v,i):ke(v)?v.includes(i)||v.push(i):h?(c[l]=[i],g(l)&&(f[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,g(l)&&(f[l]=o)):w&&(l.value=o,t.k&&(c[t.k]=o))};o?(y.id=-1,sr(y,r)):y()}}}ls().requestIdleCallback;ls().cancelIdleCallback;const Ta=t=>!!t.type.__asyncLoader,vs=t=>t.type.__isKeepAlive;function t0(t,e){Sg(t,"a",e)}function r0(t,e){Sg(t,"da",e)}function Sg(t,e,r=It){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(hs(e,n,r),r){let a=r.parent;for(;a&&a.parent;)vs(a.parent.vnode)&&n0(n,e,r,a),a=a.parent}}function n0(t,e,r,n){const a=hs(e,t,n,!0);za(()=>{bc(n[e],a)},r)}function hs(t,e,r=It,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Xr();const s=zi(r),l=Sr(e,r,t,o);return s(),Zr(),l});return n?a.unshift(i):a.push(i),i}}const tn=t=>(e,r=It)=>{(!Ei||t==="sp")&&hs(t,(...n)=>e(...n),r)},a0=tn("bm"),Na=tn("m"),i0=tn("bu"),o0=tn("u"),Tg=tn("bum"),za=tn("um"),s0=tn("sp"),l0=tn("rtg"),u0=tn("rtc");function c0(t,e=It){hs("ec",t,e)}const f0=Symbol.for("v-ndc");function Qn(t,e,r,n){let a;const i=r,o=ke(t);if(o||gt(t)){const s=o&&gn(t);let l=!1,u=!1;s&&(l=!gr(t),u=bn(t),t=cs(t)),a=new Array(t.length);for(let c=0,f=t.length;c<f;c++)a[c]=e(l?u?Oo(Lt(t[c])):Lt(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let s=0;s<t;s++)a[s]=e(s+1,s,void 0,i)}else if(et(t))if(t[Symbol.iterator])a=Array.from(t,(s,l)=>e(s,l,void 0,i));else{const s=Object.keys(t);a=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];a[l]=e(t[c],c,l,i)}}else a=[];return a}function Da(t,e,r={},n,a){if(Dt.ce||Dt.parent&&Ta(Dt.parent)&&Dt.parent.ce)return e!=="default"&&(r.name=e),Pe(),Ma(it,null,[be("slot",r,n)],64);let i=t[e];i&&i._c&&(i._d=!1),Pe();const o=i&&Dg(i(r)),s=r.key||o&&o.key,l=Ma(it,{key:(s&&!Er(s)?s:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!a&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Dg(t){return t.some(e=>Ci(e)?!(e.type===Gt||e.type===it&&!Dg(e.children)):!0)?t:null}const Gu=t=>t?Wg(t)?ms(t):Gu(t.parent):null,ci=kt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gu(t.parent),$root:t=>Gu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>kg(t),$forceUpdate:t=>t.f||(t.f=()=>{Rc(t.update)}),$nextTick:t=>t.n||(t.n=Ac.bind(t.proxy)),$watch:t=>I0.bind(t)}),Us=(t,e)=>t!==Qe&&!t.__isScriptSetup&&Ke(t,e),d0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:o,type:s,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if(Us(n,e))return o[e]=1,n[e];if(a!==Qe&&Ke(a,e))return o[e]=2,a[e];if((u=t.propsOptions[0])&&Ke(u,e))return o[e]=3,i[e];if(r!==Qe&&Ke(r,e))return o[e]=4,r[e];Hu&&(o[e]=0)}}const c=ci[e];let f,d;if(c)return e==="$attrs"&&qt(t.attrs,"get",""),c(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(r!==Qe&&Ke(r,e))return o[e]=4,r[e];if(d=l.config.globalProperties,Ke(d,e))return d[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return Us(a,e)?(a[e]=r,!0):n!==Qe&&Ke(n,e)?(n[e]=r,!0):Ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:i}},o){let s;return!!r[o]||t!==Qe&&Ke(t,o)||Us(e,o)||(s=i[0])&&Ke(s,o)||Ke(n,o)||Ke(ci,o)||Ke(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Ke(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function bf(t){return ke(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Hu=!0;function v0(t){const e=kg(t),r=t.proxy,n=t.ctx;Hu=!1,e.beforeCreate&&wf(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:g,updated:h,activated:w,deactivated:y,beforeDestroy:v,beforeUnmount:m,destroyed:p,unmounted:b,render:x,renderTracked:C,renderTriggered:E,errorCaptured:T,serverPrefetch:S,expose:P,inheritAttrs:L,components:A,directives:_,filters:V}=e;if(u&&h0(u,n,null),o)for(const k in o){const F=o[k];Oe(F)&&(n[k]=F.bind(r))}if(a){const k=a.call(r,r);et(k)&&(t.data=fs(k))}if(Hu=!0,i)for(const k in i){const F=i[k],G=Oe(F)?F.bind(r,r):Oe(F.get)?F.get.bind(r,r):_r,j=!Oe(F)&&Oe(F.set)?F.set.bind(r):_r,H=dt({get:G,set:j});Object.defineProperty(n,k,{enumerable:!0,configurable:!0,get:()=>H.value,set:I=>H.value=I})}if(s)for(const k in s)Pg(s[k],n,r,k);if(l){const k=Oe(l)?l.call(r):l;Reflect.ownKeys(k).forEach(F=>{w0(F,k[F])})}c&&wf(c,t,"c");function R(k,F){ke(F)?F.forEach(G=>k(G.bind(r))):F&&k(F.bind(r))}if(R(a0,f),R(Na,d),R(i0,g),R(o0,h),R(t0,w),R(r0,y),R(c0,T),R(u0,C),R(l0,E),R(Tg,m),R(za,b),R(s0,S),ke(P))if(P.length){const k=t.exposed||(t.exposed={});P.forEach(F=>{Object.defineProperty(k,F,{get:()=>r[F],set:G=>r[F]=G})})}else t.exposed||(t.exposed={});x&&t.render===_r&&(t.render=x),L!=null&&(t.inheritAttrs=L),A&&(t.components=A),_&&(t.directives=_),S&&Eg(t)}function h0(t,e,r=_r){ke(t)&&(t=Uu(t));for(const n in t){const a=t[n];let i;et(a)?"default"in a?i=fi(a.from||n,a.default,!0):i=fi(a.from||n):i=fi(a),ht(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function wf(t,e,r){Sr(ke(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function Pg(t,e,r,n){let a=n.includes(".")?$g(r,n):()=>r[n];if(gt(t)){const i=e[t];Oe(i)&&ur(a,i)}else if(Oe(t))ur(a,t.bind(r));else if(et(t))if(ke(t))t.forEach(i=>Pg(i,e,r,n));else{const i=Oe(t.handler)?t.handler.bind(r):e[t.handler];Oe(i)&&ur(a,i,t)}}function kg(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,s=i.get(e);let l;return s?l=s:!a.length&&!r&&!n?l=e:(l={},a.length&&a.forEach(u=>$o(l,u,o,!0)),$o(l,e,o)),et(e)&&i.set(e,l),l}function $o(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&$o(t,i,r,!0),a&&a.forEach(o=>$o(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const s=g0[o]||r&&r[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const g0={data:xf,props:Cf,emits:Cf,methods:ni,computed:ni,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:ni,directives:ni,watch:m0,provide:xf,inject:p0};function xf(t,e){return e?t?function(){return kt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function p0(t,e){return ni(Uu(t),Uu(e))}function Uu(t){if(ke(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function ni(t,e){return t?kt(Object.create(null),t,e):e}function Cf(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:kt(Object.create(null),bf(t),bf(e??{})):e}function m0(t,e){if(!t)return e;if(!e)return t;const r=kt(Object.create(null),t);for(const n in e)r[n]=jt(t[n],e[n]);return r}function Ag(){return{app:null,config:{isNativeTag:ay,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let y0=0;function b0(t,e){return function(n,a=null){Oe(n)||(n=kt({},n)),a!=null&&!et(a)&&(a=null);const i=Ag(),o=new WeakSet,s=[];let l=!1;const u=i.app={_uid:y0++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:rb,get config(){return i.config},set config(c){},use(c,...f){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(u,...f)):Oe(c)&&(o.add(c),c(u,...f))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,f){return f?(i.components[c]=f,u):i.components[c]},directive(c,f){return f?(i.directives[c]=f,u):i.directives[c]},mount(c,f,d){if(!l){const g=u._ceVNode||be(n,a);return g.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),t(g,c,d),l=!0,u._container=c,c.__vue_app__=u,ms(g.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Sr(s,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,f){return i.provides[c]=f,u},runWithContext(c){const f=Xn;Xn=u;try{return c()}finally{Xn=f}}};return u}}let Xn=null;function w0(t,e){if(It){let r=It.provides;const n=It.parent&&It.parent.provides;n===r&&(r=It.provides=Object.create(n)),r[t]=e}}function fi(t,e,r=!1){const n=It||Dt;if(n||Xn){let a=Xn?Xn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Oe(e)?e.call(n&&n.proxy):e}}function x0(){return!!(It||Dt||Xn)}const Rg={},Bg=()=>Object.create(Rg),Mg=t=>Object.getPrototypeOf(t)===Rg;function C0(t,e,r,n=!1){const a={},i=Bg();t.propsDefaults=Object.create(null),Lg(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:Ny(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function E0(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,s=He(a),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(gs(t.emitsOptions,d))continue;const g=e[d];if(l)if(Ke(i,d))g!==i[d]&&(i[d]=g,u=!0);else{const h=yn(d);a[h]=Wu(l,s,h,g,t,!1)}else g!==i[d]&&(i[d]=g,u=!0)}}}else{Lg(t,e,a,i)&&(u=!0);let c;for(const f in s)(!e||!Ke(e,f)&&((c=Pn(f))===f||!Ke(e,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(a[f]=Wu(l,s,f,void 0,t,!0)):delete a[f]);if(i!==s)for(const f in i)(!e||!Ke(e,f))&&(delete i[f],u=!0)}u&&Kr(t.attrs,"set","")}function Lg(t,e,r,n){const[a,i]=t.propsOptions;let o=!1,s;if(e)for(let l in e){if(si(l))continue;const u=e[l];let c;a&&Ke(a,c=yn(l))?!i||!i.includes(c)?r[c]=u:(s||(s={}))[c]=u:gs(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(i){const l=He(r),u=s||Qe;for(let c=0;c<i.length;c++){const f=i[c];r[f]=Wu(a,l,f,u[f],t,!Ke(u,f))}}return o}function Wu(t,e,r,n,a,i){const o=t[r];if(o!=null){const s=Ke(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:u}=a;if(r in u)n=u[r];else{const c=zi(a);n=u[r]=l.call(null,e),c()}}else n=l;a.ce&&a.ce._setProp(r,n)}o[0]&&(i&&!s?n=!1:o[1]&&(n===""||n===Pn(r))&&(n=!0))}return n}const S0=new WeakMap;function Ig(t,e,r=!1){const n=r?S0:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,o={},s=[];let l=!1;if(!Oe(t)){const c=f=>{l=!0;const[d,g]=Ig(f,e,!0);kt(o,d),g&&s.push(...g)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return et(t)&&n.set(t,Ca),Ca;if(ke(i))for(let c=0;c<i.length;c++){const f=yn(i[c]);Ef(f)&&(o[f]=Qe)}else if(i)for(const c in i){const f=yn(c);if(Ef(f)){const d=i[c],g=o[f]=ke(d)||Oe(d)?{type:d}:kt({},d),h=g.type;let w=!1,y=!0;if(ke(h))for(let v=0;v<h.length;++v){const m=h[v],p=Oe(m)&&m.name;if(p==="Boolean"){w=!0;break}else p==="String"&&(y=!1)}else w=Oe(h)&&h.name==="Boolean";g[0]=w,g[1]=y,(w||Ke(g,"default"))&&s.push(f)}}const u=[o,s];return et(t)&&n.set(t,u),u}function Ef(t){return t[0]!=="$"&&!si(t)}const Bc=t=>t[0]==="_"||t==="$stable",Mc=t=>ke(t)?t.map(Lr):[Lr(t)],T0=(t,e,r)=>{if(e._n)return e;const n=Le((...a)=>Mc(e(...a)),r);return n._c=!1,n},_g=(t,e,r)=>{const n=t._ctx;for(const a in t){if(Bc(a))continue;const i=t[a];if(Oe(i))e[a]=T0(a,i,n);else if(i!=null){const o=Mc(i);e[a]=()=>o}}},Og=(t,e)=>{const r=Mc(e);t.slots.default=()=>r},Ng=(t,e,r)=>{for(const n in e)(r||!Bc(n))&&(t[n]=e[n])},D0=(t,e,r)=>{const n=t.slots=Bg();if(t.vnode.shapeFlag&32){const a=e._;a?(Ng(n,e,r),r&&qh(n,"_",a,!0)):_g(e,n)}else e&&Og(t,e)},P0=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,o=Qe;if(n.shapeFlag&32){const s=e._;s?r&&s===1?i=!1:Ng(a,e,r):(i=!e.$stable,_g(e,a)),o=e}else e&&(Og(t,e),o={default:1});if(i)for(const s in a)!Bc(s)&&o[s]==null&&delete a[s]},sr=$0;function k0(t){return A0(t)}function A0(t,e){const r=ls();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:g=_r,insertStaticContent:h}=t,w=(D,N,K,ne=null,ce=null,ie=null,le=void 0,X=null,Q=!!N.dynamicChildren)=>{if(D===N)return;D&&!Hn(D,N)&&(ne=W(D),I(D,ce,ie,!0),D=null),N.patchFlag===-2&&(Q=!1,N.dynamicChildren=null);const{type:Z,ref:fe,shapeFlag:oe}=N;switch(Z){case ps:y(D,N,K,ne);break;case Gt:v(D,N,K,ne);break;case Ks:D==null&&m(N,K,ne,le);break;case it:A(D,N,K,ne,ce,ie,le,X,Q);break;default:oe&1?x(D,N,K,ne,ce,ie,le,X,Q):oe&6?_(D,N,K,ne,ce,ie,le,X,Q):(oe&64||oe&128)&&Z.process(D,N,K,ne,ce,ie,le,X,Q,U)}fe!=null&&ce&&Vo(fe,D&&D.ref,ie,N||D,!N)},y=(D,N,K,ne)=>{if(D==null)n(N.el=s(N.children),K,ne);else{const ce=N.el=D.el;N.children!==D.children&&u(ce,N.children)}},v=(D,N,K,ne)=>{D==null?n(N.el=l(N.children||""),K,ne):N.el=D.el},m=(D,N,K,ne)=>{[D.el,D.anchor]=h(D.children,N,K,ne,D.el,D.anchor)},p=({el:D,anchor:N},K,ne)=>{let ce;for(;D&&D!==N;)ce=d(D),n(D,K,ne),D=ce;n(N,K,ne)},b=({el:D,anchor:N})=>{let K;for(;D&&D!==N;)K=d(D),a(D),D=K;a(N)},x=(D,N,K,ne,ce,ie,le,X,Q)=>{N.type==="svg"?le="svg":N.type==="math"&&(le="mathml"),D==null?C(N,K,ne,ce,ie,le,X,Q):S(D,N,ce,ie,le,X,Q)},C=(D,N,K,ne,ce,ie,le,X)=>{let Q,Z;const{props:fe,shapeFlag:oe,transition:he,dirs:pe}=D;if(Q=D.el=o(D.type,ie,fe&&fe.is,fe),oe&8?c(Q,D.children):oe&16&&T(D.children,Q,null,ne,ce,Ws(D,ie),le,X),pe&&In(D,null,ne,"created"),E(Q,D,D.scopeId,le,ne),fe){for(const Ee in fe)Ee!=="value"&&!si(Ee)&&i(Q,Ee,null,fe[Ee],ie,ne);"value"in fe&&i(Q,"value",null,fe.value,ie),(Z=fe.onVnodeBeforeMount)&&kr(Z,ne,D)}pe&&In(D,null,ne,"beforeMount");const ge=R0(ce,he);ge&&he.beforeEnter(Q),n(Q,N,K),((Z=fe&&fe.onVnodeMounted)||ge||pe)&&sr(()=>{Z&&kr(Z,ne,D),ge&&he.enter(Q),pe&&In(D,null,ne,"mounted")},ce)},E=(D,N,K,ne,ce)=>{if(K&&g(D,K),ne)for(let ie=0;ie<ne.length;ie++)g(D,ne[ie]);if(ce){let ie=ce.subTree;if(N===ie||Gg(ie.type)&&(ie.ssContent===N||ie.ssFallback===N)){const le=ce.vnode;E(D,le,le.scopeId,le.slotScopeIds,ce.parent)}}},T=(D,N,K,ne,ce,ie,le,X,Q=0)=>{for(let Z=Q;Z<D.length;Z++){const fe=D[Z]=X?dn(D[Z]):Lr(D[Z]);w(null,fe,N,K,ne,ce,ie,le,X)}},S=(D,N,K,ne,ce,ie,le)=>{const X=N.el=D.el;let{patchFlag:Q,dynamicChildren:Z,dirs:fe}=N;Q|=D.patchFlag&16;const oe=D.props||Qe,he=N.props||Qe;let pe;if(K&&_n(K,!1),(pe=he.onVnodeBeforeUpdate)&&kr(pe,K,N,D),fe&&In(N,D,K,"beforeUpdate"),K&&_n(K,!0),(oe.innerHTML&&he.innerHTML==null||oe.textContent&&he.textContent==null)&&c(X,""),Z?P(D.dynamicChildren,Z,X,K,ne,Ws(N,ce),ie):le||F(D,N,X,null,K,ne,Ws(N,ce),ie,!1),Q>0){if(Q&16)L(X,oe,he,K,ce);else if(Q&2&&oe.class!==he.class&&i(X,"class",null,he.class,ce),Q&4&&i(X,"style",oe.style,he.style,ce),Q&8){const ge=N.dynamicProps;for(let Ee=0;Ee<ge.length;Ee++){const we=ge[Ee],Ae=oe[we],De=he[we];(De!==Ae||we==="value")&&i(X,we,Ae,De,ce,K)}}Q&1&&D.children!==N.children&&c(X,N.children)}else!le&&Z==null&&L(X,oe,he,K,ce);((pe=he.onVnodeUpdated)||fe)&&sr(()=>{pe&&kr(pe,K,N,D),fe&&In(N,D,K,"updated")},ne)},P=(D,N,K,ne,ce,ie,le)=>{for(let X=0;X<N.length;X++){const Q=D[X],Z=N[X],fe=Q.el&&(Q.type===it||!Hn(Q,Z)||Q.shapeFlag&198)?f(Q.el):K;w(Q,Z,fe,null,ne,ce,ie,le,!0)}},L=(D,N,K,ne,ce)=>{if(N!==K){if(N!==Qe)for(const ie in N)!si(ie)&&!(ie in K)&&i(D,ie,N[ie],null,ce,ne);for(const ie in K){if(si(ie))continue;const le=K[ie],X=N[ie];le!==X&&ie!=="value"&&i(D,ie,X,le,ce,ne)}"value"in K&&i(D,"value",N.value,K.value,ce)}},A=(D,N,K,ne,ce,ie,le,X,Q)=>{const Z=N.el=D?D.el:s(""),fe=N.anchor=D?D.anchor:s("");let{patchFlag:oe,dynamicChildren:he,slotScopeIds:pe}=N;pe&&(X=X?X.concat(pe):pe),D==null?(n(Z,K,ne),n(fe,K,ne),T(N.children||[],K,fe,ce,ie,le,X,Q)):oe>0&&oe&64&&he&&D.dynamicChildren?(P(D.dynamicChildren,he,K,ce,ie,le,X),(N.key!=null||ce&&N===ce.subTree)&&zg(D,N,!0)):F(D,N,K,fe,ce,ie,le,X,Q)},_=(D,N,K,ne,ce,ie,le,X,Q)=>{N.slotScopeIds=X,D==null?N.shapeFlag&512?ce.ctx.activate(N,K,ne,le,Q):V(N,K,ne,ce,ie,le,Q):q(D,N,Q)},V=(D,N,K,ne,ce,ie,le)=>{const X=D.component=j0(D,ne,ce);if(vs(D)&&(X.ctx.renderer=U),X0(X,!1,le),X.asyncDep){if(ce&&ce.registerDep(X,R,le),!D.el){const Q=X.subTree=be(Gt);v(null,Q,N,K)}}else R(X,D,N,K,ce,ie,le)},q=(D,N,K)=>{const ne=N.component=D.component;if(F0(D,N,K))if(ne.asyncDep&&!ne.asyncResolved){k(ne,N,K);return}else ne.next=N,ne.update();else N.el=D.el,ne.vnode=N},R=(D,N,K,ne,ce,ie,le)=>{const X=()=>{if(D.isMounted){let{next:oe,bu:he,u:pe,parent:ge,vnode:Ee}=D;{const ue=Fg(D);if(ue){oe&&(oe.el=Ee.el,k(D,oe,le)),ue.asyncDep.then(()=>{D.isUnmounted||X()});return}}let we=oe,Ae;_n(D,!1),oe?(oe.el=Ee.el,k(D,oe,le)):oe=Ee,he&&wo(he),(Ae=oe.props&&oe.props.onVnodeBeforeUpdate)&&kr(Ae,ge,oe,Ee),_n(D,!0);const De=Tf(D),me=D.subTree;D.subTree=De,w(me,De,f(me.el),W(me),D,ce,ie),oe.el=De.el,we===null&&V0(D,De.el),pe&&sr(pe,ce),(Ae=oe.props&&oe.props.onVnodeUpdated)&&sr(()=>kr(Ae,ge,oe,Ee),ce)}else{let oe;const{el:he,props:pe}=N,{bm:ge,m:Ee,parent:we,root:Ae,type:De}=D,me=Ta(N);_n(D,!1),ge&&wo(ge),!me&&(oe=pe&&pe.onVnodeBeforeMount)&&kr(oe,we,N),_n(D,!0);{Ae.ce&&Ae.ce._injectChildStyle(De);const ue=D.subTree=Tf(D);w(null,ue,K,ne,D,ce,ie),N.el=ue.el}if(Ee&&sr(Ee,ce),!me&&(oe=pe&&pe.onVnodeMounted)){const ue=N;sr(()=>kr(oe,we,ue),ce)}(N.shapeFlag&256||we&&Ta(we.vnode)&&we.vnode.shapeFlag&256)&&D.a&&sr(D.a,ce),D.isMounted=!0,N=K=ne=null}};D.scope.on();const Q=D.effect=new Xh(X);D.scope.off();const Z=D.update=Q.run.bind(Q),fe=D.job=Q.runIfDirty.bind(Q);fe.i=D,fe.id=D.uid,Q.scheduler=()=>Rc(fe),_n(D,!0),Z()},k=(D,N,K)=>{N.component=D;const ne=D.vnode.props;D.vnode=N,D.next=null,E0(D,N.props,ne,K),P0(D,N.children,K),Xr(),mf(D),Zr()},F=(D,N,K,ne,ce,ie,le,X,Q=!1)=>{const Z=D&&D.children,fe=D?D.shapeFlag:0,oe=N.children,{patchFlag:he,shapeFlag:pe}=N;if(he>0){if(he&128){j(Z,oe,K,ne,ce,ie,le,X,Q);return}else if(he&256){G(Z,oe,K,ne,ce,ie,le,X,Q);return}}pe&8?(fe&16&&$(Z,ce,ie),oe!==Z&&c(K,oe)):fe&16?pe&16?j(Z,oe,K,ne,ce,ie,le,X,Q):$(Z,ce,ie,!0):(fe&8&&c(K,""),pe&16&&T(oe,K,ne,ce,ie,le,X,Q))},G=(D,N,K,ne,ce,ie,le,X,Q)=>{D=D||Ca,N=N||Ca;const Z=D.length,fe=N.length,oe=Math.min(Z,fe);let he;for(he=0;he<oe;he++){const pe=N[he]=Q?dn(N[he]):Lr(N[he]);w(D[he],pe,K,null,ce,ie,le,X,Q)}Z>fe?$(D,ce,ie,!0,!1,oe):T(N,K,ne,ce,ie,le,X,Q,oe)},j=(D,N,K,ne,ce,ie,le,X,Q)=>{let Z=0;const fe=N.length;let oe=D.length-1,he=fe-1;for(;Z<=oe&&Z<=he;){const pe=D[Z],ge=N[Z]=Q?dn(N[Z]):Lr(N[Z]);if(Hn(pe,ge))w(pe,ge,K,null,ce,ie,le,X,Q);else break;Z++}for(;Z<=oe&&Z<=he;){const pe=D[oe],ge=N[he]=Q?dn(N[he]):Lr(N[he]);if(Hn(pe,ge))w(pe,ge,K,null,ce,ie,le,X,Q);else break;oe--,he--}if(Z>oe){if(Z<=he){const pe=he+1,ge=pe<fe?N[pe].el:ne;for(;Z<=he;)w(null,N[Z]=Q?dn(N[Z]):Lr(N[Z]),K,ge,ce,ie,le,X,Q),Z++}}else if(Z>he)for(;Z<=oe;)I(D[Z],ce,ie,!0),Z++;else{const pe=Z,ge=Z,Ee=new Map;for(Z=ge;Z<=he;Z++){const ae=N[Z]=Q?dn(N[Z]):Lr(N[Z]);ae.key!=null&&Ee.set(ae.key,Z)}let we,Ae=0;const De=he-ge+1;let me=!1,ue=0;const O=new Array(De);for(Z=0;Z<De;Z++)O[Z]=0;for(Z=pe;Z<=oe;Z++){const ae=D[Z];if(Ae>=De){I(ae,ce,ie,!0);continue}let se;if(ae.key!=null)se=Ee.get(ae.key);else for(we=ge;we<=he;we++)if(O[we-ge]===0&&Hn(ae,N[we])){se=we;break}se===void 0?I(ae,ce,ie,!0):(O[se-ge]=Z+1,se>=ue?ue=se:me=!0,w(ae,N[se],K,null,ce,ie,le,X,Q),Ae++)}const re=me?B0(O):Ca;for(we=re.length-1,Z=De-1;Z>=0;Z--){const ae=ge+Z,se=N[ae],de=ae+1<fe?N[ae+1].el:ne;O[Z]===0?w(null,se,K,de,ce,ie,le,X,Q):me&&(we<0||Z!==re[we]?H(se,K,de,2):we--)}}},H=(D,N,K,ne,ce=null)=>{const{el:ie,type:le,transition:X,children:Q,shapeFlag:Z}=D;if(Z&6){H(D.component.subTree,N,K,ne);return}if(Z&128){D.suspense.move(N,K,ne);return}if(Z&64){le.move(D,N,K,U);return}if(le===it){n(ie,N,K);for(let oe=0;oe<Q.length;oe++)H(Q[oe],N,K,ne);n(D.anchor,N,K);return}if(le===Ks){p(D,N,K);return}if(ne!==2&&Z&1&&X)if(ne===0)X.beforeEnter(ie),n(ie,N,K),sr(()=>X.enter(ie),ce);else{const{leave:oe,delayLeave:he,afterLeave:pe}=X,ge=()=>{D.ctx.isUnmounted?a(ie):n(ie,N,K)},Ee=()=>{oe(ie,()=>{ge(),pe&&pe()})};he?he(ie,ge,Ee):Ee()}else n(ie,N,K)},I=(D,N,K,ne=!1,ce=!1)=>{const{type:ie,props:le,ref:X,children:Q,dynamicChildren:Z,shapeFlag:fe,patchFlag:oe,dirs:he,cacheIndex:pe}=D;if(oe===-2&&(ce=!1),X!=null&&(Xr(),Vo(X,null,K,D,!0),Zr()),pe!=null&&(N.renderCache[pe]=void 0),fe&256){N.ctx.deactivate(D);return}const ge=fe&1&&he,Ee=!Ta(D);let we;if(Ee&&(we=le&&le.onVnodeBeforeUnmount)&&kr(we,N,D),fe&6)z(D.component,K,ne);else{if(fe&128){D.suspense.unmount(K,ne);return}ge&&In(D,null,N,"beforeUnmount"),fe&64?D.type.remove(D,N,K,U,ne):Z&&!Z.hasOnce&&(ie!==it||oe>0&&oe&64)?$(Z,N,K,!1,!0):(ie===it&&oe&384||!ce&&fe&16)&&$(Q,N,K),ne&&M(D)}(Ee&&(we=le&&le.onVnodeUnmounted)||ge)&&sr(()=>{we&&kr(we,N,D),ge&&In(D,null,N,"unmounted")},K)},M=D=>{const{type:N,el:K,anchor:ne,transition:ce}=D;if(N===it){B(K,ne);return}if(N===Ks){b(D);return}const ie=()=>{a(K),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(D.shapeFlag&1&&ce&&!ce.persisted){const{leave:le,delayLeave:X}=ce,Q=()=>le(K,ie);X?X(D.el,ie,Q):Q()}else ie()},B=(D,N)=>{let K;for(;D!==N;)K=d(D),a(D),D=K;a(N)},z=(D,N,K)=>{const{bum:ne,scope:ce,job:ie,subTree:le,um:X,m:Q,a:Z,parent:fe,slots:{__:oe}}=D;Sf(Q),Sf(Z),ne&&wo(ne),fe&&ke(oe)&&oe.forEach(he=>{fe.renderCache[he]=void 0}),ce.stop(),ie&&(ie.flags|=8,I(le,D,N,K)),X&&sr(X,N),sr(()=>{D.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},$=(D,N,K,ne=!1,ce=!1,ie=0)=>{for(let le=ie;le<D.length;le++)I(D[le],N,K,ne,ce)},W=D=>{if(D.shapeFlag&6)return W(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const N=d(D.anchor||D.el),K=N&&N[Zy];return K?d(K):N};let ee=!1;const Y=(D,N,K)=>{D==null?N._vnode&&I(N._vnode,null,null,!0):w(N._vnode||null,D,N,null,null,null,K),N._vnode=D,ee||(ee=!0,mf(),hg(),ee=!1)},U={p:w,um:I,m:H,r:M,mt:V,mc:T,pc:F,pbc:P,n:W,o:t};return{render:Y,hydrate:void 0,createApp:b0(Y)}}function Ws({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function _n({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function R0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function zg(t,e,r=!1){const n=t.children,a=e.children;if(ke(n)&&ke(a))for(let i=0;i<n.length;i++){const o=n[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=dn(a[i]),s.el=o.el),!r&&s.patchFlag!==-2&&zg(o,s)),s.type===ps&&(s.el=o.el),s.type===Gt&&!s.el&&(s.el=o.el)}}function B0(t){const e=t.slice(),r=[0];let n,a,i,o,s;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(a=r[r.length-1],t[a]<u){e[n]=a,r.push(n);continue}for(i=0,o=r.length-1;i<o;)s=i+o>>1,t[r[s]]<u?i=s+1:o=s;u<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function Fg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Fg(e)}function Sf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const M0=Symbol.for("v-scx"),L0=()=>fi(M0);function ur(t,e,r){return Vg(t,e,r)}function Vg(t,e,r=Qe){const{immediate:n,deep:a,flush:i,once:o}=r,s=kt({},r),l=e&&n||!e&&i!=="post";let u;if(Ei){if(i==="sync"){const g=L0();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=_r,g.resume=_r,g.pause=_r,g}}const c=It;s.call=(g,h,w)=>Sr(g,c,h,w);let f=!1;i==="post"?s.scheduler=g=>{sr(g,c&&c.suspense)}:i!=="sync"&&(f=!0,s.scheduler=(g,h)=>{h?g():Rc(g)}),s.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const d=Ky(t,e,s);return Ei&&(u?u.push(d):l&&d()),d}function I0(t,e,r){const n=this.proxy,a=gt(t)?t.includes(".")?$g(n,t):()=>n[t]:t.bind(n,n);let i;Oe(e)?i=e:(i=e.handler,r=e);const o=zi(this),s=Vg(a,i.bind(n),r);return o(),s}function $g(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const _0=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${yn(e)}Modifiers`]||t[`${Pn(e)}Modifiers`];function O0(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Qe;let a=r;const i=e.startsWith("update:"),o=i&&_0(n,e.slice(7));o&&(o.trim&&(a=r.map(c=>gt(c)?c.trim():c)),o.number&&(a=r.map(zu)));let s,l=n[s=Fs(e)]||n[s=Fs(yn(e))];!l&&i&&(l=n[s=Fs(Pn(e))]),l&&Sr(l,t,6,a);const u=n[s+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Sr(u,t,6,a)}}function qg(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let o={},s=!1;if(!Oe(t)){const l=u=>{const c=qg(u,e,!0);c&&(s=!0,kt(o,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!s?(et(t)&&n.set(t,null),null):(ke(i)?i.forEach(l=>o[l]=null):kt(o,i),et(t)&&n.set(t,o),o)}function gs(t,e){return!t||!is(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(t,e[0].toLowerCase()+e.slice(1))||Ke(t,Pn(e))||Ke(t,e))}function Tf(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:f,data:d,setupState:g,ctx:h,inheritAttrs:w}=t,y=Fo(t);let v,m;try{if(r.shapeFlag&4){const b=a||n,x=b;v=Lr(u.call(x,b,c,f,g,d,h)),m=s}else{const b=e;v=Lr(b.length>1?b(f,{attrs:s,slots:o,emit:l}):b(f,null)),m=e.props?s:N0(s)}}catch(b){di.length=0,ds(b,t,1),v=be(Gt)}let p=v;if(m&&w!==!1){const b=Object.keys(m),{shapeFlag:x}=p;b.length&&x&7&&(i&&b.some(yc)&&(m=z0(m,i)),p=wn(p,m,!1,!0))}return r.dirs&&(p=wn(p,null,!1,!0),p.dirs=p.dirs?p.dirs.concat(r.dirs):r.dirs),r.transition&&wi(p,r.transition),v=p,Fo(y),v}const N0=t=>{let e;for(const r in t)(r==="class"||r==="style"||is(r))&&((e||(e={}))[r]=t[r]);return e},z0=(t,e)=>{const r={};for(const n in t)(!yc(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function F0(t,e,r){const{props:n,children:a,component:i}=t,{props:o,children:s,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Df(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(o[d]!==n[d]&&!gs(u,d))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?Df(n,o,u):!0:!!o;return!1}function Df(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(e[i]!==t[i]&&!gs(r,i))return!0}return!1}function V0({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const Gg=t=>t.__isSuspense;function $0(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):Xy(t)}const it=Symbol.for("v-fgt"),ps=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),Ks=Symbol.for("v-stc"),di=[];let lr=null;function Pe(t=!1){di.push(lr=t?null:[])}function q0(){di.pop(),lr=di[di.length-1]||null}let xi=1;function Pf(t,e=!1){xi+=t,t<0&&lr&&e&&(lr.hasOnce=!0)}function Hg(t){return t.dynamicChildren=xi>0?lr||Ca:null,q0(),xi>0&&lr&&lr.push(t),t}function Me(t,e,r,n,a,i){return Hg(te(t,e,r,n,a,i,!0))}function Ma(t,e,r,n,a){return Hg(be(t,e,r,n,a,!0))}function Ci(t){return t?t.__v_isVNode===!0:!1}function Hn(t,e){return t.type===e.type&&t.key===e.key}const Ug=({key:t})=>t??null,xo=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?gt(t)||ht(t)||Oe(t)?{i:Dt,r:t,k:e,f:!!r}:t:null);function te(t,e=null,r=null,n=0,a=null,i=t===it?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ug(e),ref:e&&xo(e),scopeId:pg,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Dt};return s?(Lc(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=gt(r)?8:16),xi>0&&!o&&lr&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&lr.push(l),l}const be=G0;function G0(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===f0)&&(t=Gt),Ci(t)){const s=wn(t,e,!0);return r&&Lc(s,r),xi>0&&!i&&lr&&(s.shapeFlag&6?lr[lr.indexOf(t)]=s:lr.push(s)),s.patchFlag=-2,s}if(eb(t)&&(t=t.__vccOpts),e){e=H0(e);let{class:s,style:l}=e;s&&!gt(s)&&(e.class=at(s)),et(l)&&(Pc(l)&&!ke(l)&&(l=kt({},l)),e.style=Zn(l))}const o=gt(t)?1:Gg(t)?128:mg(t)?64:et(t)?4:Oe(t)?2:0;return te(t,e,r,n,a,o,i,!0)}function H0(t){return t?Pc(t)||Mg(t)?kt({},t):t:null}function wn(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:o,children:s,transition:l}=t,u=e?U0(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ug(u),ref:e&&e.ref?r&&i?ke(i)?i.concat(xo(e)):[i,xo(e)]:xo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==it?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wn(t.ssContent),ssFallback:t.ssFallback&&wn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&wi(c,l.clone(c)),c}function Ve(t=" ",e=0){return be(ps,null,t,e)}function $t(t="",e=!1){return e?(Pe(),Ma(Gt,null,t)):be(Gt,null,t)}function Lr(t){return t==null||typeof t=="boolean"?be(Gt):ke(t)?be(it,null,t.slice()):Ci(t)?dn(t):be(ps,null,String(t))}function dn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wn(t)}function Lc(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ke(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),Lc(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!Mg(e)?e._ctx=Dt:a===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:Dt},r=32):(e=String(e),n&64?(r=16,e=[Ve(e)]):r=8);t.children=e,t.shapeFlag|=r}function U0(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=at([e.class,n.class]));else if(a==="style")e.style=Zn([e.style,n.style]);else if(is(a)){const i=e[a],o=n[a];o&&i!==o&&!(ke(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=n[a])}return e}function kr(t,e,r,n=null){Sr(t,e,7,[r,n])}const W0=Ag();let K0=0;function j0(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||W0,i={uid:K0++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ig(n,a),emitsOptions:qg(n,a),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:n.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=O0.bind(null,i),t.ce&&t.ce(i),i}let It=null;const Y0=()=>It||Dt;let qo,Ku;{const t=ls(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};qo=e("__VUE_INSTANCE_SETTERS__",r=>It=r),Ku=e("__VUE_SSR_SETTERS__",r=>Ei=r)}const zi=t=>{const e=It;return qo(t),t.scope.on(),()=>{t.scope.off(),qo(e)}},kf=()=>{It&&It.scope.off(),qo(null)};function Wg(t){return t.vnode.shapeFlag&4}let Ei=!1;function X0(t,e=!1,r=!1){e&&Ku(e);const{props:n,children:a}=t.vnode,i=Wg(t);C0(t,n,i,e),D0(t,a,r||e);const o=i?Z0(t,e):void 0;return e&&Ku(!1),o}function Z0(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,d0);const{setup:n}=r;if(n){Xr();const a=t.setupContext=n.length>1?J0(t):null,i=zi(t),o=Ni(n,t,0,[t.props,a]),s=zh(o);if(Zr(),i(),(s||t.sp)&&!Ta(t)&&Eg(t),s){if(o.then(kf,kf),e)return o.then(l=>{Af(t,l)}).catch(l=>{ds(l,t,0)});t.asyncDep=o}else Af(t,o)}else Kg(t)}function Af(t,e,r){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=fg(e)),Kg(t)}function Kg(t,e,r){const n=t.type;t.render||(t.render=n.render||_r);{const a=zi(t);Xr();try{v0(t)}finally{Zr(),a()}}}const Q0={get(t,e){return qt(t,"get",""),t[e]}};function J0(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Q0),slots:t.slots,emit:t.emit,expose:e}}function ms(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(fg(kc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ci)return ci[r](t)},has(e,r){return r in e||r in ci}})):t.proxy}function eb(t){return Oe(t)&&"__vccOpts"in t}const dt=(t,e)=>Uy(t,e,Ei);function tb(t,e,r){const n=arguments.length;return n===2?et(e)&&!ke(e)?Ci(e)?be(t,null,[e]):be(t,e):be(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Ci(r)&&(r=[r]),be(t,e,r))}const rb="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ju;const Rf=typeof window<"u"&&window.trustedTypes;if(Rf)try{ju=Rf.createPolicy("vue",{createHTML:t=>t})}catch{}const jg=ju?t=>ju.createHTML(t):t=>t,nb="http://www.w3.org/2000/svg",ab="http://www.w3.org/1998/Math/MathML",Ur=typeof document<"u"?document:null,Bf=Ur&&Ur.createElement("template"),ib={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Ur.createElementNS(nb,t):e==="mathml"?Ur.createElementNS(ab,t):r?Ur.createElement(t,{is:r}):Ur.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Ur.createTextNode(t),createComment:t=>Ur.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ur.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const o=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{Bf.innerHTML=jg(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const s=Bf.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},on="transition",ja="animation",Si=Symbol("_vtc"),Yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ob=kt({},yg,Yg),sb=t=>(t.displayName="Transition",t.props=ob,t),Ic=sb((t,{slots:e})=>tb(e0,lb(t),e)),On=(t,e=[])=>{ke(t)?t.forEach(r=>r(...e)):t&&t(...e)},Mf=t=>t?ke(t)?t.some(e=>e.length>1):t.length>1:!1;function lb(t){const e={};for(const A in t)A in Yg||(e[A]=t[A]);if(t.css===!1)return e;const{name:r="v",type:n,duration:a,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:g=`${r}-leave-to`}=t,h=ub(a),w=h&&h[0],y=h&&h[1],{onBeforeEnter:v,onEnter:m,onEnterCancelled:p,onLeave:b,onLeaveCancelled:x,onBeforeAppear:C=v,onAppear:E=m,onAppearCancelled:T=p}=e,S=(A,_,V,q)=>{A._enterCancelled=q,Nn(A,_?c:s),Nn(A,_?u:o),V&&V()},P=(A,_)=>{A._isLeaving=!1,Nn(A,f),Nn(A,g),Nn(A,d),_&&_()},L=A=>(_,V)=>{const q=A?E:m,R=()=>S(_,A,V);On(q,[_,R]),Lf(()=>{Nn(_,A?l:i),$r(_,A?c:s),Mf(q)||If(_,n,w,R)})};return kt(e,{onBeforeEnter(A){On(v,[A]),$r(A,i),$r(A,o)},onBeforeAppear(A){On(C,[A]),$r(A,l),$r(A,u)},onEnter:L(!1),onAppear:L(!0),onLeave(A,_){A._isLeaving=!0;const V=()=>P(A,_);$r(A,f),A._enterCancelled?($r(A,d),Nf()):(Nf(),$r(A,d)),Lf(()=>{A._isLeaving&&(Nn(A,f),$r(A,g),Mf(b)||If(A,n,y,V))}),On(b,[A,V])},onEnterCancelled(A){S(A,!1,void 0,!0),On(p,[A])},onAppearCancelled(A){S(A,!0,void 0,!0),On(T,[A])},onLeaveCancelled(A){P(A),On(x,[A])}})}function ub(t){if(t==null)return null;if(et(t))return[js(t.enter),js(t.leave)];{const e=js(t);return[e,e]}}function js(t){return uy(t)}function $r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Si]||(t[Si]=new Set)).add(e)}function Nn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Si];r&&(r.delete(e),r.size||(t[Si]=void 0))}function Lf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let cb=0;function If(t,e,r,n){const a=t._endId=++cb,i=()=>{a===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:o,timeout:s,propCount:l}=fb(t,e);if(!o)return n();const u=o+"end";let c=0;const f=()=>{t.removeEventListener(u,d),i()},d=g=>{g.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),t.addEventListener(u,d)}function fb(t,e){const r=window.getComputedStyle(t),n=h=>(r[h]||"").split(", "),a=n(`${on}Delay`),i=n(`${on}Duration`),o=_f(a,i),s=n(`${ja}Delay`),l=n(`${ja}Duration`),u=_f(s,l);let c=null,f=0,d=0;e===on?o>0&&(c=on,f=o,d=i.length):e===ja?u>0&&(c=ja,f=u,d=l.length):(f=Math.max(o,u),c=f>0?o>u?on:ja:null,d=c?c===on?i.length:l.length:0);const g=c===on&&/\b(transform|all)(,|$)/.test(n(`${on}Property`).toString());return{type:c,timeout:f,propCount:d,hasTransform:g}}function _f(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Of(r)+Of(t[n])))}function Of(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Nf(){return document.body.offsetHeight}function db(t,e,r){const n=t[Si];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Go=Symbol("_vod"),Xg=Symbol("_vsh"),qr={beforeMount(t,{value:e},{transition:r}){t[Go]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Ya(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),Ya(t,!0),n.enter(t)):n.leave(t,()=>{Ya(t,!1)}):Ya(t,e))},beforeUnmount(t,{value:e}){Ya(t,e)}};function Ya(t,e){t.style.display=e?t[Go]:"none",t[Xg]=!e}const vb=Symbol(""),hb=/(^|;)\s*display\s*:/;function gb(t,e,r){const n=t.style,a=gt(r);let i=!1;if(r&&!a){if(e)if(gt(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&Co(n,s,"")}else for(const o in e)r[o]==null&&Co(n,o,"");for(const o in r)o==="display"&&(i=!0),Co(n,o,r[o])}else if(a){if(e!==r){const o=n[vb];o&&(r+=";"+o),n.cssText=r,i=hb.test(r)}}else e&&t.removeAttribute("style");Go in t&&(t[Go]=i?n.display:"",t[Xg]&&(n.display="none"))}const zf=/\s*!important$/;function Co(t,e,r){if(ke(r))r.forEach(n=>Co(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=pb(t,e);zf.test(r)?t.setProperty(Pn(n),r.replace(zf,""),"important"):t[n]=r}}const Ff=["Webkit","Moz","ms"],Ys={};function pb(t,e){const r=Ys[e];if(r)return r;let n=yn(e);if(n!=="filter"&&n in t)return Ys[e]=n;n=$h(n);for(let a=0;a<Ff.length;a++){const i=Ff[a]+n;if(i in t)return Ys[e]=i}return e}const Vf="http://www.w3.org/1999/xlink";function $f(t,e,r,n,a,i=gy(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Vf,e.slice(6,e.length)):t.setAttributeNS(Vf,e,r):r==null||i&&!Gh(r)?t.removeAttribute(e):t.setAttribute(e,i?"":Er(r)?String(r):r)}function qf(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?jg(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(s!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const s=typeof t[e];s==="boolean"?r=Gh(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(a||e)}function Un(t,e,r,n){t.addEventListener(e,r,n)}function mb(t,e,r,n){t.removeEventListener(e,r,n)}const Gf=Symbol("_vei");function yb(t,e,r,n,a=null){const i=t[Gf]||(t[Gf]={}),o=i[e];if(n&&o)o.value=n;else{const[s,l]=bb(e);if(n){const u=i[e]=Cb(n,a);Un(t,s,u,l)}else o&&(mb(t,s,o,l),i[e]=void 0)}}const Hf=/(?:Once|Passive|Capture)$/;function bb(t){let e;if(Hf.test(t)){e={};let n;for(;n=t.match(Hf);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pn(t.slice(2)),e]}let Xs=0;const wb=Promise.resolve(),xb=()=>Xs||(wb.then(()=>Xs=0),Xs=Date.now());function Cb(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Sr(Eb(n,r.value),e,5,[n])};return r.value=t,r.attached=xb(),r}function Eb(t,e){if(ke(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const Uf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Sb=(t,e,r,n,a,i)=>{const o=a==="svg";e==="class"?db(t,n,o):e==="style"?gb(t,r,n):is(e)?yc(e)||yb(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Tb(t,e,n,o))?(qf(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&$f(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!gt(n))?qf(t,yn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),$f(t,e,n,o))};function Tb(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Uf(e)&&Oe(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Uf(e)&&gt(r)?!1:e in t}const Ho=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ke(e)?r=>wo(e,r):e};function Db(t){t.target.composing=!0}function Wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Pa=Symbol("_assign"),Pb={created(t,{modifiers:{lazy:e,trim:r,number:n}},a){t[Pa]=Ho(a);const i=n||a.props&&a.props.type==="number";Un(t,e?"change":"input",o=>{if(o.target.composing)return;let s=t.value;r&&(s=s.trim()),i&&(s=zu(s)),t[Pa](s)}),r&&Un(t,"change",()=>{t.value=t.value.trim()}),e||(Un(t,"compositionstart",Db),Un(t,"compositionend",Wf),Un(t,"change",Wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:a,number:i}},o){if(t[Pa]=Ho(o),t.composing)return;const s=(i||t.type==="number")&&!/^0\d/.test(t.value)?zu(t.value):t.value,l=e??"";s!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||a&&t.value.trim()===l)||(t.value=l))}},kb={deep:!0,created(t,e,r){t[Pa]=Ho(r),Un(t,"change",()=>{const n=t._modelValue,a=Ab(t),i=t.checked,o=t[Pa];if(ke(n)){const s=Hh(n,a),l=s!==-1;if(i&&!l)o(n.concat(a));else if(!i&&l){const u=[...n];u.splice(s,1),o(u)}}else if(os(n)){const s=new Set(n);i?s.add(a):s.delete(a),o(s)}else o(Zg(t,i))})},mounted:Kf,beforeUpdate(t,e,r){t[Pa]=Ho(r),Kf(t,e,r)}};function Kf(t,{value:e,oldValue:r},n){t._modelValue=e;let a;if(ke(e))a=Hh(e,n.props.value)>-1;else if(os(e))a=e.has(n.props.value);else{if(e===r)return;a=us(e,Zg(t,!0))}t.checked!==a&&(t.checked=a)}function Ab(t){return"_value"in t?t._value:t.value}function Zg(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const Rb=["ctrl","shift","alt","meta"],Bb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Rb.some(r=>t[`${r}Key`]&&!e.includes(r))},yr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(a,...i)=>{for(let o=0;o<e.length;o++){const s=Bb[e[o]];if(s&&s(a,e))return}return t(a,...i)})},Mb={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},jf=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=a=>{if(!("key"in a))return;const i=Pn(a.key);if(e.some(o=>o===i||Mb[o]===i))return t(a)})},Lb=kt({patchProp:Sb},ib);let Yf;function Ib(){return Yf||(Yf=k0(Lb))}const _b=(...t)=>{const e=Ib().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=Nb(n);if(!a)return;const i=e._component;!Oe(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,Ob(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function Ob(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Nb(t){return gt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Qg;const ys=t=>Qg=t,Jg=Symbol();function Yu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var vi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(vi||(vi={}));function zb(){const t=jh(!0),e=t.run(()=>qe({}));let r=[],n=[];const a=kc({install(i){ys(a),a._a=i,i.provide(Jg,a),i.config.globalProperties.$pinia=a,n.forEach(o=>r.push(o)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return a}const ep=()=>{};function Xf(t,e,r,n=ep){t.push(e);const a=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&Yh()&&my(a),a}function la(t,...e){t.slice().forEach(r=>{r(...e)})}const Fb=t=>t(),Zf=Symbol(),Zs=Symbol();function Xu(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],a=t[r];Yu(a)&&Yu(n)&&t.hasOwnProperty(r)&&!ht(n)&&!gn(n)?t[r]=Xu(a,n):t[r]=n}return t}const Vb=Symbol();function $b(t){return!Yu(t)||!Object.prototype.hasOwnProperty.call(t,Vb)}const{assign:un}=Object;function qb(t){return!!(ht(t)&&t.effect)}function Gb(t,e,r,n){const{state:a,actions:i,getters:o}=e,s=r.state.value[t];let l;function u(){s||(r.state.value[t]=a?a():{});const c=$y(r.state.value[t]);return un(c,i,Object.keys(o||{}).reduce((f,d)=>(f[d]=kc(dt(()=>{ys(r);const g=r._s.get(t);return o[d].call(g,g)})),f),{}))}return l=tp(t,u,e,r,n,!0),l}function tp(t,e,r={},n,a,i){let o;const s=un({actions:{}},r),l={deep:!0};let u,c,f=[],d=[],g;const h=n.state.value[t];!i&&!h&&(n.state.value[t]={}),qe({});let w;function y(T){let S;u=c=!1,typeof T=="function"?(T(n.state.value[t]),S={type:vi.patchFunction,storeId:t,events:g}):(Xu(n.state.value[t],T),S={type:vi.patchObject,payload:T,storeId:t,events:g});const P=w=Symbol();Ac().then(()=>{w===P&&(u=!0)}),c=!0,la(f,S,n.state.value[t])}const v=i?function(){const{state:S}=r,P=S?S():{};this.$patch(L=>{un(L,P)})}:ep;function m(){o.stop(),f=[],d=[],n._s.delete(t)}const p=(T,S="")=>{if(Zf in T)return T[Zs]=S,T;const P=function(){ys(n);const L=Array.from(arguments),A=[],_=[];function V(k){A.push(k)}function q(k){_.push(k)}la(d,{args:L,name:P[Zs],store:x,after:V,onError:q});let R;try{R=T.apply(this&&this.$id===t?this:x,L)}catch(k){throw la(_,k),k}return R instanceof Promise?R.then(k=>(la(A,k),k)).catch(k=>(la(_,k),Promise.reject(k))):(la(A,R),R)};return P[Zf]=!0,P[Zs]=S,P},b={_p:n,$id:t,$onAction:Xf.bind(null,d),$patch:y,$reset:v,$subscribe(T,S={}){const P=Xf(f,T,S.detached,()=>L()),L=o.run(()=>ur(()=>n.state.value[t],A=>{(S.flush==="sync"?c:u)&&T({storeId:t,type:vi.direct,events:g},A)},un({},l,S)));return P},$dispose:m},x=fs(b);n._s.set(t,x);const E=(n._a&&n._a.runWithContext||Fb)(()=>n._e.run(()=>(o=jh()).run(()=>e({action:p}))));for(const T in E){const S=E[T];if(ht(S)&&!qb(S)||gn(S))i||(h&&$b(S)&&(ht(S)?S.value=h[T]:Xu(S,h[T])),n.state.value[t][T]=S);else if(typeof S=="function"){const P=p(S,T);E[T]=P,s.actions[T]=S}}return un(x,E),un(He(x),E),Object.defineProperty(x,"$state",{get:()=>n.state.value[t],set:T=>{y(S=>{un(S,T)})}}),n._p.forEach(T=>{un(x,o.run(()=>T({store:x,app:n._a,pinia:n,options:s})))}),h&&i&&r.hydrate&&r.hydrate(x.$state,h),u=!0,c=!0,x}/*! #__NO_SIDE_EFFECTS__ */function _c(t,e,r){let n;const a=typeof e=="function";n=a?r:e;function i(o,s){const l=x0();return o=o||(l?fi(Jg,null):null),o&&ys(o),o=Qg,o._s.has(t)||(a?tp(t,e,n,o):Gb(t,n,o)),o._s.get(t)}return i.$id=t,i}function Zu(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Hb(t){if(Array.isArray(t))return t}function Ub(t){if(Array.isArray(t))return Zu(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,np(n.key),n)}}function An(t,e,r){return e&&Wb(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ir(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Oc(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){s=!0,i=l},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw i}}}}function rp(t,e,r){return(e=np(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kb(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jb(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Yb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(t,e){return Hb(t)||jb(t,e)||Oc(t,e)||Yb()}function Uo(t){return Ub(t)||Kb(t)||Oc(t)||Xb()}function Zb(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function np(t){var e=Zb(t,"string");return typeof e=="symbol"?e:e+""}function Ct(t){"@babel/helpers - typeof";return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(t)}function Oc(t,e){if(t){if(typeof t=="string")return Zu(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zu(t,e):void 0}}var bt=typeof window>"u"?null:window,Qf=bt?bt.navigator:null;bt&&bt.document;var Qb=Ct(""),ap=Ct({}),Jb=Ct(function(){}),e1=typeof HTMLElement>"u"?"undefined":Ct(HTMLElement),Fi=function(e){return e&&e.instanceString&&ut(e.instanceString)?e.instanceString():null},Te=function(e){return e!=null&&Ct(e)==Qb},ut=function(e){return e!=null&&Ct(e)===Jb},Je=function(e){return!cr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ue=function(e){return e!=null&&Ct(e)===ap&&!Je(e)&&e.constructor===Object},t1=function(e){return e!=null&&Ct(e)===ap},ye=function(e){return e!=null&&Ct(e)===Ct(1)&&!isNaN(e)},r1=function(e){return ye(e)&&Math.floor(e)===e},Wo=function(e){if(e1!=="undefined")return e!=null&&e instanceof HTMLElement},cr=function(e){return Vi(e)||ip(e)},Vi=function(e){return Fi(e)==="collection"&&e._private.single},ip=function(e){return Fi(e)==="collection"&&!e._private.single},Nc=function(e){return Fi(e)==="core"},op=function(e){return Fi(e)==="stylesheet"},n1=function(e){return Fi(e)==="event"},xn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},a1=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},i1=function(e){return Ue(e)&&ye(e.x1)&&ye(e.x2)&&ye(e.y1)&&ye(e.y2)},o1=function(e){return t1(e)&&ut(e.then)},s1=function(){return Qf&&Qf.userAgent.match(/msie|trident|edge/i)},La=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,s,l=r.apply(i,o),u=n.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},zc=La(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),bs=La(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),sp=La(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Jf=function(e){return xn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},xt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",l1="rgb[a]?\\(("+xt+"[%]?)\\s*,\\s*("+xt+"[%]?)\\s*,\\s*("+xt+"[%]?)(?:\\s*,\\s*("+xt+"))?\\)",u1="rgb[a]?\\((?:"+xt+"[%]?)\\s*,\\s*(?:"+xt+"[%]?)\\s*,\\s*(?:"+xt+"[%]?)(?:\\s*,\\s*(?:"+xt+"))?\\)",c1="hsl[a]?\\(("+xt+")\\s*,\\s*("+xt+"[%])\\s*,\\s*("+xt+"[%])(?:\\s*,\\s*("+xt+"))?\\)",f1="hsl[a]?\\((?:"+xt+")\\s*,\\s*(?:"+xt+"[%])\\s*,\\s*(?:"+xt+"[%])(?:\\s*,\\s*(?:"+xt+"))?\\)",d1="\\#[0-9a-fA-F]{3}",v1="\\#[0-9a-fA-F]{6}",lp=function(e,r){return e<r?-1:e>r?1:0},h1=function(e,r){return-1*lp(e,r)},Re=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},g1=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},p1=function(e){var r,n,a,i,o,s,l,u;function c(h,w,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+(w-h)*6*y:y<1/2?w:y<2/3?h+(w-h)*(2/3-y)*6:h}var f=new RegExp("^"+c1+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,g=2*i-d;s=Math.round(255*c(g,d,n+1/3)),l=Math.round(255*c(g,d,n)),u=Math.round(255*c(g,d,n-1/3))}r=[s,l,u,o]}return r},m1=function(e){var r,n=new RegExp("^"+l1+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},y1=function(e){return b1[e.toLowerCase()]},up=function(e){return(Je(e)?e:null)||y1(e)||g1(e)||m1(e)||p1(e)},b1={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cp=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ue(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},fp=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Ue(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qs,ed;function qi(){if(ed)return Qs;ed=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Qs=t,Qs}var Js,td;function w1(){if(td)return Js;td=1;var t=typeof io=="object"&&io&&io.Object===Object&&io;return Js=t,Js}var el,rd;function ws(){if(rd)return el;rd=1;var t=w1(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return el=r,el}var tl,nd;function x1(){if(nd)return tl;nd=1;var t=ws(),e=function(){return t.Date.now()};return tl=e,tl}var rl,ad;function C1(){if(ad)return rl;ad=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return rl=e,rl}var nl,id;function E1(){if(id)return nl;id=1;var t=C1(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return nl=r,nl}var al,od;function Fc(){if(od)return al;od=1;var t=ws(),e=t.Symbol;return al=e,al}var il,sd;function S1(){if(sd)return il;sd=1;var t=Fc(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),l=o[a];try{o[a]=void 0;var u=!0}catch{}var c=n.call(o);return u&&(s?o[a]=l:delete o[a]),c}return il=i,il}var ol,ld;function T1(){if(ld)return ol;ld=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return ol=r,ol}var sl,ud;function dp(){if(ud)return sl;ud=1;var t=Fc(),e=S1(),r=T1(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return sl=o,sl}var ll,cd;function D1(){if(cd)return ll;cd=1;function t(e){return e!=null&&typeof e=="object"}return ll=t,ll}var ul,fd;function Gi(){if(fd)return ul;fd=1;var t=dp(),e=D1(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return ul=n,ul}var cl,dd;function P1(){if(dd)return cl;dd=1;var t=E1(),e=qi(),r=Gi(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):a.test(u)?n:+u}return cl=l,cl}var fl,vd;function k1(){if(vd)return fl;vd=1;var t=qi(),e=x1(),r=P1(),n="Expected a function",a=Math.max,i=Math.min;function o(s,l,u){var c,f,d,g,h,w,y=0,v=!1,m=!1,p=!0;if(typeof s!="function")throw new TypeError(n);l=r(l)||0,t(u)&&(v=!!u.leading,m="maxWait"in u,d=m?a(r(u.maxWait)||0,l):d,p="trailing"in u?!!u.trailing:p);function b(_){var V=c,q=f;return c=f=void 0,y=_,g=s.apply(q,V),g}function x(_){return y=_,h=setTimeout(T,l),v?b(_):g}function C(_){var V=_-w,q=_-y,R=l-V;return m?i(R,d-q):R}function E(_){var V=_-w,q=_-y;return w===void 0||V>=l||V<0||m&&q>=d}function T(){var _=e();if(E(_))return S(_);h=setTimeout(T,C(_))}function S(_){return h=void 0,p&&c?b(_):(c=f=void 0,g)}function P(){h!==void 0&&clearTimeout(h),y=0,c=w=f=h=void 0}function L(){return h===void 0?g:S(e())}function A(){var _=e(),V=E(_);if(c=arguments,f=this,w=_,V){if(h===void 0)return x(w);if(m)return clearTimeout(h),h=setTimeout(T,l),b(w)}return h===void 0&&(h=setTimeout(T,l)),g}return A.cancel=P,A.flush=L,A}return fl=o,fl}var A1=k1(),Hi=$i(A1),dl=bt?bt.performance:null,vp=dl&&dl.now?function(){return dl.now()}:function(){return Date.now()},R1=function(){if(bt){if(bt.requestAnimationFrame)return function(t){bt.requestAnimationFrame(t)};if(bt.mozRequestAnimationFrame)return function(t){bt.mozRequestAnimationFrame(t)};if(bt.webkitRequestAnimationFrame)return function(t){bt.webkitRequestAnimationFrame(t)};if(bt.msRequestAnimationFrame)return function(t){bt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(vp())},1e3/60)}}(),Ko=function(e){return R1(e)},Qr=vp,Wn=9261,hp=65599,ya=5381,gp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wn,n=r,a;a=e.next(),!a.done;)n=n*hp+a.value|0;return n},Ti=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wn;return r*hp+e|0},Di=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ya;return(r<<5)+r+e|0},B1=function(e,r){return e*2097152+r},sn=function(e){return e[0]*2097152+e[1]},oo=function(e,r){return[Ti(e[0],r[0]),Di(e[1],r[1])]},hd=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return gp(o,r)},Jn=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return gp(o,r)},pp=function(){return M1(arguments)},M1=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Jn(a):r=Jn(a,r)}return r},gd=!0,L1=console.warn!=null,I1=console.trace!=null,Vc=Number.MAX_SAFE_INTEGER||9007199254740991,mp=function(){return!0},jo=function(){return!1},pd=function(){return 0},$c=function(){},lt=function(e){throw new Error(e)},yp=function(e){if(e!==void 0)gd=!!e;else return gd},Ye=function(e){yp()&&(L1?console.warn(e):(console.log(e),I1&&console.trace()))},_1=function(e){return Re({},e)},Ir=function(e){return e==null?e:Je(e)?e.slice():Ue(e)?_1(e):e},O1=function(e){return e.slice()},bp=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},N1={},wp=function(){return N1},Nt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},Cn=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},qc=function(e){e.splice(0,e.length)},z1=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},nr=function(e,r,n){return n&&(r=sp(n,r)),e[r]},Wr=function(e,r,n,a){n&&(r=sp(n,r)),e[r]=a},F1=function(){function t(){kn(this,t),this._obj={}}return An(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Yr=typeof Map<"u"?Map:F1,V1="undefined",$1=function(){function t(e){if(kn(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return An(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),Fa=(typeof Set>"u"?"undefined":Ct(Set))!==V1?Set:$1,xs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Nc(e)){lt("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){lt("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Fa,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];Je(r.classes)?u=r.classes:Te(r.classes)&&(u=r.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var d=u[c];!d||d===""||i.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=r.style||r.css;g&&(Ye("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},md=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Ue(n)&&!cr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!ut(a)?a:i,a=ut(a)?a:function(){};for(var s=this._private.cy,l=n=Te(n)?this.filter(n):n,u=[],c=[],f={},d={},g={},h=0,w,y=this.byGroup(),v=y.nodes,m=y.edges,p=0;p<l.length;p++){var b=l[p],x=b.id();b.isNode()&&(u.unshift(b),e.bfs&&(g[x]=!0,c.push(b)),d[x]=0)}for(var C=function(){var _=e.bfs?u.shift():u.pop(),V=_.id();if(e.dfs){if(g[V])return 0;g[V]=!0,c.push(_)}var q=d[V],R=f[V],k=R!=null?R.source():null,F=R!=null?R.target():null,G=R==null?void 0:_.same(k)?F[0]:k[0],j;if(j=a(_,R,G,h++,q),j===!0)return w=_,1;if(j===!1)return 1;for(var H=_.connectedEdges().filter(function($){return(!i||$.source().same(_))&&m.has($)}),I=0;I<H.length;I++){var M=H[I],B=M.connectedNodes().filter(function($){return!$.same(_)&&v.has($)}),z=B.id();B.length!==0&&!g[z]&&(B=B[0],u.push(B),e.bfs&&(g[z]=!0,c.push(B)),f[z]=M,d[z]=d[V]+1)}},E;u.length!==0&&(E=C(),!(E!==0&&E===1)););for(var T=s.collection(),S=0;S<c.length;S++){var P=c[S],L=f[P.id()];L!=null&&T.push(L),T.push(P)}return{path:s.collection(T),found:s.collection(w)}}},Pi={breadthFirstSearch:md({bfs:!0}),depthFirstSearch:md({dfs:!0})};Pi.bfs=Pi.breadthFirstSearch;Pi.dfs=Pi.depthFirstSearch;var Eo={exports:{}},q1=Eo.exports,yd;function G1(){return yd||(yd=1,function(t,e){(function(){var r,n,a,i,o,s,l,u,c,f,d,g,h,w,y;a=Math.floor,f=Math.min,n=function(v,m){return v<m?-1:v>m?1:0},c=function(v,m,p,b,x){var C;if(p==null&&(p=0),x==null&&(x=n),p<0)throw new Error("lo must be non-negative");for(b==null&&(b=v.length);p<b;)C=a((p+b)/2),x(m,v[C])<0?b=C:p=C+1;return[].splice.apply(v,[p,p-p].concat(m)),m},s=function(v,m,p){return p==null&&(p=n),v.push(m),w(v,0,v.length-1,p)},o=function(v,m){var p,b;return m==null&&(m=n),p=v.pop(),v.length?(b=v[0],v[0]=p,y(v,0,m)):b=p,b},u=function(v,m,p){var b;return p==null&&(p=n),b=v[0],v[0]=m,y(v,0,p),b},l=function(v,m,p){var b;return p==null&&(p=n),v.length&&p(v[0],m)<0&&(b=[v[0],m],m=b[0],v[0]=b[1],y(v,0,p)),m},i=function(v,m){var p,b,x,C,E,T;for(m==null&&(m=n),C=(function(){T=[];for(var S=0,P=a(v.length/2);0<=P?S<P:S>P;0<=P?S++:S--)T.push(S);return T}).apply(this).reverse(),E=[],b=0,x=C.length;b<x;b++)p=C[b],E.push(y(v,p,m));return E},h=function(v,m,p){var b;if(p==null&&(p=n),b=v.indexOf(m),b!==-1)return w(v,0,b,p),y(v,b,p)},d=function(v,m,p){var b,x,C,E,T;if(p==null&&(p=n),x=v.slice(0,m),!x.length)return x;for(i(x,p),T=v.slice(m),C=0,E=T.length;C<E;C++)b=T[C],l(x,b,p);return x.sort(p).reverse()},g=function(v,m,p){var b,x,C,E,T,S,P,L,A;if(p==null&&(p=n),m*10<=v.length){if(C=v.slice(0,m).sort(p),!C.length)return C;for(x=C[C.length-1],P=v.slice(m),E=0,S=P.length;E<S;E++)b=P[E],p(b,x)<0&&(c(C,b,0,null,p),C.pop(),x=C[C.length-1]);return C}for(i(v,p),A=[],T=0,L=f(m,v.length);0<=L?T<L:T>L;0<=L?++T:--T)A.push(o(v,p));return A},w=function(v,m,p,b){var x,C,E;for(b==null&&(b=n),x=v[p];p>m;){if(E=p-1>>1,C=v[E],b(x,C)<0){v[p]=C,p=E;continue}break}return v[p]=x},y=function(v,m,p){var b,x,C,E,T;for(p==null&&(p=n),x=v.length,T=m,C=v[m],b=2*m+1;b<x;)E=b+1,E<x&&!(p(v[b],v[E])<0)&&(b=E),v[m]=v[b],m=b,b=2*m+1;return v[m]=C,w(v,T,m,p)},r=function(){v.push=s,v.pop=o,v.replace=u,v.pushpop=l,v.heapify=i,v.updateItem=h,v.nlargest=d,v.nsmallest=g;function v(m){this.cmp=m??n,this.nodes=[]}return v.prototype.push=function(m){return s(this.nodes,m,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},v.prototype.replace=function(m){return u(this.nodes,m,this.cmp)},v.prototype.pushpop=function(m){return l(this.nodes,m,this.cmp)},v.prototype.heapify=function(){return i(this.nodes,this.cmp)},v.prototype.updateItem=function(m){return h(this.nodes,m,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var m;return m=new v,m.nodes=this.nodes.slice(0),m},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,m){return t.exports=m()}(this,function(){return r})}).call(q1)}(Eo)),Eo.exports}var vl,bd;function H1(){return bd||(bd=1,vl=G1()),vl}var U1=H1(),Ui=$i(U1),W1=Nt({root:null,weight:function(e){return 1},directed:!1}),K1={dijkstra:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=W1(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=Te(a)?this.filter(a)[0]:a[0],c={},f={},d={},g=this.byGroup(),h=g.nodes,w=g.edges;w.unmergeBy(function(q){return q.isLoop()});for(var y=function(R){return c[R.id()]},v=function(R,k){c[R.id()]=k,m.updateItem(R)},m=new Ui(function(q,R){return y(q)-y(R)}),p=0;p<h.length;p++){var b=h[p];c[b.id()]=b.same(u)?0:1/0,m.push(b)}for(var x=function(R,k){for(var F=(o?R.edgesTo(k):R.edgesWith(k)).intersect(w),G=1/0,j,H=0;H<F.length;H++){var I=F[H],M=l(I);(M<G||!j)&&(G=M,j=I)}return{edge:j,dist:G}};m.size()>0;){var C=m.pop(),E=y(C),T=C.id();if(d[T]=E,E!==1/0)for(var S=C.neighborhood().intersect(h),P=0;P<S.length;P++){var L=S[P],A=L.id(),_=x(C,L),V=E+_.dist;V<y(L)&&(v(L,V),f[A]={node:C,edge:_.edge})}}return{distanceTo:function(R){var k=Te(R)?h.filter(R)[0]:R[0];return d[k.id()]},pathTo:function(R){var k=Te(R)?h.filter(R)[0]:R[0],F=[],G=k,j=G.id();if(k.length>0)for(F.unshift(k);f[j];){var H=f[j];F.unshift(H.edge),F.unshift(H.node),G=H.node,j=G.id()}return s.spawn(F)}}}},j1={kruskal:function(e){e=e||function(p){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,l=function(b){for(var x=0;x<o.length;x++){var C=o[x];if(C.has(b))return x}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var c=a.sort(function(p,b){return e(p)-e(b)}),f=0;f<c.length;f++){var d=c[f],g=d.source()[0],h=d.target()[0],w=l(g),y=l(h),v=o[w],m=o[y];w!==y&&(s.merge(d),v.merge(m),o.splice(y,1))}return s}},Y1=Nt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),X1={aStar:function(e){var r=this.cy(),n=Y1(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),c=i.id(),f={},d={},g={},h=new Ui(function(j,H){return d[j.id()]-d[H.id()]}),w=new Fa,y={},v={},m=function(H,I){h.push(H),w.add(I)},p,b,x=function(){p=h.pop(),b=p.id(),w.delete(b)},C=function(H){return w.has(H)};m(a,u),f[u]=0,d[u]=o(a);for(var E=0;h.size()>0;){if(x(),E++,b===c){for(var T=[],S=i,P=c,L=v[P];T.unshift(S),L!=null&&T.unshift(L),S=y[P],S!=null;)P=S.id(),L=v[P];return{found:!0,distance:f[b],path:this.spawn(T),steps:E}}g[b]=!0;for(var A=p._private.edges,_=0;_<A.length;_++){var V=A[_];if(this.hasElementWithId(V.id())&&!(s&&V.data("source")!==b)){var q=V.source(),R=V.target(),k=q.id()!==b?q:R,F=k.id();if(this.hasElementWithId(F)&&!g[F]){var G=f[b]+l(V);if(!C(F)){f[F]=G,d[F]=G+o(k),m(k,F),y[F]=p,v[F]=V;continue}G<f[F]&&(f[F]=G,d[F]=G+o(k),y[F]=p,v[F]=V)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},Z1=Nt({weight:function(e){return 1},directed:!1}),Q1={floydWarshall:function(e){for(var r=this.cy(),n=Z1(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,f=c*c,d=function(M){return l.indexOf(M)},g=function(M){return l[M]},h=new Array(f),w=0;w<f;w++){var y=w%c,v=(w-y)/c;v===y?h[w]=0:h[w]=1/0}for(var m=new Array(f),p=new Array(f),b=0;b<u.length;b++){var x=u[b],C=x.source()[0],E=x.target()[0];if(C!==E){var T=d(C),S=d(E),P=T*c+S,L=o(x);if(h[P]>L&&(h[P]=L,m[P]=S,p[P]=x),!i){var A=S*c+T;!i&&h[A]>L&&(h[A]=L,m[A]=T,p[A]=x)}}}for(var _=0;_<c;_++)for(var V=0;V<c;V++)for(var q=V*c+_,R=0;R<c;R++){var k=V*c+R,F=_*c+R;h[q]+h[F]<h[k]&&(h[k]=h[q]+h[F],m[k]=m[q])}var G=function(M){return(Te(M)?r.filter(M):M)[0]},j=function(M){return d(G(M))},H={distance:function(M,B){var z=j(M),$=j(B);return h[z*c+$]},path:function(M,B){var z=j(M),$=j(B),W=g(z);if(z===$)return W.collection();if(m[z*c+$]==null)return r.collection();var ee=r.collection(),Y=z,U;for(ee.merge(W);z!==$;)Y=z,z=m[z*c+$],U=p[Y*c+z],ee.merge(U),ee.merge(g(z));return ee}};return H}},J1=Nt({weight:function(e){return 1},directed:!1,root:null}),ew={bellmanFord:function(e){var r=this,n=J1(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,g=d.length,h=new Yr,w=!1,y=[];o=u.collection(o)[0],f.unmergeBy(function(ie){return ie.isLoop()});for(var v=f.length,m=function(le){var X=h.get(le.id());return X||(X={},h.set(le.id(),X)),X},p=function(le){return(Te(le)?u.$(le):le)[0]},b=function(le){return m(p(le)).dist},x=function(le){for(var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Q=p(le),Z=[],fe=Q;;){if(fe==null)return r.spawn();var oe=m(fe),he=oe.edge,pe=oe.pred;if(Z.unshift(fe[0]),fe.same(X)&&Z.length>0)break;he!=null&&Z.unshift(he),fe=pe}return l.spawn(Z)},C=0;C<g;C++){var E=d[C],T=m(E);E.same(o)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var S=!1,P=function(le,X,Q,Z,fe,oe){var he=Z.dist+oe;he<fe.dist&&!Q.same(Z.edge)&&(fe.dist=he,fe.pred=le,fe.edge=Q,S=!0)},L=1;L<g;L++){S=!1;for(var A=0;A<v;A++){var _=f[A],V=_.source(),q=_.target(),R=s(_),k=m(V),F=m(q);P(V,q,_,k,F,R),i||P(q,V,_,F,k,R)}if(!S)break}if(S)for(var G=[],j=0;j<v;j++){var H=f[j],I=H.source(),M=H.target(),B=s(H),z=m(I).dist,$=m(M).dist;if(z+B<$||!i&&$+B<z)if(w||(Ye("Graph contains a negative weight cycle for Bellman-Ford"),w=!0),e.findNegativeWeightCycles!==!1){var W=[];z+B<$&&W.push(I),!i&&$+B<z&&W.push(M);for(var ee=W.length,Y=0;Y<ee;Y++){var U=W[Y],J=[U];J.push(m(U).edge);for(var D=m(U).pred;J.indexOf(D)===-1;)J.push(D),J.push(m(D).edge),D=m(D).pred;J=J.slice(J.indexOf(D));for(var N=J[0].id(),K=0,ne=2;ne<J.length;ne+=2)J[ne].id()<N&&(N=J[ne].id(),K=ne);J=J.slice(K).concat(J.slice(0,K)),J.push(J[0]);var ce=J.map(function(ie){return ie.id()}).join(",");G.indexOf(ce)===-1&&(y.push(l.spawn(J)),G.push(ce))}}else break}return{distanceTo:b,pathTo:x,hasNegativeWeightCycle:w,negativeWeightCycles:y}}},tw=Math.sqrt(2),rw=function(e,r,n){n.length===0&&lt("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],l=r[o],u=n,c=u.length-1;c>=0;c--){var f=u[c],d=f[1],g=f[2];(r[d]===s&&r[g]===l||r[d]===l&&r[g]===s)&&u.splice(c,1)}for(var h=0;h<u.length;h++){var w=u[h];w[1]===l?(u[h]=w.slice(),u[h][1]=s):w[2]===l&&(u[h]=w.slice(),u[h][2]=s)}for(var y=0;y<r.length;y++)r[y]===l&&(r[y]=s);return u},hl=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=rw(i,e,r),n--}return r},nw={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(F){return F.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/tw);if(i<2){lt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<o;c++){var f=a[c];u.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,g=[],h=new Array(i),w=new Array(i),y=new Array(i),v=function(G,j){for(var H=0;H<i;H++)j[H]=G[H]},m=0;m<=s;m++){for(var p=0;p<i;p++)w[p]=p;var b=hl(w,u.slice(),i,l),x=b.slice();v(w,y);var C=hl(w,b,l,2),E=hl(y,x,l,2);C.length<=E.length&&C.length<d?(d=C.length,g=C,v(w,h)):E.length<=C.length&&E.length<d&&(d=E.length,g=E,v(y,h))}for(var T=this.spawn(g.map(function(F){return a[F[0]]})),S=this.spawn(),P=this.spawn(),L=h[0],A=0;A<h.length;A++){var _=h[A],V=n[A];_===L?S.merge(V):P.merge(V)}var q=function(G){var j=e.spawn();return G.forEach(function(H){j.merge(H),H.connectedEdges().forEach(function(I){e.contains(I)&&!T.contains(I)&&j.merge(I)})}),j},R=[q(S),q(P)],k={cut:T,components:R,partition1:S,partition2:P};return k}},aw=function(e){return{x:e.x,y:e.y}},Cs=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},xp=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ba=function(e){return{x:e[0],y:e[1]}},iw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},ow=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},sw=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},lw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(d,g){return d-g});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},uw=function(e){return Math.PI*e/180},so=function(e,r){return Math.atan2(r,e)-Math.PI/2},Gc=Math.log2||function(t){return Math.log(t)/Math.log(2)},Hc=function(e){return e>0?1:e<0?-1:0},ea=function(e,r){return Math.sqrt($n(e,r))},$n=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},cw=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Tt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},ka=function(e,r,n,a){return{x:Tt(e.x,r.x,n.x,a),y:Tt(e.y,r.y,n.y,a)}},fw=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=ea(e,r),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},ki=function(e,r,n){return Math.max(e,Math.min(n,r))},or=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},dw=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},vw=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},hw=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Cp=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},gw=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},So=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},To=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=wt(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},wd=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Uc=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Ia=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},pw=function(e,r){return Ia(e,r.x,r.y)},mw=function(e,r){return Ia(e,r.x1,r.y1)&&Ia(e,r.x2,r.y2)},Ep=function(e,r,n,a,i,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?En(i,o):l,c=i/2,f=o/2;u=Math.min(u,c,f);var d=u!==c,g=u!==f,h;if(d){var w=n-c+u-s,y=a-f-s,v=n+c-u+s,m=y;if(h=vn(e,r,n,a,w,y,v,m,!1),h.length>0)return h}if(g){var p=n+c+s,b=a-f+u-s,x=p,C=a+f-u+s;if(h=vn(e,r,n,a,p,b,x,C,!1),h.length>0)return h}if(d){var E=n-c+u-s,T=a+f+s,S=n+c-u+s,P=T;if(h=vn(e,r,n,a,E,T,S,P,!1),h.length>0)return h}if(g){var L=n-c-s,A=a-f+u-s,_=L,V=a+f-u+s;if(h=vn(e,r,n,a,L,A,_,V,!1),h.length>0)return h}var q;{var R=n-c+u,k=a-f+u;if(q=ai(e,r,n,a,R,k,u+s),q.length>0&&q[0]<=R&&q[1]<=k)return[q[0],q[1]]}{var F=n+c-u,G=a-f+u;if(q=ai(e,r,n,a,F,G,u+s),q.length>0&&q[0]>=F&&q[1]<=G)return[q[0],q[1]]}{var j=n+c-u,H=a+f-u;if(q=ai(e,r,n,a,j,H,u+s),q.length>0&&q[0]>=j&&q[1]>=H)return[q[0],q[1]]}{var I=n-c+u,M=a+f-u;if(q=ai(e,r,n,a,I,M,u+s),q.length>0&&q[0]<=I&&q[1]>=M)return[q[0],q[1]]}return[]},yw=function(e,r,n,a,i,o,s){var l=s,u=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,o),d=Math.max(a,o);return u-l<=e&&e<=c+l&&f-l<=r&&r<=d+l},bw=function(e,r,n,a,i,o,s,l,u){var c={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},ww=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-r+o)/s,u=(-r-o)/s;return[l,u]},xw=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,l,u,c,f,d,g,h;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,s=l*l*l+u*u,i[1]=0,g=r/3,s>0){f=u+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=u-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-g+f+d,g+=(f+d)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-d+f)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-g+2*h,i[4]=i[2]=-(h+g);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),h=2*Math.sqrt(l),i[0]=-g+h*Math.cos(c/3),i[2]=-g+h*Math.cos((c+2*Math.PI)/3),i[4]=-g+h*Math.cos((c+4*Math.PI)/3)},Cw=function(e,r,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,f=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r,d=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,g=[];xw(u,c,f,d,g);for(var h=1e-7,w=[],y=0;y<6;y+=2)Math.abs(g[y+1])<h&&g[y]>=0&&g[y]<=1&&w.push(g[y]);w.push(1),w.push(0);for(var v=-1,m,p,b,x=0;x<w.length;x++)m=Math.pow(1-w[x],2)*n+2*(1-w[x])*w[x]*i+w[x]*w[x]*s,p=Math.pow(1-w[x],2)*a+2*(1-w[x])*w[x]*o+w[x]*w[x]*l,b=Math.pow(m-e,2)+Math.pow(p-r,2),v>=0?b<v&&(v=b):v=b;return v},Ew=function(e,r,n,a,i,o){var s=[e-n,r-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*l[0]+s[1]*l[1],d=f*f/u;return f<0?c:d>u?(e-i)*(e-i)+(r-o)*(r-o):c-d},ar=function(e,r,n){for(var a,i,o,s,l,u=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>r&&u++;else continue;return u%2!==0},Jr=function(e,r,n,a,i,o,s,l,u){var c=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var d=Math.cos(-f),g=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=o/2*(n[h*2]*d-n[h*2+1]*g),c[h*2+1]=s/2*(n[h*2+1]*d+n[h*2]*g),c[h*2]+=a,c[h*2+1]+=i;var w;if(u>0){var y=Xo(c,-u);w=Yo(y)}else w=c;return ar(e,r,w)},Sw=function(e,r,n,a,i,o,s,l){for(var u=new Array(n.length*2),c=0;c<l.length;c++){var f=l[c];u[c*4+0]=f.startX,u[c*4+1]=f.startY,u[c*4+2]=f.stopX,u[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(d<=Math.pow(f.radius,2))return!0}return ar(e,r,u)},Yo=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,l,u,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var d=vn(n,a,i,o,s,l,u,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},Xo=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,c=-(o-a),f=Math.sqrt(u*u+c*c),d=u/f,g=c/f;n[l*4]=a+d*r,n[l*4+1]=i+g*r,n[l*4+2]=o+d*r,n[l*4+3]=s+g*r}return n},Tw=function(e,r,n,a,i,o){var s=n-e,l=a-r;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(n-e)*f+e,(a-r)*f+r]},jn=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},ai=function(e,r,n,a,i,o,s){var l=[n-e,a-r],u=[e-i,r-o],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-s*s,g=f*f-4*c*d;if(g<0)return[];var h=(-f+Math.sqrt(g))/(2*c),w=(-f-Math.sqrt(g))/(2*c),y=Math.min(h,w),v=Math.max(h,w),m=[];if(y>=0&&y<=1&&m.push(y),v>=0&&v<=1&&m.push(v),m.length===0)return[];var p=m[0]*l[0]+e,b=m[0]*l[1]+r;if(m.length>1){if(m[0]==m[1])return[p,b];var x=m[1]*l[0]+e,C=m[1]*l[1]+r;return[p,b,x,C]}else return[p,b]},gl=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},vn=function(e,r,n,a,i,o,s,l,u){var c=e-i,f=n-e,d=s-i,g=r-o,h=a-r,w=l-o,y=d*g-w*c,v=f*g-h*c,m=w*f-d*h;if(m!==0){var p=y/m,b=v/m,x=.001,C=0-x,E=1+x;return C<=p&&p<=E&&C<=b&&b<=E?[e+p*f,r+p*h]:u?[e+p*f,r+p*h]:[]}else return y===0||v===0?gl(e,n,s)===s?[s,l]:gl(e,n,i)===i?[i,o]:gl(i,s,n)===n?[n,a]:[]:[]},Ai=function(e,r,n,a,i,o,s,l){var u=[],c,f=new Array(n.length),d=!0;o==null&&(d=!1);var g;if(d){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*o+a,f[h*2+1]=n[h*2+1]*s+i;if(l>0){var w=Xo(f,-l);g=Yo(w)}else g=f}else g=n;for(var y,v,m,p,b=0;b<g.length/2;b++)y=g[b*2],v=g[b*2+1],b<g.length/2-1?(m=g[(b+1)*2],p=g[(b+1)*2+1]):(m=g[0],p=g[1]),c=vn(e,r,a,i,y,v,m,p),c.length!==0&&u.push(c[0],c[1]);return u},Dw=function(e,r,n,a,i,o,s,l,u){var c=[],f,d=new Array(n.length*2);u.forEach(function(m,p){p===0?(d[d.length-2]=m.startX,d[d.length-1]=m.startY):(d[p*4-2]=m.startX,d[p*4-1]=m.startY),d[p*4]=m.stopX,d[p*4+1]=m.stopY,f=ai(e,r,a,i,m.cx,m.cy,m.radius),f.length!==0&&c.push(f[0],f[1])});for(var g=0;g<d.length/4;g++)f=vn(e,r,a,i,d[g*4],d[g*4+1],d[g*4+2],d[g*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var h=[c[0],c[1]],w=Math.pow(h[0]-e,2)+Math.pow(h[1]-r,2),y=1;y<c.length/2;y++){var v=Math.pow(c[y*2]-e,2)+Math.pow(c[y*2+1]-r,2);v<=w&&(h[0]=c[y*2],h[1]=c[y*2+1],w=v)}return h}return c},lo=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},Yt=function(e,r){var n=Qu(e,r);return n=Sp(n),n},Sp=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);for(var c=2/(s-i),f=2/(l-o),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Qu=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},En=function(e,r){return Math.min(e/4,r/4,8)},Tp=function(e,r){return Math.min(e/10,r/10,8)},Wc=function(){return 8},Pw=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Ju=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function kw(t,e){function r(f){for(var d=[],g=0;g<f.length;g++){var h=f[g],w=f[(g+1)%f.length],y={x:w.x-h.x,y:w.y-h.y},v={x:-y.y,y:y.x},m=Math.sqrt(v.x*v.x+v.y*v.y);d.push({x:v.x/m,y:v.y/m})}return d}function n(f,d){var g=1/0,h=-1/0,w=ir(f),y;try{for(w.s();!(y=w.n()).done;){var v=y.value,m=v.x*d.x+v.y*d.y;g=Math.min(g,m),h=Math.max(h,m)}}catch(p){w.e(p)}finally{w.f()}return{min:g,max:h}}function a(f,d){return!(f.max<d.min||d.max<f.min)}var i=[].concat(Uo(r(t)),Uo(r(e))),o=ir(i),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=n(t,l),c=n(e,l);if(!a(u,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var Aw=Nt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Rw={pageRank:function(e){for(var r=Aw(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,d=f*f,g=c.length,h=new Array(d),w=new Array(f),y=(1-n)/f,v=0;v<f;v++){for(var m=0;m<f;m++){var p=v*f+m;h[p]=0}w[v]=0}for(var b=0;b<g;b++){var x=c[b],C=x.data("source"),E=x.data("target");if(C!==E){var T=u.indexOfId(C),S=u.indexOfId(E),P=o(x),L=S*f+T;h[L]+=P,w[T]+=P}}for(var A=1/f+y,_=0;_<f;_++)if(w[_]===0)for(var V=0;V<f;V++){var q=V*f+_;h[q]=A}else for(var R=0;R<f;R++){var k=R*f+_;h[k]=h[k]/w[_]+y}for(var F=new Array(f),G=new Array(f),j,H=0;H<f;H++)F[H]=1;for(var I=0;I<i;I++){for(var M=0;M<f;M++)G[M]=0;for(var B=0;B<f;B++)for(var z=0;z<f;z++){var $=B*f+z;G[B]+=h[$]*F[z]}cw(G),j=F,F=G,G=j;for(var W=0,ee=0;ee<f;ee++){var Y=j[ee]-F[ee];W+=Y*Y}if(W<a)break}var U={rank:function(D){return D=s.collection(D)[0],F[u.indexOf(D)]}};return U}},xd=Nt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Aa={degreeCentralityNormalized:function(e){e=xd(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,g=0,h=0;h<a;h++){var w=n[h],y=w.id();e.root=w;var v=this.degreeCentrality(e);d<v.indegree&&(d=v.indegree),g<v.outdegree&&(g=v.outdegree),c[y]=v.indegree,f[y]=v.outdegree}return{indegree:function(p){return d==0?0:(Te(p)&&(p=r.filter(p)),c[p.id()]/d)},outdegree:function(p){return g===0?0:(Te(p)&&(p=r.filter(p)),f[p.id()]/g)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(p){return o===0?0:(Te(p)&&(p=r.filter(p)),i[p.id()]/o)}}}},degreeCentrality:function(e){e=xd(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=r.collection(i)[0],s){for(var g=i.connectedEdges(),h=g.filter(function(C){return C.target().same(i)&&n.has(C)}),w=g.filter(function(C){return C.source().same(i)&&n.has(C)}),y=h.length,v=w.length,m=0,p=0,b=0;b<h.length;b++)m+=o(h[b]);for(var x=0;x<w.length;x++)p+=o(w[x]);return{indegree:Math.pow(y,1-l)*Math.pow(m,l),outdegree:Math.pow(v,1-l)*Math.pow(p,l)}}else{for(var u=i.connectedEdges().intersection(n),c=u.length,f=0,d=0;d<u.length;d++)f+=o(u[d]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};Aa.dc=Aa.degreeCentrality;Aa.dcn=Aa.degreeCentralityNormalised=Aa.degreeCentralityNormalized;var Cd=Nt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ra={closenessCentralityNormalized:function(e){for(var r=Cd(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},l=0,u=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<u.length;f++){for(var d=0,g=u[f],h=0;h<u.length;h++)if(f!==h){var w=c.distance(g,u[h]);n?d+=1/w:d+=w}n||(d=1/d),l<d&&(l=d),s[g.id()]=d}return{closeness:function(v){return l==0?0:(Te(v)?v=o.filter(v)[0].id():v=v.id(),s[v]/l)}}},closenessCentrality:function(e){var r=Cd(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(n)){var d=s.distanceTo(f);o?l+=1/d:l+=d}}return o?l:1/l}};Ra.cc=Ra.closenessCentrality;Ra.ccn=Ra.closenessCentralityNormalised=Ra.closenessCentralityNormalized;var Bw=Nt({weight:null,directed:!1}),ec={betweennessCentrality:function(e){for(var r=Bw(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},c=0,f={set:function(p,b){u[p]=b,b>c&&(c=b)},get:function(p){return u[p]}},d=0;d<s.length;d++){var g=s[d],h=g.id();n?l[h]=g.outgoers().nodes():l[h]=g.openNeighborhood().nodes(),f.set(h,0)}for(var w=function(){for(var p=s[y].id(),b=[],x={},C={},E={},T=new Ui(function(B,z){return E[B]-E[z]}),S=0;S<s.length;S++){var P=s[S].id();x[P]=[],C[P]=0,E[P]=1/0}for(C[p]=1,E[p]=0,T.push(p);!T.empty();){var L=T.pop();if(b.push(L),i)for(var A=0;A<l[L].length;A++){var _=l[L][A],V=o.getElementById(L),q=void 0;V.edgesTo(_).length>0?q=V.edgesTo(_)[0]:q=_.edgesTo(V)[0];var R=a(q);_=_.id(),E[_]>E[L]+R&&(E[_]=E[L]+R,T.nodes.indexOf(_)<0?T.push(_):T.updateItem(_),C[_]=0,x[_]=[]),E[_]==E[L]+R&&(C[_]=C[_]+C[L],x[_].push(L))}else for(var k=0;k<l[L].length;k++){var F=l[L][k].id();E[F]==1/0&&(T.push(F),E[F]=E[L]+1),E[F]==E[L]+1&&(C[F]=C[F]+C[L],x[F].push(L))}}for(var G={},j=0;j<s.length;j++)G[s[j].id()]=0;for(;b.length>0;){for(var H=b.pop(),I=0;I<x[H].length;I++){var M=x[H][I];G[M]=G[M]+C[M]/C[H]*(1+G[H])}H!=s[y].id()&&f.set(H,f.get(H)+G[H])}},y=0;y<s.length;y++)w();var v={betweenness:function(p){var b=o.collection(p).id();return f.get(b)},betweennessNormalized:function(p){if(c==0)return 0;var b=o.collection(p).id();return f.get(b)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};ec.bc=ec.betweennessCentrality;var Mw=Nt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Lw=function(e){return Mw(e)},Iw=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},_w=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Dp=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},Ow=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*r[s*n+l]}return a},Nw=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Ow(e,a,r);return e},zw=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Dp(a,r),a},Fw=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},Vw=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],l=0;l<r;l++)Math.round(e[o*r+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},$w=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},qw=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&$w(e[r],e[n])&&e.splice(n,1);return e},Ed=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=Lw(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var l=r.length,u=l*l,c=new Array(u),f,d=0;d<u;d++)c[d]=0;for(var g=0;g<n.length;g++){var h=n[g],w=o[h.source().id()],y=o[h.target().id()],v=Iw(h,i.attributes);c[w*l+y]+=v,c[y*l+w]+=v}_w(c,l,i.multFactor),Dp(c,l);for(var m=!0,p=0;m&&p<i.maxIterations;)m=!1,f=Nw(c,l,i.expandFactor),c=zw(f,l,i.inflateFactor),Fw(c,f,u,4)||(m=!0),p++;var b=Vw(c,l,r,a);return b=qw(b),b},Gw={markovClustering:Ed,mcl:Ed},Hw=function(e){return e},Pp=function(e,r){return Math.abs(r-e)},Sd=function(e,r,n){return e+Pp(r,n)},Td=function(e,r,n){return e+Math.pow(n-r,2)},Uw=function(e){return Math.sqrt(e)},Ww=function(e,r,n){return Math.max(e,Pp(r,n))},Xa=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Hw,s=a,l,u,c=0;c<e;c++)l=r(c),u=n(c),s=i(s,l,u);return o(s)},_a={euclidean:function(e,r,n){return e>=2?Xa(e,r,n,0,Td,Uw):Xa(e,r,n,0,Sd)},squaredEuclidean:function(e,r,n){return Xa(e,r,n,0,Td)},manhattan:function(e,r,n){return Xa(e,r,n,0,Sd)},max:function(e,r,n){return Xa(e,r,n,-1/0,Ww)}};_a["squared-euclidean"]=_a.squaredEuclidean;_a.squaredeuclidean=_a.squaredEuclidean;function Es(t,e,r,n,a,i){var o;return ut(t)?o=t:o=_a[t]||_a.euclidean,e===0&&ut(t)?o(a,i):o(e,r,n,a,i)}var Kw=Nt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Kc=function(e){return Kw(e)},Zo=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(f){return n[f]}:function(f){return a[f](n)},l=function(d){return a[d](r)},u=n,c=r;return Es(e,a.length,s,l,u,c)},pl=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var c=0;c<r;c++){l=[];for(var f=0;f<a;f++)l[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=l}return s},kp=function(e,r,n,a,i){for(var o=1/0,s=0,l=0;l<r.length;l++){var u=Zo(n,e,r[l],a,i);u<o&&(o=u,s=l)}return s},Ap=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},jw=function(e,r,n){return Math.abs(r-e)<=n},Yw=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},Xw=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Dd=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];Xw(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Pd=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Zo("manhattan",r[i],e,n,"kMedoids");return a},Zw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Kc(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=pl(n,i.k,i.attributes)):Ct(i.testCentroids)==="object"?l=i.testCentroids:l=pl(n,i.k,i.attributes):l=pl(n,i.k,i.attributes);for(var u=!0,c=0;u&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],s[a.id()]=kp(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var d=0;d<i.k;d++){var g=Ap(d,n,s);if(g.length!==0){for(var h=i.attributes.length,w=l[d],y=new Array(h),v=new Array(h),m=0;m<h;m++){v[m]=0;for(var p=0;p<g.length;p++)a=g[p],v[m]+=i.attributes[m](a);y[m]=v[m]/g.length,jw(y[m],w[m],i.sensitivityThreshold)||(u=!0)}l[d]=y,o[d]=r.collection(g)}}c++}return o},Qw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Kc(e),o=new Array(i.k),s,l={},u,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Ct(i.testCentroids)==="object"?s=i.testCentroids:s=Dd(n,i.k)):s=Dd(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],l[a.id()]=kp(a,s,i.distance,i.attributes,"kMedoids");f=!1;for(var h=0;h<s.length;h++){var w=Ap(h,n,l);if(w.length!==0){c[h]=Pd(s[h],w,i.attributes);for(var y=0;y<w.length;y++)u=Pd(w[y],w,i.attributes),u<c[h]&&(c[h]=u,s[h]=w[y],f=!0);o[h]=r.collection(w)}}d++}return o},Jw=function(e,r,n,a,i){for(var o,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var d=0;d<r.length;d++)o+=a[d][c]*i.attributes[f](r[d]),s+=a[d][c];e[c][f]=o/s}},ex=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,l,u,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){s=0;for(var g=0;g<n.length;g++)l=Zo(i.distance,a[d],n[f],i.attributes,"cmeans"),u=Zo(i.distance,a[d],n[g],i.attributes,"cmeans"),s+=Math.pow(l/u,c);e[d][f]=1/s}},tx=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var c=0;c<r[0].length;c++)r[u][c]>s&&(s=r[u][c],l=c);i[l].push(e[u])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},kd=function(e){var r=this.cy(),n=this.nodes(),a=Kc(e),i,o,s,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var g=0,h=0;h<a.k;h++)s[d][h]=Math.random(),g+=s[d][h];for(var w=0;w<a.k;w++)s[d][w]=s[d][w]/g}o=new Array(a.k);for(var y=0;y<a.k;y++)o[y]=new Array(a.attributes.length);u=new Array(n.length);for(var v=0;v<n.length;v++)u[v]=new Array(a.k);for(var m=!0,p=0;m&&p<a.maxIterations;)m=!1,Jw(o,n,s,u,a),ex(s,l,o,n,a),Yw(s,l,a.sensitivityThreshold)||(m=!0),p++;return i=tx(n,s,a,r),{clusters:i,degreeOfMembership:s}},rx={kMeans:Zw,kMedoids:Qw,fuzzyCMeans:kd,fcm:kd},nx=Nt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),ax={single:"min",complete:"max"},ix=function(e){var r=nx(e),n=ax[r.linkage];return n!=null&&(r.linkage=n),r},Ad=function(e,r,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,c=function(S,P){return Es(i.distance,u.length,function(L){return u[L](S)},function(L){return u[L](P)},S,P)},f=0;f<e.length;f++){var d=e[f].key,g=n[d][a[d]];g<s&&(o=d,s=g)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=r[o],w=r[a[o]],y;i.mode==="dendrogram"?y={left:h,right:w,key:h.key}:y={value:h.value.concat(w.value),key:h.key},e[h.index]=y,e.splice(w.index,1),r[h.key]=y;for(var v=0;v<e.length;v++){var m=e[v];h.key===m.key?l=1/0:i.linkage==="min"?(l=n[h.key][m.key],n[h.key][m.key]>n[w.key][m.key]&&(l=n[w.key][m.key])):i.linkage==="max"?(l=n[h.key][m.key],n[h.key][m.key]<n[w.key][m.key]&&(l=n[w.key][m.key])):i.linkage==="mean"?l=(n[h.key][m.key]*h.size+n[w.key][m.key]*w.size)/(h.size+w.size):i.mode==="dendrogram"?l=c(m.value,h.value):l=c(m.value[0],h.value[0]),n[h.key][m.key]=n[m.key][h.key]=l}for(var p=0;p<e.length;p++){var b=e[p].key;if(a[b]===h.key||a[b]===w.key){for(var x=b,C=0;C<e.length;C++){var E=e[C].key;n[b][E]<n[b][x]&&(x=E)}a[b]=x}e[p].index=p}return h.key=w.key=h.index=w.index=null,!0},wa=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&wa(e.left,r),e.right&&wa(e.right,r)))},tc=function(e,r){if(!e)return"";if(e.left&&e.right){var n=tc(e.left,r),a=tc(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},rc=function(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&wa(e.left,a),e.right&&wa(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&wa(e.left,a),e.right&&wa(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=rc(e.left,r-1,n)),e.right&&(i=rc(e.right,r-1,n)),a.concat(i))},Rd=function(e){for(var r=this.cy(),n=this.nodes(),a=ix(e),i=a.attributes,o=function(p,b){return Es(a.distance,i.length,function(x){return i[x](p)},function(x){return i[x](b)},p,b)},s=[],l=[],u=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=d,c[f]=d,l[f]=[],u[f]=0}for(var g=0;g<s.length;g++)for(var h=0;h<=g;h++){var w=void 0;a.mode==="dendrogram"?w=g===h?1/0:o(s[g].value,s[h].value):w=g===h?1/0:o(s[g].value[0],s[h].value[0]),l[g][h]=w,l[h][g]=w,w<l[g][u[g]]&&(u[g]=h)}for(var y=Ad(s,c,l,u,a);y;)y=Ad(s,c,l,u,a);var v;return a.mode==="dendrogram"?(v=rc(s[0],a.dendrogramDepth,r),a.addDendrogram&&tc(s[0],r)):(v=new Array(s.length),s.forEach(function(m,p){m.key=m.index=null,v[p]=r.collection(m.value)})),v},ox={hierarchicalClustering:Rd,hca:Rd},sx=Nt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),lx=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||lt("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ye(n)||lt("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),sx(e)},ux=function(e,r,n,a){var i=function(s,l){return a[l](s)};return-Es(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},cx=function(e,r){var n=null;return r==="median"?n=lw(e):r==="mean"?n=sw(e):r==="min"?n=iw(e):r==="max"?n=ow(e):n=r,n},fx=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Bd=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>s&&(o=u,s=r[i*e+u])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},dx=function(e,r,n){for(var a=Bd(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,c=0;c<o.length;c++){for(var f=0,d=0;d<o.length;d++)f+=r[o[d]*e+o[c]];f>u&&(l=c,u=f)}n[i]=o[l]}return a=Bd(e,r,n),a},Md=function(e){for(var r=this.cy(),n=this.nodes(),a=lx(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,c,f,d;s=n.length,l=s*s,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var h=0;h<s;h++)for(var w=0;w<s;w++)h!==w&&(u[h*s+w]=ux(a.distance,n[h],n[w],a.attributes));c=cx(u,a.preference);for(var y=0;y<s;y++)u[y*s+y]=c;f=new Array(l);for(var v=0;v<l;v++)f[v]=0;d=new Array(l);for(var m=0;m<l;m++)d[m]=0;for(var p=new Array(s),b=new Array(s),x=new Array(s),C=0;C<s;C++)p[C]=0,b[C]=0,x[C]=0;for(var E=new Array(s*a.minIterations),T=0;T<E.length;T++)E[T]=0;var S;for(S=0;S<a.maxIterations;S++){for(var P=0;P<s;P++){for(var L=-1/0,A=-1/0,_=-1,V=0,q=0;q<s;q++)p[q]=f[P*s+q],V=d[P*s+q]+u[P*s+q],V>=L?(A=L,L=V,_=q):V>A&&(A=V);for(var R=0;R<s;R++)f[P*s+R]=(1-a.damping)*(u[P*s+R]-L)+a.damping*p[R];f[P*s+_]=(1-a.damping)*(u[P*s+_]-A)+a.damping*p[_]}for(var k=0;k<s;k++){for(var F=0,G=0;G<s;G++)p[G]=d[G*s+k],b[G]=Math.max(0,f[G*s+k]),F+=b[G];F-=b[k],b[k]=f[k*s+k],F+=b[k];for(var j=0;j<s;j++)d[j*s+k]=(1-a.damping)*Math.min(0,F-b[j])+a.damping*p[j];d[k*s+k]=(1-a.damping)*(F-b[k])+a.damping*p[k]}for(var H=0,I=0;I<s;I++){var M=d[I*s+I]+f[I*s+I]>0?1:0;E[S%a.minIterations*s+I]=M,H+=M}if(H>0&&(S>=a.minIterations-1||S==a.maxIterations-1)){for(var B=0,z=0;z<s;z++){x[z]=0;for(var $=0;$<a.minIterations;$++)x[z]+=E[$*s+z];(x[z]===0||x[z]===a.minIterations)&&B++}if(B===s)break}}for(var W=fx(s,f,d),ee=dx(s,u,W),Y={},U=0;U<W.length;U++)Y[W[U]]=[];for(var J=0;J<n.length;J++){var D=i[n[J].id()],N=ee[D];N!=null&&Y[N].push(n[J])}for(var K=new Array(W.length),ne=0;ne<W.length;ne++)K[ne]=r.collection(Y[W[ne]]);return K},vx={affinityPropagation:Md,ap:Md},hx=Nt({root:void 0,directed:!1}),gx={hierholzer:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=hx(e),a=n.root,i=n.directed,o=this,s=!1,l,u,c;a&&(c=Te(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?o.forEach(function(m){var p=m.id();if(m.isNode()){var b=m.indegree(!0),x=m.outdegree(!0),C=b-x,E=x-b;C==1?l?s=!0:l=p:E==1?u?s=!0:u=p:(E>1||C>1)&&(s=!0),f[p]=[],m.outgoers().forEach(function(T){T.isEdge()&&f[p].push(T.id())})}else d[p]=[void 0,m.target().id()]}):o.forEach(function(m){var p=m.id();if(m.isNode()){var b=m.degree(!0);b%2&&(l?u?s=!0:u=p:l=p),f[p]=[],m.connectedEdges().forEach(function(x){return f[p].push(x.id())})}else d[p]=[m.source().id(),m.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(u&&l)if(i){if(c&&u!=c)return g;c=u}else{if(c&&u!=c&&l!=c)return g;c||(c=u)}else c||(c=o[0].id());var h=function(p){for(var b=p,x=[p],C,E,T;f[b].length;)C=f[b].shift(),E=d[C][0],T=d[C][1],b!=T?(f[T]=f[T].filter(function(S){return S!=C}),b=T):!i&&b!=E&&(f[E]=f[E].filter(function(S){return S!=C}),b=E),x.unshift(C),x.unshift(b);return x},w=[],y=[];for(y=h(c);y.length!=1;)f[y[0]].length==0?(w.unshift(o.getElementById(y.shift())),w.unshift(o.getElementById(y.shift()))):y=h(y.shift()).concat(y);w.unshift(o.getElementById(y.shift()));for(var v in f)if(f[v].length)return g;return g.found=!0,g.trail=this.spawn(w,!0),g}},uo=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},l=function(d,g){for(var h=o.length-1,w=[],y=e.spawn();o[h].x!=d||o[h].y!=g;)w.push(o.pop().edge),h--;w.push(o.pop().edge),w.forEach(function(v){var m=v.connectedNodes().intersection(e);y.merge(v),m.forEach(function(p){var b=p.id(),x=p.connectedEdges().intersection(e);y.merge(p),r[b].cutVertex?y.merge(x.filter(function(C){return C.isLoop()})):y.merge(x)})}),i.push(y)},u=function(d,g,h){d===h&&(a+=1),r[g]={id:n,low:n++,cutVertex:!1};var w=e.getElementById(g).connectedEdges().intersection(e);if(w.size()===0)i.push(e.spawn(e.getElementById(g)));else{var y,v,m,p;w.forEach(function(b){y=b.source().id(),v=b.target().id(),m=y===g?v:y,m!==h&&(p=b.id(),s[p]||(s[p]=!0,o.push({x:g,y:m,edge:b})),m in r?r[g].low=Math.min(r[g].low,r[m].id):(u(d,m,g),r[g].low=Math.min(r[g].low,r[m].low),r[g].id<=r[m].low&&(r[g].cutVertex=!0,l(g,m))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,u(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},px={hopcroftTarjanBiconnected:uo,htbc:uo,htb:uo,hopcroftTarjanBiconnectedComponents:uo},co=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(w){var y=w.target().id();y!==u&&(y in r||s(y),r[y].explored||(r[u].low=Math.min(r[u].low,r[y].low)))}),r[u].index===r[u].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[u].index,r[d].explored=!0,d===u)break}var g=f.edgesWith(f),h=f.merge(g);a.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:o,components:a}},mx={tarjanStronglyConnected:co,tsc:co,tscc:co,tarjanStronglyConnectedComponents:co},Rp={};[Pi,K1,j1,X1,Q1,ew,nw,Rw,Aa,Ra,ec,Gw,rx,ox,vx,gx,px,mx].forEach(function(t){Re(Rp,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Bp=0,Mp=1,Lp=2,Tr=function(e){if(!(this instanceof Tr))return new Tr(e);this.id="Thenable/1.0.7",this.state=Bp,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Tr.prototype={fulfill:function(e){return Ld(this,Mp,"fulfillValue",e)},reject:function(e){return Ld(this,Lp,"rejectReason",e)},then:function(e,r){var n=this,a=new Tr;return n.onFulfilled.push(_d(e,a,"fulfill")),n.onRejected.push(_d(r,a,"reject")),Ip(n),a.proxy}};var Ld=function(e,r,n,a){return e.state===Bp&&(e.state=r,e[n]=a,Ip(e)),e},Ip=function(e){e.state===Mp?Id(e,"onFulfilled",e.fulfillValue):e.state===Lp&&Id(e,"onRejected",e.rejectReason)},Id=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},_d=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}_p(r,i)}}},_p=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Ct(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):_p(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Tr.all=function(t){return new Tr(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(f){i(s,f)},function(f){r(f)});else{var c=l;i(s,c)}})(o)})};Tr.resolve=function(t){return new Tr(function(e,r){e(t)})};Tr.reject=function(t){return new Tr(function(e,r){r(t)})};var Va=typeof Promise<"u"?Promise:Tr,nc=function(e,r,n){var a=Nc(e),i=!a,o=this._private=Re({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&ut(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},ta=nc.prototype;Re(ta,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),cr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Va(function(a,i){n.push(function(){a()})})}});ta.complete=ta.completed;ta.run=ta.play;ta.running=ta.playing;var yx={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var c=s.style();r=Re({},r,n);var f=Object.keys(r).length===0;if(f)return new nc(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var d=r.renderedPosition,g=s.pan(),h=s.zoom();r.position=xp(d,h,g)}if(l&&r.panBy!=null){var w=r.panBy,y=s.pan();r.pan={x:y.x+w.x,y:y.y+w.y}}var v=r.center||r.centre;if(l&&v!=null){var m=s.getCenterPan(v.eles,r.zoom);m!=null&&(r.pan=m)}if(l&&r.fit!=null){var p=r.fit,b=s.getFitViewport(p.eles||p.boundingBox,p.padding);b!=null&&(r.pan=b.pan,r.zoom=b.zoom)}if(l&&Ue(r.zoom)){var x=s.getZoomedViewport(r.zoom);x!=null?(x.zoomed&&(r.zoom=x.zoom),x.panned&&(r.pan=x.pan)):r.zoom=null}return new nc(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=Re({},r,n));for(var l=0;l<o.length;l++){var u=o[l],c=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],c=u._private,f=c.animation.current,d=0;d<f.length;d++){var g=f[d],h=g._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},ml,Od;function Ss(){if(Od)return ml;Od=1;var t=Array.isArray;return ml=t,ml}var yl,Nd;function bx(){if(Nd)return yl;Nd=1;var t=Ss(),e=Gi(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return yl=a,yl}var bl,zd;function wx(){if(zd)return bl;zd=1;var t=dp(),e=qi(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var l=t(s);return l==n||l==a||l==r||l==i}return bl=o,bl}var wl,Fd;function xx(){if(Fd)return wl;Fd=1;var t=ws(),e=t["__core-js_shared__"];return wl=e,wl}var xl,Vd;function Cx(){if(Vd)return xl;Vd=1;var t=xx(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return xl=r,xl}var Cl,$d;function Ex(){if($d)return Cl;$d=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Cl=r,Cl}var El,qd;function Sx(){if(qd)return El;qd=1;var t=wx(),e=Cx(),r=qi(),n=Ex(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||e(d))return!1;var g=t(d)?c:i;return g.test(n(d))}return El=f,El}var Sl,Gd;function Tx(){if(Gd)return Sl;Gd=1;function t(e,r){return e==null?void 0:e[r]}return Sl=t,Sl}var Tl,Hd;function jc(){if(Hd)return Tl;Hd=1;var t=Sx(),e=Tx();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Tl=r,Tl}var Dl,Ud;function Ts(){if(Ud)return Dl;Ud=1;var t=jc(),e=t(Object,"create");return Dl=e,Dl}var Pl,Wd;function Dx(){if(Wd)return Pl;Wd=1;var t=Ts();function e(){this.__data__=t?t(null):{},this.size=0}return Pl=e,Pl}var kl,Kd;function Px(){if(Kd)return kl;Kd=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return kl=t,kl}var Al,jd;function kx(){if(jd)return Al;jd=1;var t=Ts(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return Al=a,Al}var Rl,Yd;function Ax(){if(Yd)return Rl;Yd=1;var t=Ts(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Rl=n,Rl}var Bl,Xd;function Rx(){if(Xd)return Bl;Xd=1;var t=Ts(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Bl=r,Bl}var Ml,Zd;function Bx(){if(Zd)return Ml;Zd=1;var t=Dx(),e=Px(),r=kx(),n=Ax(),a=Rx();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Ml=i,Ml}var Ll,Qd;function Mx(){if(Qd)return Ll;Qd=1;function t(){this.__data__=[],this.size=0}return Ll=t,Ll}var Il,Jd;function Op(){if(Jd)return Il;Jd=1;function t(e,r){return e===r||e!==e&&r!==r}return Il=t,Il}var _l,ev;function Ds(){if(ev)return _l;ev=1;var t=Op();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return _l=e,_l}var Ol,tv;function Lx(){if(tv)return Ol;tv=1;var t=Ds(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return Ol=n,Ol}var Nl,rv;function Ix(){if(rv)return Nl;rv=1;var t=Ds();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Nl=e,Nl}var zl,nv;function _x(){if(nv)return zl;nv=1;var t=Ds();function e(r){return t(this.__data__,r)>-1}return zl=e,zl}var Fl,av;function Ox(){if(av)return Fl;av=1;var t=Ds();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Fl=e,Fl}var Vl,iv;function Nx(){if(iv)return Vl;iv=1;var t=Mx(),e=Lx(),r=Ix(),n=_x(),a=Ox();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Vl=i,Vl}var $l,ov;function zx(){if(ov)return $l;ov=1;var t=jc(),e=ws(),r=t(e,"Map");return $l=r,$l}var ql,sv;function Fx(){if(sv)return ql;sv=1;var t=Bx(),e=Nx(),r=zx();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return ql=n,ql}var Gl,lv;function Vx(){if(lv)return Gl;lv=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Gl=t,Gl}var Hl,uv;function Ps(){if(uv)return Hl;uv=1;var t=Vx();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Hl=e,Hl}var Ul,cv;function $x(){if(cv)return Ul;cv=1;var t=Ps();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Ul=e,Ul}var Wl,fv;function qx(){if(fv)return Wl;fv=1;var t=Ps();function e(r){return t(this,r).get(r)}return Wl=e,Wl}var Kl,dv;function Gx(){if(dv)return Kl;dv=1;var t=Ps();function e(r){return t(this,r).has(r)}return Kl=e,Kl}var jl,vv;function Hx(){if(vv)return jl;vv=1;var t=Ps();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return jl=e,jl}var Yl,hv;function Ux(){if(hv)return Yl;hv=1;var t=Fx(),e=$x(),r=qx(),n=Gx(),a=Hx();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Yl=i,Yl}var Xl,gv;function Wx(){if(gv)return Xl;gv=1;var t=Ux(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],l=i.cache;if(l.has(s))return l.get(s);var u=n.apply(this,o);return i.cache=l.set(s,u)||l,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,Xl=r,Xl}var Zl,pv;function Kx(){if(pv)return Zl;pv=1;var t=Wx(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Zl=r,Zl}var Ql,mv;function Np(){if(mv)return Ql;mv=1;var t=Kx(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,l,u){i.push(l?u.replace(r,"$1"):s||o)}),i});return Ql=n,Ql}var Jl,yv;function zp(){if(yv)return Jl;yv=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Jl=t,Jl}var eu,bv;function jx(){if(bv)return eu;bv=1;var t=Fc(),e=zp(),r=Ss(),n=Gi(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return eu=o,eu}var tu,wv;function Fp(){if(wv)return tu;wv=1;var t=jx();function e(r){return r==null?"":t(r)}return tu=e,tu}var ru,xv;function Vp(){if(xv)return ru;xv=1;var t=Ss(),e=bx(),r=Np(),n=Fp();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return ru=a,ru}var nu,Cv;function Yc(){if(Cv)return nu;Cv=1;var t=Gi();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return nu=e,nu}var au,Ev;function Yx(){if(Ev)return au;Ev=1;var t=Vp(),e=Yc();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return au=r,au}var iu,Sv;function Xx(){if(Sv)return iu;Sv=1;var t=Yx();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return iu=e,iu}var Zx=Xx(),Qx=$i(Zx),ou,Tv;function Jx(){if(Tv)return ou;Tv=1;var t=jc(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return ou=e,ou}var su,Dv;function eC(){if(Dv)return su;Dv=1;var t=Jx();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return su=e,su}var lu,Pv;function tC(){if(Pv)return lu;Pv=1;var t=eC(),e=Op(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var l=i[o];(!(n.call(i,o)&&e(l,s))||s===void 0&&!(o in i))&&t(i,o,s)}return lu=a,lu}var uu,kv;function rC(){if(kv)return uu;kv=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return uu=r,uu}var cu,Av;function nC(){if(Av)return cu;Av=1;var t=tC(),e=Vp(),r=rC(),n=qi(),a=Yc();function i(o,s,l,u){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,d=f-1,g=o;g!=null&&++c<f;){var h=a(s[c]),w=l;if(h==="__proto__"||h==="constructor"||h==="prototype")return o;if(c!=d){var y=g[h];w=u?u(y,h,g):void 0,w===void 0&&(w=n(y)?y:r(s[c+1])?[]:{})}t(g,h,w),g=g[h]}return o}return cu=i,cu}var fu,Rv;function aC(){if(Rv)return fu;Rv=1;var t=nC();function e(r,n,a){return r==null?r:t(r,n,a)}return fu=e,fu}var iC=aC(),oC=$i(iC),du,Bv;function sC(){if(Bv)return du;Bv=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return du=t,du}var vu,Mv;function lC(){if(Mv)return vu;Mv=1;var t=zp(),e=sC(),r=Ss(),n=Gi(),a=Np(),i=Yc(),o=Fp();function s(l){return r(l)?t(l,i):n(l)?[l]:e(a(o(l)))}return vu=s,vu}var uC=lC(),cC=$i(uC),fC={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Re({},r,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],c=l?s[0]:s;if(Te(a)){var f=a.indexOf(".")!==-1,d=f&&cC(a);if(o.allowGetting&&i===void 0){var g;return c&&(o.beforeGet(c),d&&c._private[o.field][a]===void 0?g=Qx(c._private[o.field],d):g=c._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var w=rp({},a,i);o.beforeSet(s,w);for(var y=0,v=u.length;y<v;y++){var m=u[y];o.canSet(m)&&(d&&c._private[o.field][a]===void 0?oC(m._private[o.field],d,i):m._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Ue(a)){var p=a,b,x,C=Object.keys(p);o.beforeSet(s,p);for(var E=0;E<C.length;E++){b=C[E],x=p[b];var T=!o.immutableKeys[b];if(T)for(var S=0;S<u.length;S++){var P=u[S];o.canSet(P)&&(P._private[o.field][b]=x)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&ut(a)){var L=a;s.on(o.bindingEvent,L)}else if(o.allowGetting&&a===void 0){var A;return c&&(o.beforeGet(c),A=c._private[o.field]),A}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Re({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Te(a)){for(var u=a.split(/\s+/),c=u.length,f=0;f<c;f++){var d=u[f];if(!xn(d)){var g=!i.immutableKeys[d];if(g)for(var h=0,w=l.length;h<w;h++)l[h]._private[i.field][d]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var y=0,v=l.length;y<v;y++)for(var m=l[y]._private[i.field],p=Object.keys(m),b=0;b<p.length;b++){var x=p[b],C=!i.immutableKeys[x];C&&(m[x]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},dC={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new Va(function(s,l){var u=function(g){i.off.apply(i,f),s(g)},c=o.concat([u]),f=c.concat([]);i.on.apply(i,c)})}}},je={};[yx,fC,dC].forEach(function(t){Re(je,t)});var vC={animate:je.animate(),animation:je.animation(),animated:je.animated(),clearQueue:je.clearQueue(),delay:je.delay(),delayAnimation:je.delayAnimation(),stop:je.stop()},Do={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Je(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Fa(e),o=0;o<r.length;o++){for(var s=r[o],l=s._private,u=l.classes,c=!1,f=0;f<e.length;f++){var d=e[f],g=u.has(d);if(!g){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Je(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],g=u.has(d),h=!1;r||a&&!g?(u.add(d),h=!0):(!r||a&&g)&&(u.delete(d),h=!0),!c&&h&&(i.push(l),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Do.className=Do.classNames=Do.classes;var Ge={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:xt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ge.variable="(?:[\\w-.]|(?:\\\\"+Ge.metaChar+"))+";Ge.className="(?:[\\w-]|(?:\\\\"+Ge.metaChar+"))+";Ge.value=Ge.string+"|"+Ge.number;Ge.id=Ge.variable;(function(){var t,e,r;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Ge.comparatorOp+="|@"+e;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Ge.comparatorOp+="|\\!"+e)})();var Ze=function(){return{checks:[]}},xe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ac=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return h1(t.selector,e.selector)}),hC=function(){for(var t={},e,r=0;r<ac.length;r++)e=ac[r],t[e.selector]=e.matches;return t}(),gC=function(e,r){return hC[e](r)},pC="("+ac.map(function(t){return t.selector}).join("|")+")",ua=function(e){return e.replace(new RegExp("\\\\("+Ge.metaChar+")","g"),function(r,n){return n})},ln=function(e,r,n){e[e.length-1]=n},ic=[{name:"group",query:!0,regex:"("+Ge.group+")",populate:function(e,r,n){var a=wt(n,1),i=a[0];r.checks.push({type:xe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:pC,populate:function(e,r,n){var a=wt(n,1),i=a[0];r.checks.push({type:xe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ge.id+")",populate:function(e,r,n){var a=wt(n,1),i=a[0];r.checks.push({type:xe.ID,value:ua(i)})}},{name:"className",query:!0,regex:"\\.("+Ge.className+")",populate:function(e,r,n){var a=wt(n,1),i=a[0];r.checks.push({type:xe.CLASS,value:ua(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,n){var a=wt(n,1),i=a[0];r.checks.push({type:xe.DATA_EXIST,field:ua(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.value+")\\s*\\]",populate:function(e,r,n){var a=wt(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+Ge.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:xe.DATA_COMPARE,field:ua(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ge.boolOp+")\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,n){var a=wt(n,2),i=a[0],o=a[1];r.checks.push({type:xe.DATA_BOOL,field:ua(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ge.meta+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.number+")\\s*\\]\\]",populate:function(e,r,n){var a=wt(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:xe.META_COMPARE,field:ua(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ge.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ze();return s}},{name:"directedEdge",separator:!0,regex:Ge.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,i=Ze();return n.checks.push({type:xe.DIRECTED_EDGE,source:a,target:i}),ln(e,r,n),e.edgeCount++,i}else{var o=Ze(),s=r,l=Ze();return o.checks.push({type:xe.NODE_SOURCE,source:s,target:l}),ln(e,r,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Ge.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,i=Ze();return n.checks.push({type:xe.UNDIRECTED_EDGE,nodes:[a,i]}),ln(e,r,n),e.edgeCount++,i}else{var o=Ze(),s=r,l=Ze();return o.checks.push({type:xe.NODE_NEIGHBOR,node:s,neighbor:l}),ln(e,r,o),l}}},{name:"child",separator:!0,regex:Ge.child,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),i=e[e.length-1];return n.checks.push({type:xe.CHILD,parent:i,child:a}),ln(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),c=Ze(),f=Ze();return o.checks.push({type:xe.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:xe.TRUE}],f.checks.push({type:xe.TRUE}),l.checks.push({type:xe.PARENT,parent:f,child:c}),ln(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var d=Ze(),g=Ze(),h=[{type:xe.PARENT,parent:d,child:g}];return d.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:Ge.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),i=e[e.length-1];return n.checks.push({type:xe.DESCENDANT,ancestor:i,descendant:a}),ln(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),c=Ze(),f=Ze();return o.checks.push({type:xe.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:xe.TRUE}],f.checks.push({type:xe.TRUE}),l.checks.push({type:xe.ANCESTOR,ancestor:f,descendant:c}),ln(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var d=Ze(),g=Ze(),h=[{type:xe.ANCESTOR,ancestor:d,descendant:g}];return d.checks=r.checks,r.checks=h,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:Ge.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ye("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===xe.DIRECTED_EDGE?a.type=xe.NODE_TARGET:i===xe.UNDIRECTED_EDGE&&(a.type=xe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];ic.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var mC=function(e){for(var r,n,a,i=0;i<ic.length;i++){var o=ic[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,r=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},yC=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},bC=function(e){var r=this,n=r.inputText=e,a=r[0]=Ze();for(r.length=1,n=yC(n);;){var i=mC(n);if(i.expr==null)return Ye("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0)return Ye("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Ye("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Ye("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},wC=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return Te(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,g=c.value;switch(d){case xe.GROUP:{var h=e(g);return h.substring(0,h.length-1)}case xe.DATA_COMPARE:{var w=c.field,y=c.operator;return"["+w+n(e(y))+r(g)+"]"}case xe.DATA_BOOL:{var v=c.operator,m=c.field;return"["+e(v)+m+"]"}case xe.DATA_EXIST:{var p=c.field;return"["+p+"]"}case xe.META_COMPARE:{var b=c.operator,x=c.field;return"[["+x+n(e(b))+r(g)+"]]"}case xe.STATE:return g;case xe.ID:return"#"+g;case xe.CLASS:return"."+g;case xe.PARENT:case xe.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case xe.ANCESTOR:case xe.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case xe.COMPOUND_SPLIT:{var C=i(c.left,f),E=i(c.subject,f),T=i(c.right,f);return C+(C.length>0?" ":"")+E+T}case xe.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,g,h){return d+(f===c&&h===0?"$":"")+a(g,f)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},xC={parse:bC,toString:wC},$p=function(e,r,n){var a,i=Te(e),o=ye(e),s=Te(n),l,u,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(l=!i&&!o?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},CC=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},EC=function(e){return e!==void 0},Xc=function(e,r){return e.data(r)},SC=function(e,r){return e[r]()},ct=[],ot=function(e,r){return e.checks.every(function(n){return ct[n.type](n,r)})};ct[xe.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};ct[xe.STATE]=function(t,e){var r=t.value;return gC(r,e)};ct[xe.ID]=function(t,e){var r=t.value;return e.id()===r};ct[xe.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};ct[xe.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return $p(SC(e,r),n,a)};ct[xe.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return $p(Xc(e,r),n,a)};ct[xe.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return CC(Xc(e,r),n)};ct[xe.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,EC(Xc(e,r))};ct[xe.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return ot(r,a)&&ot(n,i)||ot(n,a)&&ot(r,i)};ct[xe.NODE_NEIGHBOR]=function(t,e){return ot(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&ot(t.neighbor,r)})};ct[xe.DIRECTED_EDGE]=function(t,e){return ot(t.source,e.source())&&ot(t.target,e.target())};ct[xe.NODE_SOURCE]=function(t,e){return ot(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&ot(t.target,r)})};ct[xe.NODE_TARGET]=function(t,e){return ot(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&ot(t.source,r)})};ct[xe.CHILD]=function(t,e){return ot(t.child,e)&&ot(t.parent,e.parent())};ct[xe.PARENT]=function(t,e){return ot(t.parent,e)&&e.children().some(function(r){return ot(t.child,r)})};ct[xe.DESCENDANT]=function(t,e){return ot(t.descendant,e)&&e.ancestors().some(function(r){return ot(t.ancestor,r)})};ct[xe.ANCESTOR]=function(t,e){return ot(t.ancestor,e)&&e.descendants().some(function(r){return ot(t.descendant,r)})};ct[xe.COMPOUND_SPLIT]=function(t,e){return ot(t.subject,e)&&ot(t.left,e)&&ot(t.right,e)};ct[xe.TRUE]=function(){return!0};ct[xe.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};ct[xe.FILTER]=function(t,e){var r=t.value;return r(e)};var TC=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===xe.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(ot(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},DC=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(ot(a,e))return!0}return!1},PC={matches:DC,filter:TC},Sn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Te(e)&&e.match(/^\s*$/)||(cr(e)?this.addQuery({checks:[{type:xe.COLLECTION,value:e.collection()}]}):ut(e)?this.addQuery({checks:[{type:xe.FILTER,value:e}]}):Te(e)?this.parse(e)||(this.invalid=!0):lt("A selector must be created from a string; found "))},Tn=Sn.prototype;[xC,PC].forEach(function(t){return Re(Tn,t)});Tn.text=function(){return this.inputText};Tn.size=function(){return this.length};Tn.eq=function(t){return this[t]};Tn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Tn.addQuery=function(t){this[this.length++]=t};Tn.selector=Tn.toString;var pn={allAre:function(e){var r=new Sn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Sn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};pn.allAreNeighbours=pn.allAreNeighbors;pn.has=pn.contains;pn.equal=pn.equals=pn.same;var hr=function(e,r){return function(a,i,o,s){var l=a,u=this,c;if(l==null?c="":cr(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,d=f.traversalCache=f.traversalCache||{},g=d[r]=d[r]||[],h=Jn(c),w=g[h];return w||(g[h]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},Oa={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:hr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Zc(t,e,r,n){for(var a=[],i=new Fa,o=t.cy(),s=o.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function qp(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Oa.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zc(this,t,e,qp)};function Gp(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Oa.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zc(this,t,e,Gp)};function kC(t,e,r){Gp(t,e,r),qp(t,e,r)}Oa.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Zc(this,t,e,kC)};Oa.ancestors=Oa.parents;var Ri,Hp;Ri=Hp={data:je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:je.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:je.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Ri.attr=Ri.data;Ri.removeAttr=Ri.removeData;var AC=Hp,ks={};function hu(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}Re(ks,{degree:hu(function(t,e){return e.source().same(e.target())?2:1}),indegree:hu(function(t,e){return e.target().same(t)?1:0}),outdegree:hu(function(t,e){return e.source().same(t)?1:0})});function ca(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Re(ks,{minDegree:ca("degree",function(t,e){return t<e}),maxDegree:ca("degree",function(t,e){return t>e}),minIndegree:ca("indegree",function(t,e){return t<e}),maxIndegree:ca("indegree",function(t,e){return t>e}),minOutdegree:ca("outdegree",function(t,e){return t<e}),maxOutdegree:ca("outdegree",function(t,e){return t>e})});Re(ks,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Cr,Up,Wp=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Lv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Wp(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Cr=Up={position:je.data(Lv),silentPosition:je.data(Re({},Lv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Wp(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Ue(e))r?this.silentPosition(e):this.position(e);else if(ut(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Ue(e)?(a={x:ye(e.x)?e.x:0,y:ye(e.y)?e.y:0},n=r):Te(e)&&ye(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return Ue(e)?this.shift(e,!0):Te(e)&&ye(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Ue(e)?e:void 0,l=s!==void 0||r!==void 0&&Te(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(xp(s,i,o))}else{var f=n.position();return s=Cs(f,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Ue(e)?e:void 0,o=i!==void 0||r!==void 0&&Te(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],c=s?u.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var g=d?c.position():{x:0,y:0};r!==void 0?u.position(e,r+g[e]):i!==void 0&&u.position({x:i.x+g.x,y:i.y+g.y})}else{var h=n.position(),w=s?n.parent():null,y=w&&w.length>0,v=y;y&&(w=w[0]);var m=v?w.position():{x:0,y:0};return i={x:h.x-m.x,y:h.y-m.y},e===void 0?i:i[e]}else if(!o)return;return this}};Cr.modelPosition=Cr.point=Cr.position;Cr.modelPositions=Cr.points=Cr.positions;Cr.renderedPoint=Cr.renderedPosition;Cr.relativePoint=Cr.relativePosition;var RC=Up,Ba,Rn;Ba=Rn={};Rn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};Rn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Rn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function g(S,P,L){var A=0,_=0,V=P+L;return S>0&&V>0&&(A=P/V*S,_=L/V*S),{biasDiff:A,biasComplementDiff:_}}function h(S,P,L,A){if(L.units==="%")switch(A){case"width":return S>0?L.pfValue*S:0;case"height":return P>0?L.pfValue*P:0;case"average":return S>0&&P>0?L.pfValue*(S+P)/2:0;case"min":return S>0&&P>0?S>P?L.pfValue*P:L.pfValue*S:0;case"max":return S>0&&P>0?S>P?L.pfValue*S:L.pfValue*P:0;default:return 0}else return L.units==="px"?L.pfValue:0}var w=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var y=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var p=g(c.width.val-f.w,w,y),b=p.biasDiff,x=p.biasComplementDiff,C=g(c.height.val-f.h,v,m),E=C.biasDiff,T=C.biasComplementDiff;s.autoPadding=h(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),d.x=(-b+f.x1+f.x2+x)/2,s.autoHeight=Math.max(f.h,c.height.val),d.y=(-E+f.y1+f.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var vr=function(e){return e===1/0||e===-1/0?0:e},wr=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},qn=function(e,r){return r==null?e:wr(e,r.x1,r.y1,r.x2,r.y2)},Za=function(e,r,n){return nr(e,r,n)},fo=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=l-o,f.y1=u-o,f.x2=l+o,f.y2=u+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,So(f,1),wr(e,f.x1,f.y1,f.x2,f.y2)}}},gu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),c=Za(o,"labelWidth",n),f=Za(o,"labelHeight",n),d=Za(o,"labelX",n),g=Za(o,"labelY",n),h=r.pstyle(a+"text-margin-x").pfValue,w=r.pstyle(a+"text-margin-y").pfValue,y=r.isEdge(),v=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,p=r.pstyle("text-border-width").pfValue,b=p/2,x=r.pstyle("text-background-padding").pfValue,C=2,E=f,T=c,S=T/2,P=E/2,L,A,_,V;if(y)L=d-S,A=d+S,_=g-P,V=g+P;else{switch(l.value){case"left":L=d-T,A=d;break;case"center":L=d-S,A=d+S;break;case"right":L=d,A=d+T;break}switch(u.value){case"top":_=g-E,V=g;break;case"center":_=g-P,V=g+P;break;case"bottom":_=g,V=g+E;break}}var q=h-Math.max(m,b)-x-C,R=h+Math.max(m,b)+x+C,k=w-Math.max(m,b)-x-C,F=w+Math.max(m,b)+x+C;L+=q,A+=R,_+=k,V+=F;var G=n||"main",j=i.labelBounds,H=j[G]=j[G]||{};H.x1=L,H.y1=_,H.x2=A,H.y2=V,H.w=A-L,H.h=V-_,H.leftPad=q,H.rightPad=R,H.topPad=k,H.botPad=F;var I=y&&v.strValue==="autorotate",M=v.pfValue!=null&&v.pfValue!==0;if(I||M){var B=I?Za(i.rstyle,"labelAngle",n):v.pfValue,z=Math.cos(B),$=Math.sin(B),W=(L+A)/2,ee=(_+V)/2;if(!y){switch(l.value){case"left":W=A;break;case"right":W=L;break}switch(u.value){case"top":ee=V;break;case"bottom":ee=_;break}}var Y=function(ie,le){return ie=ie-W,le=le-ee,{x:ie*z-le*$+W,y:ie*$+le*z+ee}},U=Y(L,_),J=Y(L,V),D=Y(A,_),N=Y(A,V);L=Math.min(U.x,J.x,D.x,N.x),A=Math.max(U.x,J.x,D.x,N.x),_=Math.min(U.y,J.y,D.y,N.y),V=Math.max(U.y,J.y,D.y,N.y)}var K=G+"Rot",ne=j[K]=j[K]||{};ne.x1=L,ne.y1=_,ne.x2=A,ne.y2=V,ne.w=A-L,ne.h=V-_,wr(e,L,_,A,V),wr(i.labelBounds.all,L,_,A,V)}return e}},BC=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,s=a+i,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,f=-s*.5);var d=e.h*u-e.h,g=e.w*l-e.w;if(To(e,[Math.ceil(d/2),Math.ceil(g/2)]),c!=0||f!==0){var h=hw(e,c,f);Cp(e,h)}}}},MC=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=or(),s=e._private,l=e.isNode(),u=e.isEdge(),c,f,d,g,h,w,y=s.rstyle,v=l&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(ce){return ce.pstyle("display").value!=="none"},p=!a||m(e)&&(!u||m(e.source())&&m(e.target()));if(p){var b=0,x=0;a&&r.includeOverlays&&(b=e.pstyle("overlay-opacity").value,b!==0&&(x=e.pstyle("overlay-padding").value));var C=0,E=0;a&&r.includeUnderlays&&(C=e.pstyle("underlay-opacity").value,C!==0&&(E=e.pstyle("underlay-padding").value));var T=Math.max(x,E),S=0,P=0;if(a&&(S=e.pstyle("width").pfValue,P=S/2),l&&r.includeNodes){var L=e.position();h=L.x,w=L.y;var A=e.outerWidth(),_=A/2,V=e.outerHeight(),q=V/2;c=h-_,f=h+_,d=w-q,g=w+q,wr(o,c,d,f,g),a&&r.includeOutlines&&BC(o,e)}else if(u&&r.includeEdges)if(a&&!i){var R=e.pstyle("curve-style").strValue;if(c=Math.min(y.srcX,y.midX,y.tgtX),f=Math.max(y.srcX,y.midX,y.tgtX),d=Math.min(y.srcY,y.midY,y.tgtY),g=Math.max(y.srcY,y.midY,y.tgtY),c-=P,f+=P,d-=P,g+=P,wr(o,c,d,f,g),R==="haystack"){var k=y.haystackPts;if(k&&k.length===2){if(c=k[0].x,d=k[0].y,f=k[1].x,g=k[1].y,c>f){var F=c;c=f,f=F}if(d>g){var G=d;d=g,g=G}wr(o,c-P,d-P,f+P,g+P)}}else if(R==="bezier"||R==="unbundled-bezier"||R.endsWith("segments")||R.endsWith("taxi")){var j;switch(R){case"bezier":case"unbundled-bezier":j=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":j=y.linePts;break}if(j!=null)for(var H=0;H<j.length;H++){var I=j[H];c=I.x-P,f=I.x+P,d=I.y-P,g=I.y+P,wr(o,c,d,f,g)}}}else{var M=e.source(),B=M.position(),z=e.target(),$=z.position();if(c=B.x,f=$.x,d=B.y,g=$.y,c>f){var W=c;c=f,f=W}if(d>g){var ee=d;d=g,g=ee}c-=P,f+=P,d-=P,g+=P,wr(o,c,d,f,g)}if(a&&r.includeEdges&&u&&(fo(o,e,"mid-source"),fo(o,e,"mid-target"),fo(o,e,"source"),fo(o,e,"target")),a){var Y=e.pstyle("ghost").value==="yes";if(Y){var U=e.pstyle("ghost-offset-x").pfValue,J=e.pstyle("ghost-offset-y").pfValue;wr(o,o.x1+U,o.y1+J,o.x2+U,o.y2+J)}}var D=s.bodyBounds=s.bodyBounds||{};wd(D,o),To(D,v),So(D,1),a&&(c=o.x1,f=o.x2,d=o.y1,g=o.y2,wr(o,c-T,d-T,f+T,g+T));var N=s.overlayBounds=s.overlayBounds||{};wd(N,o),To(N,v),So(N,1);var K=s.labelBounds=s.labelBounds||{};K.all!=null?vw(K.all):K.all=or(),a&&r.includeLabels&&(r.includeMainLabels&&gu(o,e,null),u&&(r.includeSourceLabels&&gu(o,e,"source"),r.includeTargetLabels&&gu(o,e,"target")))}return o.x1=vr(o.x1),o.y1=vr(o.y1),o.x2=vr(o.x2),o.y2=vr(o.y2),o.w=vr(o.x2-o.x1),o.h=vr(o.y2-o.y1),o.w>0&&o.h>0&&p&&(To(o,v),So(o,1)),o},Kp=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},jp=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return hd([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return hd([r(i.x),r(i.y)])}},Iv=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?_v:Kp(r),s=o===_v;if(n.bbCache==null?(a=MC(e,Bi),n.bbCache=a,n.bbCachePosKey=jp(e)):a=n.bbCache,!s){var l=e.isNode();a=or(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?qn(a,n.overlayBounds):qn(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?qn(a,n.labelBounds.all):(r.includeMainLabels&&qn(a,n.labelBounds.mainRot),r.includeSourceLabels&&qn(a,n.labelBounds.sourceRot),r.includeTargetLabels&&qn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Bi={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},_v=Kp(Bi),Ov=Nt(Bi);Rn.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=La(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==jp(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Bi:t=Ov(t),e=Iv(this[0],t);else{e=or(),t=t||Bi;var a=Ov(t),i=this,o=i.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<i.length;l++){var u=i[l];n(u)&&u.dirtyBoundingBoxCache(),qn(e,Iv(u,a))}}return e.x1=vr(e.x1),e.y1=vr(e.y1),e.x2=vr(e.x2),e.y2=vr(e.y2),e.w=vr(e.x2-e.x1),e.h=vr(e.y2-e.y1),e};Rn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Rn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Ue(t)){var i=t;t=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=dw(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};Ba.boundingbox=Ba.bb=Ba.boundingBox;Ba.renderedBoundingbox=Ba.renderedBoundingBox;var LC=Rn,ii,Wi;ii=Wi={};var Yp=function(e){e.uppercaseName=Jf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Jf(e.outerName),ii[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ii["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-position").value,u;l==="center"?u=n.pstyle("border-width").pfValue:l==="outside"?u=2*n.pstyle("border-width").pfValue:u=0;var c=2*n.padding();return s+u+c}else return 1},ii["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},ii["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Yp({name:"width"});Yp({name:"height"});Wi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Wi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Wi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var IC=Wi,_C=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},OC=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Cs(r(e),n.zoom(),n.pan())}},NC=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Cs(o,i,a)})}},zC=function(e){return e.renderer().getControlPoints(e)},FC=function(e){return e.renderer().getSegmentPoints(e)},VC=function(e){return e.renderer().getSourceEndpoint(e)},$C=function(e){return e.renderer().getTargetEndpoint(e)},qC=function(e){return e.renderer().getEdgeMidpoint(e)},Nv={controlPoints:{get:zC,mult:!0},segmentPoints:{get:FC,mult:!0},sourceEndpoint:{get:VC},targetEndpoint:{get:$C},midpoint:{get:qC}},GC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},HC=Object.keys(Nv).reduce(function(t,e){var r=Nv[e],n=GC(e);return t[e]=function(){return _C(this,r.get)},r.mult?t[n]=function(){return NC(this,r.get)}:t[n]=function(){return OC(this,r.get)},t},{}),UC=Re({},RC,LC,IC,HC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Xp=function(e,r){this.recycle(e,r)};function Qa(){return!1}function vo(){return!0}Xp.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Qa,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?vo:Qa):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=vo;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=vo;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=vo,this.stopPropagation()},isDefaultPrevented:Qa,isPropagationStopped:Qa,isImmediatePropagationStopped:Qa};var Zp=/^([^.]+)(\.(?:[^.]+))?$/,WC=".*",Qp={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},zv=Object.keys(Qp),KC={};function As(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:KC,e=arguments.length>1?arguments[1]:void 0,r=0;r<zv.length;r++){var n=zv[r];this[n]=t[n]||Qp[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Dn=As.prototype,Jp=function(e,r,n,a,i,o,s){ut(a)&&(i=a,a=null),s&&(o==null?o=s:o=Re({},o,s));for(var l=Je(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!xn(c)){var f=c.match(Zp);if(f){var d=f[1],g=f[2]?f[2]:null,h=r(e,c,d,g,a,i,o);if(h===!1)break}}}},Fv=function(e,r){return e.addEventFields(e.context,r),new Xp(r.type,r)},jC=function(e,r,n){if(n1(n)){r(e,n);return}else if(Ue(n)){r(e,Fv(e,n));return}for(var a=Je(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!xn(o)){var s=o.match(Zp);if(s){var l=s[1],u=s[2]?s[2]:null,c=Fv(e,{type:l,namespace:u,target:e.context});r(e,c)}}}};Dn.on=Dn.addListener=function(t,e,r,n,a){return Jp(this,function(i,o,s,l,u,c,f){ut(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:l,qualifier:u,conf:f})},t,e,r,n,a),this};Dn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Dn.removeListener=Dn.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=O1(this.listeners));for(var i=this.listeners,o=function(u){var c=i[u];Jp(a,function(f,d,g,h,w,y){if((c.type===g||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!w||f.qualifierCompare(c.qualifier,w))&&(!y||c.callback===y))return i.splice(u,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};Dn.removeAllListeners=function(){return this.removeListener("*")};Dn.emit=Dn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Je(e)||(e=[e]),jC(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(){var c=n[l];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===WC)&&i.eventMatches(i.context,c,o)){var f=[o];e!=null&&z1(f,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(h){return h!==c}));var d=i.callbackContext(i.context,c,o),g=c.callback.apply(d,f);i.afterEmit(i.context,c,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var YC={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Vi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},ho=function(e){return Te(e)?new Sn(e):e},em={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new As(YC,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=ho(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=ho(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=ho(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=ho(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};je.eventAliasesOn(em);var tm={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Te(e)||cr(e))return new Sn(e).filter(this);if(ut(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Te(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Te(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var c=s[u];l.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],d=f._private.data.id,g=u.hasElementWithId(d);g||n.push(f)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(c,f,d){for(var g=0;g<c.length;g++){var h=c[g],w=h._private.data.id,y=f.hasElementWithId(w);y?i.merge(h):d.push(h)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Te(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var c=this.length++;this[c]=s,i.set(l,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},We=tm;We.u=We["|"]=We["+"]=We.union=We.or=We.add;We["\\"]=We["!"]=We["-"]=We.difference=We.relativeComplement=We.subtract=We.not;We.n=We["&"]=We["."]=We.and=We.intersection=We.intersect;We["^"]=We["(+)"]=We["(-)"]=We.symmetricDifference=We.symdiff=We.xor;We.fnFilter=We.filterFn=We.stdFilter=We.filter;We.complement=We.abscomp=We.absoluteComplement;var XC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},rm=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Vc:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=s(e)-s(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},Qo={forEach:function(e,r){if(ut(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!ut(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(rm)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Vc-1}else{var i=r.source,o=r.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Qo.each=Qo.forEach;var ZC=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":Ct(Symbol))!=e&&Ct(Symbol.iterator)!=e;r&&(Qo[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return rp({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};ZC();var QC=Nt({nodeDimensionsIncludeLabels:!1}),Po={layoutDimensions:function(e){e=QC(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(x){return!x.isParent()}),i=this.cy(),o=r.eles,s=function(C){return C.id()},l=La(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(C,E,T){var S={x:E.x1+E.w/2,y:E.y1+E.h/2},P={x:(T.x-S.x)*C,y:(T.y-S.y)*C};return{x:S.x+P.x,y:S.y+P.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var C=or(),E=0;E<a.length;E++){var T=a[E],S=l(T,E);gw(C,S.x,S.y)}return C},d=f(),g=La(function(x,C){var E=l(x,C);if(c){var T=Math.abs(r.spacingFactor);E=u(T,d,E)}return r.transform!=null&&(E=r.transform(x,E)),E},s);if(r.animate){for(var h=0;h<a.length;h++){var w=a[h],y=g(w,h),v=r.animateFilter==null||r.animateFilter(w,h);if(v){var m=w.animation({position:y,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else w.position(y)}if(r.fit){var p=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(p)}else if(r.zoom!==void 0&&r.pan!==void 0){var b=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Va.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Re({},e,{eles:this}))}};Po.createLayout=Po.makeLayout=Po.layout;function nm(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Rs(t,e){return t=Jn(t),function(n){return nm(t,e,n)}}function Bs(t,e){t=Jn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return nm(t,r,a)}}var _t={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Ue(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Te(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function pu(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Qc(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||pu(i,n);var l=s.source,u=s.target;return r(l)&&(!o||pu(l,r))&&(l===u||r(u)&&(!o||pu(u,r)))}}}var $a=Rs("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});_t.takesUpSpace=Bs("takesUpSpace",Qc({ok:$a}));var JC=Rs("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&$a(t)}),eE=Rs("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&$a(t)});_t.interactive=Bs("interactive",Qc({ok:JC,parentOk:eE,edgeOkViaNode:$a}));_t.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var tE=Rs("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&$a(t)}),rE=$a;_t.visible=Bs("visible",Qc({ok:tE,edgeOkViaNode:rE}));_t.hidden=function(){var t=this[0];if(t)return!t.visible()};_t.isBundledBezier=Bs("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});_t.bypass=_t.css=_t.style;_t.renderedCss=_t.renderedStyle;_t.removeBypass=_t.removeCss=_t.removeStyle;_t.pstyle=_t.parsedStyle;var mn={};function Vv(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&ut(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Je(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),o&&d.emit(o)}return this}}function qa(t){mn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},mn[t.on]=Vv({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),mn[t.off]=Vv({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}qa({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});qa({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});qa({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});qa({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});mn.deselect=mn.unselect;mn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};qa({field:"active",on:"activate",off:"unactivate"});qa({field:"pannable",on:"panify",off:"unpanify"});mn.inactive=function(){var t=this[0];if(t)return!t._private.active};var Ht={},$v=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),c=0;c<u.length;c++){var f=u[c],d=f.source(),g=f.target();if(e.noIncomingEdges&&g===s&&d!==s||e.noOutgoingEdges&&d===s&&g!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},qv=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),f=u.target();e.outgoing&&c===o?(a.push(u),a.push(f)):e.incoming&&f===o&&(a.push(u),a.push(c))}}return this.spawn(a,!0).filter(r)}},Gv=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=u.id();i[c]||(i[c]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};Ht.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Re(Ht,{roots:$v({noIncomingEdges:!0}),leaves:$v({noOutgoingEdges:!0}),outgoers:hr(qv({outgoing:!0}),"outgoers"),successors:Gv({outgoing:!0}),incomers:hr(qv({incoming:!0}),"incomers"),predecessors:Gv({})});Re(Ht,{neighborhood:hr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),c=a===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ht.neighbourhood=Ht.neighborhood;Ht.closedNeighbourhood=Ht.closedNeighborhood;Ht.openNeighbourhood=Ht.openNeighborhood;Re(Ht,{source:hr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:hr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Hv({attr:"source"}),targets:Hv({attr:"target"})});function Hv(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}Re(Ht,{edgesWith:hr(Uv(),"edgesWith"),edgesTo:hr(Uv({thisIsSrc:!0}),"edgesTo")});function Uv(t){return function(r){var n=[],a=this._private.cy,i=t||{};Te(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),g=f||d;g&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(u))}return this.spawn(n,!0)}}Re(Ht,{connectedEdges:hr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:hr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:hr(Wv(),"parallelEdges"),codirectedEdges:hr(Wv({codirected:!0}),"codirectedEdges")});function Wv(t){var e={codirected:!1};return t=Re({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var l=i[s],u=l._private,c=u.source,f=c._private.data.id,d=u.data.target,g=c._private.edges,h=0;h<g.length;h++){var w=g[h],y=w._private.data,v=y.target,m=y.source,p=v===d&&m===f,b=f===v&&d===m;(o.codirected&&p||!o.codirected&&(p||b))&&a.push(w)}return this.spawn(a,!0).filter(n)}}Re(Ht,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var l=function(){var c=n.collection();o.push(c);var f=i[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(g){return s(g,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(g){r.has(g)&&c.has(g.source())&&c.has(g.target())&&c.merge(g)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ht.componentsOf=Ht.components;var Ot=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){lt("A collection must have a reference to the core");return}var i=new Yr,o=!1;if(!r)r=[];else if(r.length>0&&Ue(r[0])&&!Vi(r[0])){o=!0;for(var s=[],l=new Fa,u=0,c=r.length;u<c;u++){var f=r[u];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=bp();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var g=new xs(e,f,!1);s.push(g),l.add(d.id)}r=s}this.length=0;for(var h=0,w=r.length;h<w;h++){var y=r[h][0];if(y!=null){var v=y._private.data.id;(!n||!i.has(v))&&(n&&i.set(v,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var p=this.lazyMap=new Yr,b=this.eles,x=0;x<b.length;x++){var C=b[x];p.set(C.id(),{index:x,ele:C})}}},n&&(this._private.map=i),o&&!a&&this.restore()},nt=xs.prototype=Ot.prototype=Object.create(Array.prototype);nt.instanceString=function(){return"collection"};nt.spawn=function(t,e){return new Ot(this.cy(),t,e)};nt.spawnSelf=function(){return this.spawn(this)};nt.cy=function(){return this._private.cy};nt.renderer=function(){return this._private.cy.renderer()};nt.element=function(){return this[0]};nt.collection=function(){return ip(this)?this:new Ot(this._private.cy,[this])};nt.unique=function(){return new Ot(this._private.cy,this,!0)};nt.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};nt.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new Ot(e)};nt.$id=nt.getElementById;nt.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};nt.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};nt.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};nt.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Ue(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,l=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(w,y,v){var m=t[w];m!=null&&m!==n[w]&&(m?e[y]():e[v]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:Ir(n.data),position:Ir(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var g=0;return n.classes.forEach(function(h){return d.classes+=g++===0?h:" "+h}),d}}};nt.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};nt.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new xs(t,a,!1);e.push(i)}return new Ot(t,e)};nt.copy=nt.clone;nt.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,l=0,u=r.length;l<u;l++){var c=r[l];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,d=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var g=s[f],h=g._private,w=h.data;if(g.clearTraversalCache(),!(!e&&!h.removed)){if(w.id===void 0)w.id=bp();else if(ye(w.id))w.id=""+w.id;else if(xn(w.id)||!Te(w.id)){lt("Can not create element with invalid string ID `"+w.id+"`"),d();continue}else if(n.hasElementWithId(w.id)){lt("Can not create second element with ID `"+w.id+"`"),d();continue}}var y=w.id;if(g.isNode()){var v=h.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(g.isEdge()){for(var m=g,p=["source","target"],b=p.length,x=!1,C=0;C<b;C++){var E=p[C],T=w[E];ye(T)&&(T=w[E]=""+w[E]),T==null||T===""?(lt("Can not create edge `"+y+"` with unspecified "+E),x=!0):n.hasElementWithId(T)||(lt("Can not create edge `"+y+"` with nonexistant "+E+" `"+T+"`"),x=!0)}if(x){d();continue}var S=n.getElementById(w.source),P=n.getElementById(w.target);S.same(P)?S._private.edges.push(m):(S._private.edges.push(m),P._private.edges.push(m)),m._private.source=S,m._private.target=P}h.map=new Yr,h.map.set(y,{ele:g,index:0}),h.removed=!1,e&&n.addToPool(g)}for(var L=0;L<i.length;L++){var A=i[L],_=A._private.data;ye(_.parent)&&(_.parent=""+_.parent);var V=_.parent,q=V!=null;if(q||A._private.parent){var R=A._private.parent?n.collection().merge(A._private.parent):n.getElementById(V);if(R.empty())_.parent=void 0;else if(R[0].removed())Ye("Node added with missing parent, reference to parent removed"),_.parent=void 0,A._private.parent=null;else{for(var k=!1,F=R;!F.empty();){if(A.same(F)){k=!0,_.parent=void 0;break}F=F.parent()}k||(R[0]._private.children.push(A),A._private.parent=R[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var G=s.length===r.length?r:new Ot(n,s),j=0;j<G.length;j++){var H=G[j];H.isNode()||(H.parallelEdges().clearTraversalCache(),H.source().clearTraversalCache(),H.target().clearTraversalCache())}var I;a.hasCompoundNodes?I=n.collection().merge(G).merge(G.connectedNodes()).merge(G.parent()):I=G,I.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?G.emitAndNotify("add"):e&&G.emit("add")}return r};nt.removed=function(){var t=this[0];return t&&t._private.removed};nt.inside=function(){var t=this[0];return t&&!t._private.removed};nt.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(V){for(var q=V._private.edges,R=0;R<q.length;R++)l(q[R])}function s(V){for(var q=V._private.children,R=0;R<q.length;R++)l(q[R])}function l(V){var q=a[V.id()];e&&V.removed()||q||(a[V.id()]=!0,V.isNode()?(n.push(V),o(V),s(V)):n.unshift(V))}for(var u=0,c=r.length;u<c;u++){var f=r[u];l(f)}function d(V,q){var R=V._private.edges;Cn(R,q),V.clearTraversalCache()}function g(V){V.clearTraversalCache()}var h=[];h.ids={};function w(V,q){q=q[0],V=V[0];var R=V._private.children,k=V.id();Cn(R,q),q._private.parent=null,h.ids[k]||(h.ids[k]=!0,h.push(V))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var y=0;y<n.length;y++){var v=n[y];if(v.isEdge()){var m=v.source()[0],p=v.target()[0];d(m,v),d(p,v);for(var b=v.parallelEdges(),x=0;x<b.length;x++){var C=b[x];g(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var E=v.parent();E.length!==0&&w(E,v)}e&&(v._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var S=0;S<T.length;S++){var P=T[S];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var L=new Ot(this.cy(),n);L.size()>0&&(t?L.emitAndNotify("remove"):e&&L.emit("remove"));for(var A=0;A<h.length;A++){var _=h[A];(!e||!_.removed())&&_.updateStyle()}return L};nt.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var h=r[g],w=h._private.data;h.isEdge()&&(l&&(w.source=o),u&&(w.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var g=r.remove(n,a);g.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var w=r[h],y=w._private.data;w.isNode()&&(y.parent=d)}g.restore(n,a)}),r.emitAndNotify("move")}}return this};[Rp,vC,Do,pn,Oa,AC,ks,UC,em,tm,XC,Qo,Po,_t,mn,Ht].forEach(function(t){Re(nt,t)});var nE={add:function(e){var r,n=this;if(cr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new Ot(n,i)}}else if(Je(e)){var l=e;r=new Ot(n,l)}else if(Ue(e)&&(Je(e.nodes)||Je(e.edges))){for(var u=e,c=[],f=["nodes","edges"],d=0,g=f.length;d<g;d++){var h=f[d],w=u[h];if(Je(w))for(var y=0,v=w.length;y<v;y++){var m=Re({group:h},w[y]);c.push(m)}}r=new Ot(n,c)}else{var p=e;r=new xs(n,p).collection()}return r},remove:function(e){if(!cr(e)){if(Te(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function aE(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function g(P,L){return 1-3*L+3*P}function h(P,L){return 3*L-6*P}function w(P){return 3*P}function y(P,L,A){return((g(L,A)*P+h(L,A))*P+w(L))*P}function v(P,L,A){return 3*g(L,A)*P*P+2*h(L,A)*P+w(L)}function m(P,L){for(var A=0;A<a;++A){var _=v(L,t,r);if(_===0)return L;var V=y(L,t,r)-P;L-=V/_}return L}function p(){for(var P=0;P<l;++P)d[P]=y(P*u,t,r)}function b(P,L,A){var _,V,q=0;do V=L+(A-L)/2,_=y(V,t,r)-P,_>0?A=V:L=V;while(Math.abs(_)>o&&++q<s);return V}function x(P){for(var L=0,A=1,_=l-1;A!==_&&d[A]<=P;++A)L+=u;--A;var V=(P-d[A])/(d[A+1]-d[A]),q=L+V*u,R=v(q,t,r);return R>=i?m(P,q):R===0?q:b(P,L,L+u)}var C=!1;function E(){C=!0,(t!==e||r!==n)&&p()}var T=function(L){return C||E(),t===e&&r===n?L:L===0?0:L===1?1:y(x(L),e,n)};T.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return T.toString=function(){return S},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var iE=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,d,g,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,d=o!==null,d?(u=n(a,i),g=u/o*f):g=f;h=r(h||s,g),l.push(1+h.x),u+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return d?function(w){return l[w*(l.length-1)|0]}:u}}(),tt=function(e,r,n,a){var i=aE(e,r,n,a);return function(o,s,l){return o+(s-o)*i(l)}},ko={linear:function(e,r,n){return e+(r-e)*n},ease:tt(.25,.1,.25,1),"ease-in":tt(.42,0,1,1),"ease-out":tt(0,0,.58,1),"ease-in-out":tt(.42,0,.58,1),"ease-in-sine":tt(.47,0,.745,.715),"ease-out-sine":tt(.39,.575,.565,1),"ease-in-out-sine":tt(.445,.05,.55,.95),"ease-in-quad":tt(.55,.085,.68,.53),"ease-out-quad":tt(.25,.46,.45,.94),"ease-in-out-quad":tt(.455,.03,.515,.955),"ease-in-cubic":tt(.55,.055,.675,.19),"ease-out-cubic":tt(.215,.61,.355,1),"ease-in-out-cubic":tt(.645,.045,.355,1),"ease-in-quart":tt(.895,.03,.685,.22),"ease-out-quart":tt(.165,.84,.44,1),"ease-in-out-quart":tt(.77,0,.175,1),"ease-in-quint":tt(.755,.05,.855,.06),"ease-out-quint":tt(.23,1,.32,1),"ease-in-out-quint":tt(.86,0,.07,1),"ease-in-expo":tt(.95,.05,.795,.035),"ease-out-expo":tt(.19,1,.22,1),"ease-in-out-expo":tt(1,0,0,1),"ease-in-circ":tt(.6,.04,.98,.335),"ease-out-circ":tt(.075,.82,.165,1),"ease-in-out-circ":tt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return ko.linear;var a=iE(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":tt};function Kv(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function jv(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function fa(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=jv(t,a),s=jv(e,a);if(ye(o)&&ye(s))return Kv(i,o,s,r,n);if(Je(o)&&Je(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u];if(c!=null&&f!=null){var d=Kv(i,c,f,r,n);l.push(d)}else l.push(f)}return l}}function oE(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,l=o.startTime,u=n?t:t.cy(),c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=ko.linear;else{var f;if(Te(s)){var d=c.parse("transition-timing-function",s);f=d.value}else f=s;var g,h;Te(f)?(g=f,h=[]):(g=f[1],h=f.slice(2).map(function(G){return+G})),h.length>0?(g==="spring"&&h.push(o.duration),o.easingImpl=ko[g].apply(null,h)):o.easingImpl=ko[g]}var w=o.easingImpl,y;if(o.duration===0?y=1:y=(r-l)/o.duration,o.applying&&(y=o.progress),y<0?y=0:y>1&&(y=1),o.delay==null){var v=o.startPosition,m=o.position;if(m&&a&&!t.locked()){var p={};Ja(v.x,m.x)&&(p.x=fa(v.x,m.x,y,w)),Ja(v.y,m.y)&&(p.y=fa(v.y,m.y,y,w)),t.position(p)}var b=o.startPan,x=o.pan,C=i.pan,E=x!=null&&n;E&&(Ja(b.x,x.x)&&(C.x=fa(b.x,x.x,y,w)),Ja(b.y,x.y)&&(C.y=fa(b.y,x.y,y,w)),t.emit("pan"));var T=o.startZoom,S=o.zoom,P=S!=null&&n;P&&(Ja(T,S)&&(i.zoom=ki(i.minZoom,fa(T,S,y,w),i.maxZoom)),t.emit("zoom")),(E||P)&&t.emit("viewport");var L=o.style;if(L&&L.length>0&&a){for(var A=0;A<L.length;A++){var _=L[A],V=_.name,q=_,R=o.startStyle[V],k=c.properties[R.name],F=fa(R,q,y,w,k);c.overrideBypass(t,V,F)}t.emit("style")}}return o.progress=y,y}function Ja(t,e){return t==null||e==null?!1:ye(t)&&ye(e)?!0:!!(t&&e)}function sE(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Yv(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,g=d.animation.current,h=d.animation.queue,w=!1;if(g.length===0){var y=h.shift();y&&g.push(y)}for(var v=function(C){for(var E=C.length-1;E>=0;E--){var T=C[E];T()}C.splice(0,C.length)},m=g.length-1;m>=0;m--){var p=g[m],b=p._private;if(b.stopped){g.splice(m,1),b.hooked=!1,b.playing=!1,b.started=!1,v(b.frames);continue}!b.playing&&!b.applying||(b.playing&&b.applying&&(b.applying=!1),b.started||sE(c,p,t),oE(c,p,t,f),b.applying&&(b.applying=!1),v(b.frames),b.step!=null&&b.step(t),p.completed()&&(g.splice(m,1),b.hooked=!1,b.playing=!1,b.started=!1,v(b.completes)),w=!0)}return!f&&g.length===0&&h.length===0&&n.push(c),w}for(var i=!1,o=0;o<r.length;o++){var s=r[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var lE={animate:je.animate(),animation:je.animation(),animated:je.animated(),clearQueue:je.clearQueue(),delay:je.delay(),delayAnimation:je.delayAnimation(),stop:je.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Ko(function(i){Yv(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Yv(o,e)},n.beforeRenderPriorities.animations):r()}},uE={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Vi(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},go=function(e){return Te(e)?new Sn(e):e},am={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new As(uE,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,go(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,go(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,go(r),n),this},once:function(e,r,n){return this.emitter().one(e,go(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};je.eventAliasesOn(am);var oc={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};oc.jpeg=oc.jpg;var Ao={layout:function(e){var r=this;if(e==null){lt("Layout options must be specified to make a layout");return}if(e.name==null){lt("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){lt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Te(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(Re({},e,{cy:r,eles:i}));return o}};Ao.createLayout=Ao.makeLayout=Ao.layout;var cE={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},fE=Nt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),sc={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){lt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ye("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=fE(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};sc.invalidateDimensions=sc.resize;var Ro={collection:function(e,r){return Te(e)?this.$(e):cr(e)?e.collection():Je(e)?(r||(r={}),new Ot(this,e,r.unique,r.removed)):new Ot(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Ro.elements=Ro.filter=Ro.$;var Rt={},hi="t",dE="f";Rt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};Rt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c=t[l]===hi,f=e[l]===hi,d=c!==f,g=u.mappedProperties.length>0;if(d||f&&g){var h=void 0;d&&g||d?h=u.properties:g&&(h=u.mappedProperties);for(var w=0;w<h.length;w++){for(var y=h[w],v=y.name,m=!1,p=l+1;p<r.length;p++){var b=r[p],x=e[p]===hi;if(x&&(m=b.properties[y.name]!=null,m))break}!s[v]&&!m&&(s[v]=!0,o.push(v))}}}return n[a]=o,o};Rt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=hi:r+=dE}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Rt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===hi;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};Rt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],c=r.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,d=f.fnValue=u.value(r);if(d===f.prevFnValue)continue}var g=i[l]={prev:c};n.applyParsedProperty(r,u),g.next=r.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};Rt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(D,N,K){return r.getPropertiesHash(D,N,K)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var c=a[u];e.styleKeys[c]=[Wn,ya]}for(var f=function(D,N){return e.styleKeys[N][0]=Ti(D,e.styleKeys[N][0])},d=function(D,N){return e.styleKeys[N][1]=Di(D,e.styleKeys[N][1])},g=function(D,N){f(D,N),d(D,N)},h=function(D,N){for(var K=0;K<D.length;K++){var ne=D.charCodeAt(K);f(ne,N),d(ne,N)}},w=2e9,y=function(D){return-128<D&&D<128&&Math.floor(D)!==D?w-(D*1024|0):D},v=0;v<n.length;v++){var m=n[v],p=l[m];if(p!=null){var b=this.properties[m],x=b.type,C=b.groupKey,E=void 0;b.hashOverride!=null?E=b.hashOverride(t,p):p.pfValue!=null&&(E=p.pfValue);var T=b.enums==null?p.value:null,S=E!=null,P=T!=null,L=S||P,A=p.units;if(x.number&&L&&!x.multiple){var _=S?E:T;g(y(_),C),!S&&A!=null&&h(A,C)}else h(p.strValue,C)}}for(var V=[Wn,ya],q=0;q<a.length;q++){var R=a[q],k=e.styleKeys[R];V[0]=Ti(k[0],V[0]),V[1]=Di(k[1],V[1])}e.styleKey=B1(V[0],V[1]);var F=e.styleKeys;e.labelDimsKey=sn(F.labelDimensions);var G=i(t,["label"],F.labelDimensions);if(e.labelKey=sn(G),e.labelStyleKey=sn(oo(F.commonLabel,G)),!s){var j=i(t,["source-label"],F.labelDimensions);e.sourceLabelKey=sn(j),e.sourceLabelStyleKey=sn(oo(F.commonLabel,j));var H=i(t,["target-label"],F.labelDimensions);e.targetLabelKey=sn(H),e.targetLabelStyleKey=sn(oo(F.commonLabel,H))}if(s){var I=e.styleKeys,M=I.nodeBody,B=I.nodeBorder,z=I.nodeOutline,$=I.backgroundImage,W=I.compound,ee=I.pie,Y=I.stripe,U=[M,B,z,$,W,ee,Y].filter(function(J){return J!=null}).reduce(oo,[Wn,ya]);e.nodeKey=sn(U),e.hasPie=ee!=null&&ee[0]!==Wn&&ee[1]!==ya,e.hasStripe=Y!=null&&Y[0]!==Wn&&Y[1]!==ya}return o!==e.styleKey};Rt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Rt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],c=u&&u.bypass,f=t._private,d="mapping",g=function(M){return M==null?null:M.pfValue!=null?M.pfValue:M.value},h=function(){var M=g(u),B=g(n);r.checkTriggers(t,n.name,M,B)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,h(),!0):!1:(h(),!0);var w=function(){Ye("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var y=n.field.split("."),v=f.data,m=0;m<y.length&&v;m++){var p=y[m];v=v[p]}if(v==null)return w(),!1;var b;if(ye(v)){var x=n.fieldMax-n.fieldMin;x===0?b=0:b=(v-n.fieldMin)/x}else return Ye("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(b<0?b=0:b>1&&(b=1),s.color){var C=n.valueMin[0],E=n.valueMax[0],T=n.valueMin[1],S=n.valueMax[1],P=n.valueMin[2],L=n.valueMax[2],A=n.valueMin[3]==null?1:n.valueMin[3],_=n.valueMax[3]==null?1:n.valueMax[3],V=[Math.round(C+(E-C)*b),Math.round(T+(S-T)*b),Math.round(P+(L-P)*b),Math.round(A+(_-A)*b)];i={bypass:n.bypass,name:n.name,value:V,strValue:"rgb("+V[0]+", "+V[1]+", "+V[2]+")"}}else if(s.number){var q=n.valueMin+(n.valueMax-n.valueMin)*b;i=this.parse(n.name,q,n.bypass,d)}else return!1;if(!i)return w(),!1;i.mapping=n,n=i;break}case o.data:{for(var R=n.field.split("."),k=f.data,F=0;F<R.length&&k;F++){var G=R[F];k=k[G]}if(k!=null&&(i=this.parse(n.name,k,n.bypass,d)),!i)return w(),!1;i.mapping=n,n=i;break}case o.fn:{var j=n.value,H=n.fnValue!=null?n.fnValue:j(t);if(n.prevFnValue=H,H==null)return Ye("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,H,n.bypass,d),!i)return Ye("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Ir(n),n=i;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):c?u.bypassed=n:a[n.name]=n,h(),!0};Rt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};Rt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Rt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var c=a[u],f=t.pstyle(c),d=e[c];if(d){var g=d.prev,h=g,w=d.next!=null?d.next:f,y=!1,v=void 0,m=1e-6;h&&(ye(h.pfValue)&&ye(w.pfValue)?(y=w.pfValue-h.pfValue,v=h.pfValue+m*y):ye(h.value)&&ye(w.value)?(y=w.value-h.value,v=h.value+m*y):Je(h.value)&&Je(w.value)&&(y=h.value[0]!==w.value[0]||h.value[1]!==w.value[1]||h.value[2]!==w.value[2],v=h.strValue),y&&(s[c]=w.strValue,this.applyBypass(t,c,v),l=!0))}}if(!l)return;n.transitioning=!0,new Va(function(p){o>0?t.delayAnimation(o).play().promise().then(p):p()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Rt.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);t.removed()||s!=null&&s(r,n,t)&&i(o)};Rt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Rt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};Rt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Rt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Rt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var Ki={};Ki.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,c=this.parse(u,r,!0);c&&i.push(c)}}else if(Te(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(Ue(e)){var d=e;n=r;for(var g=Object.keys(d),h=0;h<g.length;h++){var w=g[h],y=d[w];if(y===void 0&&(y=d[bs(w)]),y!==void 0){var v=this.parse(w,y,!0);v&&i.push(v)}}}else return!1;if(i.length===0)return!1;for(var m=!1,p=0;p<t.length;p++){for(var b=t[p],x={},C=void 0,E=0;E<i.length;E++){var T=i[E];if(n){var S=b.pstyle(T.name);C=x[T.name]={prev:S}}m=this.applyParsedProperty(b,Ir(T))||m,n&&(C.next=b.pstyle(T.name))}m&&this.updateStyleHints(b),n&&this.updateTransitions(b,x,o)}return m};Ki.overrideBypass=function(t,e,r){e=zc(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};Ki.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Ki.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],c=i.pstyle(u.name);if(!(!c||!c.bypass)){var f="",d=this.parse(l,f,!0),g=o[u.name]={prev:c};this.applyParsedProperty(i,d),g.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var Jc={};Jc.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Jc.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Or={};Or.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Or.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[bs(i.name)]=o)}return n}};Or.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};Or.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&s!=null&&ye(s)){var c=t.cy().zoom(),f=function(y){return y*c},d=function(y,v){return f(y)+v},g=Je(s),h=g?l.every(function(w){return w!=null}):l!=null;return h?g?s.map(function(w,y){return d(w,l[y])}).join(" "):d(s,l):g?s.map(function(w){return Te(w)?w:""+f(w)}).join(" "):""+f(s)}else if(u!=null)return u}return null}};Or.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(Ue(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Or.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[zc(s)],c=this.parse(u.name,l);c&&r.push(c)}return r};Or.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Ti(s,n[0]),n[1]=Di(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=Ti(s,n[0]),n[1]=Di(s,n[1]);return n};Or.getPropertiesHash=Or.getNonDefaultPropertiesHash;var Ms={};Ms.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};Ms.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Ms.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var ef={};ef.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ye("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Sn(f);if(d.invalid){Ye("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var g=c[2],h=!1;i=g;for(var w=[];;){var y=i.match(/^\s*$/);if(y)break;var v=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Ye("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),h=!0;break}o=v[0];var m=v[1],p=v[2],b=e.properties[m];if(!b){Ye("Skipping property: Invalid property name in: "+o),l();continue}var x=r.parse(m,p);if(!x){Ye("Skipping property: Invalid property definition in: "+o),l();continue}w.push({name:m,val:p}),l()}if(h){s();break}r.selector(f);for(var C=0;C<w.length;C++){var E=w[C];r.css(E.name,E.val)}s()}return r};ef.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var mt={};(function(){var t=xt,e=u1,r=f1,n=d1,a=v1,i=function(J){return"^"+J+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(J){var D=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+J+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+D+")\\s*\\,\\s*("+D+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];mt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(J,D){switch(J.length){case 2:return D[0]!=="deg"&&D[0]!=="rad"&&D[1]!=="deg"&&D[1]!=="rad";case 1:return Te(J[0])||D[0]==="deg"||D[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(J){var D=J.length;return D===1||D===2||D===4}}};var l={zeroNonZero:function(J,D){return(J==null||D==null)&&J!==D||J==0&&D!=0?!0:J!=0&&D==0},any:function(J,D){return J!=D},emptyNonEmpty:function(J,D){var N=xn(J),K=xn(D);return N&&!K||!N&&K}},u=mt.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],w=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(J,D,N){return J===D?!1:N.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],v=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],m=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],p=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],b=function(J,D){return D.value==="label"?-J.poolIndex():D.pfValue},x=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],C=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],E=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],T=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],S=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],P=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(J,D){return J===D?!1:J==="bezier"||D==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],L=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],A=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],_=[];mt.pieBackgroundN=16,_.push({name:"pie-size",type:u.sizeMaybePercent}),_.push({name:"pie-hole",type:u.sizeMaybePercent}),_.push({name:"pie-start-angle",type:u.angle});for(var V=1;V<=mt.pieBackgroundN;V++)_.push({name:"pie-"+V+"-background-color",type:u.color}),_.push({name:"pie-"+V+"-background-size",type:u.percent}),_.push({name:"pie-"+V+"-background-opacity",type:u.zeroOneNumber});var q=[];mt.stripeBackgroundN=16,q.push({name:"stripe-size",type:u.sizeMaybePercent}),q.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var R=1;R<=mt.stripeBackgroundN;R++)q.push({name:"stripe-"+R+"-background-color",type:u.color}),q.push({name:"stripe-"+R+"-background-size",type:u.percent}),q.push({name:"stripe-"+R+"-background-opacity",type:u.zeroOneNumber});var k=[],F=mt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(U){F.forEach(function(J){var D=J+"-"+U.name,N=U.type,K=U.triggersBounds;k.push({name:D,type:N,triggersBounds:K})})},{});var G=mt.properties=[].concat(w,p,y,v,m,L,h,g,c,f,d,x,C,E,T,_,q,S,P,k,A),j=mt.propertyGroups={behavior:w,transition:p,visibility:y,overlay:v,underlay:m,ghost:L,commonLabel:h,labelDimensions:g,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:x,nodeBorder:C,nodeOutline:E,backgroundImage:T,pie:_,stripe:q,compound:S,edgeLine:P,edgeArrow:k,core:A},H=mt.propertyGroupNames={},I=mt.propertyGroupKeys=Object.keys(j);I.forEach(function(U){H[U]=j[U].map(function(J){return J.name}),j[U].forEach(function(J){return J.groupKey=U})});var M=mt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];mt.propertyNames=G.map(function(U){return U.name});for(var B=0;B<G.length;B++){var z=G[B];G[z.name]=z}for(var $=0;$<M.length;$++){var W=M[$],ee=G[W.pointsTo],Y={name:W.name,alias:!0,pointsTo:ee};G.push(Y),G[W.name]=Y}})();mt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};mt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Re({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=mt.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=mt.stripeBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return mt.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,d=u.value;l[f]=d}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};mt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ls={};Ls.parse=function(t,e,r,n){var a=this;if(ut(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,l=pp(t,s,o,i),u=a.propCache=a.propCache||[],c;return(c=u[l])||(c=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Ir(c),c&&(c.value=Ir(c.value))),c};Ls.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ye("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ye("The style value of `label` is deprecated for `"+a.name+"`"),a};Ls.parseImpl=function(t,e,r,n){var a=this;t=zc(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=Te(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(ut(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var d=s.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var g=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var w=this.parse(t,f[5]);if(!w||w.mapped)return!1;if(h.pfValue===w.pfValue||h.strValue===w.strValue)return Ye("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(u.color){var y=h.value,v=w.value,m=y[0]===v[0]&&y[1]===v[1]&&y[2]===v[2]&&(y[3]===v[3]||(y[3]==null||y[3]===1)&&(v[3]==null||v[3]===1));if(m)return!1}return{name:t,value:f,strValue:""+e,mapped:g,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:w.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var p;if(l?p=e.split(/\s+/):Je(e)?p=e:p=[e],u.evenMultiple&&p.length%2!==0)return null;for(var b=[],x=[],C=[],E="",T=!1,S=0;S<p.length;S++){var P=a.parse(t,p[S],r,"multiple");T=T||Te(P.value),b.push(P.value),C.push(P.pfValue!=null?P.pfValue:P.value),x.push(P.units),E+=(S>0?" ":"")+P.strValue}return u.validate&&!u.validate(b,x)?null:u.singleEnum&&T?b.length===1&&Te(b[0])?{name:t,value:b[0],strValue:b[0],bypass:r}:null:{name:t,value:b,pfValue:C,strValue:E,bypass:r,units:x}}var L=function(){for(var Y=0;Y<u.enums.length;Y++){var U=u.enums[Y];if(U===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var A,_="px";if(u.units&&(A=u.units),u.implicitUnits&&(_=u.implicitUnits),!u.unitless)if(l){var V="px|em"+(u.allowPercent?"|\\%":"");A&&(V=A);var q=e.match("^("+xt+")("+V+")?$");q&&(e=q[1],A=q[2]||_)}else(!A||u.implicitUnits)&&(A=_);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,L();if(u.integer&&!r1(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var R={name:t,value:e,strValue:""+e+(A||""),units:A,bypass:r};return u.unitless||A!=="px"&&A!=="em"?R.pfValue=e:R.pfValue=A==="px"||!A?e:this.getEmSizeInPixels()*e,(A==="ms"||A==="s")&&(R.pfValue=A==="ms"?e:1e3*e),(A==="deg"||A==="rad")&&(R.pfValue=A==="rad"?e:uw(e)),A==="%"&&(R.pfValue=e/100),R}else if(u.propList){var k=[],F=""+e;if(F!=="none"){for(var G=F.split(/\s*,\s*|\s+/),j=0;j<G.length;j++){var H=G[j].trim();a.properties[H]?k.push(H):Ye("`"+H+"` is not a valid property name")}if(k.length===0)return null}return{name:t,value:k,strValue:k.length===0?"none":k.join(" "),bypass:r}}else if(u.color){var I=up(e);return I?{name:t,value:I,pfValue:I,strValue:"rgb("+I[0]+","+I[1]+","+I[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var M=L();if(M)return M}for(var B=u.regexes?u.regexes:[u.regex],z=0;z<B.length;z++){var $=new RegExp(B[z]),W=$.exec(e);if(W)return{name:t,value:u.singleRegexMatchValue?W[1]:W,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?L():null};var Pt=function(e){if(!(this instanceof Pt))return new Pt(e);if(!Nc(e)){lt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Ut=Pt.prototype;Ut.instanceString=function(){return"style"};Ut.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Ut.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Ut.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Ut.selector=function(t){var e=t==="core"?null:new Sn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Ut.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[bs(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Ut.style=Ut.css;Ut.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Ut.append=function(t){return op(t)?t.appendToStyle(this):Je(t)?this.appendFromJson(t):Te(t)&&this.appendFromString(t),this};Pt.fromJson=function(t,e){var r=new Pt(t);return r.fromJson(e),r};Pt.fromString=function(t,e){return new Pt(t).fromString(e)};[Rt,Ki,Jc,Or,Ms,ef,mt,Ls].forEach(function(t){Re(Ut,t)});Pt.types=Ut.types;Pt.properties=Ut.properties;Pt.propertyGroups=Ut.propertyGroups;Pt.propertyGroupNames=Ut.propertyGroupNames;Pt.propertyGroupKeys=Ut.propertyGroupKeys;var vE={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return op(e)?r.style=e.generateStyle(this):Je(e)?r.style=Pt.fromJson(this,e):Te(e)?r.style=Pt.fromString(this,e):r.style=Pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},hE="single",ra={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=hE),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(Te(e[0]))return n=e[0],r[n];if(Ue(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,ye(o)&&(r.x=o),ye(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ye(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ue(e)&&(s=n[0],l=s.x,u=s.y,ye(l)&&(a.x+=l),ye(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&ye(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ye(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Te(e)){var a=e;e=this.$(a)}else if(i1(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else cr(e)||(e=this.mutableElements());if(!(cr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(r=ye(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*r)/n.w,(s-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ye(e)&&ye(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ye(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ye(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),ye(e)?o=e:Ue(e)&&(o=e.level,e.position!=null?i=Cs(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!ye(o)||o===a||i!=null&&(!ye(i.x)||!ye(i.y)))return null;if(i!=null){var l=n,u=a,c=o,f={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(ye(e.zoom)||(n=!1),Ue(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;ye(u.x)&&(r.pan.x=u.x,s=!1),ye(u.y)&&(r.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Te(e)){var n=e;e=this.mutableElements().filter(n)}else cr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ra.centre=ra.center;ra.autolockNodes=ra.autolock;ra.autoungrabifyNodes=ra.autoungrabify;var Mi={data:je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Mi.attr=Mi.data;Mi.removeAttr=Mi.removeData;var Li=function(e){var r=this;e=Re({},e);var n=e.container;n&&!Wo(n)&&Wo(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=bt!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Re({name:o?"grid":"null"},s.layout),s.renderer=Re({name:o?"canvas":"null"},s.renderer);var l=function(h,w,y){return w!==void 0?w:y!==void 0?y:h},u=this._private={container:n,ready:!1,options:s,elements:new Ot(this),listeners:[],aniEles:new Ot(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:ye(s.zoom)?s.zoom:1,pan:{x:Ue(s.pan)&&ye(s.pan.x)?s.pan.x:0,y:Ue(s.pan)&&ye(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(h,w){var y=h.some(o1);if(y)return Va.all(h).then(w);w(h)};u.styleEnabled&&r.setStyle([]);var f=Re({},s,s.renderer);r.initRenderer(f);var d=function(h,w,y){r.notifications(!1);var v=r.mutableElements();v.length>0&&v.remove(),h!=null&&(Ue(h)||Je(h))&&r.add(h),r.one("layoutready",function(p){r.notifications(!0),r.emit(p),r.one("load",w),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",y),r.emit("done")});var m=Re({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()};c([s.style,s.elements],function(g){var h=g[0],w=g[1];u.styleEnabled&&r.style().append(h),d(w,function(){r.startAnimationLoop(),u.ready=!0,ut(s.ready)&&r.on("ready",s.ready);for(var y=0;y<i.length;y++){var v=i[y];r.on("ready",v)}a&&(a.readies=[]),r.emit("ready")},s.done)})},Jo=Li.prototype;Re(Jo,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return bt;var r=this._private.container.ownerDocument;return r===void 0||r==null?bt:r.defaultView||bt},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Wo(e)&&Wo(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Re({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ir(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(b){return r.getElementById(b.id())};if(Ue(e)){if(r.startBatch(),e.elements){var o={},s=function(b,x){for(var C=[],E=[],T=0;T<b.length;T++){var S=b[T];if(!S.data.id){Ye("cy.json() cannot handle elements without an ID attribute");continue}var P=""+S.data.id,L=r.getElementById(P);o[P]=!0,L.length!==0?E.push({ele:L,json:S}):(x&&(S.group=x),C.push(S))}r.add(C);for(var A=0;A<E.length;A++){var _=E[A],V=_.ele,q=_.json;V.json(q)}};if(Je(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];Je(f)&&s(f,c)}var d=r.collection();a.filter(function(p){return!o[p.id()]}).forEach(function(p){p.isParent()?d.merge(p):p.remove()}),d.forEach(function(p){return p.children().move({parent:null})}),d.forEach(function(p){return i(p).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<g.length;h++){var w=g[h];e[w]!=null&&r[w](e[w])}return r.endBatch(),this}else{var y=!!e,v={};y?v.elements=this.elements().map(function(p){return p.json()}):(v.elements={},a.forEach(function(p){var b=p.group();v.elements[b]||(v.elements[b]=[]),v.elements[b].push(p.json())})),this._private.styleEnabled&&(v.style=r.style().json()),v.data=Ir(r.data());var m=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Ir(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Ir(m.renderer),v.hideEdgesOnViewport=m.hideEdgesOnViewport,v.textureOnViewport=m.textureOnViewport,v.wheelSensitivity=m.wheelSensitivity,v.motionBlur=m.motionBlur,v.multiClickDebounceTime=m.multiClickDebounceTime,v}}});Jo.$id=Jo.getElementById;[nE,lE,am,oc,Ao,cE,sc,Ro,vE,ra,Mi].forEach(function(t){Re(Jo,t)});var gE={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},pE={maximal:!1,acyclic:!1},da=function(e){return e.scratch("breadthfirst")},Xv=function(e,r){return e.scratch("breadthfirst",r)};function im(t){this.options=Re({},gE,pE,t)}im.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(le){return le.isChildless()}),a=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,l=e.extent(),u=or(s?t.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),c;if(cr(t.roots))c=t.roots;else if(Je(t.roots)){for(var f=[],d=0;d<t.roots.length;d++){var g=t.roots[d],h=e.getElementById(g);f.push(h)}c=e.collection(f)}else if(Te(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var w=r.components();c=e.collection();for(var y=function(){var X=w[v],Q=X.maxDegree(!1),Z=X.filter(function(fe){return fe.degree(!1)===Q});c=c.add(Z)},v=0;v<w.length;v++)y()}var m=[],p={},b=function(X,Q){m[Q]==null&&(m[Q]=[]);var Z=m[Q].length;m[Q].push(X),Xv(X,{index:Z,depth:Q})},x=function(X,Q){var Z=da(X),fe=Z.depth,oe=Z.index;m[fe][oe]=null,X.isChildless()&&b(X,Q)};a.bfs({roots:c,directed:t.directed,visit:function(X,Q,Z,fe,oe){var he=X[0],pe=he.id();he.isChildless()&&b(he,oe),p[pe]=!0}});for(var C=[],E=0;E<n.length;E++){var T=n[E];p[T.id()]||C.push(T)}var S=function(X){for(var Q=m[X],Z=0;Z<Q.length;Z++){var fe=Q[Z];if(fe==null){Q.splice(Z,1),Z--;continue}Xv(fe,{depth:X,index:Z})}},P=function(X,Q){for(var Z=da(X),fe=X.incomers().filter(function(Ae){return Ae.isNode()&&r.has(Ae)}),oe=-1,he=X.id(),pe=0;pe<fe.length;pe++){var ge=fe[pe],Ee=da(ge);oe=Math.max(oe,Ee.depth)}if(Z.depth<=oe){if(!t.acyclic&&Q[he])return null;var we=oe+1;return x(X,we),Q[he]=we,!0}return!1};if(i&&o){var L=[],A={},_=function(X){return L.push(X)},V=function(){return L.shift()};for(n.forEach(function(le){return L.push(le)});L.length>0;){var q=V(),R=P(q,A);if(R)q.outgoers().filter(function(le){return le.isNode()&&r.has(le)}).forEach(_);else if(R===null){Ye("Detected double maximal shift for node `"+q.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var k=0;if(t.avoidOverlap)for(var F=0;F<n.length;F++){var G=n[F],j=G.layoutDimensions(t),H=j.w,I=j.h;k=Math.max(k,H,I)}var M={},B=function(X){if(M[X.id()])return M[X.id()];for(var Q=da(X).depth,Z=X.neighborhood(),fe=0,oe=0,he=0;he<Z.length;he++){var pe=Z[he];if(!(pe.isEdge()||pe.isParent()||!n.has(pe))){var ge=da(pe);if(ge!=null){var Ee=ge.index,we=ge.depth;if(!(Ee==null||we==null)){var Ae=m[we].length;we<Q&&(fe+=Ee/Ae,oe++)}}}}return oe=Math.max(1,oe),fe=fe/oe,oe===0&&(fe=0),M[X.id()]=fe,fe},z=function(X,Q){var Z=B(X),fe=B(Q),oe=Z-fe;return oe===0?lp(X.id(),Q.id()):oe};t.depthSort!==void 0&&(z=t.depthSort);for(var $=m.length,W=0;W<$;W++)m[W].sort(z),S(W);for(var ee=[],Y=0;Y<C.length;Y++)ee.push(C[Y]);var U=function(){for(var X=0;X<$;X++)S(X)};ee.length&&(m.unshift(ee),$=m.length,U());for(var J=0,D=0;D<$;D++)J=Math.max(m[D].length,J);var N={x:u.x1+u.w/2,y:u.y1+u.h/2},K=n.reduce(function(le,X){return function(Q){return{w:le.w===-1?Q.w:(le.w+Q.w)/2,h:le.h===-1?Q.h:(le.h+Q.h)/2}}(X.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ne=Math.max($===1?0:s?(u.h-t.padding*2-K.h)/($-1):(u.h-t.padding*2-K.h)/($+1),k),ce=m.reduce(function(le,X){return Math.max(le,X.length)},0),ie=function(X){var Q=da(X),Z=Q.depth,fe=Q.index;if(t.circle){var oe=Math.min(u.w/2/$,u.h/2/$);oe=Math.max(oe,k);var he=oe*Z+oe-($>0&&m[0].length<=3?oe/2:0),pe=2*Math.PI/m[Z].length*fe;return Z===0&&m[0].length===1&&(he=1),{x:N.x+he*Math.cos(pe),y:N.y+he*Math.sin(pe)}}else{var ge=m[Z].length,Ee=Math.max(ge===1?0:s?(u.w-t.padding*2-K.w)/((t.grid?ce:ge)-1):(u.w-t.padding*2-K.w)/((t.grid?ce:ge)+1),k),we={x:N.x+(fe+1-(ge+1)/2)*Ee,y:N.y+(Z+1-($+1)/2)*ne};return we}};return r.nodes().layoutPositions(this,t,ie),this};var mE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function om(t){this.options=Re({},mE,t)}om.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=or(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var g=i[d],h=g.layoutDimensions(e),w=h.w,y=h.h;f=Math.max(f,w,y)}if(ye(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var v=Math.cos(u)-Math.cos(0),m=Math.sin(u)-Math.sin(0),p=Math.sqrt(f*f/(v*v+m*m));c=Math.max(p,c)}var b=function(C,E){var T=e.startAngle+E*u*(a?1:-1),S=c*Math.cos(T),P=c*Math.sin(T),L={x:s.x+S,y:s.y+P};return L};return n.nodes().layoutPositions(this,e,b),this};var yE={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function sm(t){this.options=Re({},yE,t)}sm.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=or(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var g=0;g<i.length;g++){var h=i[g],w=h.layoutDimensions(e);u=Math.max(u,w.w,w.h)}l.sort(function(K,ne){return ne.value-K.value});for(var y=e.levelWidth(i),v=[[]],m=v[0],p=0;p<l.length;p++){var b=l[p];if(m.length>0){var x=Math.abs(m[0].value-b.value);x>=y&&(m=[],v.push(m))}m.push(b)}var C=u+e.minNodeSpacing;if(!e.avoidOverlap){var E=v.length>0&&v[0].length>1,T=Math.min(o.w,o.h)/2-C,S=T/(v.length+E?1:0);C=Math.min(C,S)}for(var P=0,L=0;L<v.length;L++){var A=v[L],_=e.sweep===void 0?2*Math.PI-2*Math.PI/A.length:e.sweep,V=A.dTheta=_/Math.max(1,A.length-1);if(A.length>1&&e.avoidOverlap){var q=Math.cos(V)-Math.cos(0),R=Math.sin(V)-Math.sin(0),k=Math.sqrt(C*C/(q*q+R*R));P=Math.max(k,P)}A.r=P,P+=C}if(e.equidistant){for(var F=0,G=0,j=0;j<v.length;j++){var H=v[j],I=H.r-G;F=Math.max(F,I)}G=0;for(var M=0;M<v.length;M++){var B=v[M];M===0&&(G=B.r),B.r=G,G+=F}}for(var z={},$=0;$<v.length;$++)for(var W=v[$],ee=W.dTheta,Y=W.r,U=0;U<W.length;U++){var J=W[U],D=e.startAngle+(r?1:-1)*ee*U,N={x:s.x+Y*Math.cos(D),y:s.y+Y*Math.sin(D)};z[J.node.id()]=N}return a.nodes().layoutPositions(this,e,function(K){var ne=K.id();return z[ne]}),this};var mu,bE={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Is(t){this.options=Re({},bE,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(n)}Is.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?mu=!0:mu=!1;var n=wE(e,r,t);mu&&CE(n),t.randomize&&EE(n);var a=Qr(),i=function(){SE(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(d){return!(r.stopped||d>=t.numIter||(TE(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),g=um(n,t,d);d.layoutPositions(r,t,g)}},l=0,u=!0;if(t.animate===!0){var c=function(){for(var d=0;u&&d<t.refresh;)u=o(l),l++,d++;if(!u)Qv(n,t),s();else{var g=Qr();g-a>=t.animationThreshold&&i(),Ko(c)}};c()}else{for(;u;)u=o(l),l++;Qv(n,t),s()}return this};Is.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Is.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wE=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=or(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var f=l[c],d=0;d<f.length;d++){var g=f[d];u[g.id()]=c}for(var c=0;c<s.nodeSize;c++){var h=i[c],w=h.layoutDimensions(n),y={};y.isLocked=h.locked(),y.id=h.data("id"),y.parentId=h.data("parent"),y.cmptId=u[h.id()],y.children=[],y.positionX=h.position("x"),y.positionY=h.position("y"),y.offsetX=0,y.offsetY=0,y.height=w.w,y.width=w.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(h.style("padding")),y.padRight=parseFloat(h.style("padding")),y.padTop=parseFloat(h.style("padding")),y.padBottom=parseFloat(h.style("padding")),y.nodeRepulsion=ut(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,s.layoutNodes.push(y),s.idToIndex[y.id]=c}for(var v=[],m=0,p=-1,b=[],c=0;c<s.nodeSize;c++){var h=s.layoutNodes[c],x=h.parentId;x!=null?s.layoutNodes[s.idToIndex[x]].children.push(h.id):(v[++p]=h.id,b.push(h.id))}for(s.graphSet.push(b);m<=p;){var C=v[m++],E=s.idToIndex[C],g=s.layoutNodes[E],T=g.children;if(T.length>0){s.graphSet.push(T);for(var c=0;c<T.length;c++)v[++p]=T[c]}}for(var c=0;c<s.graphSet.length;c++)for(var S=s.graphSet[c],d=0;d<S.length;d++){var P=s.idToIndex[S[d]];s.indexToGraph[P]=c}for(var c=0;c<s.edgeSize;c++){var L=a[c],A={};A.id=L.data("id"),A.sourceId=L.data("source"),A.targetId=L.data("target");var _=ut(n.idealEdgeLength)?n.idealEdgeLength(L):n.idealEdgeLength,V=ut(n.edgeElasticity)?n.edgeElasticity(L):n.edgeElasticity,q=s.idToIndex[A.sourceId],R=s.idToIndex[A.targetId],k=s.indexToGraph[q],F=s.indexToGraph[R];if(k!=F){for(var G=xE(A.sourceId,A.targetId,s),j=s.graphSet[G],H=0,y=s.layoutNodes[q];j.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],H++;for(y=s.layoutNodes[R];j.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],H++;_*=H*n.nestingFactor}A.idealLength=_,A.elasticity=V,s.layoutEdges.push(A)}return s},xE=function(e,r,n){var a=lm(e,r,0,n);return 2>a.count?0:a.graph},lm=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],c=a.layoutNodes[u].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=lm(e,r,f,a);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},CE,EE=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},um=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var u=(l.positionX-i.x1)/i.w,c=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+c*a.h}}else return{x:l.positionX,y:l.positionY}}},SE=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=um(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},TE=function(e,r,n){DE(e,r),AE(e),RE(e,r),BE(e),ME(e)},DE=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];PE(s,u,e,r)}},Zv=function(e){return-1+2*e*Math.random()},PE=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;s===0&&l===0&&(s=Zv(u),l=Zv(u));var c=kE(e,r,s,l);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(s*s+l*l),g=f*s/d,h=f*l/d;else var w=es(e,s,l),y=es(r,-1*s,-1*l),v=y.x-w.x,m=y.y-w.y,p=v*v+m*m,d=Math.sqrt(p),f=(e.nodeRepulsion+r.nodeRepulsion)/p,g=f*v/d,h=f*m/d;e.isLocked||(e.offsetX-=g,e.offsetY-=h),r.isLocked||(r.offsetX+=g,r.offsetY+=h)}},kE=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},es=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/r,u=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*u<=l&&l<=u?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*u<=l&&l<=u?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(l<=-1*u||l>=u)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},AE=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(!(u===0&&c===0)){var f=es(o,u,c),d=es(l,-1*u,-1*c),g=d.x-f.x,h=d.y-f.y,w=Math.sqrt(g*g+h*h),y=Math.pow(a.idealLength-w,2)/a.elasticity;if(w!==0)var v=y*g/w,m=y*h/w;else var v=0,m=0;o.isLocked||(o.offsetX+=v,o.offsetY+=m),l.isLocked||(l.offsetX-=v,l.offsetY-=m)}}},RE=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;for(var f=0;f<o;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var g=s-d.positionX,h=l-d.positionY,w=Math.sqrt(g*g+h*h);if(w>n){var y=r.gravity*g/w,v=r.gravity*h/w;d.offsetX+=y,d.offsetY+=v}}}}},BE=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,d=0;d<u.length;d++){var g=e.layoutNodes[e.idToIndex[u[d]]];g.offsetX+=c,g.offsetY+=f,n[++i]=u[d]}l.offsetX=0,l.offsetY=0}}},ME=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=LE(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,cm(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},LE=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},cm=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return cm(a,r)}},Qv=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}a.sort(function(m,p){return p.w*p.h-m.w*m.h});for(var g=0,h=0,w=0,y=0,v=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=g-c.x1,d.positionY+=h-c.y1)}g+=c.w+r.componentSpacing,w+=c.w+r.componentSpacing,y=Math.max(y,c.h),w>v&&(h+=y+r.componentSpacing,g=0,w=0,y=0)}}},IE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function fm(t){this.options=Re({},IE,t)}fm.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=or(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(M){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),c=function(B){if(B==null)return Math.min(l,u);var z=Math.min(l,u);z==l?l=B:u=B},f=function(B){if(B==null)return Math.max(l,u);var z=Math.max(l,u);z==l?l=B:u=B},d=e.rows,g=e.cols!=null?e.cols:e.columns;if(d!=null&&g!=null)l=d,u=g;else if(d!=null&&g==null)l=d,u=Math.ceil(o/l);else if(d==null&&g!=null)u=g,l=Math.ceil(o/u);else if(u*l>o){var h=c(),w=f();(h-1)*w>=o?c(h-1):(w-1)*h>=o&&f(w-1)}else for(;u*l<o;){var y=c(),v=f();(v+1)*y>=o?f(v+1):c(y+1)}var m=i.w/u,p=i.h/l;if(e.condense&&(m=0,p=0),e.avoidOverlap)for(var b=0;b<a.length;b++){var x=a[b],C=x._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var E=x.layoutDimensions(e),T=e.avoidOverlapPadding,S=E.w+T,P=E.h+T;m=Math.max(m,S),p=Math.max(p,P)}for(var L={},A=function(B,z){return!!L["c-"+B+"-"+z]},_=function(B,z){L["c-"+B+"-"+z]=!0},V=0,q=0,R=function(){q++,q>=u&&(q=0,V++)},k={},F=0;F<a.length;F++){var G=a[F],j=e.position(G);if(j&&(j.row!==void 0||j.col!==void 0)){var H={row:j.row,col:j.col};if(H.col===void 0)for(H.col=0;A(H.row,H.col);)H.col++;else if(H.row===void 0)for(H.row=0;A(H.row,H.col);)H.row++;k[G.id()]=H,_(H.row,H.col)}}var I=function(B,z){var $,W;if(B.locked()||B.isParent())return!1;var ee=k[B.id()];if(ee)$=ee.col*m+m/2+i.x1,W=ee.row*p+p/2+i.y1;else{for(;A(V,q);)R();$=q*m+m/2+i.x1,W=V*p+p/2+i.y1,_(V,q),R()}return{x:$,y:W}};a.layoutPositions(this,e,I)}return this};var _E={ready:function(){},stop:function(){}};function tf(t){this.options=Re({},_E,t)}tf.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};tf.prototype.stop=function(){return this};var OE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function dm(t){this.options=Re({},OE,t)}dm.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=ut(t.positions);function a(i){if(t.positions==null)return aw(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var NE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function vm(t){this.options=Re({},NE,t)}vm.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=or(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var zE=[{name:"breadthfirst",impl:im},{name:"circle",impl:om},{name:"concentric",impl:sm},{name:"cose",impl:Is},{name:"grid",impl:fm},{name:"null",impl:tf},{name:"preset",impl:dm},{name:"random",impl:vm}];function hm(t){this.options=t,this.notifications=0}var Jv=function(){},eh=function(){throw new Error("A headless instance can not render images")};hm.prototype={recalculateRenderedStyle:Jv,notify:function(){this.notifications++},init:Jv,isHeadless:function(){return!0},png:eh,jpg:eh};var rf={};rf.arrowShapeWidth=.3;rf.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,c,f,d,g,h,w){var y=g.x-f/2-w,v=g.x+f/2+w,m=g.y-f/2-w,p=g.y+f/2+w,b=y<=u&&u<=v&&m<=c&&c<=p;return b},n=function(u,c,f,d,g){var h=u*Math.cos(d)-c*Math.sin(d),w=u*Math.sin(d)+c*Math.cos(d),y=h*f,v=w*f,m=y+g.x,p=v+g.y;return{x:m,y:p}},a=function(u,c,f,d){for(var g=[],h=0;h<u.length;h+=2){var w=u[h],y=u[h+1];g.push(n(w,y,c,f,d))}return g},i=function(u){for(var c=[],f=0;f<u.length;f++){var d=u[f];c.push(d.x,d.y)}return c},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,c){Te(c)&&(c=t[c]),t[u]=Re({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,g,h,w,y,v){var m=i(a(this.points,h+2*v,w,y)),p=ar(d,g,m);return p},roughCollide:r,draw:function(d,g,h,w){var y=a(this.points,g,h,w);e.arrowShapeImpl("polygon")(d,y)},spacing:function(d){return 0},gap:o},c)};s("none",{collide:jo,roughCollide:jo,draw:$c,spacing:pd,gap:pd}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,c,f,d,g){var h=a(this.points,c,f,d),w=this.controlPoint,y=n(w[0],w[1],c,f,d);e.arrowShapeImpl(this.name)(u,h,y)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,d,g,h,w){var y=i(a(this.points,f+2*w,d,g)),v=i(a(this.pointsTee,f+2*w,d,g)),m=ar(u,c,y)||ar(u,c,v);return m},draw:function(u,c,f,d,g){var h=a(this.points,c,f,d),w=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(u,h,w)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,d,g,h,w){var y=g,v=Math.pow(y.x-u,2)+Math.pow(y.y-c,2)<=Math.pow((f+2*w)*this.radius,2),m=i(a(this.points,f+2*w,d,g));return ar(u,c,m)||v},draw:function(u,c,f,d,g){var h=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(u,h,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),d=c/u,g=3,h=5;return f[g]=f[g]-d,f[h]=f[h]-d,f},collide:function(u,c,f,d,g,h,w){var y=i(a(this.points,f+2*w,d,g)),v=i(a(this.crossLinePts(f,h),f+2*w,d,g)),m=ar(u,c,y)||ar(u,c,v);return m},draw:function(u,c,f,d,g){var h=a(this.points,c,f,d),w=a(this.crossLinePts(c,g),c,f,d);e.arrowShapeImpl(this.name)(u,h,w)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,c,f,d,g,h,w){var y=g,v=Math.pow(y.x-u,2)+Math.pow(y.y-c,2)<=Math.pow((f+2*w)*this.radius,2);return v},draw:function(u,c,f,d,g){e.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var aa={};aa.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),l=r.zoom(),u=((t-a)/o-s.x)/l,c=((e-i)/o-s.y)/l;return[u,c]};aa.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(v){return parseFloat(r.getPropertyValue(v))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,c=i.left+i.right,f=e.width/(o+c),d=o-l,g=s-u,h=e.left+a.left+i.left,w=e.top+a.top+i.top;return this.containerBB=[h,w,d,g,f]};aa.invalidateContainerClientCoordsCache=function(){this.containerBB=null};aa.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};aa.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),c=(n?24:8)/l,f=(n?8:2)/l,d=(n?8:2)/l,g=1/0,h,w;r&&(o=o.interactive);function y(E,T){if(E.isNode()){if(w)return;w=E,s.push(E)}if(E.isEdge()&&(T==null||T<g))if(h){if(h.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var S=0;S<s.length;S++)if(s[S].isEdge()){s[S]=E,h=E,g=T??g;break}}}else s.push(E),h=E,g=T??g}function v(E){var T=E.outerWidth()+2*f,S=E.outerHeight()+2*f,P=T/2,L=S/2,A=E.position(),_=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,V=E._private.rscratch;if(A.x-P<=t&&t<=A.x+P&&A.y-L<=e&&e<=A.y+L){var q=i.nodeShapes[a.getNodeShape(E)];if(q.checkPoint(t,e,0,T,S,A.x,A.y,_,V))return y(E,0),!0}}function m(E){var T=E._private,S=T.rscratch,P=E.pstyle("width").pfValue,L=E.pstyle("arrow-scale").value,A=P/2+c,_=A*A,V=A*2,F=T.source,G=T.target,q;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var R=S.allpts,k=0;k+3<R.length;k+=2)if(yw(t,e,R[k],R[k+1],R[k+2],R[k+3],V)&&_>(q=Ew(t,e,R[k],R[k+1],R[k+2],R[k+3])))return y(E,q),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var R=S.allpts,k=0;k+5<S.allpts.length;k+=4)if(bw(t,e,R[k],R[k+1],R[k+2],R[k+3],R[k+4],R[k+5],V)&&_>(q=Cw(t,e,R[k],R[k+1],R[k+2],R[k+3],R[k+4],R[k+5])))return y(E,q),!0}for(var F=F||T.source,G=G||T.target,j=a.getArrowWidth(P,L),H=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],k=0;k<H.length;k++){var I=H[k],M=i.arrowShapes[E.pstyle(I.name+"-arrow-shape").value],B=E.pstyle("width").pfValue;if(M.roughCollide(t,e,j,I.angle,{x:I.x,y:I.y},B,c)&&M.collide(t,e,j,I.angle,{x:I.x,y:I.y},B,c))return y(E),!0}u&&s.length>0&&(v(F),v(G))}function p(E,T,S){return nr(E,T,S)}function b(E,T){var S=E._private,P=d,L;T?L=T+"-":L="",E.boundingBox();var A=S.labelBounds[T||"main"],_=E.pstyle(L+"label").value,V=E.pstyle("text-events").strValue==="yes";if(!(!V||!_)){var q=p(S.rscratch,"labelX",T),R=p(S.rscratch,"labelY",T),k=p(S.rscratch,"labelAngle",T),F=E.pstyle(L+"text-margin-x").pfValue,G=E.pstyle(L+"text-margin-y").pfValue,j=A.x1-P-F,H=A.x2+P-F,I=A.y1-P-G,M=A.y2+P-G;if(k){var B=Math.cos(k),z=Math.sin(k),$=function(N,K){return N=N-q,K=K-R,{x:N*B-K*z+q,y:N*z+K*B+R}},W=$(j,I),ee=$(j,M),Y=$(H,I),U=$(H,M),J=[W.x+F,W.y+G,Y.x+F,Y.y+G,U.x+F,U.y+G,ee.x+F,ee.y+G];if(ar(t,e,J))return y(E),!0}else if(Ia(A,t,e))return y(E),!0}}for(var x=o.length-1;x>=0;x--){var C=o[x];C.isNode()?v(C)||b(C):m(C)||b(C)||b(C,"source")||b(C,"target")}return s};aa.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,s=[],l=Math.min(t,r),u=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=l,r=u,e=c,n=f;var d=or({x1:t,y1:e,x2:r,y2:n});function g(_,V,q){return nr(_,V,q)}function h(_,V){var q=_._private,R=o,k="";_.boundingBox();var F=q.labelBounds.main,G=g(q.rscratch,"labelX",V),j=g(q.rscratch,"labelY",V),H=g(q.rscratch,"labelAngle",V),I=_.pstyle(k+"text-margin-x").pfValue,M=_.pstyle(k+"text-margin-y").pfValue,B=F.x1-R-I,z=F.x2+R-I,$=F.y1-R-M,W=F.y2+R-M;if(H){var ee=Math.cos(H),Y=Math.sin(H),U=function(D,N){return D=D-G,N=N-j,{x:D*ee-N*Y+G,y:D*Y+N*ee+j}};return[U(B,$),U(z,$),U(z,W),U(B,W)]}else return[{x:B,y:$},{x:z,y:$},{x:z,y:W},{x:B,y:W}]}for(var w=0;w<a.length;w++){var y=a[w];if(y.isNode()){var v=y,m=v.pstyle("text-events").strValue==="yes",p=v.pstyle("box-select-labels").strValue==="yes",b=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:p&&m});if(Uc(d,b)){var x=h(v),C=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}];kw(x,C)&&s.push(v)}}else{var E=y,T=E._private,S=T.rscratch;if(S.startX!=null&&S.startY!=null&&!Ia(d,S.startX,S.startY)||S.endX!=null&&S.endY!=null&&!Ia(d,S.endX,S.endY))continue;if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"||S.edgeType==="segments"||S.edgeType==="haystack"){for(var P=T.rstyle.bezierPts||T.rstyle.linePts||T.rstyle.haystackPts,L=!0,A=0;A<P.length;A++)if(!pw(d,P[A])){L=!1;break}L&&s.push(E)}else(S.edgeType==="haystack"||S.edgeType==="straight")&&s.push(E)}}return s};var ts={};ts.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,c,f,d,g,v,m;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],g=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,g=e.arrowEndY),v=e.midX,m=e.midY,i)l=c-e.segpts[0],u=f-e.segpts[1];else if(a||o||s||n){var h=e.allpts,w=Tt(h[0],h[2],h[4],.1),y=Tt(h[1],h[3],h[5],.1);l=c-w,u=f-y}else l=c-v,u=f-m;e.srcArrowAngle=so(l,u);var v=e.midX,m=e.midY;if(r&&(v=(c+d)/2,m=(f+g)/2),l=d-c,u=g-f,i){var h=e.allpts;if(h.length/2%2===0){var p=h.length/2,b=p-2;l=h[p]-h[b],u=h[p+1]-h[b+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var p=h.length/2-1,b=p-2;l=h[p]-h[b],u=h[p+1]-h[b+1]}}else if(a||o||s){var h=e.allpts,x=e.ctrlpts,C,E,T,S;if(x.length/2%2===0){var P=h.length/2-1,L=P+2,A=L+2;C=Tt(h[P],h[L],h[A],0),E=Tt(h[P+1],h[L+1],h[A+1],0),T=Tt(h[P],h[L],h[A],1e-4),S=Tt(h[P+1],h[L+1],h[A+1],1e-4)}else{var L=h.length/2-1,P=L-2,A=L+2;C=Tt(h[P],h[L],h[A],.4999),E=Tt(h[P+1],h[L+1],h[A+1],.4999),T=Tt(h[P],h[L],h[A],.5),S=Tt(h[P+1],h[L+1],h[A+1],.5)}l=T-C,u=S-E}if(e.midtgtArrowAngle=so(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var p=h.length/2-1,_=p+2;l=-(h[_]-h[p]),u=-(h[_+1]-h[p+1])}}}if(e.midsrcArrowAngle=so(l,u),i)l=d-e.segpts[e.segpts.length-2],u=g-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,V=h.length,w=Tt(h[V-6],h[V-4],h[V-2],.9),y=Tt(h[V-5],h[V-3],h[V-1],.9);l=d-w,u=g-y}else l=d-v,u=g-m;e.tgtArrowAngle=so(l,u)};ts.getArrowWidth=ts.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var lc,uc,Br={},dr={},th,rh,Kn,Bo,Gr,zn,Gn,Ar,va,po,gm,pm,cc,fc,nh,ah=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},FE=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},VE=function(e,r,n,a,i){if(e!==nh?ah(r,e,Br):FE(dr,Br),ah(r,n,dr),th=Br.nx*dr.ny-Br.ny*dr.nx,rh=Br.nx*dr.nx-Br.ny*-dr.ny,Gr=Math.asin(Math.max(-1,Math.min(1,th))),Math.abs(Gr)<1e-6){lc=r.x,uc=r.y,Gn=va=0;return}Kn=1,Bo=!1,rh<0?Gr<0?Gr=Math.PI+Gr:(Gr=Math.PI-Gr,Kn=-1,Bo=!0):Gr>0&&(Kn=-1,Bo=!0),r.radius!==void 0?va=r.radius:va=a,zn=Gr/2,po=Math.min(Br.len/2,dr.len/2),i?(Ar=Math.abs(Math.cos(zn)*va/Math.sin(zn)),Ar>po?(Ar=po,Gn=Math.abs(Ar*Math.sin(zn)/Math.cos(zn))):Gn=va):(Ar=Math.min(po,va),Gn=Math.abs(Ar*Math.sin(zn)/Math.cos(zn))),cc=r.x+dr.nx*Ar,fc=r.y+dr.ny*Ar,lc=cc-dr.ny*Gn*Kn,uc=fc+dr.nx*Gn*Kn,gm=r.x+Br.nx*Ar,pm=r.y+Br.ny*Ar,nh=r};function mm(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function nf(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(VE(t,e,r,n,a),{cx:lc,cy:uc,radius:Gn,startX:gm,startY:pm,stopX:cc,stopY:fc,startAngle:Br.ang+Math.PI/2*Kn,endAngle:dr.ang-Math.PI/2*Kn,counterClockwise:Bo})}var Ii=.01,$E=Math.sqrt(2*Ii),Wt={};Wt.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(x,C,E,T){var S=T-C,P=E-x,L=Math.sqrt(P*P+S*S);return{x:-S/L,y:P/L}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(l){var f=this.manualEndptToPx(t.source()[0],o),d=wt(f,2),g=d[0],h=d[1],w=this.manualEndptToPx(t.target()[0],s),y=wt(w,2),v=y[0],m=y[1],p={x1:g,y1:h,x2:v,y2:m};a=u(g,h,v,m),i=p}else Ye("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Wt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),f=s.width(),d=o.height(),g=s.height(),h=r.pstyle("haystack-radius").value,w=h/2;a.haystackPts=a.allpts=[a.source.x*c*w+l.x,a.source.y*d*w+l.y,a.target.x*f*w+u.x,a.target.y*g*w+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Wt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],d=a.pfValue[c],g=1-f,h=f,w=this.findMidptPtsEtc(t,e),y=w.midptPts,v=w.vectorNormInverse,m={x:y.x1*g+y.x2*h,y:y.y1*g+y.y2*h};r.segpts.push(m.x+v.x*d,m.y+v.y*d),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:l),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:u)==="arc-radius")}};Wt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,g=f;n&&(d=0,g=l);var h=u-Math.PI/2,w=h-c/2,y=h+c/2,v=u+"_"+c;d=i[v]===void 0?i[v]=0:++i[v],a.ctrlpts=[o.x+Math.cos(w)*1.4*g*(d/3+1),o.y+Math.sin(w)*1.4*g*(d/3+1),o.x+Math.cos(y)*1.4*g*(d/3+1),o.y+Math.sin(y)*1.4*g*(d/3+1)]};Wt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),g=d?d.pfValue[0]:void 0,h=r,w=f;n&&(h=0,w=g);var y=50,v={x:i.x-s/2,y:i.y-l/2},m={x:o.x-u/2,y:o.y-c/2},p={x:Math.min(v.x,m.x),y:Math.min(v.y,m.y)},b=.5,x=Math.max(b,Math.log(s*Ii)),C=Math.max(b,Math.log(u*Ii));a.ctrlpts=[p.x,p.y-(1+Math.pow(y,1.12)/100)*w*(h/3+1)*x,p.x-(1+Math.pow(y,1.12)/100)*w*(h/3+1)*C,p.y]};Wt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Wt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,f=l.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<u;g++){var h=(.5-e.eles.length/2+r)*o*(a?-1:1),w=void 0,y=Hc(h);d&&(c=s?s.pfValue[g]:o,f=l.value[g]),n?w=c:w=c!==void 0?y*c:void 0;var v=w!==void 0?w:h,m=1-f,p=f,b=this.findMidptPtsEtc(t,e),x=b.midptPts,C=b.vectorNormInverse,E={x:x.x1*m+x.x2*p,y:x.y1*m+x.y2*p};i.ctrlpts.push(E.x+C.x*v,E.y+C.y*v)}};Wt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,d=e.srcH,g=e.tgtW,h=e.tgtH,w=t.pstyle("edge-distances").value,y=w!=="node-position",v=t.pstyle("taxi-direction").value,m=v,p=t.pstyle("taxi-turn"),b=p.units==="%",x=p.pfValue,C=x<0,E=t.pstyle("taxi-turn-min-distance").pfValue,T=y?(f+g)/2:0,S=y?(d+h)/2:0,P=c.x2-c.x1,L=c.y2-c.y1,A=function(O,re){return O>0?Math.max(O-re,0):Math.min(O+re,0)},_=A(P,T),V=A(L,S),q=!1;m===u?v=Math.abs(_)>Math.abs(V)?a:n:m===l||m===s?(v=n,q=!0):(m===i||m===o)&&(v=a,q=!0);var R=v===n,k=R?V:_,F=R?L:P,G=Hc(F),j=!1;!(q&&(b||C))&&(m===s&&F<0||m===l&&F>0||m===i&&F>0||m===o&&F<0)&&(G*=-1,k=G*Math.abs(k),j=!0);var H;if(b){var I=x<0?1+x:x;H=I*k}else{var M=x<0?k:0;H=M+x*G}var B=function(O){return Math.abs(O)<E||Math.abs(O)>=Math.abs(k)},z=B(H),$=B(Math.abs(k)-Math.abs(H)),W=z||$;if(W&&!j)if(R){var ee=Math.abs(F)<=d/2,Y=Math.abs(P)<=g/2;if(ee){var U=(c.x1+c.x2)/2,J=c.y1,D=c.y2;r.segpts=[U,J,U,D]}else if(Y){var N=(c.y1+c.y2)/2,K=c.x1,ne=c.x2;r.segpts=[K,N,ne,N]}else r.segpts=[c.x1,c.y2]}else{var ce=Math.abs(F)<=f/2,ie=Math.abs(L)<=h/2;if(ce){var le=(c.y1+c.y2)/2,X=c.x1,Q=c.x2;r.segpts=[X,le,Q,le]}else if(ie){var Z=(c.x1+c.x2)/2,fe=c.y1,oe=c.y2;r.segpts=[Z,fe,Z,oe]}else r.segpts=[c.x2,c.y1]}else if(R){var he=c.y1+H+(y?d/2*G:0),pe=c.x1,ge=c.x2;r.segpts=[pe,he,ge,he]}else{var Ee=c.x1+H+(y?f/2*G:0),we=c.y1,Ae=c.y2;r.segpts=[Ee,we,Ee,Ae]}if(r.isRound){var De=t.pstyle("taxi-radius").value,me=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(De),r.isArcRadius=new Array(r.segpts.length/2).fill(me)}};Wt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,g=e.srcRs,h=e.tgtRs,w=!ye(r.startX)||!ye(r.startY),y=!ye(r.arrowStartX)||!ye(r.arrowStartY),v=!ye(r.endX)||!ye(r.endY),m=!ye(r.arrowEndX)||!ye(r.arrowEndY),p=3,b=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,x=p*b,C=ea({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),E=C<x,T=ea({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),S=T<x,P=!1;if(w||y||E){P=!0;var L={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},A=Math.sqrt(L.x*L.x+L.y*L.y),_={x:L.x/A,y:L.y/A},V=Math.max(i,o),q={x:r.ctrlpts[0]+_.x*2*V,y:r.ctrlpts[1]+_.y*2*V},R=u.intersectLine(n.x,n.y,i,o,q.x,q.y,0,f,g);E?(r.ctrlpts[0]=r.ctrlpts[0]+_.x*(x-C),r.ctrlpts[1]=r.ctrlpts[1]+_.y*(x-C)):(r.ctrlpts[0]=R[0]+_.x*x,r.ctrlpts[1]=R[1]+_.y*x)}if(v||m||S){P=!0;var k={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},F=Math.sqrt(k.x*k.x+k.y*k.y),G={x:k.x/F,y:k.y/F},j=Math.max(i,o),H={x:r.ctrlpts[0]+G.x*2*j,y:r.ctrlpts[1]+G.y*2*j},I=c.intersectLine(a.x,a.y,s,l,H.x,H.y,0,d,h);S?(r.ctrlpts[0]=r.ctrlpts[0]+G.x*(x-T),r.ctrlpts[1]=r.ctrlpts[1]+G.y*(x-T)):(r.ctrlpts[0]=I[0]+G.x*x,r.ctrlpts[1]=I[1]+G.y*x)}P&&this.findEndpoints(t)}};Wt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Tt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Tt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(nf({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var g={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-g.y,g.x-f.x]}else{var h=[f.x-d.cx,f.y-d.cy],w=d.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(y){return y*w}),e.midX=d.cx+h[0],e.midY=d.cy+h[1],e.midVector=h}}}}};Wt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ye(e.startX)&&ye(e.startY)&&ye(e.endX)&&ye(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ye("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Wt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new Yr,o=function(S,P){return[].concat(Uo(S),[P?1:0]).join("-")},s=[],l=[],u=0;u<t.length;u++){var c=t[u],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){l.push(c);continue}var g=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),h=d==="unbundled-bezier"||d==="bezier",w=f.source,y=f.target,v=w.poolIndex(),m=y.poolIndex(),p=[v,m].sort(),b=o(p,g),x=i.get(b);x==null&&(x={eles:[]},s.push({pairId:p,edgeIsUnbundled:g}),i.set(b,x)),x.eles.push(c),g&&(x.hasUnbundled=!0),h&&(x.hasBezier=!0)}}for(var C=function(){var S=s[E],P=S.pairId,L=S.edgeIsUnbundled,A=o(P,L),_=i.get(A),V;if(!_.hasUnbundled){var q=_.eles[0].parallelEdges().filter(function(me){return me.isBundledBezier()});qc(_.eles),q.forEach(function(me){return _.eles.push(me)}),_.eles.sort(function(me,ue){return me.poolIndex()-ue.poolIndex()})}var R=_.eles[0],k=R.source(),F=R.target();if(k.poolIndex()>F.poolIndex()){var G=k;k=F,F=G}var j=_.srcPos=k.position(),H=_.tgtPos=F.position(),I=_.srcW=k.outerWidth(),M=_.srcH=k.outerHeight(),B=_.tgtW=F.outerWidth(),z=_.tgtH=F.outerHeight(),$=_.srcShape=r.nodeShapes[e.getNodeShape(k)],W=_.tgtShape=r.nodeShapes[e.getNodeShape(F)],ee=_.srcCornerRadius=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,Y=_.tgtCornerRadius=F.pstyle("corner-radius").value==="auto"?"auto":F.pstyle("corner-radius").pfValue,U=_.tgtRs=F._private.rscratch,J=_.srcRs=k._private.rscratch;_.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var D=0;D<_.eles.length;D++){var N=_.eles[D],K=N[0]._private.rscratch,ne=N.pstyle("curve-style").value,ce=ne==="unbundled-bezier"||ne.endsWith("segments")||ne.endsWith("taxi"),ie=!k.same(N.source());if(!_.calculatedIntersection&&k!==F&&(_.hasBezier||_.hasUnbundled)){_.calculatedIntersection=!0;var le=$.intersectLine(j.x,j.y,I,M,H.x,H.y,0,ee,J),X=_.srcIntn=le,Q=W.intersectLine(H.x,H.y,B,z,j.x,j.y,0,Y,U),Z=_.tgtIntn=Q,fe=_.intersectionPts={x1:le[0],x2:Q[0],y1:le[1],y2:Q[1]},oe=_.posPts={x1:j.x,x2:H.x,y1:j.y,y2:H.y},he=Q[1]-le[1],pe=Q[0]-le[0],ge=Math.sqrt(pe*pe+he*he);ye(ge)&&ge>=$E||(ge=Math.sqrt(Math.max(pe*pe,Ii)+Math.max(he*he,Ii)));var Ee=_.vector={x:pe,y:he},we=_.vectorNorm={x:Ee.x/ge,y:Ee.y/ge},Ae={x:-we.y,y:we.x};_.nodesOverlap=!ye(ge)||W.checkPoint(le[0],le[1],0,B,z,H.x,H.y,Y,U)||$.checkPoint(Q[0],Q[1],0,I,M,j.x,j.y,ee,J),_.vectorNormInverse=Ae,V={nodesOverlap:_.nodesOverlap,dirCounts:_.dirCounts,calculatedIntersection:!0,hasBezier:_.hasBezier,hasUnbundled:_.hasUnbundled,eles:_.eles,srcPos:H,srcRs:U,tgtPos:j,tgtRs:J,srcW:B,srcH:z,tgtW:I,tgtH:M,srcIntn:Z,tgtIntn:X,srcShape:W,tgtShape:$,posPts:{x1:oe.x2,y1:oe.y2,x2:oe.x1,y2:oe.y1},intersectionPts:{x1:fe.x2,y1:fe.y2,x2:fe.x1,y2:fe.y1},vector:{x:-Ee.x,y:-Ee.y},vectorNorm:{x:-we.x,y:-we.y},vectorNormInverse:{x:-Ae.x,y:-Ae.y}}}var De=ie?V:_;K.nodesOverlap=De.nodesOverlap,K.srcIntn=De.srcIntn,K.tgtIntn=De.tgtIntn,K.isRound=ne.startsWith("round"),a&&(k.isParent()||k.isChild()||F.isParent()||F.isChild())&&(k.parents().anySame(F)||F.parents().anySame(k)||k.same(F)&&k.isParent())?e.findCompoundLoopPoints(N,De,D,ce):k===F?e.findLoopPoints(N,De,D,ce):ne.endsWith("segments")?e.findSegmentsPoints(N,De):ne.endsWith("taxi")?e.findTaxiPoints(N,De):ne==="straight"||!ce&&_.eles.length%2===1&&D===Math.floor(_.eles.length/2)?e.findStraightEdgePoints(N):e.findBezierPoints(N,De,D,ce,ie),e.findEndpoints(N),e.tryToCorrectInvalidPoints(N,De),e.checkForInvalidEdgeWarning(N),e.storeAllpts(N),e.storeEdgeProjections(N),e.calculateArrowAngles(N),e.recalculateEdgeLabelProjections(N),e.calculateLabelAngles(N)}},E=0;E<s.length;E++)C();this.findHaystackPoints(l)}};function ym(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Wt.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return ym(e.segpts)};Wt.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return ym(e.ctrlpts)};Wt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var ji={};ji.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};ji.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,d=a._private.rscratch,g=t.pstyle("curve-style").value,h=t._private.rscratch,w=h.edgeType,y=g==="taxi",v=w==="self"||w==="compound",m=w==="bezier"||w==="multibezier"||v,p=w!=="bezier",b=w==="straight"||w==="segments",x=w==="segments",C=m||p||b,E=v||y,T=t.pstyle("source-endpoint"),S=E?"outside-to-node":T.value,P=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,L=t.pstyle("target-endpoint"),A=E?"outside-to-node":L.value,_=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;h.srcManEndpt=T,h.tgtManEndpt=L;var V,q,R,k;if(m){var F=[h.ctrlpts[0],h.ctrlpts[1]],G=p?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:F;V=G,q=F}else if(b){var j=x?h.segpts.slice(0,2):[o.x,o.y],H=x?h.segpts.slice(h.segpts.length-2):[i.x,i.y];V=H,q=j}if(A==="inside-to-node")r=[o.x,o.y];else if(L.units)r=this.manualEndptToPx(a,L);else if(A==="outside-to-line")r=h.tgtIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?R=V:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(R=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),R[0],R[1],0,_,d),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var I=a._private.rscratch,M=I.labelWidth,B=I.labelHeight,z=I.labelX,$=I.labelY,W=M/2,ee=B/2,Y=a.pstyle("text-valign").value;Y==="top"?$-=ee:Y==="bottom"&&($+=ee);var U=a.pstyle("text-halign").value;U==="left"?z-=W:U==="right"&&(z+=W);var J=Ai(R[0],R[1],[z-W,$-ee,z+W,$-ee,z+W,$+ee,z-W,$+ee],o.x,o.y);if(J.length>0){var D=i,N=$n(D,ba(r)),K=$n(D,ba(J)),ne=N;if(K<N&&(r=J,ne=K),J.length>2){var ce=$n(D,{x:J[2],y:J[3]});ce<ne&&(r=[J[2],J[3]])}}}var ie=lo(r,V,e.arrowShapes[s].spacing(t)+u),le=lo(r,V,e.arrowShapes[s].gap(t)+u);if(h.endX=le[0],h.endY=le[1],h.arrowEndX=ie[0],h.arrowEndY=ie[1],S==="inside-to-node")r=[i.x,i.y];else if(T.units)r=this.manualEndptToPx(n,T);else if(S==="outside-to-line")r=h.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?k=q:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(k=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),k[0],k[1],0,P,f),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var X=n._private.rscratch,Q=X.labelWidth,Z=X.labelHeight,fe=X.labelX,oe=X.labelY,he=Q/2,pe=Z/2,ge=n.pstyle("text-valign").value;ge==="top"?oe-=pe:ge==="bottom"&&(oe+=pe);var Ee=n.pstyle("text-halign").value;Ee==="left"?fe-=he:Ee==="right"&&(fe+=he);var we=Ai(k[0],k[1],[fe-he,oe-pe,fe+he,oe-pe,fe+he,oe+pe,fe-he,oe+pe],i.x,i.y);if(we.length>0){var Ae=o,De=$n(Ae,ba(r)),me=$n(Ae,ba(we)),ue=De;if(me<De&&(r=[we[0],we[1]],ue=me),we.length>2){var O=$n(Ae,{x:we[2],y:we[3]});O<ue&&(r=[we[2],we[3]])}}}var re=lo(r,q,e.arrowShapes[l].spacing(t)+c),ae=lo(r,q,e.arrowShapes[l].gap(t)+c);h.startX=ae[0],h.startY=ae[1],h.arrowStartX=re[0],h.arrowStartY=re[1],C&&(!ye(h.startX)||!ye(h.startY)||!ye(h.endX)||!ye(h.endY)?h.badLine=!0:h.badLine=!1)};ji.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};ji.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var af={};function qE(t,e,r){for(var n=function(u,c,f,d){return Tt(u,c,f,d)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}af.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)qE(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};af.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Nr={};Nr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!xn(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var bm=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},wm=function(e,r){var n=r.x-e.x,a=r.y-e.y;return bm(n,a)},GE=function(e,r,n,a){var i=ki(0,a-.001,1),o=ki(0,a+.001,1),s=ka(e,r,n,i),l=ka(e,r,n,o);return wm(s,l)};Nr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(f,d,g){Wr(r.rscratch,f,d,g),Wr(r.rstyle,f,d,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=bm(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function(){if(l.cache)return l.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var g={x:n.allpts[d],y:n.allpts[d+1]},h={x:n.allpts[d+2],y:n.allpts[d+3]},w={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:g,p1:h,p2:w,startDist:0,length:0,segments:[]})}var y=r.rstyle.bezierPts,v=a.bezierProjPcts.length;function m(E,T,S,P,L){var A=ea(T,S),_=E.segments[E.segments.length-1],V={p0:T,p1:S,t0:P,t1:L,startDist:_?_.startDist+_.length:0,length:A};E.segments.push(V),E.length+=A}for(var p=0;p<f.length;p++){var b=f[p],x=f[p-1];x&&(b.startDist=x.startDist+x.length),m(b,b.p0,y[p*v],0,a.bezierProjPcts[0]);for(var C=0;C<v-1;C++)m(b,y[p*v+C],y[p*v+C+1],a.bezierProjPcts[C],a.bezierProjPcts[C+1]);m(b,y[p*v+v-1],b.p2,a.bezierProjPcts[v-1],1)}return l.cache=f},u=function(f){var d,g=f==="source";if(i[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var w=l(),y,v=0,m=0,p=0;p<w.length;p++){for(var b=w[g?p:w.length-1-p],x=0;x<b.segments.length;x++){var C=b.segments[g?x:b.segments.length-1-x],E=p===w.length-1&&x===b.segments.length-1;if(v=m,m+=C.length,m>=h||E){y={cp:b,segment:C};break}}if(y)break}var T=y.cp,S=y.segment,P=(h-v)/S.length,L=S.t1-S.t0,A=g?S.t0+L*P:S.t1-L*P;A=ki(0,A,1),e=ka(T.p0,T.p1,T.p2,A),d=GE(T.p0,T.p1,T.p2,A);break}case"straight":case"segments":case"haystack":{for(var _=0,V,q,R,k,F=n.allpts.length,G=0;G+3<F&&(g?(R={x:n.allpts[G],y:n.allpts[G+1]},k={x:n.allpts[G+2],y:n.allpts[G+3]}):(R={x:n.allpts[F-2-G],y:n.allpts[F-1-G]},k={x:n.allpts[F-4-G],y:n.allpts[F-3-G]}),V=ea(R,k),q=_,_+=V,!(_>=h));G+=2);var j=h-q,H=j/V;H=ki(0,H,1),e=fw(R,k,H),d=wm(R,k);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,d)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Nr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Nr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=Jn(n,t._private.labelDimsKey);if(nr(r.rscratch,"prefixedLabelDimsKey",e)!==a){Wr(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,l=nr(r.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(l.length,1),c=i.height/u,f=c*o,d=i.width,g=i.height+(u-1)*(o-1)*c;Wr(r.rstyle,"labelWidth",e,d),Wr(r.rscratch,"labelWidth",e,d),Wr(r.rstyle,"labelHeight",e,g),Wr(r.rscratch,"labelHeight",e,g),Wr(r.rscratch,"labelLineHeight",e,f)}};Nr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(M,B){return B?(Wr(r.rscratch,M,e,B),B):nr(r.rscratch,M,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="​",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,g=d==="anywhere",h=[],w=/[\s\u200b]+|$/g,y=0;y<c.length;y++){var v=c[y],m=this.calculateLabelDimensions(t,v),p=m.width;if(g){var b=v.split("").join(u);v=b}if(p>f){var x=v.matchAll(w),C="",E=0,T=ir(x),S;try{for(T.s();!(S=T.n()).done;){var P=S.value,L=P[0],A=v.substring(E,P.index);E=P.index+L.length;var _=C.length===0?A:C+A+L,V=this.calculateLabelDimensions(t,_),q=V.width;q<=f?C+=A+L:(C&&h.push(C),C=A+L)}}catch(I){T.e(I)}finally{T.f()}C.match(/^[\s\u200b]+$/)||h.push(C)}else h.push(v)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var R=t.pstyle("text-max-width").pfValue,k="",F="…",G=!1;if(this.calculateLabelDimensions(t,a).width<R)return a;for(var j=0;j<a.length;j++){var H=this.calculateLabelDimensions(t,k+a[j]+F).width;if(H>R)break;k+=a[j],j===a.length-1&&(G=!0)}return G||(k+=F),k}return a};Nr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Nr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(o," ").concat(u," ").concat(s,"px ").concat(l);for(var g=0,h=0,w=e.split(`
`),y=0;y<w.length;y++){var v=w[y],m=f.measureText(v),p=Math.ceil(m.width),b=s;g=Math.max(p,g),h+=b}return g+=i,h+=i,{width:g,height:h}};Nr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Nr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var xm={},ih=28,oh=!1;xm.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<ih||t.height()<ih))return oh||(Ye("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),oh=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var _s={};_s.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var d=s[f];d(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};_s.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};_s.recalculateRenderedStyle=function(t,e){var r=function(b){return b._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,l=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(l.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(p){return!p._private.rstyle.clean&&p.isBundledBezier()})&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],f=c._private,d=f.rstyle,g=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=g.x,d.nodeY=g.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var w=n[h],y=w._private,v=y.rstyle,m=y.rscratch;v.srcX=m.arrowStartX,v.srcY=m.arrowStartY,v.tgtX=m.arrowEndX,v.tgtY=m.arrowEndY,v.midX=m.midX,v.midY=m.midY,v.labelAngle=m.labelAngle,v.sourceLabelAngle=m.sourceLabelAngle,v.targetLabelAngle=m.targetLabelAngle}}}};var Os={};Os.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Os.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Os.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(rm),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Cm={};[aa,ts,Wt,ji,af,Nr,xm,_s,Os].forEach(function(t){Re(Cm,t)});var Em={};Em.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Ga={};Ga.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var l=this.binder(s);i.push(l.on.apply(l,a))}}return i}var l=this.binder(t);return l.on.apply(l,a)};Ga.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||a1(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(l,u,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Ga.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Ga.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Ga.load=function(){var t=this,e=t.cy.window(),r=function(O){return O.selected()},n=function(O){var re=O.getRootNode();if(re&&re.nodeType===11&&re.host!==void 0)return re},a=function(O,re,ae,se){O==null&&(O=t.cy);for(var de=0;de<re.length;de++){var Ce=re[de];O.emit({originalEvent:ae,type:Ce,position:se})}},i=function(O){return O.shiftKey||O.metaKey||O.ctrlKey},o=function(O,re){var ae=!0;if(t.cy.hasCompoundNodes()&&O&&O.pannable())for(var se=0;re&&se<re.length;se++){var O=re[se];if(O.isNode()&&O.isParent()&&!O.pannable()){ae=!1;break}}else ae=!0;return ae},s=function(O){O[0]._private.grabbed=!0},l=function(O){O[0]._private.grabbed=!1},u=function(O){O[0]._private.rscratch.inDragLayer=!0},c=function(O){O[0]._private.rscratch.inDragLayer=!1},f=function(O){O[0]._private.rscratch.isGrabTarget=!0},d=function(O){O[0]._private.rscratch.isGrabTarget=!1},g=function(O,re){var ae=re.addToList,se=ae.has(O);!se&&O.grabbable()&&!O.locked()&&(ae.merge(O),s(O))},h=function(O,re){if(O.cy().hasCompoundNodes()&&!(re.inDragLayer==null&&re.addToList==null)){var ae=O.descendants();re.inDragLayer&&(ae.forEach(u),ae.connectedEdges().forEach(u)),re.addToList&&g(ae,re)}},w=function(O,re){re=re||{};var ae=O.cy().hasCompoundNodes();re.inDragLayer&&(O.forEach(u),O.neighborhood().stdFilter(function(se){return!ae||se.isEdge()}).forEach(u)),re.addToList&&O.forEach(function(se){g(se,re)}),h(O,re),m(O,{inDragLayer:re.inDragLayer}),t.updateCachedGrabbedEles()},y=w,v=function(O){O&&(t.getCachedZSortedEles().forEach(function(re){l(re),c(re),d(re)}),t.updateCachedGrabbedEles())},m=function(O,re){if(!(re.inDragLayer==null&&re.addToList==null)&&O.cy().hasCompoundNodes()){var ae=O.ancestors().orphans();if(!ae.same(O)){var se=ae.descendants().spawnSelf().merge(ae).unmerge(O).unmerge(O.descendants()),de=se.connectedEdges();re.inDragLayer&&(de.forEach(u),se.forEach(u)),re.addToList&&se.forEach(function(Ce){g(Ce,re)})}}},p=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";b?(t.removeObserver=new MutationObserver(function(ue){for(var O=0;O<ue.length;O++){var re=ue[O],ae=re.removedNodes;if(ae)for(var se=0;se<ae.length;se++){var de=ae[se];if(de===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ue){t.destroy()});var C=Hi(function(){t.cy.resize()},100);b&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),x&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var E=function(O,re){for(;O!=null;)re(O),O=O.parentNode},T=function(){t.invalidateContainerClientCoordsCache()};E(t.container,function(ue){t.registerBinding(ue,"transitionend",T),t.registerBinding(ue,"animationend",T),t.registerBinding(ue,"scroll",T)}),t.registerBinding(t.container,"contextmenu",function(ue){ue.preventDefault()});var S=function(){return t.selection[4]!==0},P=function(O){for(var re=t.findContainerClientCoords(),ae=re[0],se=re[1],de=re[2],Ce=re[3],ve=O.touches?O.touches:[O],Se=!1,Ne=0;Ne<ve.length;Ne++){var $e=ve[Ne];if(ae<=$e.clientX&&$e.clientX<=ae+de&&se<=$e.clientY&&$e.clientY<=se+Ce){Se=!0;break}}if(!Se)return!1;for(var Be=t.container,ze=O.target,Ie=ze.parentNode,_e=!1;Ie;){if(Ie===Be){_e=!0;break}Ie=Ie.parentNode}return!!_e};t.registerBinding(t.container,"mousedown",function(O){if(P(O)&&!(t.hoverData.which===1&&O.which!==1)){O.preventDefault(),p(),t.hoverData.capture=!0,t.hoverData.which=O.which;var re=t.cy,ae=[O.clientX,O.clientY],se=t.projectIntoViewport(ae[0],ae[1]),de=t.selection,Ce=t.findNearestElements(se[0],se[1],!0,!1),ve=Ce[0],Se=t.dragData.possibleDragElements;t.hoverData.mdownPos=se,t.hoverData.mdownGPos=ae;var Ne=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Xe=t.hoverData.down;Xe?Xe.emit({originalEvent:O,type:"taphold",position:{x:se[0],y:se[1]}}):re.emit({originalEvent:O,type:"taphold",position:{x:se[0],y:se[1]}})}},t.tapholdDuration)};if(O.which==3){t.hoverData.cxtStarted=!0;var $e={originalEvent:O,type:"cxttapstart",position:{x:se[0],y:se[1]}};ve?(ve.activate(),ve.emit($e),t.hoverData.down=ve):re.emit($e),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(O.which==1){ve&&ve.activate();{if(ve!=null&&t.nodeIsGrabbable(ve)){var Be=function(Xe){return{originalEvent:O,type:Xe,position:{x:se[0],y:se[1]}}},ze=function(Xe){Xe.emit(Be("grab"))};if(f(ve),!ve.selected())Se=t.dragData.possibleDragElements=re.collection(),y(ve,{addToList:Se}),ve.emit(Be("grabon")).emit(Be("grab"));else{Se=t.dragData.possibleDragElements=re.collection();var Ie=re.$(function(_e){return _e.isNode()&&_e.selected()&&t.nodeIsGrabbable(_e)});w(Ie,{addToList:Se}),ve.emit(Be("grabon")),Ie.forEach(ze)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ve,t.hoverData.downs=Ce,t.hoverData.downTime=new Date().getTime()}a(ve,["mousedown","tapstart","vmousedown"],O,{x:se[0],y:se[1]}),ve==null?(de[4]=1,t.data.bgActivePosistion={x:se[0],y:se[1]},t.redrawHint("select",!0),t.redraw()):ve.pannable()&&(de[4]=1),Ne()}de[0]=de[2]=se[0],de[1]=de[3]=se[1]}},!1);var L=n(t.container);t.registerBinding([e,L],"mousemove",function(O){var re=t.hoverData.capture;if(!(!re&&!P(O))){var ae=!1,se=t.cy,de=se.zoom(),Ce=[O.clientX,O.clientY],ve=t.projectIntoViewport(Ce[0],Ce[1]),Se=t.hoverData.mdownPos,Ne=t.hoverData.mdownGPos,$e=t.selection,Be=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Be=t.findNearestElement(ve[0],ve[1],!0,!1));var ze=t.hoverData.last,Ie=t.hoverData.down,_e=[ve[0]-$e[2],ve[1]-$e[3]],Xe=t.dragData.possibleDragElements,pt;if(Ne){var Bt=Ce[0]-Ne[0],St=Bt*Bt,ft=Ce[1]-Ne[1],Mt=ft*ft,yt=St+Mt;t.hoverData.isOverThresholdDrag=pt=yt>=t.desktopTapThreshold2}var Jt=i(O);pt&&(t.hoverData.tapholdCancelled=!0);var Dr=function(){var Pr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Pr.length===0?(Pr.push(_e[0]),Pr.push(_e[1])):(Pr[0]+=_e[0],Pr[1]+=_e[1])};ae=!0,a(Be,["mousemove","vmousemove","tapdrag"],O,{x:ve[0],y:ve[1]});var an=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||se.emit({originalEvent:O,type:"boxstart",position:{x:ve[0],y:ve[1]}}),$e[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(pt){var Fr={originalEvent:O,type:"cxtdrag",position:{x:ve[0],y:ve[1]}};Ie?Ie.emit(Fr):se.emit(Fr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Be!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:O,type:"cxtdragout",position:{x:ve[0],y:ve[1]}}),t.hoverData.cxtOver=Be,Be&&Be.emit({originalEvent:O,type:"cxtdragover",position:{x:ve[0],y:ve[1]}}))}}else if(t.hoverData.dragging){if(ae=!0,se.panningEnabled()&&se.userPanningEnabled()){var oa;if(t.hoverData.justStartedPan){var Qi=t.hoverData.mdownPos;oa={x:(ve[0]-Qi[0])*de,y:(ve[1]-Qi[1])*de},t.hoverData.justStartedPan=!1}else oa={x:_e[0]*de,y:_e[1]*de};se.panBy(oa),se.emit("dragpan"),t.hoverData.dragged=!0}ve=t.projectIntoViewport(O.clientX,O.clientY)}else if($e[4]==1&&(Ie==null||Ie.pannable())){if(pt){if(!t.hoverData.dragging&&se.boxSelectionEnabled()&&(Jt||!se.panningEnabled()||!se.userPanningEnabled()))an();else if(!t.hoverData.selecting&&se.panningEnabled()&&se.userPanningEnabled()){var Ln=o(Ie,t.hoverData.downs);Ln&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,$e[4]=0,t.data.bgActivePosistion=ba(Se),t.redrawHint("select",!0),t.redraw())}Ie&&Ie.pannable()&&Ie.active()&&Ie.unactivate()}}else{if(Ie&&Ie.pannable()&&Ie.active()&&Ie.unactivate(),(!Ie||!Ie.grabbed())&&Be!=ze&&(ze&&a(ze,["mouseout","tapdragout"],O,{x:ve[0],y:ve[1]}),Be&&a(Be,["mouseover","tapdragover"],O,{x:ve[0],y:ve[1]}),t.hoverData.last=Be),Ie)if(pt){if(se.boxSelectionEnabled()&&Jt)Ie&&Ie.grabbed()&&(v(Xe),Ie.emit("freeon"),Xe.emit("free"),t.dragData.didDrag&&(Ie.emit("dragfreeon"),Xe.emit("dragfree"))),an();else if(Ie&&Ie.grabbed()&&t.nodeIsDraggable(Ie)){var er=!t.dragData.didDrag;er&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||w(Xe,{inDragLayer:!0});var Ft={x:0,y:0};if(ye(_e[0])&&ye(_e[1])&&(Ft.x+=_e[0],Ft.y+=_e[1],er)){var tr=t.hoverData.dragDelta;tr&&ye(tr[0])&&ye(tr[1])&&(Ft.x+=tr[0],Ft.y+=tr[1])}t.hoverData.draggingEles=!0,Xe.silentShift(Ft).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Dr();ae=!0}if($e[2]=ve[0],$e[3]=ve[1],ae)return O.stopPropagation&&O.stopPropagation(),O.preventDefault&&O.preventDefault(),!1}},!1);var A,_,V;t.registerBinding(e,"mouseup",function(O){if(!(t.hoverData.which===1&&O.which!==1&&t.hoverData.capture)){var re=t.hoverData.capture;if(re){t.hoverData.capture=!1;var ae=t.cy,se=t.projectIntoViewport(O.clientX,O.clientY),de=t.selection,Ce=t.findNearestElement(se[0],se[1],!0,!1),ve=t.dragData.possibleDragElements,Se=t.hoverData.down,Ne=i(O);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Se&&Se.unactivate(),t.hoverData.which===3){var $e={originalEvent:O,type:"cxttapend",position:{x:se[0],y:se[1]}};if(Se?Se.emit($e):ae.emit($e),!t.hoverData.cxtDragged){var Be={originalEvent:O,type:"cxttap",position:{x:se[0],y:se[1]}};Se?Se.emit(Be):ae.emit(Be)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(Ce,["mouseup","tapend","vmouseup"],O,{x:se[0],y:se[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Se,["click","tap","vclick"],O,{x:se[0],y:se[1]}),_=!1,O.timeStamp-V<=ae.multiClickDebounceTime()?(A&&clearTimeout(A),_=!0,V=null,a(Se,["dblclick","dbltap","vdblclick"],O,{x:se[0],y:se[1]})):(A=setTimeout(function(){_||a(Se,["oneclick","onetap","voneclick"],O,{x:se[0],y:se[1]})},ae.multiClickDebounceTime()),V=O.timeStamp)),Se==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(O)&&(ae.$(r).unselect(["tapunselect"]),ve.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ve=ae.collection()),Ce==Se&&!t.dragData.didDrag&&!t.hoverData.selecting&&Ce!=null&&Ce._private.selectable&&(t.hoverData.dragging||(ae.selectionType()==="additive"||Ne?Ce.selected()?Ce.unselect(["tapunselect"]):Ce.select(["tapselect"]):Ne||(ae.$(r).unmerge(Ce).unselect(["tapunselect"]),Ce.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var ze=ae.collection(t.getAllInBox(de[0],de[1],de[2],de[3]));t.redrawHint("select",!0),ze.length>0&&t.redrawHint("eles",!0),ae.emit({type:"boxend",originalEvent:O,position:{x:se[0],y:se[1]}});var Ie=function(pt){return pt.selectable()&&!pt.selected()};ae.selectionType()==="additive"||Ne||ae.$(r).unmerge(ze).unselect(),ze.emit("box").stdFilter(Ie).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!de[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var _e=Se&&Se.grabbed();v(ve),_e&&(Se.emit("freeon"),ve.emit("free"),t.dragData.didDrag&&(Se.emit("dragfreeon"),ve.emit("dragfree")))}}de[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var q=[],R=4,k,F=1e5,G=function(O,re){for(var ae=0;ae<O.length;ae++)if(O[ae]%re!==0)return!1;return!0},j=function(O){for(var re=Math.abs(O[0]),ae=1;ae<O.length;ae++)if(Math.abs(O[ae])!==re)return!1;return!0},H=function(O){var re=!1,ae=O.deltaY;if(ae==null&&(O.wheelDeltaY!=null?ae=O.wheelDeltaY/4:O.wheelDelta!=null&&(ae=O.wheelDelta/4)),k==null)if(q.length>=R){var se=q;if(k=G(se,5),!k){var de=Math.abs(se[0]);k=j(se)&&de>5}if(k)for(var Ce=0;Ce<se.length;Ce++)F=Math.min(Math.abs(se[Ce]),F)}else q.push(ae),re=!0;else k&&(F=Math.min(Math.abs(ae),F));if(!t.scrollingPage){var ve=t.cy,Se=ve.zoom(),Ne=ve.pan(),$e=t.projectIntoViewport(O.clientX,O.clientY),Be=[$e[0]*Se+Ne.x,$e[1]*Se+Ne.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S()){O.preventDefault();return}if(ve.panningEnabled()&&ve.userPanningEnabled()&&ve.zoomingEnabled()&&ve.userZoomingEnabled()){O.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var ze;re&&Math.abs(ae)>5&&(ae=Hc(ae)*5),ze=ae/-250,k&&(ze/=F,ze*=3),ze=ze*t.wheelSensitivity;var Ie=O.deltaMode===1;Ie&&(ze*=33);var _e=ve.zoom()*Math.pow(10,ze);O.type==="gesturechange"&&(_e=t.gestureStartZoom*O.scale),ve.zoom({level:_e,renderedPosition:{x:Be[0],y:Be[1]}}),ve.emit(O.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",H,!0),t.registerBinding(e,"scroll",function(O){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(O){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||O.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ue){t.hasTouchStarted||H(ue)},!0),t.registerBinding(t.container,"mouseout",function(O){var re=t.projectIntoViewport(O.clientX,O.clientY);t.cy.emit({originalEvent:O,type:"mouseout",position:{x:re[0],y:re[1]}})},!1),t.registerBinding(t.container,"mouseover",function(O){var re=t.projectIntoViewport(O.clientX,O.clientY);t.cy.emit({originalEvent:O,type:"mouseover",position:{x:re[0],y:re[1]}})},!1);var I,M,B,z,$,W,ee,Y,U,J,D,N,K,ne=function(O,re,ae,se){return Math.sqrt((ae-O)*(ae-O)+(se-re)*(se-re))},ce=function(O,re,ae,se){return(ae-O)*(ae-O)+(se-re)*(se-re)},ie;t.registerBinding(t.container,"touchstart",ie=function(O){if(t.hasTouchStarted=!0,!!P(O)){p(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var re=t.cy,ae=t.touchData.now,se=t.touchData.earlier;if(O.touches[0]){var de=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ae[0]=de[0],ae[1]=de[1]}if(O.touches[1]){var de=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ae[2]=de[0],ae[3]=de[1]}if(O.touches[2]){var de=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ae[4]=de[0],ae[5]=de[1]}if(O.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var Ce=t.findContainerClientCoords();U=Ce[0],J=Ce[1],D=Ce[2],N=Ce[3],I=O.touches[0].clientX-U,M=O.touches[0].clientY-J,B=O.touches[1].clientX-U,z=O.touches[1].clientY-J,K=0<=I&&I<=D&&0<=B&&B<=D&&0<=M&&M<=N&&0<=z&&z<=N;var ve=re.pan(),Se=re.zoom();$=ne(I,M,B,z),W=ce(I,M,B,z),ee=[(I+B)/2,(M+z)/2],Y=[(ee[0]-ve.x)/Se,(ee[1]-ve.y)/Se];var Ne=200,$e=Ne*Ne;if(W<$e&&!O.touches[2]){var Be=t.findNearestElement(ae[0],ae[1],!0,!0),ze=t.findNearestElement(ae[2],ae[3],!0,!0);Be&&Be.isNode()?(Be.activate().emit({originalEvent:O,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start=Be):ze&&ze.isNode()?(ze.activate().emit({originalEvent:O,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start=ze):re.emit({originalEvent:O,type:"cxttapstart",position:{x:ae[0],y:ae[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(O.touches[2])re.boxSelectionEnabled()&&O.preventDefault();else if(!O.touches[1]){if(O.touches[0]){var Ie=t.findNearestElements(ae[0],ae[1],!0,!0),_e=Ie[0];if(_e!=null&&(_e.activate(),t.touchData.start=_e,t.touchData.starts=Ie,t.nodeIsGrabbable(_e))){var Xe=t.dragData.touchDragEles=re.collection(),pt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),_e.selected()?(pt=re.$(function(yt){return yt.selected()&&t.nodeIsGrabbable(yt)}),w(pt,{addToList:Xe})):y(_e,{addToList:Xe}),f(_e);var Bt=function(Jt){return{originalEvent:O,type:Jt,position:{x:ae[0],y:ae[1]}}};_e.emit(Bt("grabon")),pt?pt.forEach(function(yt){yt.emit(Bt("grab"))}):_e.emit(Bt("grab"))}a(_e,["touchstart","tapstart","vmousedown"],O,{x:ae[0],y:ae[1]}),_e==null&&(t.data.bgActivePosistion={x:de[0],y:de[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],O,{x:ae[0],y:ae[1]})},t.tapholdDuration)}}if(O.touches.length>=1){for(var St=t.touchData.startPosition=[null,null,null,null,null,null],ft=0;ft<ae.length;ft++)St[ft]=se[ft]=ae[ft];var Mt=O.touches[0];t.touchData.startGPosition=[Mt.clientX,Mt.clientY]}}},!1);var le;t.registerBinding(e,"touchmove",le=function(O){var re=t.touchData.capture;if(!(!re&&!P(O))){var ae=t.selection,se=t.cy,de=t.touchData.now,Ce=t.touchData.earlier,ve=se.zoom();if(O.touches[0]){var Se=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}if(O.touches[1]){var Se=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);de[2]=Se[0],de[3]=Se[1]}if(O.touches[2]){var Se=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);de[4]=Se[0],de[5]=Se[1]}var Ne=t.touchData.startGPosition,$e;if(re&&O.touches[0]&&Ne){for(var Be=[],ze=0;ze<de.length;ze++)Be[ze]=de[ze]-Ce[ze];var Ie=O.touches[0].clientX-Ne[0],_e=Ie*Ie,Xe=O.touches[0].clientY-Ne[1],pt=Xe*Xe,Bt=_e+pt;$e=Bt>=t.touchTapThreshold2}if(re&&t.touchData.cxt){O.preventDefault();var St=O.touches[0].clientX-U,ft=O.touches[0].clientY-J,Mt=O.touches[1].clientX-U,yt=O.touches[1].clientY-J,Jt=ce(St,ft,Mt,yt),Dr=Jt/W,an=150,Fr=an*an,oa=1.5,Qi=oa*oa;if(Dr>=Qi||Jt>=Fr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ln={originalEvent:O,type:"cxttapend",position:{x:de[0],y:de[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Ln),t.touchData.start=null):se.emit(Ln)}}if(re&&t.touchData.cxt){var Ln={originalEvent:O,type:"cxtdrag",position:{x:de[0],y:de[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Ln):se.emit(Ln),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var er=t.findNearestElement(de[0],de[1],!0,!0);(!t.touchData.cxtOver||er!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:O,type:"cxtdragout",position:{x:de[0],y:de[1]}}),t.touchData.cxtOver=er,er&&er.emit({originalEvent:O,type:"cxtdragover",position:{x:de[0],y:de[1]}}))}else if(re&&O.touches[2]&&se.boxSelectionEnabled())O.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||se.emit({originalEvent:O,type:"boxstart",position:{x:de[0],y:de[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,ae[4]=1,!ae||ae.length===0||ae[0]===void 0?(ae[0]=(de[0]+de[2]+de[4])/3,ae[1]=(de[1]+de[3]+de[5])/3,ae[2]=(de[0]+de[2]+de[4])/3+1,ae[3]=(de[1]+de[3]+de[5])/3+1):(ae[2]=(de[0]+de[2]+de[4])/3,ae[3]=(de[1]+de[3]+de[5])/3),t.redrawHint("select",!0),t.redraw();else if(re&&O.touches[1]&&!t.touchData.didSelect&&se.zoomingEnabled()&&se.panningEnabled()&&se.userZoomingEnabled()&&se.userPanningEnabled()){O.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ft=t.dragData.touchDragEles;if(Ft){t.redrawHint("drag",!0);for(var tr=0;tr<Ft.length;tr++){var Ji=Ft[tr]._private;Ji.grabbed=!1,Ji.rscratch.inDragLayer=!1}}var Pr=t.touchData.start,St=O.touches[0].clientX-U,ft=O.touches[0].clientY-J,Mt=O.touches[1].clientX-U,yt=O.touches[1].clientY-J,uf=ne(St,ft,Mt,yt),Ym=uf/$;if(K){var Xm=St-I,Zm=ft-M,Qm=Mt-B,Jm=yt-z,ey=(Xm+Qm)/2,ty=(Zm+Jm)/2,Ua=se.zoom(),Ns=Ua*Ym,eo=se.pan(),cf=Y[0]*Ua+eo.x,ff=Y[1]*Ua+eo.y,ry={x:-Ns/Ua*(cf-eo.x-ey)+cf,y:-Ns/Ua*(ff-eo.y-ty)+ff};if(Pr&&Pr.active()){var Ft=t.dragData.touchDragEles;v(Ft),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Pr.unactivate().emit("freeon"),Ft.emit("free"),t.dragData.didDrag&&(Pr.emit("dragfreeon"),Ft.emit("dragfree"))}se.viewport({zoom:Ns,pan:ry,cancelOnFailedZoom:!0}),se.emit("pinchzoom"),$=uf,I=St,M=ft,B=Mt,z=yt,t.pinching=!0}if(O.touches[0]){var Se=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}if(O.touches[1]){var Se=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);de[2]=Se[0],de[3]=Se[1]}if(O.touches[2]){var Se=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);de[4]=Se[0],de[5]=Se[1]}}else if(O.touches[0]&&!t.touchData.didSelect){var pr=t.touchData.start,zs=t.touchData.last,er;if(!t.hoverData.draggingEles&&!t.swipePanning&&(er=t.findNearestElement(de[0],de[1],!0,!0)),re&&pr!=null&&O.preventDefault(),re&&pr!=null&&t.nodeIsDraggable(pr))if($e){var Ft=t.dragData.touchDragEles,df=!t.dragData.didDrag;df&&w(Ft,{inDragLayer:!0}),t.dragData.didDrag=!0;var Wa={x:0,y:0};if(ye(Be[0])&&ye(Be[1])&&(Wa.x+=Be[0],Wa.y+=Be[1],df)){t.redrawHint("eles",!0);var mr=t.touchData.dragDelta;mr&&ye(mr[0])&&ye(mr[1])&&(Wa.x+=mr[0],Wa.y+=mr[1])}t.hoverData.draggingEles=!0,Ft.silentShift(Wa).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ce[0]&&t.touchData.startPosition[1]==Ce[1]&&t.redrawHint("eles",!0),t.redraw()}else{var mr=t.touchData.dragDelta=t.touchData.dragDelta||[];mr.length===0?(mr.push(Be[0]),mr.push(Be[1])):(mr[0]+=Be[0],mr[1]+=Be[1])}if(a(pr||er,["touchmove","tapdrag","vmousemove"],O,{x:de[0],y:de[1]}),(!pr||!pr.grabbed())&&er!=zs&&(zs&&zs.emit({originalEvent:O,type:"tapdragout",position:{x:de[0],y:de[1]}}),er&&er.emit({originalEvent:O,type:"tapdragover",position:{x:de[0],y:de[1]}})),t.touchData.last=er,re)for(var tr=0;tr<de.length;tr++)de[tr]&&t.touchData.startPosition[tr]&&$e&&(t.touchData.singleTouchMoved=!0);if(re&&(pr==null||pr.pannable())&&se.panningEnabled()&&se.userPanningEnabled()){var ny=o(pr,t.touchData.starts);ny&&(O.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ba(t.touchData.startPosition)),t.swipePanning?(se.panBy({x:Be[0]*ve,y:Be[1]*ve}),se.emit("dragpan")):$e&&(t.swipePanning=!0,se.panBy({x:Ie*ve,y:Xe*ve}),se.emit("dragpan"),pr&&(pr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Se=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);de[0]=Se[0],de[1]=Se[1]}}for(var ze=0;ze<de.length;ze++)Ce[ze]=de[ze];re&&O.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var X;t.registerBinding(e,"touchcancel",X=function(O){var re=t.touchData.start;t.touchData.capture=!1,re&&re.unactivate()});var Q,Z,fe,oe;if(t.registerBinding(e,"touchend",Q=function(O){var re=t.touchData.start,ae=t.touchData.capture;if(ae)O.touches.length===0&&(t.touchData.capture=!1),O.preventDefault();else return;var se=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var de=t.cy,Ce=de.zoom(),ve=t.touchData.now,Se=t.touchData.earlier;if(O.touches[0]){var Ne=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ve[0]=Ne[0],ve[1]=Ne[1]}if(O.touches[1]){var Ne=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ve[2]=Ne[0],ve[3]=Ne[1]}if(O.touches[2]){var Ne=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ve[4]=Ne[0],ve[5]=Ne[1]}re&&re.unactivate();var $e;if(t.touchData.cxt){if($e={originalEvent:O,type:"cxttapend",position:{x:ve[0],y:ve[1]}},re?re.emit($e):de.emit($e),!t.touchData.cxtDragged){var Be={originalEvent:O,type:"cxttap",position:{x:ve[0],y:ve[1]}};re?re.emit(Be):de.emit(Be)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!O.touches[2]&&de.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var ze=de.collection(t.getAllInBox(se[0],se[1],se[2],se[3]));se[0]=void 0,se[1]=void 0,se[2]=void 0,se[3]=void 0,se[4]=0,t.redrawHint("select",!0),de.emit({type:"boxend",originalEvent:O,position:{x:ve[0],y:ve[1]}});var Ie=function(Fr){return Fr.selectable()&&!Fr.selected()};ze.emit("box").stdFilter(Ie).select().emit("boxselect"),ze.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(re!=null&&re.unactivate(),O.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!O.touches[1]){if(!O.touches[0]){if(!O.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var _e=t.dragData.touchDragEles;if(re!=null){var Xe=re._private.grabbed;v(_e),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Xe&&(re.emit("freeon"),_e.emit("free"),t.dragData.didDrag&&(re.emit("dragfreeon"),_e.emit("dragfree"))),a(re,["touchend","tapend","vmouseup","tapdragout"],O,{x:ve[0],y:ve[1]}),re.unactivate(),t.touchData.start=null}else{var pt=t.findNearestElement(ve[0],ve[1],!0,!0);a(pt,["touchend","tapend","vmouseup","tapdragout"],O,{x:ve[0],y:ve[1]})}var Bt=t.touchData.startPosition[0]-ve[0],St=Bt*Bt,ft=t.touchData.startPosition[1]-ve[1],Mt=ft*ft,yt=St+Mt,Jt=yt*Ce*Ce;t.touchData.singleTouchMoved||(re||de.$(":selected").unselect(["tapunselect"]),a(re,["tap","vclick"],O,{x:ve[0],y:ve[1]}),Z=!1,O.timeStamp-oe<=de.multiClickDebounceTime()?(fe&&clearTimeout(fe),Z=!0,oe=null,a(re,["dbltap","vdblclick"],O,{x:ve[0],y:ve[1]})):(fe=setTimeout(function(){Z||a(re,["onetap","voneclick"],O,{x:ve[0],y:ve[1]})},de.multiClickDebounceTime()),oe=O.timeStamp)),re!=null&&!t.dragData.didDrag&&re._private.selectable&&Jt<t.touchTapThreshold2&&!t.pinching&&(de.selectionType()==="single"?(de.$(r).unmerge(re).unselect(["tapunselect"]),re.select(["tapselect"])):re.selected()?re.unselect(["tapunselect"]):re.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Dr=0;Dr<ve.length;Dr++)Se[Dr]=ve[Dr];t.dragData.didDrag=!1,O.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),O.touches.length<2&&(O.touches.length===1&&(t.touchData.startGPosition=[O.touches[0].clientX,O.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var he=[],pe=function(O){return{clientX:O.clientX,clientY:O.clientY,force:1,identifier:O.pointerId,pageX:O.pageX,pageY:O.pageY,radiusX:O.width/2,radiusY:O.height/2,screenX:O.screenX,screenY:O.screenY,target:O.target}},ge=function(O){return{event:O,touch:pe(O)}},Ee=function(O){he.push(ge(O))},we=function(O){for(var re=0;re<he.length;re++){var ae=he[re];if(ae.event.pointerId===O.pointerId){he.splice(re,1);return}}},Ae=function(O){var re=he.filter(function(ae){return ae.event.pointerId===O.pointerId})[0];re.event=O,re.touch=pe(O)},De=function(O){O.touches=he.map(function(re){return re.touch})},me=function(O){return O.pointerType==="mouse"||O.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ue){me(ue)||(ue.preventDefault(),Ee(ue),De(ue),ie(ue))}),t.registerBinding(t.container,"pointerup",function(ue){me(ue)||(we(ue),De(ue),Q(ue))}),t.registerBinding(t.container,"pointercancel",function(ue){me(ue)||(we(ue),De(ue),X(ue))}),t.registerBinding(t.container,"pointermove",function(ue){me(ue)||(ue.preventDefault(),Ae(ue),De(ue),le(ue))})}};var rn={};rn.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s,l){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u,c){return Ai(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u,c){return Jr(n,a,this.points,l,u,o,s,[0,-1],i)}}};rn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,l){return Tw(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s,l){return jn(e,r,a,i,o,s,n)}}};rn.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var c=i/2,f=o/2;s=s==="auto"?Tp(i,o):s;for(var d=new Array(e.length/2),g=0;g<e.length/2;g++)d[g]={x:n+c*e[g*2],y:a+f*e[g*2+1]};var h,w,y,v,m=d.length;for(w=d[m-1],h=0;h<m;h++)y=d[h%m],v=d[(h+1)%m],l[u][h]=nf(w,y,v,s),w=y,y=v;return l[u]},draw:function(n,a,i,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,l,u,"drawCorners"))},intersectLine:function(n,a,i,o,s,l,u,c,f){return Dw(s,l,this.points,n,a,i,o,u,this.getOrCreateCorners(n,a,i,o,c,f,"corners"))},checkPoint:function(n,a,i,o,s,l,u,c,f){return Sw(n,a,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,c,f,"corners"))}}};rn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Yt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,l){return Ep(i,o,e,r,n,a,s,l)},checkPoint:function(e,r,n,a,i,o,s,l){var u=a/2,c=i/2;l=l==="auto"?En(a,i):l,l=Math.min(u,c,l);var f=l*2;return!!(Jr(e,r,this.points,o,s,a,i-f,[0,-1],n)||Jr(e,r,this.points,o,s,a-f,i,[0,-1],n)||jn(e,r,f,f,o-u+l,s-c+l,n)||jn(e,r,f,f,o+u-l,s-c+l,n)||jn(e,r,f,f,o+u-l,s+c-l,n)||jn(e,r,f,f,o-u+l,s+c-l,n))}}};rn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Wc(),points:Yt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,o)},generateCutTrianglePts:function(e,r,n,a,i){var o=i==="auto"?this.cornerLength:i,s=r/2,l=e/2,u=n-l,c=n+l,f=a-s,d=a+s;return{topLeft:[u,f+o,u+o,f,u+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,d-o,c-o,d,c-o,d-o],bottomLeft:[u+o,d,u,d-o,u+o,d-o]}},intersectLine:function(e,r,n,a,i,o,s,l){var u=this.generateCutTrianglePts(n+2*s,a+2*s,e,r,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Ai(i,o,c,e,r)},checkPoint:function(e,r,n,a,i,o,s,l){var u=l==="auto"?this.cornerLength:l;if(Jr(e,r,this.points,o,s,a,i-2*u,[0,-1],n)||Jr(e,r,this.points,o,s,a-2*u,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,s);return ar(e,r,c.topLeft)||ar(e,r,c.topRight)||ar(e,r,c.bottomRight)||ar(e,r,c.bottomLeft)}}};rn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Yt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,l){var u=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),g=function(y){var v=ka({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},u),m=ka({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},c),p=ka({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},f);return[y[0],y[1],v.x,v.y,m.x,m.y,p.x,p.y,y[4],y[5]]},h=[].concat(g(d.topLeft),g(d.topRight),g(d.bottomRight),g(d.bottomLeft));return Ai(i,o,h,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,l=n+o,u=a-i,c=a+i,f=Ju(e,r),d=f.heightOffset,g=f.widthOffset,h=f.ctrlPtOffsetPct*e,w={topLeft:[s,u+d,s+h,u,s+g,u],topRight:[l-g,u,l-h,u,l,u+d],bottomRight:[l,c-d,l-h,c,l-g,c],bottomLeft:[s+g,c,s+h,c,s,c-d]};return w.topLeft.isTop=!0,w.topRight.isTop=!0,w.bottomLeft.isBottom=!0,w.bottomRight.isBottom=!0,w},checkPoint:function(e,r,n,a,i,o,s,l){var u=Ju(a,i),c=u.heightOffset,f=u.widthOffset;if(Jr(e,r,this.points,o,s,a,i-2*c,[0,-1],n)||Jr(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,o,s),g=function(T,S,P){var L=P[4],A=P[2],_=P[0],V=P[5],q=P[1],R=Math.min(L,_),k=Math.max(L,_),F=Math.min(V,q),G=Math.max(V,q);if(R<=T&&T<=k&&F<=S&&S<=G){var j=Pw(L,A,_),H=ww(j[0],j[1],j[2],T),I=H.filter(function(M){return 0<=M&&M<=1});if(I.length>0)return I[0]}return null},h=Object.keys(d),w=0;w<h.length;w++){var y=h[w],v=d[y],m=g(e,r,v);if(m!=null){var p=v[5],b=v[3],x=v[1],C=Tt(p,b,x,m);if(v.isTop&&C<=r||v.isBottom&&r<=C)return!0}}return!1}}};rn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Yt(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,l){var u=e-(n/2+s),c=r-(a/2+s),f=c,d=e+(n/2+s),g=vn(i,o,e,r,u,c,d,f,!1);return g.length>0?g:Ep(i,o,e,r,n,a,s,l)},checkPoint:function(e,r,n,a,i,o,s,l){l=l==="auto"?En(a,i):l;var u=2*l;if(Jr(e,r,this.points,o,s,a,i-u,[0,-1],n)||Jr(e,r,this.points,o,s,a-u,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(ar(e,r,d)||jn(e,r,u,u,o+a/2-l,s+i/2-l,n)||jn(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};rn.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Yt(3,0)),this.generateRoundPolygon("round-triangle",Yt(3,0)),this.generatePolygon("rectangle",Yt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Yt(5,0)),this.generateRoundPolygon("round-pentagon",Yt(5,0)),this.generatePolygon("hexagon",Yt(6,0)),this.generateRoundPolygon("round-hexagon",Yt(6,0)),this.generatePolygon("heptagon",Yt(7,0)),this.generateRoundPolygon("round-heptagon",Yt(7,0)),this.generatePolygon("octagon",Yt(8,0)),this.generateRoundPolygon("round-octagon",Yt(8,0));var n=new Array(20);{var a=Qu(5,0),i=Qu(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=Sp(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,u)}};var Yi={};Yi.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Yi.redraw=function(t){t=t||wp();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Yi.beforeRender=function(t,e){if(!this.destroyed){e==null&&lt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var sh=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Yi.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){sh(t,!0,a);var i=Qr();t.render(t.renderOptions);var o=t.lastDrawTime=Qr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else sh(t,!1,a);t.skipFrame=!1,Ko(r)}};Ko(r)}};var HE=function(e){this.init(e)},Sm=HE,Ha=Sm.prototype;Ha.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Ha.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=a.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!l){var u=a.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",i.insertBefore(u,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Ye("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ye(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Ha.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Ha.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Ha.isHeadless=function(){return!1};[rf,Cm,Em,Ga,rn,Yi].forEach(function(t){Re(Ha,t)});var yu=1e3/60,Tm={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Hi(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,c){var f=Qr(),d=a.averageRedrawTime,g=a.lastRedrawTime,h=[],w=a.cy.extent(),y=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var v=Qr(),m=v-f,p=v-c;if(g<yu){var b=yu-(u?d:0);if(p>=e.deqFastCost*b)break}else if(u){if(m>=e.deqCost*g||m>=e.deqAvgCost*d)break}else if(p>=e.deqNoDrawCost*yu)break;var x=e.deq(n,y,w);if(x.length>0)for(var C=0;C<x.length;C++)h.push(x[C]);else break}h.length>0&&(e.onDeqd(n,h),!u&&e.shouldRedraw(n,h,y,w)&&i())},s=e.priority||$c;a.beforeRender(o,s(n))}}}},UE=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jo;kn(this,t),this.idsByKey=new Yr,this.keyForId=new Yr,this.cachesByLvl=new Yr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return An(t,[{key:"getIdsFor",value:function(r){r==null&&lt("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Fa,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Yr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),lh=25,mo=50,Mo=-4,dc=3,Dm=7.99,WE=8,KE=1024,jE=1024,YE=1024,XE=.2,ZE=.8,QE=10,JE=.15,eS=.1,tS=.9,rS=.9,nS=100,aS=1,xa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},iS=Nt({getKey:null,doesEleInvalidateKey:jo,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:mp,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),oi=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=iS(r);Re(n,a),n.lookup=new UE(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Et=oi.prototype;Et.reasons=xa;Et.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Et.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};Et.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Ui(function(r,n){return n.reqs-r.reqs});return e};Et.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Et.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Gc(s*r))),n<Mo)n=Mo;else if(s>=Dm||n>dc)return null;var u=Math.pow(2,n),c=e.h*u,f=e.w*u,d=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var g=l.get(t,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var h;if(c<=lh?h=lh:c<=mo?h=mo:h=Math.ceil(c/mo)*mo,c>YE||f>jE)return null;var w=i.getTextureQueue(h),y=w[w.length-2],v=function(){return i.recycleTexture(h,f)||i.addTexture(h,f)};y||(y=w[w.length-1]),y||(y=v()),y.width-y.usedWidth<f&&(y=v());for(var m=function(R){return R&&R.scaledLabelShown===d},p=a&&a===xa.dequeue,b=a&&a===xa.highQuality,x=a&&a===xa.downscale,C,E=n+1;E<=dc;E++){var T=l.get(t,E);if(T){C=T;break}}var S=C&&C.level===n+1?C:null,P=function(){y.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,y.usedWidth,0,f,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,f,h),m(S))P();else if(m(C))if(b){for(var L=C.level;L>n;L--)S=i.getElement(t,e,r,L,xa.downscale);P()}else return i.queueElement(t,C.level-1),C;else{var A;if(!p&&!b&&!x)for(var _=n-1;_>=Mo;_--){var V=l.get(t,_);if(V){A=V;break}}if(m(A))return i.queueElement(t,n),A;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,t,e,d,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return g={x:y.usedWidth,texture:y,level:n,scale:u,width:f,height:c,scaledLabelShown:d},y.usedWidth+=Math.ceil(f+WE),y.eleCaches.push(g),l.set(t,n,g),i.checkTextureFullness(y),g};Et.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Et.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Mo;i<=dc;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Et.checkTextureUtility=function(t){t.invalidatedWidth>=XE*t.width&&this.retireTexture(t)};Et.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>ZE&&t.fullnessChecks>=QE?Cn(r,t):t.fullnessChecks++};Et.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Cn(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}qc(i);var l=e.getRetiredTextureQueue(r);l.push(t)};Et.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(KE,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Et.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,qc(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Cn(a,o),n.push(o),o}};Et.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};Et.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<aS&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],c=i.hasCache(u,s.level);if(n[l]=null,c)continue;a.push(s);var f=e.getBoundingBox(u);e.getElement(u,f,t,s.level,xa.dequeue)}return a};Et.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Vc,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};Et.onDequeue=function(t){this.onDequeues.push(t)};Et.offDequeue=function(t){Cn(this.onDequeues,t)};Et.setupDequeueing=Tm.setupDequeueing({deqRedrawThreshold:nS,deqCost:JE,deqAvgCost:eS,deqNoDrawCost:tS,deqFastCost:rS,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(Uc(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var oS=1,gi=-4,rs=2,sS=3.99,lS=50,uS=50,cS=.15,fS=.1,dS=.9,vS=.9,hS=1,uh=250,gS=4e3*4e3,ch=32767,pS=!0,Pm=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Qr()-2*uh,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=Hi(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},uS),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=uh?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};r.layersQueue=new Ui(i),r.setupDequeueing()},zt=Pm.prototype,fh=0,mS=Math.pow(2,53)-1;zt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:fh=++fh%mS,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o};zt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Gc(o*e)),r<gi)r=gi;else if(o>=sS||r>rs)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[],f,d=n.levelIsComplete(r,t),g,h=function(){var P=function(q){if(n.validateLayersElesOrdering(q,t),n.levelIsComplete(q,t))return g=l[q],!0},L=function(q){if(!g)for(var R=r+q;gi<=R&&R<=rs&&!P(R);R+=q);};L(1),L(-1);for(var A=c.length-1;A>=0;A--){var _=c[A];_.invalid&&Cn(c,_)}};if(!d)h();else return c;var w=function(){if(!f){f=or();for(var P=0;P<t.length;P++)Cp(f,t[P].boundingBox())}return f},y=function(P){P=P||{};var L=P.after;w();var A=Math.ceil(f.w*u),_=Math.ceil(f.h*u);if(A>ch||_>ch)return null;var V=A*_;if(V>gS)return null;var q=n.makeLayer(f,r);if(L!=null){var R=c.indexOf(L)+1;c.splice(R,0,q)}else(P.insert===void 0||P.insert)&&c.unshift(q);return q};if(n.skipping&&!s)return null;for(var v=null,m=t.length/oS,p=!s,b=0;b<t.length;b++){var x=t[b],C=x._private.rscratch,E=C.imgLayerCaches=C.imgLayerCaches||{},T=E[r];if(T){v=T;continue}if((!v||v.eles.length>=m||!mw(v.bb,x.boundingBox()))&&(v=y({insert:!0,after:v}),!v))return null;g||p?n.queueLayer(v,x):n.drawEleInLayer(v,x,r,e),v.eles.push(x),E[r]=v}return g||(p?null:c)};zt.getEleLevelForLayerLevel=function(t,e){return t};zt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,pS),i.setImgSmoothing(o,!0))};zt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};zt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};zt.updateElementsInLayers=function(t,e){for(var r=this,n=Vi(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=gi;u<=rs;u++){var c=l[u];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};zt.haveLayers=function(){for(var t=this,e=!1,r=gi;r<=rs;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};zt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Qr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};zt.invalidateLayer=function(t){if(this.lastInvalidationTime=Qr(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Cn(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};zt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};zt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};zt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};zt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<hS&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};zt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};zt.requestRedraw=Hi(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);zt.setupDequeueing=Tm.setupDequeueing({deqRedrawThreshold:lS,deqCost:cS,deqAvgCost:fS,deqNoDrawCost:dS,deqFastCost:vS,deq:function(e,r){return e.dequeue(r)},onDeqd:$c,shouldRedraw:mp,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var km={},dh;function yS(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function bS(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function vh(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function wS(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function xS(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}km.arrowShapeImpl=function(t){return(dh||(dh={polygon:yS,"triangle-backcurve":bS,"triangle-tee":vh,"circle-triangle":wS,"triangle-cross":vh,circle:xS}))[t]};var zr={};zr.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};zr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};zr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};zr.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=r.getElement(e,u,n,a,i);if(c!=null){var f=s(l,e);if(f===0)return;var d=o(l,e),g=u.x1,h=u.y1,w=u.w,y=u.h,v,m,p,b,x;if(d!==0){var C=r.getRotationPoint(e);p=C.x,b=C.y,t.translate(p,b),t.rotate(d),x=l.getImgSmoothing(t),x||l.setImgSmoothing(t,!0);var E=r.getRotationOffset(e);v=E.x,m=E.y}else v=g,m=h;var T;f!==1&&(T=t.globalAlpha,t.globalAlpha=T*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,m,w,y),f!==1&&(t.globalAlpha=T),d!==0&&(t.rotate(-d),t.translate(-p,-b),x||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var CS=function(){return 0},ES=function(e,r){return e.getTextAngle(r,null)},SS=function(e,r){return e.getTextAngle(r,"source")},TS=function(e,r){return e.getTextAngle(r,"target")},DS=function(e,r){return r.effectiveOpacity()},bu=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};zr.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),g=i===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Uc(d,n))){var h=e.isEdge(),w=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,r,a,g,CS,DS),(!h||!w)&&o.drawCachedElementPortion(t,e,u,r,a,g,ES,bu),h&&!w&&(o.drawCachedElementPortion(t,e,c,r,a,g,SS,bu),o.drawCachedElementPortion(t,e,f,r,a,g,TS,bu)),o.drawElementOverlay(t,e)}};zr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};zr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};zr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};zr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var nn={};nn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,w=e.pstyle("line-outline-width").value,y=e.pstyle("line-outline-color").value,v=u*c,m=u*c,p=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;f==="straight-triangle"?(o.eleStrokeStyle(t,e,q),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=g,t.lineCap=h,o.eleStrokeStyle(t,e,q),o.drawEdgePath(e,t,s.allpts,d),t.lineCap="butt")},b=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=g+w,t.lineCap=h,w>0)o.colorStrokeStyle(t,y[0],y[1],y[2],q);else{t.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,d),t.lineCap="butt")},x=function(){a&&o.drawEdgeOverlay(t,e)},C=function(){a&&o.drawEdgeUnderlay(t,e)},E=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;o.drawArrowheads(t,e,q)},T=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var P=e.pstyle("ghost-offset-x").pfValue,L=e.pstyle("ghost-offset-y").pfValue,A=e.pstyle("ghost-opacity").value,_=v*A;t.translate(P,L),p(_),E(_),t.translate(-P,-L)}else b();C(),p(),E(),x(),T(),r&&t.translate(l.x1,l.y1)}};var Am=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};nn.drawEdgeOverlay=Am("overlay");nn.drawEdgeUnderlay=Am("underlay");nn.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=f,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<r.length;g+=4)e.quadraticCurveTo(r[g],r[g+1],r[g+2],r[g+3]);break;case"straight":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break;case"segments":if(a.isRound){var w=ir(a.roundCorners),y;try{for(w.s();!(y=w.n()).done;){var v=y.value;mm(e,v)}}catch(p){w.e(p)}finally{w.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)e.lineTo(r[m],r[m+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};nn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};nn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};nn.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(r+"-arrow-width"),g=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(g*=f);var h=e.pstyle("opacity").value;o===void 0&&(o=h);var w=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,f,l,g,n,a,i),t.globalCompositeOperation=w);var y=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,y[0],y[1],y[2],o),s.colorStrokeStyle(t,y[0],y[1],y[2],o),s.drawArrowShape(e,t,c,f,l,g,n,a,i)}}};nn.drawArrowShape=function(t,e,r,n,a,i,o,s,l){var u=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,g=e,h={x:o,y:s},w=t.pstyle("arrow-scale").value,y=this.getArrowWidth(n,w),v=u.arrowShapes[a];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],p=Jn(a),b=m[p];b!=null?(d=e=b,f=!0):(d=e=new Path2D,m[p]=d)}f||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,y,l,h,n),e.closePath&&e.closePath()),e=g,c&&(e.translate(o,s),e.rotate(l),e.scale(y,y)),(r==="filled"||r==="both")&&(c?e.fill(d):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?y:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/y,1/y),e.rotate(-l),e.translate(-o,-s))};var of={};of.safeDrawImage=function(t,e,r,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,o,s,l,u)}catch(c){Ye(c)}};of.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),g=r.width(),h=r.height(),w=r.padding()*2,y=g+(c(r,"background-width-relative-to","value",n)==="inner"?0:w),v=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:w),m=r._private.rscratch,p=c(r,"background-clip","value",n),b=p==="node",x=c(r,"background-image-opacity","value",n)*a,C=c(r,"background-image-smoothing","value",n),E=r.pstyle("corner-radius").value;E!=="auto"&&(E=r.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,S=e.height||e.cachedH;(T==null||S==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var P=T,L=S;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?P=c(r,"background-width","pfValue",n)*y:P=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?L=c(r,"background-height","pfValue",n)*v:L=c(r,"background-height","pfValue",n)),!(P===0||L===0)){if(f==="contain"){var A=Math.min(y/P,v/L);P*=A,L*=A}else if(f==="cover"){var A=Math.max(y/P,v/L);P*=A,L*=A}var _=s-y/2,V=c(r,"background-position-x","units",n),q=c(r,"background-position-x","pfValue",n);V==="%"?_+=(y-P)*q:_+=q;var R=c(r,"background-offset-x","units",n),k=c(r,"background-offset-x","pfValue",n);R==="%"?_+=(y-P)*k:_+=k;var F=l-v/2,G=c(r,"background-position-y","units",n),j=c(r,"background-position-y","pfValue",n);G==="%"?F+=(v-L)*j:F+=j;var H=c(r,"background-offset-y","units",n),I=c(r,"background-offset-y","pfValue",n);H==="%"?F+=(v-L)*I:F+=I,m.pathCache&&(_-=s,F-=l,s=0,l=0);var M=t.globalAlpha;t.globalAlpha=x;var B=i.getImgSmoothing(t),z=!1;if(C==="no"&&B?(i.setImgSmoothing(t,!1),z=!0):C==="yes"&&!B&&(i.setImgSmoothing(t,!0),z=!0),d==="no-repeat")b&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,y,v,E,m),t.clip())),i.safeDrawImage(t,e,0,0,T,S,_,F,P,L),b&&t.restore();else{var $=t.createPattern(e,d);t.fillStyle=$,i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,y,v,E,m),t.translate(_,F),t.fill(),t.translate(-_,-F)}t.globalAlpha=M,z&&i.setImgSmoothing(t,B)}};var ia={};ia.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Gc(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};ia.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var g=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),a==null?(o.drawText(t,e,null,g,i),e.isEdge()&&(o.drawText(t,e,"source",g,i),o.drawText(t,e,"target",g,i))):o.drawText(t,e,a,g,i),r&&t.translate(h.x1,h.y1)};ia.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};ia.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};function wu(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}ia.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=nr(a,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};ia.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=nr(o,"labelX",r),u=nr(o,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var g=r?r+"-":"",h=nr(o,"labelWidth",r),w=nr(o,"labelHeight",r),y=e.pstyle(g+"text-margin-x").pfValue,v=e.pstyle(g+"text-margin-y").pfValue,m=e.isEdge(),p=e.pstyle("text-halign").value,b=e.pstyle("text-valign").value;m&&(p="center",b="center"),l+=y,u+=v;var x;switch(n?x=this.getTextAngle(e,r):x=0,x!==0&&(c=l,f=u,t.translate(c,f),t.rotate(x),l=0,u=0),b){case"top":break;case"center":u+=w/2;break;case"bottom":u+=w;break}var C=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,P=e.pstyle("text-background-shape").strValue,L=P.indexOf("round")===0,A=2;if(C>0||T>0&&E>0){var _=l-S;switch(p){case"left":_-=h;break;case"center":_-=h/2;break}var V=u-w-S,q=h+2*S,R=w+2*S;if(C>0){var k=t.fillStyle,F=e.pstyle("text-background-color").value;t.fillStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+C*s+")",L?wu(t,_,V,q,R,A):t.fillRect(_,V,q,R),t.fillStyle=k}if(T>0&&E>0){var G=t.strokeStyle,j=t.lineWidth,H=e.pstyle("text-border-color").value,I=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+H[0]+","+H[1]+","+H[2]+","+E*s+")",t.lineWidth=T,t.setLineDash)switch(I){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(L?wu(t,_,V,q,R,A,"stroke"):t.strokeRect(_,V,q,R),I==="double"){var M=T/2;L?wu(t,_+M,V+M,q-M*2,R-M*2,A,"stroke"):t.strokeRect(_+M,V+M,q-M*2,R-M*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=j,t.strokeStyle=G}}var B=2*e.pstyle("text-outline-width").pfValue;if(B>0&&(t.lineWidth=B),e.pstyle("text-wrap").value==="wrap"){var z=nr(o,"labelWrapCachedLines",r),$=nr(o,"labelLineHeight",r),W=h/2,ee=this.getLabelJustification(e);switch(ee==="auto"||(p==="left"?ee==="left"?l+=-h:ee==="center"&&(l+=-W):p==="center"?ee==="left"?l+=-W:ee==="right"&&(l+=W):p==="right"&&(ee==="center"?l+=W:ee==="right"&&(l+=h))),b){case"top":u-=(z.length-1)*$;break;case"center":case"bottom":u-=(z.length-1)*$;break}for(var Y=0;Y<z.length;Y++)B>0&&t.strokeText(z[Y],l,u),t.fillText(z[Y],l,u),u+=$}else B>0&&t.strokeText(d,l,u),t.fillText(d,l,u);x!==0&&(t.rotate(-x),t.translate(-c,-f))}}};var Bn={};Bn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,c=u.rscratch,f=e.position();if(!(!ye(f.x)||!ye(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,g=o.usePaths(),h,w=!1,y=e.padding();s=e.width()+2*y,l=e.height()+2*y;var v;r&&(v=r,t.translate(-v.x1,-v.y1));for(var m=e.pstyle("background-image"),p=m.value,b=new Array(p.length),x=new Array(p.length),C=0,E=0;E<p.length;E++){var T=p[E],S=b[E]=T!=null&&T!=="none";if(S){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);C++,x[E]=o.getCachedImage(T,P,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var L=e.pstyle("background-blacken").value,A=e.pstyle("border-width").pfValue,_=e.pstyle("background-opacity").value*d,V=e.pstyle("border-color").value,q=e.pstyle("border-style").value,R=e.pstyle("border-join").value,k=e.pstyle("border-cap").value,F=e.pstyle("border-position").value,G=e.pstyle("border-dash-pattern").pfValue,j=e.pstyle("border-dash-offset").pfValue,H=e.pstyle("border-opacity").value*d,I=e.pstyle("outline-width").pfValue,M=e.pstyle("outline-color").value,B=e.pstyle("outline-style").value,z=e.pstyle("outline-opacity").value*d,$=e.pstyle("outline-offset").value,W=e.pstyle("corner-radius").value;W!=="auto"&&(W=e.pstyle("corner-radius").pfValue);var ee=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;o.eleFillStyle(t,e,me)},Y=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;o.colorStrokeStyle(t,V[0],V[1],V[2],me)},U=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;o.colorStrokeStyle(t,M[0],M[1],M[2],me)},J=function(me,ue,O,re){var ae=o.nodePathCache=o.nodePathCache||[],se=pp(O==="polygon"?O+","+re.join(","):O,""+ue,""+me,""+W),de=ae[se],Ce,ve=!1;return de!=null?(Ce=de,ve=!0,c.pathCache=Ce):(Ce=new Path2D,ae[se]=c.pathCache=Ce),{path:Ce,cacheHit:ve}},D=e.pstyle("shape").strValue,N=e.pstyle("shape-polygon-points").pfValue;if(g){t.translate(f.x,f.y);var K=J(s,l,D,N);h=K.path,w=K.cacheHit}var ne=function(){if(!w){var me=f;g&&(me={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||t,me.x,me.y,s,l,W,c)}g?t.fill(h):t.fill()},ce=function(){for(var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=u.backgrounding,re=0,ae=0;ae<x.length;ae++){var se=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ae);if(ue&&se==="over"||!ue&&se==="inside"){re++;continue}b[ae]&&x[ae].complete&&!x[ae].error&&(re++,o.drawInscribedImage(t,x[ae],e,ae,me))}u.backgrounding=re!==C,O!==u.backgrounding&&e.updateStyle(!1)},ie=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(t,e,ue),me&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,W,c)))},le=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasStripe(e)&&(t.save(),g?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,W,c),t.clip()),o.drawStripe(t,e,ue),t.restore(),me&&(g||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,l,W,c)))},X=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ue=(L>0?L:-L)*me,O=L>0?0:255;L!==0&&(o.colorFillStyle(t,O,O,O,ue),g?t.fill(h):t.fill())},Q=function(){if(A>0){if(t.lineWidth=A,t.lineCap=k,t.lineJoin=R,t.setLineDash)switch(q){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(G),t.lineDashOffset=j;break;case"solid":case"double":t.setLineDash([]);break}if(F!=="center"){if(t.save(),t.lineWidth*=2,F==="inside")g?t.clip(h):t.clip();else{var me=new Path2D;me.rect(-s/2-A,-l/2-A,s+2*A,l+2*A),me.addPath(h),t.clip(me,"evenodd")}g?t.stroke(h):t.stroke(),t.restore()}else g?t.stroke(h):t.stroke();if(q==="double"){t.lineWidth=A/3;var ue=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(h):t.stroke(),t.globalCompositeOperation=ue}t.setLineDash&&t.setLineDash([])}},Z=function(){if(I>0){if(t.lineWidth=I,t.lineCap="butt",t.setLineDash)switch(B){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var me=f;g&&(me={x:0,y:0});var ue=o.getNodeShape(e),O=A;F==="inside"&&(O=0),F==="outside"&&(O*=2);var re=(s+O+(I+$))/s,ae=(l+O+(I+$))/l,se=s*re,de=l*ae,Ce=o.nodeShapes[ue].points,ve;if(g){var Se=J(se,de,ue,Ce);ve=Se.path}if(ue==="ellipse")o.drawEllipsePath(ve||t,me.x,me.y,se,de);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ue)){var Ne=0,$e=0,Be=0;ue==="round-diamond"?Ne=(O+$+I)*1.4:ue==="round-heptagon"?(Ne=(O+$+I)*1.075,Be=-(O/2+$+I)/35):ue==="round-hexagon"?Ne=(O+$+I)*1.12:ue==="round-pentagon"?(Ne=(O+$+I)*1.13,Be=-(O/2+$+I)/15):ue==="round-tag"?(Ne=(O+$+I)*1.12,$e=(O/2+I+$)*.07):ue==="round-triangle"&&(Ne=(O+$+I)*(Math.PI/2),Be=-(O+$/2+I)/Math.PI),Ne!==0&&(re=(s+Ne)/s,se=s*re,["round-hexagon","round-tag"].includes(ue)||(ae=(l+Ne)/l,de=l*ae)),W=W==="auto"?Tp(se,de):W;for(var ze=se/2,Ie=de/2,_e=W+(O+I+$)/2,Xe=new Array(Ce.length/2),pt=new Array(Ce.length/2),Bt=0;Bt<Ce.length/2;Bt++)Xe[Bt]={x:me.x+$e+ze*Ce[Bt*2],y:me.y+Be+Ie*Ce[Bt*2+1]};var St,ft,Mt,yt,Jt=Xe.length;for(ft=Xe[Jt-1],St=0;St<Jt;St++)Mt=Xe[St%Jt],yt=Xe[(St+1)%Jt],pt[St]=nf(ft,Mt,yt,_e),ft=Mt,Mt=yt;o.drawRoundPolygonPath(ve||t,me.x+$e,me.y+Be,s*re,l*ae,Ce,pt)}else if(["roundrectangle","round-rectangle"].includes(ue))W=W==="auto"?En(se,de):W,o.drawRoundRectanglePath(ve||t,me.x,me.y,se,de,W+(O+I+$)/2);else if(["cutrectangle","cut-rectangle"].includes(ue))W=W==="auto"?Wc():W,o.drawCutRectanglePath(ve||t,me.x,me.y,se,de,null,W+(O+I+$)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ue))W=W==="auto"?En(se,de):W,o.drawBottomRoundRectanglePath(ve||t,me.x,me.y,se,de,W+(O+I+$)/2);else if(ue==="barrel")o.drawBarrelPath(ve||t,me.x,me.y,se,de);else if(ue.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ue)){var Dr=(O+I+$)/s;Ce=Yo(Xo(Ce,Dr)),o.drawPolygonPath(ve||t,me.x,me.y,s,l,Ce)}else{var an=(O+I+$)/s;Ce=Yo(Xo(Ce,-an)),o.drawPolygonPath(ve||t,me.x,me.y,s,l,Ce)}if(g?t.stroke(ve):t.stroke(),B==="double"){t.lineWidth=O/3;var Fr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",g?t.stroke(ve):t.stroke(),t.globalCompositeOperation=Fr}t.setLineDash&&t.setLineDash([])}},fe=function(){a&&o.drawNodeOverlay(t,e,f,s,l)},oe=function(){a&&o.drawNodeUnderlay(t,e,f,s,l)},he=function(){o.drawElementText(t,e,null,n)},pe=e.pstyle("ghost").value==="yes";if(pe){var ge=e.pstyle("ghost-offset-x").pfValue,Ee=e.pstyle("ghost-offset-y").pfValue,we=e.pstyle("ghost-opacity").value,Ae=we*d;t.translate(ge,Ee),U(),Z(),ee(we*_),ne(),ce(Ae,!0),Y(we*H),Q(),ie(L!==0||A!==0),le(L!==0||A!==0),ce(Ae,!1),X(Ae),t.translate(-ge,-Ee)}g&&t.translate(-f.x,-f.y),oe(),g&&t.translate(f.x,f.y),U(),Z(),ee(),ne(),ce(d,!0),Y(),Q(),ie(L!==0||A!==0),le(L!==0||A!==0),ce(d,!1),X(),g&&t.translate(-f.x,-f.y),he(),fe(),r&&t.translate(v.x1,v.y1)}};var Rm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}s.colorFillStyle(r,c[0],c[1],c[2],u),s.nodeShapes[f].draw(r,a.x,a.y,i+l*2,o+l*2,d),r.fill()}}}};Bn.drawNodeOverlay=Rm("overlay");Bn.drawNodeUnderlay=Rm("underlay");Bn.hasPie=function(t){return t=t[0],t._private.hasPie};Bn.hasStripe=function(t){return t=t[0],t._private.hasStripe};Bn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,l=n.x,u=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,g,h=0,w=this.usePaths();if(w&&(l=0,u=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2),o.units==="%"?g=d*o.pfValue:o.pfValue!==void 0&&(g=o.pfValue/2),!(g>=d))for(var y=1;y<=a.pieBackgroundN;y++){var v=e.pstyle("pie-"+y+"-background-size").value,m=e.pstyle("pie-"+y+"-background-color").value,p=e.pstyle("pie-"+y+"-background-opacity").value*r,b=v/100;b+h>1&&(b=1-h);var x=1.5*Math.PI+2*Math.PI*h;x+=s;var C=2*Math.PI*b,E=x+C;v===0||h>=1||h+b>1||(g===0?(t.beginPath(),t.moveTo(l,u),t.arc(l,u,d,x,E),t.closePath()):(t.beginPath(),t.arc(l,u,d,x,E),t.arc(l,u,g,E,x,!0),t.closePath()),this.colorFillStyle(t,m[0],m[1],m[2],p),t.fill(),h+=b)}};Bn.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,s=e.width(),l=e.height(),u=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var g=s,h=l;d.units==="%"?(g=g*d.pfValue,h=h*d.pfValue):d.pfValue!==void 0&&(g=d.pfValue,h=d.pfValue),c&&(i=0,o=0),o-=g/2,i-=h/2;for(var w=1;w<=a.stripeBackgroundN;w++){var y=e.pstyle("stripe-"+w+"-background-size").value,v=e.pstyle("stripe-"+w+"-background-color").value,m=e.pstyle("stripe-"+w+"-background-opacity").value*r,p=y/100;p+u>1&&(p=1-u),!(y===0||u>=1||u+p>1)&&(t.beginPath(),t.rect(i,o+h*u,g,h*p),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],m),t.fill(),u+=p)}t.restore()};var Qt={},PS=100;Qt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Qt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Qt.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=ea(u,f),g=ea(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,g))}else{var h=o?{x:0,y:0}:r.position(),w=r.paddedWidth(),y=r.paddedHeight();i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(w,y))}else if(r.isEdge()){var v=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(v.x,v.y,m.x,m.y)}else{var p=o?{x:0,y:0}:r.position(),b=r.paddedWidth(),x=r.paddedHeight(),C=b/2,E=x/2,T=r.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=t.createLinearGradient(p.x,p.y-E,p.x,p.y+E);break;case"to-top":i=t.createLinearGradient(p.x,p.y+E,p.x,p.y-E);break;case"to-left":i=t.createLinearGradient(p.x+C,p.y,p.x-C,p.y);break;case"to-right":i=t.createLinearGradient(p.x-C,p.y,p.x+C,p.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(p.x-C,p.y-E,p.x+C,p.y+E);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(p.x-C,p.y+E,p.x+C,p.y-E);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(p.x+C,p.y-E,p.x-C,p.y+E);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(p.x+C,p.y+E,p.x-C,p.y-E);break}}if(!i)return null;for(var S=l.length===s.length,P=s.length,L=0;L<P;L++)i.addColorStop(S?l[L]:L/(P-1),"rgba("+s[L][0]+","+s[L][1]+","+s[L][2]+","+a+")");return i};Qt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Qt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Qt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Qt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Qt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Qt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Qt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=o}};Qt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Qt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Qt.render=function(t){var e=this;t=t||wp();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,h=r.hasCompoundNodes(),w=e.hoverData.draggingEles,y=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!y;var v=d;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(v=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var m=r.style(),p=r.zoom(),b=o!==void 0?o:p,x=r.pan(),C={x:x.x,y:x.y},E={zoom:p,pan:{x:x.x,y:x.y}},T=e.prevViewport,S=T===void 0||E.zoom!==T.zoom||E.pan.x!==T.pan.x||E.pan.y!==T.pan.y;!S&&!(w&&!h)&&(e.motionBlurPxRatio=1),s&&(C=s),b*=l,C.x*=l,C.y*=l;var P=e.getCachedZSortedEles();function L(Y,U,J,D,N){var K=Y.globalCompositeOperation;Y.globalCompositeOperation="destination-out",e.colorFillStyle(Y,255,255,255,e.motionBlurTransparency),Y.fillRect(U,J,D,N),Y.globalCompositeOperation=K}function A(Y,U){var J,D,N,K;!e.clearingMotionBlur&&(Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(J={x:x.x*g,y:x.y*g},D=p*g,N=e.canvasWidth*g,K=e.canvasHeight*g):(J=C,D=b,N=e.canvasWidth,K=e.canvasHeight),Y.setTransform(1,0,0,1,0,0),U==="motionBlur"?L(Y,0,0,N,K):!n&&(U===void 0||U)&&Y.clearRect(0,0,N,K),a||(Y.translate(J.x,J.y),Y.scale(D,D)),s&&Y.translate(s.x,s.y),o&&Y.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var _=e.data.bufferContexts[e.TEXTURE_BUFFER];_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:_,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var E=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var V=u.contexts[e.NODE],q=e.textureCache.texture,E=e.textureCache.viewport;V.setTransform(1,0,0,1,0,0),d?L(V,0,0,E.width,E.height):V.clearRect(0,0,E.width,E.height);var R=m.core("outside-texture-bg-color").value,k=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(V,R[0],R[1],R[2],k),V.fillRect(0,0,E.width,E.height);var p=r.zoom();A(V,!1),V.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l),V.drawImage(q,E.mpan.x,E.mpan.y,E.width/E.zoom/l,E.height/E.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var F=r.extent(),G=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),j=e.hideEdgesOnViewport&&G,H=[];if(H[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,H[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),H[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,H[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||H[e.NODE]){var I=d&&!H[e.NODE]&&g!==1,V=n||(I?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),M=d&&!I?"motionBlur":void 0;A(V,M),j?e.drawCachedNodes(V,P.nondrag,l,F):e.drawLayeredElements(V,P.nondrag,l,F),e.debug&&e.drawDebugPoints(V,P.nondrag),!a&&!d&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||H[e.DRAG])){var I=d&&!H[e.DRAG]&&g!==1,V=n||(I?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);A(V,d&&!I?"motionBlur":void 0),j?e.drawCachedNodes(V,P.drag,l,F):e.drawCachedElements(V,P.drag,l,F),e.debug&&e.drawDebugPoints(V,P.drag),!a&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,A),d&&g!==1){var B=u.contexts[e.NODE],z=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],$=u.contexts[e.DRAG],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ee=function(U,J,D){U.setTransform(1,0,0,1,0,0),D||!v?U.clearRect(0,0,e.canvasWidth,e.canvasHeight):L(U,0,0,e.canvasWidth,e.canvasHeight);var N=g;U.drawImage(J,0,0,e.canvasWidth*N,e.canvasHeight*N,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||H[e.NODE])&&(ee(B,z,H[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||H[e.DRAG])&&(ee($,W,H[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=E,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},PS)),n||r.emit("render")};var ei;Qt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,l=a.canvasNeedsRedraw,u=t.forcedContext;if(r.showFps||!o&&l[r.SELECT_BOX]&&!s){var c=u||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),d=i.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),g=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(g.x,g.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var w=Math.round(1e3/h),y="1 frame = "+h+" ms = "+w+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!ei){var v=c.measureText(y);ei=v.actualBoundingBoxAscent}c.fillText(y,0,ei);var m=60;c.strokeRect(0,ei+10,250,20),c.fillRect(0,ei+10,250*Math.min(w/m,1),20)}s||(l[r.SELECT_BOX]=!1)}};function hh(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function kS(t,e,r){var n=hh(t,t.VERTEX_SHADER,e),a=hh(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function AS(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function sf(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function RS(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function BS(t,e,r,n,a){var i=n*r+e.x,o=a*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function MS(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function LS(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Fn(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,o=e,s=r||new Array(4);return s[0]=n*o,s[1]=a*o,s[2]=i*o,s[3]=o,s}function ha(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function IS(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function _S(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function Bm(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Mm(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function OS(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function NS(t,e,r,n){var a=Bm(t,e),i=wt(a,2),o=i[0],s=i[1],l=Mm(t,s,n),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),u}function Rr(t,e,r,n){var a=Bm(t,r),i=wt(a,3),o=i[0],s=i[1],l=i[2],u=Mm(t,s,e*o),c=o*l,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var d=new Array(e),g=0;g<e;g++)d[g]=OS(t,s,u,c,o,g);return f.dataArray=u,f.stride=c,f.size=o,f.getView=function(h){return d[h]},f.setPoint=function(h,w,y){var v=d[h];v[0]=w,v[1]=y},f.bufferSubData=function(h){t.bindBuffer(t.ARRAY_BUFFER,f),h?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,h*o):t.bufferSubData(t.ARRAY_BUFFER,0,u)},f}function zS(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var s=o*n*4;i[o]=new Float32Array(a.buffer,s,n)}var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var u=0;u<3;u++){var c=r+u;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,u*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),l.getMatrixView=function(f){return i[f]},l.setData=function(f,d){i[d].set(f,0)},l.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,a)},l}function FS(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var gh=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function xu(){var t=new gh(9);return gh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ph(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function VS(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],g=r[1],h=r[2],w=r[3],y=r[4],v=r[5],m=r[6],p=r[7],b=r[8];return t[0]=d*n+g*o+h*u,t[1]=d*a+g*s+h*c,t[2]=d*i+g*l+h*f,t[3]=w*n+y*o+v*u,t[4]=w*a+y*s+v*c,t[5]=w*i+y*l+v*f,t[6]=m*n+p*o+b*u,t[7]=m*a+p*s+b*c,t[8]=m*i+p*l+b*f,t}function Lo(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],g=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=l,t[6]=d*n+g*o+u,t[7]=d*a+g*s+c,t[8]=d*i+g*l+f,t}function mh(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=Math.sin(r),g=Math.cos(r);return t[0]=g*n+d*o,t[1]=g*a+d*s,t[2]=g*i+d*l,t[3]=g*o-d*n,t[4]=g*s-d*a,t[5]=g*l-d*i,t[6]=u,t[7]=c,t[8]=f,t}function vc(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $S(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var qS=function(){function t(e,r,n,a){kn(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return An(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,o=this.texSize,s=i/a,l=n*s,u=a*s;return l>o&&(s=o/n,l=n*s,u=a*s),{scale:s,texW:l,texH:u}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,l=this.texHeight,u=this.getScale(n),c=u.scale,f=u.texW,d=u.texH,g=function(p,b){if(a&&b){var x=b.context,C=p.x,E=p.row,T=C,S=l*E;x.save(),x.translate(T,S),x.scale(c,c),a(x,n),x.restore()}},h=[null,null],w=function(){g(i.freePointer,i.canvas),h[0]={x:i.freePointer.x,y:i.freePointer.row*l,w:f,h:d},h[1]={x:i.freePointer.x+f,y:i.freePointer.row*l,w:0,h:d},i.freePointer.x+=f,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},y=function(){var p=i.scratch,b=i.canvas;p.clear(),g({x:0,row:0},p);var x=o-i.freePointer.x,C=f-x,E=l;{var T=i.freePointer.x,S=i.freePointer.row*l,P=x;b.context.drawImage(p,0,0,P,E,T,S,P,E),h[0]={x:T,y:S,w:P,h:d}}{var L=x,A=(i.freePointer.row+1)*l,_=C;b&&b.context.drawImage(p,L,0,_,E,0,A,_,E),h[1]={x:0,y:A,w:_,h:d}}i.freePointer.x=C,i.freePointer.row++},v=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=o)w();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(v(),w()):this.enableWrapping?y():(v(),w())}return this.keyToLocation.set(r,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=_S(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),GS=function(){function t(e,r,n,a){kn(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return An(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new qS(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,s=ir(this.atlases),l;try{var u=function(){var f=l.value,d=f.getKeys(),g=HS(n,d);if(g.size===0)return a.push(f),d.forEach(function(x){return i.set(x,f)}),1;o||(o=r._createAtlas(),a.push(o));var h=ir(d),w;try{for(h.s();!(w=h.n()).done;){var y=w.value;if(!g.has(y)){var v=f.getOffsets(y),m=wt(v,2),p=m[0],b=m[1];o.canFit({w:p.w+b.w,h:p.h})||(o.lock(),o=r._createAtlas(),a.push(o)),f.canvas&&(r._copyTextureToNewAtlas(y,f,o),i.set(y,o))}}}catch(x){h.e(x)}finally{h.f()}f.dispose()};for(s.s();!(l=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),o=wt(i,2),s=o[0],l=o[1];if(l.w===0)a.draw(r,s,function(d){d.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,s.w,0,l.w,l.h);var c=s.w+l.w,f=s.h;a.draw(r,{w:c,h:f},function(d){d.drawImage(u,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function HS(t,e){return t.intersection?t.intersection(e):new Set(Uo(t).filter(function(r){return e.has(r)}))}var US=function(){function t(e,r){kn(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return An(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,s=n.texRows,l=this._cacheScratchCanvas(o),u=new GS(this.r,i,s,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=Re({type:r,atlasCollection:i},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(o,s,l,u){return u?((!i||s!=n||l!=a)&&(n=s,a=l,i=r(o,s,l)),i):r(o,s,l)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,s=a.filterEle,l=s===void 0?function(){return!0}:s,u=a.filterType,c=u===void 0?function(){return!0}:u,f=!1,d=!1,g=ir(r),h;try{for(g.s();!(h=g.n()).done;){var w=h.value;if(l(w)){var y=ir(this.renderTypes.values()),v;try{var m=function(){var b=v.value,x=b.type;if(c(x)){var C=n.collections.get(b.collection),E=b.getKey(w),T=Array.isArray(E)?E:[E];if(o)T.forEach(function(A){return C.markKeyForGC(A)}),d=!0;else{var S=b.getID?b.getID(w):w.id(),P=n._key(x,S),L=n.typeAndIdToKey.get(P);L!==void 0&&!LS(T,L)&&(f=!0,n.typeAndIdToKey.delete(P),L.forEach(function(A){return C.markKeyForGC(A)}))}}};for(y.s();!(v=y.n()).done;)m()}catch(p){y.e(p)}finally{y.f()}}}}catch(p){g.e(p)}finally{g.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=ir(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),l=!1,u=s.draw(i,a,function(d){o.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,a.w,a.h),d.clip(),o.drawElement(d,r,a,!0,!0),d.restore()):o.drawElement(d,r,a,!0,!0),l=!0});if(l){var c=o.getID?o.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return u}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(l){var u=i.getBoundingBox(r,l),c=a.getOrCreateAtlas(r,n,u,l),f=c.getOffsets(l),d=wt(f,2),g=d[0],h=d[1];return{atlas:c,tex:g,tex1:g,tex2:h,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],n=ir(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=wt(a.value,2),o=i[0],s=i[1],l=s.getCounts(),u=l.keyCount,c=l.atlasCount;r.push({type:o,keyCount:u,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),WS=function(){function t(e){kn(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return An(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),KS=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,jS=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,YS=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,XS=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,pi={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},ns={IGNORE:1,USE_BB:2},Cu=0,yh=1,bh=2,Eu=3,ga=4,yo=5,ti=6,ri=7,ZS=function(){function t(e,r,n){kn(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=AS,this.atlasManager=new US(e,n),this.batchManager=new WS(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(pi.SCREEN),this.pickingProgram=this._createShaderProgram(pi.PICKING),this.vao=this._createVAO()}return An(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(s){return s===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Cu,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(ga," || aVertType == ").concat(ri,` 
             || aVertType == `).concat(yo," || aVertType == ").concat(ti,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(yh,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(bh,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Eu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(KS,`
      `).concat(jS,`
      `).concat(YS,`
      `).concat(XS,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Cu,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Eu,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(ga,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(ga," || vVertType == ").concat(ri,` 
          || vVertType == `).concat(yo," || vVertType == ").concat(ti,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(ga,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ri,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ri,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=kS(n,a,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(l)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),NS(a,"vec2",i.aPosition,r),this.transformBuffer=zS(a,n,i.aTransform),this.indexBuffer=Rr(a,n,"vec4",i.aIndex),this.vertTypeBuffer=Rr(a,n,"int",i.aVertType),this.atlasIdBuffer=Rr(a,n,"int",i.aAtlasId),this.texBuffer=Rr(a,n,"vec4",i.aTex),this.pointAPointBBuffer=Rr(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Rr(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=Rr(a,n,"vec2",i.aLineWidth),this.colorBuffer=Rr(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=Rr(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=Rr(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pi.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,o=this.batchManager,s=i.getRenderTypeOpts(a);if(this._isVisible(r,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var l=s.getTexPickingMode(r);if(l===ns.IGNORE)return;if(l==ns.USE_BB){this.drawPickingRectangle(r,n,a);return}}var u=i.getAtlasInfo(r,a),c=ir(u),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,g=d.atlas,h=d.tex1,w=d.tex2;o.canAddToCurrentBatch(g)||this.endBatch();for(var y=o.getAtlasIndexForBatch(g),v=0,m=[[h,!0],[w,!1]];v<m.length;v++){var p=wt(m[v],2),b=p[0],x=p[1];if(b.w!=0){var C=this.instanceCount;this.vertTypeBuffer.getView(C)[0]=Cu;var E=this.indexBuffer.getView(C);ha(n,E);var T=this.atlasIdBuffer.getView(C);T[0]=y;var S=this.texBuffer.getView(C);S[0]=b.x,S[1]=b.y,S[2]=b.w,S[3]=b.h;var P=this.transformBuffer.getMatrixView(C);this.setTransformMatrix(r,P,s,d,x),this.instanceCount++,x||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(L){c.e(L)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(a.shapeProps&&a.shapeProps.padding&&(s=r.pstyle(a.shapeProps.padding).pfValue),i){var l=i.bb,u=i.tex1,c=i.tex2,f=u.w/(u.w+c.w);o||(f=1-f);var d=this._getAdjustedBB(l,s,o,f);this._applyTransformMatrix(n,d,a,r)}else{var g=a.getBoundingBox(r),h=this._getAdjustedBB(g,s,!0,1);this._applyTransformMatrix(n,h,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var o,s;ph(r);var l=a.getRotation?a.getRotation(i):0;if(l!==0){var u=a.getRotationPoint(i),c=u.x,f=u.y;Lo(r,r,[c,f]),mh(r,r,l);var d=a.getRotationOffset(i);o=d.x+(n.xOffset||0),s=d.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Lo(r,r,[o,s]),vc(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var o=r.x1,s=r.y1,l=r.w,u=r.h,c=r.yOffset;n&&(o-=n,s-=n,l+=2*n,u+=2*n);var f=0,d=l*i;return a&&i<1?l=d:!a&&i<1&&(f=l-d,o+=f,l=d),{x1:o,y1:s,w:l,h:u,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=ga;var s=this.indexBuffer.getView(o);ha(n,s);var l=this.colorBuffer.getView(o);Fn([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,u,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var o=i.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=s,s===yo||s===ti){var u=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,u),f=this.cornerRadiusBuffer.getView(l);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===ti&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(l);ha(n,d);var g=r.pstyle(o.color).value,h=r.pstyle(o.opacity).value,w=this.colorBuffer.getView(l);Fn(g,h,w);var y=this.lineWidthBuffer.getView(l);if(y[0]=0,y[1]=0,o.border){var v=r.pstyle("border-width").value;if(v>0){var m=r.pstyle("border-color").value,p=r.pstyle("border-opacity").value,b=this.borderColorBuffer.getView(l);Fn(m,p,b);var x=r.pstyle("border-position").value;if(x==="inside")y[0]=0,y[1]=-v;else if(x==="outside")y[0]=v,y[1]=0;else{var C=v/2;y[0]=C,y[1]=-C}}}var E=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,E,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return ga;case"ellipse":return ri;case"roundrectangle":case"round-rectangle":return yo;case"bottom-round-rectangle":return ti;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,o=a.h;if(r.pstyle(n).value==="auto")return En(i,o);var s=r.pstyle(n).pfValue,l=i/2,u=o/2;return Math.min(s,u,l)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,o,s,l;if(a==="source"?(o=i.arrowStartX,s=i.arrowStartY,l=i.srcArrowAngle):(o=i.arrowEndX,s=i.arrowEndY,l=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(l)||l==null)){var u=r.pstyle(a+"-arrow-shape").value;if(u!=="none"){var c=r.pstyle(a+"-arrow-color").value,f=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,g=f*d,h=r.pstyle("width").pfValue,w=r.pstyle("arrow-scale").value,y=this.r.getArrowWidth(h,w),v=this.instanceCount,m=this.transformBuffer.getMatrixView(v);ph(m),Lo(m,m,[o,s]),vc(m,m,[y,y]),mh(m,m,l),this.vertTypeBuffer.getView(v)[0]=Eu;var p=this.indexBuffer.getView(v);ha(n,p);var b=this.colorBuffer.getView(v);Fn(c,g,b),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=yh;var f=this.indexBuffer.getView(c);ha(n,f);var d=this.colorBuffer.getView(c);Fn(l,u,d);var g=this.lineWidthBuffer.getView(c);g[0]=s;var h=this.pointAPointBBuffer.getView(c);h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var w=0;w<a.length-2;w+=2){var y=this.instanceCount;this.vertTypeBuffer.getView(y)[0]=bh;var v=this.indexBuffer.getView(y);ha(n,v);var m=this.colorBuffer.getView(y);Fn(l,u,m);var p=this.lineWidthBuffer.getView(y);p[0]=s;var b=a[w-2],x=a[w-1],C=a[w],E=a[w+1],T=a[w+2],S=a[w+3],P=a[w+4],L=a[w+5];w==0&&(b=2*C-T+.001,x=2*E-S+.001),w==a.length-4&&(P=2*T-C+.001,L=2*S-E+.001);var A=this.pointAPointBBuffer.getView(y);A[0]=b,A[1]=x,A[2]=C,A[3]=E;var _=this.pointCPointDBuffer.getView(y);_[0]=T,_[1]=S,_[2]=P,_[3]=L,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var o=i/n;this._setCurvePoint(r,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var l=(1-n)*r[s]+n*r[s+2],u=(1-n)*r[s+1]+n*r[s+3];o[s]=l,o[s+1]=u}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var s=ir(this.buffers),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.bufferSubData(i)}}catch(h){s.e(h)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var d=0;d<c.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,c[d].texture),r.uniform1i(o.uTextures[d],d);r.uniform1f(o.uZoom,RS(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var g=Fn(this.bgColor,1);r.uniform4fv(o.uBGColor,g),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,s){return o+s.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),Lm={};Lm.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=QS(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=FS(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new ZS(r,n,t);var a=function(f){return function(d){return r.getTextAngle(d,f)}},i=function(f){return function(d){var g=d.pstyle(f);return g&&g.value}},o=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?ns.USE_BB:ns.IGNORE},l=function(f){var d=f.position(),g=d.x,h=d.y,w=f.outerWidth(),y=f.outerHeight();return{w,h:y,x1:g-w/2,y1:h-y/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:MS,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:Su(e.getLabelKey,null),getBoundingBox:Tu(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:Su(e.getSourceLabelKey,"source"),getBoundingBox:Tu(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:Su(e.getTargetLabelKey,"target"),getBoundingBox:Tu(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var u=Hi(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=r.drawing.invalidate(f)),d&&u()}),JS(r)};function QS(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return up(r)}function Im(t,e){var r=t._private.rscratch;return nr(r,"labelWrapCachedLines",e)||[]}var Su=function(e,r){return function(n){var a=e(n),i=Im(n,r);return i.length>1?i.map(function(o,s){return"".concat(a,"_").concat(s)}):a}},Tu=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var s=Number(a.substring(o+1)),l=Im(n,r),u=i.h/l.length,c=u*s,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:u,yOffset:c}}}return i}};function JS(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>Dm?(eT(t),e.call(t,i)):(tT(t),Om(t,i,pi.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,s,l){return sT(t,i,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,o){a.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function eT(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function tT(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function rT(t){var e=t.canvasWidth,r=t.canvasHeight,n=sf(t),a=n.pan,i=n.zoom,o=xu();Lo(o,o,[a.x,a.y]),vc(o,o,[i,i]);var s=xu();$S(s,e,r);var l=xu();return VS(l,s,o),l}function _m(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=sf(t),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(o,o)}function nT(t,e){t.drawSelectionRectangle(e,function(r){return _m(t,r)})}function aT(t){var e=t.data.contexts[t.NODE];e.save(),_m(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function iT(t){var e=function(a,i,o){for(var s=a.atlasManager.getAtlasCollection(i),l=t.data.contexts[t.NODE],u=s.atlases,c=0;c<u.length;c++){var f=u[c],d=f.canvas;if(d){var g=d.width,h=d.height,w=g*c,y=d.height*o,v=.4;l.save(),l.scale(v,v),l.drawImage(d,w,y),l.strokeStyle="black",l.rect(w,y,g,h),l.stroke(),l.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function oT(t,e,r,n,a){var i,o,s,l,u=sf(t),c=u.pan,f=u.zoom;{var d=BS(t,c,f,e,r),g=wt(d,2),h=g[0],w=g[1],y=6;i=h-y/2,o=w-y/2,s=y,l=y}if(s===0||l===0)return[];var v=t.data.contexts[t.WEBGL];v.bindFramebuffer(v.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(v.viewport(0,0,v.canvas.width,v.canvas.height),Om(t,null,pi.PICKING),t.pickingFrameBuffer.needsDraw=!1);var m=s*l,p=new Uint8Array(m*4);v.readPixels(i,o,s,l,v.RGBA,v.UNSIGNED_BYTE,p),v.bindFramebuffer(v.FRAMEBUFFER,null);for(var b=new Set,x=0;x<m;x++){var C=p.slice(x*4,x*4+4),E=IS(C)-1;E>=0&&b.add(E)}return b}function sT(t,e,r){var n=oT(t,e,r),a=t.getCachedZSortedEles(),i,o,s=ir(n),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=a[u];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(f){s.e(f)}finally{s.f()}return[i,o].filter(Boolean)}function Du(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function Om(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&nT(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=rT(t),l=t.getCachedZSortedEles();if(i=l.length,a.startFrame(s,r),r.screen){for(var u=0;u<l.nondrag.length;u++)Du(t,u,l.nondrag[u]);for(var c=0;c<l.drag.length;c++)Du(t,c,l.drag[c])}else if(r.picking)for(var f=0;f<l.length;f++)Du(t,f,l[f]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(aT(t),iT(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var d=performance.now(),g=!1,h=Math.ceil(d-n),w=a.getDebugInfo(),y=["".concat(i," elements"),"".concat(w.totalInstances," instances"),"".concat(w.batchCount," batches"),"".concat(w.totalAtlases," atlases"),"".concat(w.wrappedCount," wrapped textures"),"".concat(w.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(r.name,") - time ").concat(h,"ms, ").concat(y));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(h,"ms")),console.log("Totals:"),console.log("  ".concat(y)),console.log("Texture Atlases Used:");var v=w.atlasInfo,m=ir(v),p;try{for(m.s();!(p=m.n()).done;){var b=p.value;console.log("  ".concat(b.type,": ").concat(b.keyCount," keys, ").concat(b.atlasCount," atlases"))}}catch(x){m.e(x)}finally{m.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var Mn={};Mn.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+o*i[l*2],r+s*i[l*2+1]);t.closePath()};Mn.drawRoundPolygonPath=function(t,e,r,n,a,i,o){o.forEach(function(s){return mm(t,s)}),t.closePath()};Mn.drawRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=i==="auto"?En(n,a):Math.min(i,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,l),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.arcTo(e-o,r-s,e,r-s,l),t.lineTo(e,r-s),t.closePath()};Mn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=i==="auto"?En(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,l),t.arcTo(e-o,r+s,e-o,r,l),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};Mn.drawCutRectanglePath=function(t,e,r,n,a,i,o){var s=n/2,l=a/2,u=o==="auto"?Wc():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+u,r-l),t.lineTo(e+s-u,r-l),t.lineTo(e+s,r-l+u),t.lineTo(e+s,r+l-u),t.lineTo(e+s-u,r+l),t.lineTo(e-s+u,r+l),t.lineTo(e-s,r+l-u),t.lineTo(e-s,r-l+u),t.closePath()};Mn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=r-o,c=r+o,f=Ju(n,a),d=f.widthOffset,g=f.heightOffset,h=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,u+g),t.lineTo(s,c-g),t.quadraticCurveTo(s+h,c,s+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-h,c,l,c-g),t.lineTo(l,u+g),t.quadraticCurveTo(l-h,u,l-d,u),t.lineTo(s+d,u),t.quadraticCurveTo(s+h,u,s,u+g),t.closePath()};var wh=Math.sin(0),xh=Math.cos(0),hc={},gc={},Nm=Math.PI/40;for(var pa=0*Math.PI;pa<2*Math.PI;pa+=Nm)hc[pa]=Math.sin(pa),gc[pa]=Math.cos(pa);Mn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=Nm)i=e-s*hc[u]*wh+s*gc[u]*xh,o=r+l*gc[u]*wh+l*hc[u]*xh,u===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var Xi={};Xi.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};Xi.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=ye(t.maxWidth)||ye(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,u=t.scale;else if(s){var c=1/0,f=1/0;ye(t.maxWidth)&&(c=u*t.maxWidth/i),ye(t.maxHeight)&&(f=u*t.maxHeight/o),u=Math.min(c,f),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var d=document.createElement("canvas");d.width=i,d.height=o,d.style.width=i+"px",d.style.height=o+"px";var g=d.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)g.translate(-n.x1*u,-n.y1*u),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(n.x1*u,n.y1*u);else{var w=e.pan(),y={x:w.x*u,y:w.y*u};u*=e.zoom(),g.translate(y.x,y.y),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(-y.x,-y.y)}t.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=t.bg,g.rect(0,0,i,o),g.fill())}return d};function lT(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Ch(t){var e=t.indexOf(",");return t.substr(e+1)}function zm(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Va(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return lT(Ch(n()),r);case"base64":return Ch(n());case"base64uri":default:return n()}}Xi.png=function(t){return zm(t,this.bufferCanvasImage(t),"image/png")};Xi.jpg=function(t){return zm(t,this.bufferCanvasImage(t),"image/jpeg")};var Fm={};Fm.nodeShapeImpl=function(t,e,r,n,a,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,s);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var uT=Vm,Fe=Vm.prototype;Fe.CANVAS_LAYERS=3;Fe.SELECT_BOX=0;Fe.DRAG=1;Fe.NODE=2;Fe.WEBGL=3;Fe.CANVAS_TYPES=["2d","2d","2d","webgl2"];Fe.BUFFER_COUNT=3;Fe.TEXTURE_BUFFER=0;Fe.MOTIONBLUR_BUFFER_NODE=1;Fe.MOTIONBLUR_BUFFER_DRAG=2;function Vm(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Fe.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Fe.CANVAS_LAYERS),contexts:new Array(Fe.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Fe.CANVAS_LAYERS),bufferCanvases:new Array(Fe.BUFFER_COUNT),bufferContexts:new Array(Fe.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[a]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};s1()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<Fe.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=n.createElement("canvas"),f=Fe.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(f),e.data.contexts[u]||lt("Could not create canvas of type "+f),Object.keys(l).forEach(function(Y){c.style[Y]=l[Y]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(Fe.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Fe.NODE].setAttribute("data-id","layer"+Fe.NODE+"-node"),e.data.canvases[Fe.SELECT_BOX].setAttribute("data-id","layer"+Fe.SELECT_BOX+"-selectbox"),e.data.canvases[Fe.DRAG].setAttribute("data-id","layer"+Fe.DRAG+"-drag"),e.data.canvases[Fe.WEBGL]&&e.data.canvases[Fe.WEBGL].setAttribute("data-id","layer"+Fe.WEBGL+"-webgl");for(var u=0;u<Fe.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=n.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var d=or(),g=function(U){return{x:(U.x1+U.x2)/2,y:(U.y1+U.y2)/2}},h=function(U){return{x:-U.w/2,y:-U.h/2}},w=function(U){var J=U[0]._private,D=J.oldBackgroundTimestamp===J.backgroundTimestamp;return!D},y=function(U){return U[0]._private.nodeKey},v=function(U){return U[0]._private.labelStyleKey},m=function(U){return U[0]._private.sourceLabelStyleKey},p=function(U){return U[0]._private.targetLabelStyleKey},b=function(U,J,D,N,K){return e.drawElement(U,J,D,!1,!1,K)},x=function(U,J,D,N,K){return e.drawElementText(U,J,D,N,"main",K)},C=function(U,J,D,N,K){return e.drawElementText(U,J,D,N,"source",K)},E=function(U,J,D,N,K){return e.drawElementText(U,J,D,N,"target",K)},T=function(U){return U.boundingBox(),U[0]._private.bodyBounds},S=function(U){return U.boundingBox(),U[0]._private.labelBounds.main||d},P=function(U){return U.boundingBox(),U[0]._private.labelBounds.source||d},L=function(U){return U.boundingBox(),U[0]._private.labelBounds.target||d},A=function(U,J){return J},_=function(U){return g(T(U))},V=function(U,J,D){var N=U?U+"-":"";return{x:J.x+D.pstyle(N+"text-margin-x").pfValue,y:J.y+D.pstyle(N+"text-margin-y").pfValue}},q=function(U,J,D){var N=U[0]._private.rscratch;return{x:N[J],y:N[D]}},R=function(U){return V("",q(U,"labelX","labelY"),U)},k=function(U){return V("source",q(U,"sourceLabelX","sourceLabelY"),U)},F=function(U){return V("target",q(U,"targetLabelX","targetLabelY"),U)},G=function(U){return h(T(U))},j=function(U){return h(P(U))},H=function(U){return h(L(U))},I=function(U){var J=S(U),D=h(S(U));if(U.isNode()){switch(U.pstyle("text-halign").value){case"left":D.x=-J.w-(J.leftPad||0);break;case"right":D.x=-(J.rightPad||0);break}switch(U.pstyle("text-valign").value){case"top":D.y=-J.h-(J.topPad||0);break;case"bottom":D.y=-(J.botPad||0);break}}return D},M=e.data.eleTxrCache=new oi(e,{getKey:y,doesEleInvalidateKey:w,drawElement:b,getBoundingBox:T,getRotationPoint:_,getRotationOffset:G,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),B=e.data.lblTxrCache=new oi(e,{getKey:v,drawElement:x,getBoundingBox:S,getRotationPoint:R,getRotationOffset:I,isVisible:A}),z=e.data.slbTxrCache=new oi(e,{getKey:m,drawElement:C,getBoundingBox:P,getRotationPoint:k,getRotationOffset:j,isVisible:A}),$=e.data.tlbTxrCache=new oi(e,{getKey:p,drawElement:E,getBoundingBox:L,getRotationPoint:F,getRotationOffset:H,isVisible:A}),W=e.data.lyrTxrCache=new Pm(e);e.onUpdateEleCalcs(function(U,J){M.invalidateElements(J),B.invalidateElements(J),z.invalidateElements(J),$.invalidateElements(J),W.invalidateElements(J);for(var D=0;D<J.length;D++){var N=J[D]._private;N.oldBackgroundTimestamp=N.backgroundTimestamp}});var ee=function(U){for(var J=0;J<U.length;J++)W.enqueueElementRefinement(U[J].ele)};M.onDequeue(ee),B.onDequeue(ee),z.onDequeue(ee),$.onDequeue(ee),t.webgl&&e.initWebgl(t,{getStyleKey:y,getLabelKey:v,getSourceLabelKey:m,getTargetLabelKey:p,drawElement:b,drawLabel:x,drawSourceLabel:C,drawTargetLabel:E,getElementBox:T,getLabelBox:S,getSourceLabelBox:P,getTargetLabelBox:L,getElementRotationPoint:_,getElementRotationOffset:G,getLabelRotationPoint:R,getSourceLabelRotationPoint:k,getTargetLabelRotationPoint:F,getLabelRotationOffset:I,getSourceLabelRotationOffset:j,getTargetLabelRotationOffset:H})}Fe.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Fe.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Fe.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Fe.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var cT=typeof Path2D<"u";Fe.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Fe.usePaths=function(){return cT&&this.pathsEnabled};Fe.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Fe.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Fe.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":Ct(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[km,zr,nn,of,ia,Bn,Qt,Lm,Mn,Xi,Fm].forEach(function(t){Re(Fe,t)});var fT=[{name:"null",impl:hm},{name:"base",impl:Sm},{name:"canvas",impl:uT}],dT=[{type:"layout",extensions:zE},{type:"renderer",extensions:fT}],$m={},qm={};function Gm(t,e,r){var n=r,a=function(T){Ye("Can not register `"+e+"` for `"+t+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Li.prototype[e])return a(e);Li.prototype[e]=r}else if(t==="collection"){if(Ot.prototype[e])return a(e);Ot.prototype[e]=r}else if(t==="layout"){for(var i=function(T){this.options=T,r.call(this,T),Ue(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var E=this.options;if(E&&E.animate){var T=this.animations;if(T)for(var S=0;S<T.length;S++)T[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(T){return T._private.cy},d={addEventFields:function(T,S){S.layout=T,S.cy=f(T),S.target=T},bubble:function(){return!0},parent:function(T){return f(T)}};Re(o,{createEmitter:function(){return this._private.emitter=new As(d,this),this},emitter:function(){return this._private.emitter},on:function(T,S){return this.emitter().on(T,S),this},one:function(T,S){return this.emitter().one(T,S),this},once:function(T,S){return this.emitter().one(T,S),this},removeListener:function(T,S){return this.emitter().removeListener(T,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,S){return this.emitter().emit(T,S),this}}),je.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var g=Hm("renderer","base"),h=g.prototype,w=r,y=r.prototype,v=function(){g.apply(this,arguments),w.apply(this,arguments)},m=v.prototype;for(var p in h){var b=h[p],x=y[p]!=null;if(x)return a(p);m[p]=b}for(var C in y)m[C]=y[C];h.clientFunctions.forEach(function(E){m[E]=m[E]||function(){lt("Renderer does not implement `renderer."+E+"()` on its prototype")}}),n=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return lt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return cp({map:$m,keys:[t,e],value:n})}function Hm(t,e){return fp({map:$m,keys:[t,e]})}function vT(t,e,r,n,a){return cp({map:qm,keys:[t,e,r,n],value:a})}function hT(t,e,r,n){return fp({map:qm,keys:[t,e,r,n]})}var pc=function(){if(arguments.length===2)return Hm.apply(null,arguments);if(arguments.length===3)return Gm.apply(null,arguments);if(arguments.length===4)return hT.apply(null,arguments);if(arguments.length===5)return vT.apply(null,arguments);lt("Invalid extension access syntax")};Li.prototype.extension=pc;dT.forEach(function(t){t.extensions.forEach(function(e){Gm(t.type,e.name,e.impl)})});var as=function(){if(!(this instanceof as))return new as;this.length=0},na=as.prototype;na.instanceString=function(){return"stylesheet"};na.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};na.css=function(t,e){var r=this.length-1;if(Te(t))this[r].properties.push({name:t,value:e});else if(Ue(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=Pt.properties[o]||Pt.properties[bs(o)];if(l!=null){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this};na.style=na.css;na.generateStyle=function(t){var e=new Pt(t);return this.appendToStyle(e)};na.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var gT="3.32.0",en=function(e){if(e===void 0&&(e={}),Ue(e))return new Li(e);if(Te(e))return pc.apply(pc,arguments)};en.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(en),t.apply(null,e),this};en.warnings=function(t){return yp(t)};en.version=gT;en.stylesheet=en.Stylesheet=as;function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pu={exports:{}},Eh={},Sh;function pT(){return Sh||(Sh=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),Eh}var ku,Th;function mT(){return Th||(Th=1,ku=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),s=r?Math.floor(i.y/e):Math.round(i.y/e),l={x:(o+r)*e,y:(s+r)*e};return l},n.snapNode=function(i){var o=i.position(),s=n.snapPos(o);i.position(s)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var l=o.position();return n.snapPos(l)}),t.endBatch()},n.onFreeNode=function(i){var o,s=i.target||i.cyTarget;s.selected()?o=i.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),ku}var Au,Dh;function yT(){return Dh||(Dh=1,Au=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(c){if(!(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)){var f=c.target||c.cyTarget;f.selected()?a=c.cy.$(":selected"):a=f,i=c.position||c.cyPosition,f.grabbable()&&!f.locked()&&(n=f,n.lock(),t.on("tapdrag",u),t.on("tapend",s))}};var s=function(c){t.off("tapdrag",u),t.off("tapend",s),n.unlock(),c.preventDefault()},l=function(){return{x:o.x-i.x,y:o.y-i.y}},u=function(c){n.position(),o=c.position||c.cyPosition,o=e.snapPos(o);var f=l();if(f.x!=0||f.y!=0){n.unlock();var d=a.union(a.descendants());d.filter(":childless").positions(function(g,h){typeof g=="number"&&(g=h);var w=g.position();return e.snapPos({x:w.x+f.x,y:w.y+f.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),Au}var Ru,Ph;function bT(){return Ph||(Ph=1,Ru=function(t,e,r){var n=t,a=function(g){n=g},i=function(g){var h=g.getBoundingClientRect();return{top:h.top+document.documentElement.scrollTop,left:h.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),l=o.getContext("2d");s.appendChild(o);var u=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};u();var c=function(){var g=e.zoom(),h=e.width(),w=e.height(),y=n.gridSpacing*g,v=e.pan(),m=v.x%y,p=v.y%y;l.strokeStyle=n.gridColor,l.lineWidth=n.lineWidth;var b='	<svg width="'+h+'" height="'+w+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+y+'" height="'+y+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+y+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+y+'" height="'+y+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+y+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+p+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+m+`, 0)" />
	        </svg>
`,x=new Image;b=encodeURIComponent(b),x.onload=function(){f(),l.drawImage(x,0,0)},x.src="data:image/svg+xml,"+b},f=function(){var g=e.width(),h=e.height();l.clearRect(0,0,g,h)},d=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var g=i(o),h=i(s);o.style.top=-(g.top-h.top),o.style.left=-(g.left-h.left),c()},0)},250);return{initCanvas:d,resizeCanvas:d,resetCanvas:u,clearCanvas:f,drawGrid:c,changeOptions:a,sizeCanvas:c}}),Ru}var Bu,kh;function wT(){return kh||(kh=1,Bu=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),s=i.height(),l=Math.round((o-t)/(t*2))*(t*2),u=Math.round((s-t)/(t*2))*(t*2);l=l>0?l+t:t,u=u>0?u+t:t,(o!=l||s!=u)&&(i.style({width:l,height:u}),r(i).resize={oldWidth:o,oldHeight:s})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),Bu}var Mu,Ah;function xT(){return Ah||(Ah=1,Mu=function(t,e,r,n,a,i,o,s){var l=function(B){return function(z){B(z)}},u={snapToGridDuringDrag:new l(h),resize:new l(v),snapToGridOnRelease:new l(x),drawGrid:new l(T),guidelines:new l(R),parentPadding:new l(G)};function c(B,z){return function($){var W=$.target||$.cyTarget;(!W.is(":parent")||z)&&B(W)}}function f(B){return function(){t.nodes().not(":parent").each(function(z,$){typeof z=="number"&&(z=$),B(z)})}}function d(B){return function(){t.nodes().each(function(z,$){typeof z=="number"&&(z=$),B(z)})}}function g(B){return B?"on":"off"}function h(B){t[g(B)]("tapstart","node",n.onTapStartNode)}var w=f(r.resizeNode);c(r.resizeNode);var y=f(r.recoverNodeDimensions);function v(B){t[g(B)]("ready",w),B?w():y()}var m=d(e.snapNodesTopDown),p=d(e.recoverSnapNode),b=c(e.snapNode,!0);function x(B){t[g(B)]("add","node",b),t[g(B)]("ready",m),t[g(B)]("free","node",e.onFreeNode),B?m():p()}var C=function(){H.zoomDash&&a.drawGrid()},E=function(){H.panGrid&&a.drawGrid()};function T(B){t[g(B)]("zoom",C),t[g(B)]("pan",E),B?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var S=null,P=function(B){var z=B.target||B.cyTarget,$=z.selected()?B.cy.$(":selected"):z;S=i.getTopMostNodes($.nodes()),i.lines.init(S)},L=function(B){this.id()==S.id()&&(i.lines.update(S),H.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(S))},A=function(B){H.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(S),i.lines.destroy(),S=null},_=function(B){i.lines.resize()},V=function(B){i.getMousePos(B)},q=function(B){S&&(i.setMousePos(t.pan()),i.lines.init(S))};function R(B){B?(i.resizeCanvas(),t.on("tapstart","node",V),t.on("grab",P),t.on("pan",q),t.on("drag","node",L),t.on("free",A),window.addEventListener("resize",_)):(t.off("tapstart","node",V),t.off("grab",P),t.off("pan",q),t.off("drag","node",L),t.off("free",A),i.resetCanvas(),window.removeEventListener("resize",_))}var k=function(B){o.setPaddingOfParent(t.nodes(":parent"),B)},F=function(B){o.setPaddingOfParent(B,!0)};function G(B){k(B),t[g(B)]("ready",k),t[g(B)]("add","node:parent",c(F,!0))}var j={},H,I={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function M(B){H=Object.extend({},B),B.guidelines=B.initPosAlignment||B.distributionGuidelines||B.geometricGuideline;for(var z in B)if(j[z]!=B[z])if(u.hasOwnProperty(z))u[z](B[z]);else for(var $ in I){var W=I[$];W.indexOf(z)>=0&&($=="drawGrid"&&(a.changeOptions(B),B.drawGrid&&a.resizeCanvas()),$=="snapToGridOnRelease"&&(e.changeOptions(B),B.snapToGridOnRelease&&m()),$=="guidelines"&&i.changeOptions(B),$=="resize"&&(r.changeOptions(B),B.resize&&w()),$=="parentPadding"&&o.changeOptions(B))}j=Object.extend({},j,B)}return{init:M,syncWithOptions:M}}),Mu}var Lu,Rh;function CT(){if(Rh)return Lu;Rh=1,Lu=y;var t=0,e=1;function r(v,m,p,b,x,C){this._color=v,this.key=m,this.value=p,this.left=b,this.right=x,this._count=C}function n(v){return new r(v._color,v.key,v.value,v.left,v.right,v._count)}function a(v,m){return new r(v,m.key,m.value,m.left,m.right,m._count)}function i(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function o(v,m){this._compare=v,this.root=m}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var v=[];return this.forEach(function(m,p){v.push(m)}),v}}),Object.defineProperty(s,"values",{get:function(){var v=[];return this.forEach(function(m,p){v.push(p)}),v}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(v,m){for(var p=this._compare,b=this.root,x=[],C=[];b;){var E=p(v,b.key);x.push(b),C.push(E),E<=0?b=b.left:b=b.right}x.push(new r(t,v,m,null,null,1));for(var T=x.length-2;T>=0;--T){var b=x[T];C[T]<=0?x[T]=new r(b._color,b.key,b.value,x[T+1],b.right,b._count+1):x[T]=new r(b._color,b.key,b.value,b.left,x[T+1],b._count+1)}for(var T=x.length-1;T>1;--T){var S=x[T-1],b=x[T];if(S._color===e||b._color===e)break;var P=x[T-2];if(P.left===S)if(S.left===b){var L=P.right;if(L&&L._color===t)S._color=e,P.right=a(e,L),P._color=t,T-=1;else{if(P._color=t,P.left=S.right,S._color=e,S.right=P,x[T-2]=S,x[T-1]=b,i(P),i(S),T>=3){var A=x[T-3];A.left===P?A.left=S:A.right=S}break}}else{var L=P.right;if(L&&L._color===t)S._color=e,P.right=a(e,L),P._color=t,T-=1;else{if(S.right=b.left,P._color=t,P.left=b.right,b._color=e,b.left=S,b.right=P,x[T-2]=b,x[T-1]=S,i(P),i(S),i(b),T>=3){var A=x[T-3];A.left===P?A.left=b:A.right=b}break}}else if(S.right===b){var L=P.left;if(L&&L._color===t)S._color=e,P.left=a(e,L),P._color=t,T-=1;else{if(P._color=t,P.right=S.left,S._color=e,S.left=P,x[T-2]=S,x[T-1]=b,i(P),i(S),T>=3){var A=x[T-3];A.right===P?A.right=S:A.left=S}break}}else{var L=P.left;if(L&&L._color===t)S._color=e,P.left=a(e,L),P._color=t,T-=1;else{if(S.left=b.right,P._color=t,P.right=b.left,b._color=e,b.right=S,b.left=P,x[T-2]=b,x[T-1]=S,i(P),i(S),i(b),T>=3){var A=x[T-3];A.right===P?A.right=b:A.left=b}break}}}return x[0]._color=e,new o(p,x[0])};function l(v,m){if(m.left){var p=l(v,m.left);if(p)return p}var p=v(m.key,m.value);if(p)return p;if(m.right)return l(v,m.right)}function u(v,m,p,b){var x=m(v,b.key);if(x<=0){if(b.left){var C=u(v,m,p,b.left);if(C)return C}var C=p(b.key,b.value);if(C)return C}if(b.right)return u(v,m,p,b.right)}function c(v,m,p,b,x){var C=p(v,x.key),E=p(m,x.key),T;if(C<=0&&(x.left&&(T=c(v,m,p,b,x.left),T)||E>0&&(T=b(x.key,x.value),T)))return T;if(E>0&&x.right)return c(v,m,p,b,x.right)}s.forEach=function(m,p,b){if(this.root)switch(arguments.length){case 1:return l(m,this.root);case 2:return u(p,this._compare,m,this.root);case 3:return this._compare(p,b)>=0?void 0:c(p,b,this._compare,m,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var v=[],m=this.root;m;)v.push(m),m=m.left;return new f(this,v)}}),Object.defineProperty(s,"end",{get:function(){for(var v=[],m=this.root;m;)v.push(m),m=m.right;return new f(this,v)}}),s.at=function(v){if(v<0)return new f(this,[]);for(var m=this.root,p=[];;){if(p.push(m),m.left){if(v<m.left._count){m=m.left;continue}v-=m.left._count}if(!v)return new f(this,p);if(v-=1,m.right){if(v>=m.right._count)break;m=m.right}else break}return new f(this,[])},s.ge=function(v){for(var m=this._compare,p=this.root,b=[],x=0;p;){var C=m(v,p.key);b.push(p),C<=0&&(x=b.length),C<=0?p=p.left:p=p.right}return b.length=x,new f(this,b)},s.gt=function(v){for(var m=this._compare,p=this.root,b=[],x=0;p;){var C=m(v,p.key);b.push(p),C<0&&(x=b.length),C<0?p=p.left:p=p.right}return b.length=x,new f(this,b)},s.lt=function(v){for(var m=this._compare,p=this.root,b=[],x=0;p;){var C=m(v,p.key);b.push(p),C>0&&(x=b.length),C<=0?p=p.left:p=p.right}return b.length=x,new f(this,b)},s.le=function(v){for(var m=this._compare,p=this.root,b=[],x=0;p;){var C=m(v,p.key);b.push(p),C>=0&&(x=b.length),C<0?p=p.left:p=p.right}return b.length=x,new f(this,b)},s.find=function(v){for(var m=this._compare,p=this.root,b=[];p;){var x=m(v,p.key);if(b.push(p),x===0)return new f(this,b);x<=0?p=p.left:p=p.right}return new f(this,[])},s.remove=function(v){var m=this.find(v);return m?m.remove():this},s.get=function(v){for(var m=this._compare,p=this.root;p;){var b=m(v,p.key);if(b===0)return p.value;b<=0?p=p.left:p=p.right}};function f(v,m){this.tree=v,this._stack=m}var d=f.prototype;Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new f(this.tree,this._stack.slice())};function g(v,m){v.key=m.key,v.value=m.value,v.left=m.left,v.right=m.right,v._color=m._color,v._count=m._count}function h(v){for(var m,p,b,x,C=v.length-1;C>=0;--C){if(m=v[C],C===0){m._color=e;return}if(p=v[C-1],p.left===m){if(b=p.right,b.right&&b.right._color===t){if(b=p.right=n(b),x=b.right=n(b.right),p.right=b.left,b.left=p,b.right=x,b._color=p._color,m._color=e,p._color=e,x._color=e,i(p),i(b),C>1){var E=v[C-2];E.left===p?E.left=b:E.right=b}v[C-1]=b;return}else if(b.left&&b.left._color===t){if(b=p.right=n(b),x=b.left=n(b.left),p.right=x.left,b.left=x.right,x.left=p,x.right=b,x._color=p._color,p._color=e,b._color=e,m._color=e,i(p),i(b),i(x),C>1){var E=v[C-2];E.left===p?E.left=x:E.right=x}v[C-1]=x;return}if(b._color===e)if(p._color===t){p._color=e,p.right=a(t,b);return}else{p.right=a(t,b);continue}else{if(b=n(b),p.right=b.left,b.left=p,b._color=p._color,p._color=t,i(p),i(b),C>1){var E=v[C-2];E.left===p?E.left=b:E.right=b}v[C-1]=b,v[C]=p,C+1<v.length?v[C+1]=m:v.push(m),C=C+2}}else{if(b=p.left,b.left&&b.left._color===t){if(b=p.left=n(b),x=b.left=n(b.left),p.left=b.right,b.right=p,b.left=x,b._color=p._color,m._color=e,p._color=e,x._color=e,i(p),i(b),C>1){var E=v[C-2];E.right===p?E.right=b:E.left=b}v[C-1]=b;return}else if(b.right&&b.right._color===t){if(b=p.left=n(b),x=b.right=n(b.right),p.left=x.right,b.right=x.left,x.right=p,x.left=b,x._color=p._color,p._color=e,b._color=e,m._color=e,i(p),i(b),i(x),C>1){var E=v[C-2];E.right===p?E.right=x:E.left=x}v[C-1]=x;return}if(b._color===e)if(p._color===t){p._color=e,p.left=a(t,b);return}else{p.left=a(t,b);continue}else{if(b=n(b),p.left=b.right,b.right=p,b._color=p._color,p._color=t,i(p),i(b),C>1){var E=v[C-2];E.right===p?E.right=b:E.left=b}v[C-1]=b,v[C]=p,C+1<v.length?v[C+1]=m:v.push(m),C=C+2}}}}d.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var m=new Array(v.length),p=v[v.length-1];m[m.length-1]=new r(p._color,p.key,p.value,p.left,p.right,p._count);for(var b=v.length-2;b>=0;--b){var p=v[b];p.left===v[b+1]?m[b]=new r(p._color,p.key,p.value,m[b+1],p.right,p._count):m[b]=new r(p._color,p.key,p.value,p.left,m[b+1],p._count)}if(p=m[m.length-1],p.left&&p.right){var x=m.length;for(p=p.left;p.right;)m.push(p),p=p.right;var C=m[x-1];m.push(new r(p._color,C.key,C.value,p.left,p.right,p._count)),m[x-1].key=p.key,m[x-1].value=p.value;for(var b=m.length-2;b>=x;--b)p=m[b],m[b]=new r(p._color,p.key,p.value,p.left,m[b+1],p._count);m[x-1].left=m[x]}if(p=m[m.length-1],p._color===t){var E=m[m.length-2];E.left===p?E.left=null:E.right===p&&(E.right=null),m.pop();for(var b=0;b<m.length;++b)m[b]._count--;return new o(this.tree._compare,m[0])}else if(p.left||p.right){p.left?g(p,p.left):p.right&&g(p,p.right),p._color=e;for(var b=0;b<m.length-1;++b)m[b]._count--;return new o(this.tree._compare,m[0])}else{if(m.length===1)return new o(this.tree._compare,null);for(var b=0;b<m.length;++b)m[b]._count--;var T=m[m.length-2];h(m),T.left===p?T.left=null:T.right=null}return new o(this.tree._compare,m[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var v=0,m=this._stack;if(m.length===0){var p=this.tree.root;return p?p._count:0}else m[m.length-1].left&&(v=m[m.length-1].left._count);for(var b=m.length-2;b>=0;--b)m[b+1]===m[b].right&&(++v,m[b].left&&(v+=m[b].left._count));return v},enumerable:!0}),d.next=function(){var v=this._stack;if(v.length!==0){var m=v[v.length-1];if(m.right)for(m=m.right;m;)v.push(m),m=m.left;else for(v.pop();v.length>0&&v[v.length-1].right===m;)m=v[v.length-1],v.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var m=v.length-1;m>0;--m)if(v[m-1].left===v[m])return!0;return!1}}),d.update=function(v){var m=this._stack;if(m.length===0)throw new Error("Can't update empty node!");var p=new Array(m.length),b=m[m.length-1];p[p.length-1]=new r(b._color,b.key,v,b.left,b.right,b._count);for(var x=m.length-2;x>=0;--x)b=m[x],b.left===m[x+1]?p[x]=new r(b._color,b.key,b.value,p[x+1],b.right,b._count):p[x]=new r(b._color,b.key,b.value,b.left,p[x+1],b._count);return new o(this.tree._compare,p[0])},d.prev=function(){var v=this._stack;if(v.length!==0){var m=v[v.length-1];if(m.left)for(m=m.left;m;)v.push(m),m=m.right;else for(v.pop();v.length>0&&v[v.length-1].left===m;)m=v[v.length-1],v.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var m=v.length-1;m>0;--m)if(v[m-1].right===v[m])return!0;return!1}});function w(v,m){return v<m?-1:v>m?1:0}function y(v){return new o(v||w,null)}return Lu}var Iu,Bh;function ET(){return Bh||(Bh=1,Iu=function(t,e,r){var n=CT(),a=t,i=function(R){a=R,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(R){var k=R.getBoundingClientRect();return{top:k.top+document.documentElement.scrollTop,left:k.left+document.documentElement.scrollLeft}},s=r(function(){l(),u.height=e.height(),u.width=e.width(),u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){u.height=e.height(),u.width=e.width();var R=o(u),k=o(c);u.style.top=-(R.top-k.top),u.style.left=-(R.left-k.left)},0)},250),l=function(){var R=e.width(),k=e.height();f.clearRect(0,0,R,k)},u=document.createElement("canvas"),c=e.container(),f=u.getContext("2d");c.appendChild(u);var d=function(){u.height=0,u.width=0,u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder};d();var g=null,h=null,w,y,v={},m={},p={h:null,v:null};v.getDims=function(R){var k=R.renderedPosition(),F=R.renderedWidth(),G=R.renderedHeight(),j={left:Number(R.renderedStyle("padding-left").replace("px","")),right:Number(R.renderedStyle("padding-right").replace("px","")),top:Number(R.renderedStyle("padding-top").replace("px","")),bottom:Number(R.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:k.x,left:Math.round(k.x-(j.left+F/2)),right:Math.round(k.x+(j.right+F/2))},vertical:{center:k.y,top:Math.round(k.y-(j.top+G/2)),bottom:Math.round(k.y+(j.bottom+G/2))}}},v.init=function(R){g=n(),h=n(),w||(m.x=e.pan("x"),m.y=e.pan("y"),w=R.renderedPosition());var k=e.nodes(":visible");y=R.union(R.ancestors()),y=y.union(R.descendants()),k.not(y).each(function(F,G){typeof F=="number"&&(F=G);var j=v.getDims(F);["left","center","right"].forEach(function(H){var I=j.horizontal[H];h.get(I)?h.get(I).push(F):h=h.insert(I,[F])}),["top","center","bottom"].forEach(function(H){var I=j.vertical[H];g.get(I)?g.get(I).push(F):g=g.insert(I,[F])})}),f.lineWidth=a.lineWidth,v.update(R)},v.destroy=function(){v.clear(),g=null,h=null,w=null,C={},p={h:null,v:null},q&&(q.unlock(),q=void 0)},v.clear=l,v.drawLine=function(R,k,F,G){f.setLineDash(G),f.beginPath(),f.moveTo(R.x,R.y),f.lineTo(k.x,k.y),f.strokeStyle=F,f.stroke()},v.drawArrow=function(R,k){k=="right"?(f.setLineDash([]),f.beginPath(),f.moveTo(R.x-5,R.y-5),f.lineTo(R.x,R.y),f.lineTo(R.x-5,R.y+5),f.stroke()):k=="left"?(f.setLineDash([]),f.beginPath(),f.moveTo(R.x+5,R.y-5),f.lineTo(R.x,R.y),f.lineTo(R.x+5,R.y+5),f.stroke()):k=="top"?(f.setLineDash([]),f.beginPath(),f.moveTo(R.x-5,R.y+5),f.lineTo(R.x,R.y),f.lineTo(R.x+5,R.y+5),f.stroke()):k=="bottom"&&(f.setLineDash([]),f.beginPath(),f.moveTo(R.x-5,R.y-5),f.lineTo(R.x,R.y),f.lineTo(R.x+5,R.y-5),f.stroke())},v.drawCross=function(R){f.setLineDash([]),f.beginPath(),f.moveTo(R.x-5,R.y+5),f.lineTo(R.x+5,R.y-5),f.moveTo(R.x-5,R.y-5),f.lineTo(R.x+5,R.y+5),f.stroke()};var b=function(R,k){for(var F=R[0],G=v.getDims(F)[k].center,j=R[0],H=v.getDims(j)[k].center,I=0;I<R.length;I++){var M=R[I];v.getDims(M)[k].center<G&&(G=v.getDims(M)[k].center,F=M),v.getDims(M)[k].center>H&&(H=v.getDims(M)[k].center,j=M)}if(k=="horizontal")var B=(G+H)/2<v.getDims(R[1])[k].center?H+(.5*j.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():G-(.5*F.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var B=(G+H)/2<v.getDims(R[1])[k].center?H+(.5*j.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():G-(.5*F.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return B};v.horizontalDistribution=function(R){var k=null,F=null,G=v.getDims(R),j=G.horizontal.center,H=G.vertical.center;if(h.forEach(function(B,z){for(var $=0;$<z.length;$++){var W=z[$],ee=v.getDims(W);if(Math.abs(ee.vertical.center-G.vertical.center)<a.guidelinesStyle.range*e.zoom()&&ee.horizontal.right==B&&G.horizontal.left-ee.horizontal.right>a.guidelinesStyle.minDistRange){var Y=Math.round(2*j)-B;h.forEach(function(U,J){for(var D=0;D<J.length;D++){var N=J[D];Math.abs(v.getDims(N).vertical.center-H)<a.guidelinesStyle.range*e.zoom()&&Math.abs(Y-v.getDims(N).horizontal.left)<2*a.guidelinesTolerance&&(k=W,F=N)}},Y-a.guidelinesTolerance,Y+a.guidelinesTolerance)}}},j-a.guidelinesStyle.range*e.zoom(),j),k){p.hd=j-(v.getDims(F).horizontal.left+v.getDims(k).horizontal.right)/2,(!a.geometricGuideline||p.h==null||Math.abs(p.h)>Math.abs(p.hd))&&(p.h=p.hd);var I=b([k,R,F],"vertical");v.drawLine({x:v.getDims(k).horizontal.right,y:I},{x:G.horizontal.left,y:I},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(F).horizontal.left,y:I},{x:G.horizontal.right,y:I},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(k).horizontal.right,y:I},{x:v.getDims(k).horizontal.right,y:v.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(F).horizontal.left,y:I},{x:v.getDims(F).horizontal.left,y:v.getDims(F).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:G.horizontal.left,y:I},{x:G.horizontal.left,y:H},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:G.horizontal.right,y:I},{x:G.horizontal.right,y:H},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(k).horizontal.right,y:I},"left"),v.drawArrow({x:G.horizontal.left,y:I},"right"),v.drawArrow({x:G.horizontal.right,y:I},"left"),v.drawArrow({x:v.getDims(F).horizontal.left,y:I},"right")}else{var M=v.horizontalDistributionNext(R,"left");M||v.horizontalDistributionNext(R,"right")}},v.verticalDistribution=function(R){var k=null,F=null,G=v.getDims(R),j=G.horizontal.center,H=G.vertical.center;if(g.forEach(function(B,z){for(var $=0;$<z.length;$++){var W=z[$],ee=v.getDims(W);if(Math.abs(ee.horizontal.center-G.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&ee.vertical.bottom==B&&G.vertical.top-ee.vertical.bottom>a.guidelinesStyle.minDistRange){var Y=Math.round(2*H-B);g.forEach(function(U,J){for(var D=0;D<J.length;D++){var N=J[D];Math.abs(v.getDims(N).horizontal.center-j)<a.guidelinesStyle.range*e.zoom()&&Math.abs(Y-v.getDims(N).vertical.top)<2*a.guidelinesTolerance&&(k=W,F=N)}},Y-a.guidelinesTolerance,Y+a.guidelinesTolerance)}}},H-a.guidelinesStyle.range*e.zoom(),H),k){p.vd=H-(v.getDims(k).vertical.bottom+v.getDims(F).vertical.top)/2,(!a.geometricGuideline||p.v==null||Math.abs(p.v)>Math.abs(p.vd))&&(p.v=p.vd);var I=b([k,R,F],"horizontal");v.drawLine({y:v.getDims(k).vertical.bottom,x:I},{y:G.vertical.top,x:I},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(F).vertical.top,x:I},{y:G.vertical.bottom,x:I},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(k).vertical.bottom,x:I},{y:v.getDims(k).vertical.bottom,x:v.getDims(k).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(F).vertical.top,x:I},{y:v.getDims(F).vertical.top,x:v.getDims(F).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:G.vertical.bottom,x:I},{y:G.vertical.bottom,x:j},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:G.vertical.top,x:I},{y:G.vertical.top,x:j},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:I,y:v.getDims(k).vertical.bottom},"top"),v.drawArrow({x:I,y:G.vertical.top},"bottom"),v.drawArrow({x:I,y:v.getDims(F).vertical.top},"bottom"),v.drawArrow({x:I,y:G.vertical.bottom},"top")}else{var M=v.verticalDistributionNext(R,"below");M||v.verticalDistributionNext(R,"above")}},v.searchForLine=function(R,k){var F,G,j,H,I,M,B,z=v.getDims(k)[R],$=Number.MAX_SAFE_INTEGER;R=="horizontal"?(M=h,H="y",I="x",p.h=null):(M=g,H="x",I="y",p.v=null),j=k.renderedPosition(H);for(var W in z)if(F=z[W],M.forEach(function(ee,Y){for(var U=0;U<Y.length;U++){var J=Y[U];if(a.centerToEdgeAlignment||W!="center"&&J.renderedPosition(I)!=ee||W=="center"&&J.renderedPosition(I)==ee){var D=Math.abs(j-J.renderedPosition(H));D<$&&D<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(G=J,$=D,B=ee)}}},F-Number(a.guidelinesTolerance),F+Number(a.guidelinesTolerance)),G){$=v.getDims(k)[R][W],R=="horizontal"?(p.h=$-B,v.drawLine({x:$,y:k.renderedPosition("y")},{x:$,y:G.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(p.v=$-B,v.drawLine({x:k.renderedPosition("x"),y:$},{x:G.renderedPosition("x"),y:$},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(R,k){var F=null,G=null,j=v.getDims(R),H=j.horizontal.center,I=j.vertical.center,M="right",B="left",z=H;if(k=="left"){M="left",B="right";var z=H-a.guidelinesStyle.range*e.zoom()}var $={left:function(W,ee){return ee-W>a.guidelinesStyle.minDistRange},right:function(W,ee){return W-ee>a.guidelinesStyle.minDistRange}};return h.forEach(function(W,ee){for(var Y=0;Y<ee.length;Y++){var U=ee[Y],J=v.getDims(U);if(Math.abs(J.vertical.center-j.vertical.center)<a.guidelinesStyle.range*e.zoom()&&J.horizontal[B]==W&&$[k](J.horizontal[B],j.horizontal[M])){var D=J.horizontal[M]-(j.horizontal[M]-W);h.forEach(function(N,K){for(var ne=0;ne<K.length;ne++){var ce=K[ne];Math.abs(v.getDims(ce).vertical.center-I)<a.guidelinesStyle.range*e.zoom()&&Math.abs(D-v.getDims(ce).horizontal[B])<2*a.guidelinesTolerance&&(F=U,G=ce)}},D-a.guidelinesTolerance,D+a.guidelinesTolerance)}}},z,z+a.guidelinesStyle.range*e.zoom()),F?(p.hd=v.getDims(R).horizontal[M]-v.getDims(F).horizontal[B]-(v.getDims(F).horizontal[M]-v.getDims(G).horizontal[B]),(!a.geometricGuideline||p.h==null||Math.abs(p.h)>Math.abs(p.hd))&&(p.h=p.hd),v.drawDH(R,F,G,k),!0):(a.geometricGuideline||(p.h=null),!1)},v.drawDH=function(R,k,F,G){var j=v.getDims(R).vertical.center,H="right",I="left";G=="left"&&(H="left",I="right");var M=b([k,R,F],"vertical");v.drawLine({x:v.getDims(k).horizontal[I],y:M},{x:v.getDims(R).horizontal[H],y:M},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(R).horizontal[H],y:M},{x:v.getDims(R).horizontal[H],y:j},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(F).horizontal[I],y:M},{x:v.getDims(k).horizontal[H],y:M},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(F).horizontal[I],y:M},{x:v.getDims(F).horizontal[I],y:v.getDims(F).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(k).horizontal[I],y:M},{x:v.getDims(k).horizontal[I],y:v.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(k).horizontal[H],y:M},{x:v.getDims(k).horizontal[H],y:v.getDims(k).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(R).horizontal[H],y:M},I),v.drawArrow({x:v.getDims(k).horizontal[I],y:M},H),v.drawArrow({x:v.getDims(k).horizontal[H],y:M},I),v.drawArrow({x:v.getDims(F).horizontal[I],y:M},H)},v.verticalDistributionNext=function(R,k){var F=null,G=null,j=v.getDims(R),H=j.horizontal.center,I=j.vertical.center,M="top",B="bottom",z=I-a.guidelinesStyle.range*e.zoom();k=="above"&&(M="bottom",B="top",z=I);var $={below:function(W,ee){return ee-W>a.guidelinesStyle.minDistRange},above:function(W,ee){return W-ee>a.guidelinesStyle.minDistRange}};return g.forEach(function(W,ee){for(var Y=0;Y<ee.length;Y++){var U=ee[Y],J=v.getDims(U);if(Math.abs(J.horizontal.center-j.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&J.vertical[B]==W&&$[k](J.vertical[B],j.vertical[M])){var D=J.vertical[M]-(j.vertical[M]-W);g.forEach(function(N,K){for(var ne=0;ne<K.length;ne++){var ce=K[ne];Math.abs(v.getDims(ce).horizontal.center-H)<a.guidelinesStyle.range*e.zoom()&&Math.abs(D-v.getDims(ce).vertical[B])<2*a.guidelinesTolerance&&(F=U,G=ce)}},D-a.guidelinesTolerance,D+a.guidelinesTolerance)}}},z,z+a.guidelinesStyle.range*e.zoom()),F?(p.vd=v.getDims(R).vertical[M]-v.getDims(F).vertical[B]-(v.getDims(F).vertical[M]-v.getDims(G).vertical[B]),(!a.geometricGuideline||p.v==null||Math.abs(p.v)>Math.abs(p.vd))&&(p.v=p.vd),v.drawDV(R,F,G,k),!0):(a.geometricGuideline||(p.v=null),!1)},v.drawDV=function(R,k,F,G){var j=v.getDims(R),H=j.horizontal.center,I="top",M="bottom";G=="above"&&(I="bottom",M="top");var B=b([k,R,F],"horizontal");v.drawLine({x:B,y:j.vertical[I]},{x:B,y:v.getDims(k).vertical[M]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:B,y:v.getDims(k).vertical[I]},{x:B,y:v.getDims(F).vertical[M]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:H,y:j.vertical[I]},{x:B,y:j.vertical[I]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(k).horizontal.center,y:v.getDims(k).vertical[M]},{x:B,y:v.getDims(k).vertical[M]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(k).horizontal.center,y:v.getDims(k).vertical[I]},{x:B,y:v.getDims(k).vertical[I]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:B,y:v.getDims(F).vertical[M]},{x:v.getDims(F).horizontal.center,y:v.getDims(F).vertical[M]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:B,y:j.vertical[I]},M),v.drawArrow({x:B,y:v.getDims(k).vertical[M]},I),v.drawArrow({x:B,y:v.getDims(k).vertical[I]},M),v.drawArrow({x:B,y:v.getDims(F).vertical[M]},I)},v.update=function(R){v.clear(),a.initPosAlignment&&P(R),R.each(function(k,F){typeof k=="number"&&(k=F),a.geometricGuideline&&(v.searchForLine("horizontal",k),v.searchForLine("vertical",k)),a.distributionGuidelines&&(v.horizontalDistribution(k),v.verticalDistribution(k))})},v.resize=function(){s()};function x(R){for(var k={},F=0;F<R.length;F++)k[R[F].id()]=!0;var G=R.filter(function(j,H){typeof j=="number"&&(j=H);for(var I=j.parent()[0];I!=null;){if(k[I.id()])return!1;I=I.parent()[0]}return!0});return G}var C={},E={},T=function(R){C=R.renderedPosition||R.cyRenderedPosition,E.x=C.x,E.y=C.y},S=function(R){E.x+=R.x-m.x,E.y+=R.y-m.y,m.x=R.x,m.y=R.y},P=function(R){var k=R.renderedPosition();Math.abs(w.y-k.y)<a.guidelinesTolerance?(v.drawLine({x:E.x,y:C.y},{x:k.x,y:C.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),C.y==E.y?v.drawCross(E):v.drawCross(C)):Math.abs(w.x-k.x)<a.guidelinesTolerance&&(v.drawLine({x:C.x,y:E.y},{x:C.x,y:k.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),C.x==E.x?v.drawCross(E):v.drawCross(C))};function L(R,k){var F=x(k),G=F.union(F.descendants());G.filter(":childless").forEach(function(j,H){typeof j=="number"&&(j=H);var I={x:R.x+j.renderedPosition("x"),y:R.y+j.renderedPosition("y")};j.renderedPosition(I)})}var A;e.on("tapstart","node",function(){A=this});var _,V={x:0,y:0};e.on("mousemove",function(R){_=R.renderedPosition||R.cyRenderedPosition,q&&q.each(function(k,F){if(typeof k=="number"&&(k=F),k.locked()&&(Math.abs(_.x-V.x)>2*a.guidelinesTolerance||Math.abs(_.y-V.y)>2*a.guidelinesTolerance)){k.unlock();var G={};G.x=_.x-A.renderedPosition("x"),G.y=_.y-A.renderedPosition("y"),L(G,k)}})});var q;return v.snapToAlignmentLocation=function(R){q=R,R.each(function(k,F){typeof k=="number"&&(k=F);var G=k.renderedPosition();p.h&&(V=_,G.x-=p.h,k.renderedPosition(G)),p.v&&(V=_,G.y-=p.v,k.renderedPosition(G)),(p.v||p.h)&&(p.h=null,p.v=null,q.lock())}),v.update(R)},{changeOptions:i,lines:v,getTopMostNodes:x,getMousePos:T,setMousePos:S,resizeCanvas:s,resetCanvas:d}}),Iu}var _u,Mh;function ST(){return Mh||(Mh=1,_u=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(l){r=l,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function s(l,u){u?l.addClass(n):l.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),_u}var Ou,Lh;function TT(){return Lh||(Lh=1,Ou=function(t,e,r){function n(l,u,c){var f=l.union(l.descendants());f.filter(":childless").positions(function(d,g){typeof d=="number"&&(d=g);var h=d.position();return{x:h.x+u,y:h.y+c}})}function a(l){for(var u={},c=0;c<l.length;c++)u[l[c].id()]=!0;var f=l.filter(function(d,g){typeof d=="number"&&(d=g);for(var h=d.parent()[0];h!=null;){if(u[h.id()])return!1;h=h.parent()[0]}return!0});return f}if(r||t("collection","align",function(l,u,c){var f=a(this.nodes(":visible")),d=c||f[0];f=f.not(d),l=l||"none",u=u||"none";var g=0,h=0;u=="left"?g=-1:u=="right"&&(g=1),l=="top"?h=-1:l=="bottom"&&(h=1);for(var w=0;w<f.length;w++){var y=f[w],v=Object.assign({},y.position()),m=Object.assign({},y.position());u!="none"&&(m.x=d.position("x")+g*(d.outerWidth()-y.outerWidth())/2),l!="none"&&(m.y=d.position("y")+h*(d.outerHeight()-y.outerHeight())/2),n(y,m.x-v.x,m.y-v.y)}return this}),e.undoRedo){let l=function(){for(var c={},f=e.nodes(),d=0;d<f.length;d++){var g=f[d];c[g.id()]={x:g.position("x"),y:g.position("y")}}return c},u=function(c){var f={};return e.nodes().not(":parent").positions(function(d,g){typeof d=="number"&&(d=g),f[d.id()]={x:d.position("x"),y:d.position("y")};var h=c[d.id()];return{x:h.x,y:h.y}}),f};var o=l,s=u,i=e.undoRedo(null,!0);i.action("align",function(c){var f;return c.firstTime?(f=l(),c.nodes.align(c.horizontal,c.vertical,c.alignTo)):f=u(c),f},function(c){return u(c)})}}),Ou}var Nu,Ih;function DT(){if(Ih)return Nu;Ih=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(s,l,u){var c,f,d,g,h,w,y,v=0,m=!1,p=!0;if(typeof s!="function")throw new TypeError(e);if(l=l<0?0:+l||0,u===!0){var b=!0;p=!1}else o(u)&&(b=!!u.leading,m="maxWait"in u&&r(+u.maxWait||0,l),p="trailing"in u?!!u.trailing:p);function x(){w&&clearTimeout(w),f&&clearTimeout(f),v=0,f=w=y=void 0}function C(P,L){L&&clearTimeout(L),f=w=y=void 0,P&&(v=a(),d=s.apply(h,c),!w&&!f&&(c=h=void 0))}function E(){var P=l-(a()-g);P<=0||P>l?C(y,f):w=setTimeout(E,P)}function T(){C(p,w)}function S(){if(c=arguments,g=a(),h=this,y=p&&(w||!b),m===!1)var P=b&&!w;else{!f&&!b&&(v=g);var L=m-(g-v),A=L<=0||L>m;A?(f&&(f=clearTimeout(f)),v=g,d=s.apply(h,c)):f||(f=setTimeout(T,L))}return A&&w?w=clearTimeout(w):!w&&l!==m&&(w=setTimeout(E,l)),P&&(A=!0,d=s.apply(h,c)),A&&!w&&!f&&(c=h=void 0),d}return S.cancel=x,S}function o(s){var l=typeof s;return!!s&&(l=="object"||l=="function")}return i}();return Nu=t,Nu}var _h;function PT(){return _h||(_h=1,function(t){(function(){var e=function(r){if(!r)return;pT();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=mT(),o=yT(),s=bT(),l=wT(),u=xT(),c=ET(),f=ST(),d=TT(),g=DT();function h(w){return w.scratch("_gridGuide")||w.scratch("_gridGuide",{}),w.scratch("_gridGuide")}r("core","gridGuide",function(w){var y=this,v=h(y),m=Object.extend({},v.options||a,w);if(v.options=m,v.initialized){var E=v.eventsController;E.syncWithOptions(m)}else{var p,b,x,C,E,T,S;p=i(y,m.gridSpacing,m.snapToGridCenter),b=l(m.gridSpacing),x=o(y,p),C=s(m,y,g),T=c(m,y,g),S=f(m,y),E=u(y,p,b,x,C,T,S,m),d(r,y,n),n=!0,E.init(m),v.initialized=!0,v.eventsController=E}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()}(Pu)),Pu.exports}var kT=PT();const AT=Um(kT);var Io={exports:{}},RT=Io.exports,Oh;function BT(){return Oh||(Oh=1,function(t,e){(function(r,n){t.exports=n()})(RT,function(){return(()=>{var r={621:(i,o,s)=>{function l(I,M){(M==null||M>I.length)&&(M=I.length);for(var B=0,z=new Array(M);B<M;B++)z[B]=I[B];return z}function u(I,M){var B={};for(var z in I)B[z]=I[z];for(var $ in M)B[$]instanceof Array?B[$]=B[$].concat(M[$]):B[$]=M[$];return B}function c(I){for(var M="",B=0;B<I.length;B++)M+=I[B],B!==I.length-1&&(M+=" ");return M}function f(I,M,B){B?I.setAttribute(M,""):I.removeAttribute(M)}function d(I,M,B){customElements.get(I)===void 0&&customElements.define(I,M,{extends:B})}s.r(o),s.d(o,{contextMenus:()=>H});var g="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function w(I){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(I)}function y(I,M){var B;if(typeof Symbol>"u"||I[Symbol.iterator]==null){if(Array.isArray(I)||(B=function(U,J){if(U){if(typeof U=="string")return v(U,J);var D=Object.prototype.toString.call(U).slice(8,-1);return D==="Object"&&U.constructor&&(D=U.constructor.name),D==="Map"||D==="Set"?Array.from(U):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?v(U,J):void 0}}(I))||M){B&&(I=B);var z=0,$=function(){};return{s:$,n:function(){return z>=I.length?{done:!0}:{done:!1,value:I[z++]}},e:function(U){throw U},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W,ee=!0,Y=!1;return{s:function(){B=I[Symbol.iterator]()},n:function(){var U=B.next();return ee=U.done,U},e:function(U){Y=!0,W=U},f:function(){try{ee||B.return==null||B.return()}finally{if(Y)throw W}}}}function v(I,M){(M==null||M>I.length)&&(M=I.length);for(var B=0,z=new Array(M);B<M;B++)z[B]=I[B];return z}function m(I,M){if(!(I instanceof M))throw new TypeError("Cannot call a class as a function")}function p(I,M){for(var B=0;B<M.length;B++){var z=M[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(I,z.key,z)}}function b(I,M,B){return M&&p(I.prototype,M),B&&p(I,B),I}function x(I,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(M&&M.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),M&&_(I,M)}function C(I){var M=A();return function(){var B,z=V(I);if(M){var $=V(this).constructor;B=Reflect.construct(z,arguments,$)}else B=z.apply(this,arguments);return E(this,B)}}function E(I,M){return!M||w(M)!=="object"&&typeof M!="function"?T(I):M}function T(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function S(I,M,B){return(S=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,$,W){var ee=function(U,J){for(;!Object.prototype.hasOwnProperty.call(U,J)&&(U=V(U))!==null;);return U}(z,$);if(ee){var Y=Object.getOwnPropertyDescriptor(ee,$);return Y.get?Y.get.call(W):Y.value}})(I,M,B||I)}function P(I){var M=typeof Map=="function"?new Map:void 0;return(P=function(B){if(B===null||(z=B,Function.toString.call(z).indexOf("[native code]")===-1))return B;var z;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(B))return M.get(B);M.set(B,$)}function $(){return L(B,arguments,V(this).constructor)}return $.prototype=Object.create(B.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),_($,B)})(I)}function L(I,M,B){return(L=A()?Reflect.construct:function(z,$,W){var ee=[null];ee.push.apply(ee,$);var Y=new(Function.bind.apply(z,ee));return W&&_(Y,W.prototype),Y}).apply(null,arguments)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _(I,M){return(_=Object.setPrototypeOf||function(B,z){return B.__proto__=z,B})(I,M)}function V(I){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(I)}function q(I){I.preventDefault(),I.stopPropagation()}var R=function(I){x(B,I);var M=C(B);function B(z,$,W){var ee,Y,U,J,D,N,K,ne,ce,ie;m(this,B),S((Y=T(ie=M.call(this)),V(B.prototype)),"setAttribute",Y).call(Y,"id",z.id);var le=ie._getMenuItemClassStr(W.cxtMenuItemClasses,z.hasTrailingDivider);if(S((U=T(ie),V(B.prototype)),"setAttribute",U).call(U,"class",le),S((J=T(ie),V(B.prototype)),"setAttribute",J).call(J,"title",(ee=z.tooltipText)!==null&&ee!==void 0?ee:""),z.disabled&&f(T(ie),"disabled",!0),z.image){var X=document.createElement("img");X.src=z.image.src,X.width=z.image.width,X.height=z.image.height,X.style.position="absolute",X.style.top=z.image.y+"px",X.style.left=z.image.x+"px",S((D=T(ie),V(B.prototype)),"appendChild",D).call(D,X)}if(ie.innerHTML+=z.content,ie.onMenuItemClick=$,ie.data={},ie.clickFns=[],ie.selector=z.selector,ie.hasTrailingDivider=z.hasTrailingDivider,ie.show=z.show===void 0||z.show,ie.coreAsWell=z.coreAsWell||!1,ie.scratchpad=W,z.onClickFunction===void 0&&z.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return ie.onClickFunction=z.onClickFunction,z.submenu instanceof Array&&ie._createSubmenu(z.submenu),S((N=T(ie),V(B.prototype)),"addEventListener",N).call(N,"mousedown",q),S((K=T(ie),V(B.prototype)),"addEventListener",K).call(K,"mouseup",q),S((ne=T(ie),V(B.prototype)),"addEventListener",ne).call(ne,"touchstart",q),S((ce=T(ie),V(B.prototype)),"addEventListener",ce).call(ce,"touchend",q),ie}return b(B,[{key:"bindOnClickFunction",value:function(z){this.clickFns.push(z),S(V(B.prototype),"addEventListener",this).call(this,"click",z)}},{key:"unbindOnClickFunctions",value:function(){var z,$=y(this.clickFns);try{for($.s();!(z=$.n()).done;){var W=z.value;S(V(B.prototype),"removeEventListener",this).call(this,"click",W)}}catch(ee){$.e(ee)}finally{$.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(z){this.hasTrailingDivider=z}},{key:"hasSubmenu",value:function(){return this.submenu instanceof k}},{key:"appendSubmenuItem",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(z,$)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(z){var $=this.getBoundingClientRect(),W=function(D){D.style.opacity="0",D.style.display="block";var N=D.getBoundingClientRect();return D.style.opacity="1",D.style.display="none",N}(this.submenu),ee=$.right+W.width>window.innerWidth,Y=$.top+W.height>window.innerHeight;ee||Y?ee&&!Y?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):ee&&Y?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var U=Array.from(this.submenu.children).filter(function(D){if(D instanceof B)return D.isVisible()}),J=U.length;U.forEach(function(D,N){D instanceof B&&(N<J-1&&D.getHasTrailingDivider()?D.classList.add(g):D.getHasTrailingDivider()&&D.classList.remove(g))})}},{key:"_onMouseLeave",value:function(z){var $,W,ee,Y,U;$={x:z.clientX,y:z.clientY},W=this.submenu,Y=$.y,(ee=$.x)>=(U=W.getBoundingClientRect()).left&&ee<=U.right&&Y>=U.top&&Y<=U.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new k(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var $,W=y(z);try{for(W.s();!($=W.n()).done;){var ee=$.value,Y=new B(ee,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(Y)}}catch(U){W.e(U)}finally{W.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(z,$){return $?z+" "+g:z}}],[{key:"define",value:function(){d("ctx-menu-item",B,"button")}}]),B}(P(HTMLButtonElement)),k=function(I){x(B,I);var M=C(B);function B(z,$){var W,ee;return m(this,B),S((W=T(ee=M.call(this)),V(B.prototype)),"setAttribute",W).call(W,"class",$.cxtMenuClasses),ee.style.position="absolute",ee.onMenuItemClick=z,ee.scratchpad=$,ee}return b(B,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var z,$=y(this.children);try{for($.s();!(z=$.n()).done;){var W=z.value;W instanceof HTMLElement?W.style.display="none":console.warn("".concat(W," is not a HTMLElement"))}}catch(ee){$.e(ee)}finally{$.f()}}},{key:"hideSubmenus",value:function(){var z,$=y(this.children);try{for($.s();!(z=$.n()).done;){var W=z.value;W instanceof R&&W.submenu&&W.submenu.hide()}}catch(ee){$.e(ee)}finally{$.f()}}},{key:"appendMenuItem",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if($!==void 0){if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of the context menu"));this.insertBefore(z,$)}else this.appendChild(z);z.isClickable()&&this._performBindings(z)}},{key:"moveBefore",value:function(z,$){if(z.parentNode!==this)throw new Error("The item with id='".concat(z.id,"' is not a child of context menu"));if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of context menu"));this.removeChild(z),this.insertBefore(z,$)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var z=this.lastChild;z instanceof R?this._removeImmediateMenuItem(z):(console.warn("Found non menu item in the context menu: ",z),this.removeChild(z))}}},{key:"_removeImmediateMenuItem",value:function(z){if(!this._detachImmediateMenuItem(z))throw new Error("menu item(id=".concat(z.id,") is not in the context menu"));z.detachSubmenu(),z.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(z){if(z.parentNode===this){if(this.removeChild(z),this.children.length<=0){var $=this.parentNode;$ instanceof R&&$.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(z){var $=this._bindOnClick(z.onClickFunction);z.bindOnClickFunction($),z.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(z){var $=this;return function(){var W=$.scratchpad.currentCyEvent;z(W)}}}],[{key:"define",value:function(){d("menu-item-list",B,"div")}}]),B}(P(HTMLDivElement)),F=function(I){x(B,I);var M=C(B);function B(z,$){var W;return m(this,B),(W=M.call(this,z,$)).onMenuItemClick=function(ee){q(ee),W.hide(),z()},W}return b(B,[{key:"removeMenuItem",value:function(z){var $=z.parentElement;$ instanceof k&&this.contains($)&&$._removeImmediateMenuItem(z)}},{key:"appendMenuItem",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(z.id),S(V(B.prototype),"appendMenuItem",this).call(this,z,$)}},{key:"insertMenuItem",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=$.before,ee=$.parent;if(this.ensureDoesntContain(z.id),W!==void 0){if(!this.contains(W))throw new Error("before(id=".concat(W.id,") is not in the context menu"));var Y=W.parentNode;if(!(Y instanceof k))throw new Error("Parent of before(id=".concat(W.id,") is not a submenu"));Y.appendMenuItem(z,W)}else if(ee!==void 0){if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not a descendant of the context menu"));ee.appendSubmenuItem(z)}else this.appendMenuItem(z)}},{key:"moveBefore",value:function(z,$){var W=z.parentElement;if(!this.contains(W))throw new Error("parent(id=".concat(W.id,") is not in the contex menu"));if(!this.contains($))throw new Error("before(id=".concat($.id,") is not in the context menu"));W.removeChild(z),this.insertMenuItem(z,{before:$})}},{key:"moveToSubmenu",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ee=z.parentElement;if(!(ee instanceof k))throw new Error("current parent(id=".concat(ee.id,") is not a submenu"));if(!this.contains(ee))throw new Error("parent of the menu item(id=".concat(ee.id,") is not in the context menu"));if($!==null){if(!this.contains($))throw new Error("parent(id=".concat($.id,") is not in the context menu"));ee._detachImmediateMenuItem(z),$.appendSubmenuItem(z)}else W!==null&&(z.selector=W.selector,z.coreAsWell=W.coreAsWell),ee._detachImmediateMenuItem(z),this.appendMenuItem(z)}},{key:"ensureDoesntContain",value:function(z){var $=document.getElementById(z);if($!==void 0&&this.contains($))throw new Error("There is already an element with id=".concat(z," in the context menu"))}},{key:"ensureContains",value:function(z){var $=document.getElementById(z);if($==null||$==null||!this.contains($))throw new Error("An element with id '".concat(z,"' does not exist!"))}}],[{key:"define",value:function(){d("ctx-menu",B,"div")}}]),B}(k);function G(I,M){var B;if(typeof Symbol>"u"||I[Symbol.iterator]==null){if(Array.isArray(I)||(B=function(U,J){if(U){if(typeof U=="string")return j(U,J);var D=Object.prototype.toString.call(U).slice(8,-1);return D==="Object"&&U.constructor&&(D=U.constructor.name),D==="Map"||D==="Set"?Array.from(U):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?j(U,J):void 0}}(I))||M){B&&(I=B);var z=0,$=function(){};return{s:$,n:function(){return z>=I.length?{done:!0}:{done:!1,value:I[z++]}},e:function(U){throw U},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W,ee=!0,Y=!1;return{s:function(){B=I[Symbol.iterator]()},n:function(){var U=B.next();return ee=U.done,U},e:function(U){Y=!0,W=U},f:function(){try{ee||B.return==null||B.return()}finally{if(Y)throw W}}}}function j(I,M){(M==null||M>I.length)&&(M=I.length);for(var B=0,z=new Array(M);B<M;B++)z[B]=I[B];return z}function H(I){var M=this;M.scratch("cycontextmenus")||M.scratch("cycontextmenus",{});var B,z,$=function(X){return M.scratch("cycontextmenus")[X]},W=function(X,Q){return M.scratch("cycontextmenus")[X]=Q},ee=$("options"),Y=$("cxtMenu"),U=function(X){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Z=D(X);if(Q!==void 0){var fe=K(Q);Y.insertMenuItem(Z,{parent:fe})}else Y.insertMenuItem(Z)},J=function(X){for(var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,Z=0;Z<X.length;Z++)U(X[Z],Q)},D=function(X){var Q=M.scratch("cycontextmenus");return new R(X,Y.onMenuItemClick,Q)},N=function(){$("active")&&(Y.removeAllMenuItems(),M.off("tapstart",$("eventCyTapStart")),M.off(ee.evtType,$("onCxttap")),M.off("viewport",$("onViewport")),document.removeEventListener("mouseup",$("hideOnNonCyClick")),Y.parentNode.removeChild(Y),Y=void 0,W("cxtMenu",void 0),W("active",!1),W("anyVisibleChild",!1),W("onCxttap",void 0),W("onViewport",void 0),W("hideOnNonCyClick",void 0))},K=function(X){var Q=document.getElementById(X);if(Q instanceof R)return Q;throw new Error("The item with id=".concat(X," is not a menu item"))},ne=function(){var X,Q=!1,Z=G(Y.children);try{for(Z.s();!(X=Z.n()).done;){var fe=X.value;if(fe instanceof R&&fe.show&&fe.style.display!="none"){Q=!0;break}}}catch(oe){Z.e(oe)}finally{Z.f()}Q?Y.display():Y.hide()};if(I!=="get"){R.define(),k.define(),F.define(),ee=u(h,I),W("options",ee),$("active")&&N(),W("active",!0),W("submenuIndicatorGen",(function(X){var Q=document.createElement("img");return Q.src=X.src,Q.width=X.width,Q.height=X.height,Q.classList.add("cy-context-menus-submenu-indicator"),Q}).bind(void 0,ee.submenuIndicator));var ce=c(ee.contextMenuClasses);W("cxtMenuClasses",ce);var ie=M.scratch("cycontextmenus");Y=new F(function(){return W("cxtMenuPosition",void 0)},ie),W("cxtMenu",Y),M.container().appendChild(Y),W("cxtMenuItemClasses",c(ee.menuItemClasses));var le=ee.menuItems;J(le),z=function(X){W("currentCyEvent",X),function(ge){var Ee,we=M.container(),Ae=$("cxtMenuPosition"),De=ge.position||ge.cyPosition;if(Ae!=De){Y.hideMenuItems(),W("anyVisibleChild",!1),W("cxtMenuPosition",De);var me={top:(Ee=we.getBoundingClientRect()).top,left:Ee.left},ue=ge.renderedPosition||ge.cyRenderedPosition,O=getComputedStyle(we)["border-width"],re=parseInt(O.replace("px",""))||0;re>0&&(me.top+=re,me.left+=re);var ae=we.clientHeight,se=we.clientWidth,de=ae/2,Ce=se/2;ue.y>de&&ue.x<=Ce?(Y.style.left=ue.x+"px",Y.style.bottom=ae-ue.y+"px",Y.style.right="auto",Y.style.top="auto"):ue.y>de&&ue.x>Ce?(Y.style.right=se-ue.x+"px",Y.style.bottom=ae-ue.y+"px",Y.style.left="auto",Y.style.top="auto"):ue.y<=de&&ue.x<=Ce?(Y.style.left=ue.x+"px",Y.style.top=ue.y+"px",Y.style.right="auto",Y.style.bottom="auto"):(Y.style.right=se-ue.x+"px",Y.style.top=ue.y+"px",Y.style.left="auto",Y.style.bottom="auto")}}(X);var Q,Z=X.target||X.cyTarget,fe=G(Y.children);try{for(fe.s();!(Q=fe.n()).done;){var oe=Q.value;oe instanceof R&&(Z===M?oe.coreAsWell:Z.is(oe.selector))&&oe.show&&(Y.display(),W("anyVisibleChild",!0),oe.display())}}catch(ge){fe.e(ge)}finally{fe.f()}var he=Array.from(Y.children).filter(function(ge){if(ge instanceof R)return ge.isVisible()}),pe=he.length;he.forEach(function(ge,Ee){ge instanceof R&&(Ee<pe-1&&ge.getHasTrailingDivider()?ge.classList.add(g):ge.getHasTrailingDivider()&&ge.classList.remove(g))}),!$("anyVisibleChild")&&!function(ge){return ge.offsetWidth<=0&&ge.offsetHeight<=0||ge.style&&ge.style.display||getComputedStyle(ge).display}(Y)&&Y.hide()},M.on(ee.evtType,z),W("onCxttap",z),function(){var X=function(Z){if(Y.contains(Z.originalEvent.target))return!1;Y.hide(),W("cxtMenuPosition",void 0),W("currentCyEvent",void 0)};M.on("tapstart",X),W("eventCyTapStart",X);var Q=function(){Y.hide()};M.on("viewport",Q),W("onViewport",Q)}(),B=function(X){M.container().contains(X.target)||Y.contains(X.target)||(Y.hide(),W("cxtMenuPosition",void 0))},document.addEventListener("mouseup",B),W("hideOnNonCyClick",B),function(){var X,Q=function(Z,fe){var oe;if(typeof Symbol>"u"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(oe=function(Ae,De){if(Ae){if(typeof Ae=="string")return l(Ae,De);var me=Object.prototype.toString.call(Ae).slice(8,-1);return me==="Object"&&Ae.constructor&&(me=Ae.constructor.name),me==="Map"||me==="Set"?Array.from(Ae):me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me)?l(Ae,De):void 0}}(Z))||fe){oe&&(Z=oe);var he=0,pe=function(){};return{s:pe,n:function(){return he>=Z.length?{done:!0}:{done:!1,value:Z[he++]}},e:function(Ae){throw Ae},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ge,Ee=!0,we=!1;return{s:function(){oe=Z[Symbol.iterator]()},n:function(){var Ae=oe.next();return Ee=Ae.done,Ae},e:function(Ae){we=!0,ge=Ae},f:function(){try{Ee||oe.return==null||oe.return()}finally{if(we)throw ge}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(Q.s();!(X=Q.n()).done;)X.value.addEventListener("contextmenu",function(Z){return Z.preventDefault()})}catch(Z){Q.e(Z)}finally{Q.f()}}()}return function(X){return{isActive:function(){return $("active")},appendMenuItem:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return U(Q,Z),X},appendMenuItems:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return J(Q,Z),X},removeMenuItem:function(Q){var Z=K(Q);return Y.removeMenuItem(Z),X},setTrailingDivider:function(Q,Z){var fe=K(Q);return fe.setHasTrailingDivider(Z),Z?fe.classList.add(g):fe.classList.remove(g),X},insertBeforeMenuItem:function(Q,Z){var fe=D(Q),oe=K(Z);return Y.insertMenuItem(fe,{before:oe}),X},moveToSubmenu:function(Q){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,fe=K(Q);if(Z===null)Y.moveToSubmenu(fe);else if(typeof Z=="string"){var oe=K(Z.toString());Y.moveToSubmenu(fe,oe)}else Z.coreAsWell!==void 0||Z.selector!==void 0?Y.moveToSubmenu(fe,null,Z):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return X},moveBeforeOtherMenuItem:function(Q,Z){var fe=K(Q),oe=K(Z);return Y.moveBefore(fe,oe),X},disableMenuItem:function(Q){return K(Q).disable(),X},enableMenuItem:function(Q){return K(Q).enable(),X},hideMenuItem:function(Q){return K(Q).hide(),ne(),X},showMenuItem:function(Q){return K(Q).display(),ne(),X},destroy:function(){return N(),X},getOptions:function(){return u(h,ee)},swapItems:function(Q,Z){Y.ensureContains(Q),Y.ensureContains(Z);var fe=document.getElementById(Q),oe=document.getElementById(Z),he=fe.nextSibling,pe=oe.nextSibling,ge=fe.parentNode,Ee=oe.parentNode;if(!ge.isSameNode(Ee))throw new Error("To swap, the items should have the same parent!");he&&he.isSameNode(oe)?ge.insertBefore(oe,fe):pe&&pe.isSameNode(fe)?ge.insertBefore(fe,oe):(ge.insertBefore(oe,fe),ge.insertBefore(fe,pe))}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(c){c&&c("core","contextMenus",l)};typeof cytoscape<"u"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})}(Io)),Io.exports}var MT=BT();const LT=Um(MT);en.use(AT);en.use(LT);let Hr=null;function lf(){return{initCytoscape:(n,a)=>(Hr&&(Hr.destroy(),Hr=null),Hr=en({container:n,elements:a,style:[{selector:"node",style:{"background-color":"#e0e0e0","border-color":"#555","border-width":2,label:"data(name)","text-valign":"center","text-halign":"center",padding:"10px","font-size":"10px","text-wrap":"wrap","text-max-width":"80px",height:"60px",width:"60px","line-height":1.2,"border-style":"solid","z-index":10}},{selector:'node[nodeType="plate"]',style:{"background-color":"#f0f8ff","border-color":"#4682b4","border-style":"dashed",shape:"round-rectangle","corner-radius":"10px"}},{selector:":parent",style:{"text-valign":"top","text-halign":"center",padding:"15px","background-opacity":.2,"z-index":5}},{selector:'node[nodeType="stochastic"]',style:{"background-color":"#ffe0e0","border-color":"#dc3545",shape:"ellipse"}},{selector:'node[nodeType="deterministic"]',style:{"background-color":"#e0ffe0","border-color":"#28a745",shape:"round-rectangle"}},{selector:'node[nodeType="constant"]',style:{"background-color":"#e9ecef","border-color":"#6c757d",shape:"rectangle"}},{selector:'node[nodeType="observed"]',style:{"background-color":"#e0f0ff","border-color":"#007bff","border-style":"dashed",shape:"ellipse"}},{selector:"edge",style:{width:3,"line-color":"#a0a0a0","target-arrow-color":"#a0a0a0","target-arrow-shape":"triangle","curve-style":"bezier","z-index":1,label:"data(name)","font-size":"8px","text-rotation":"autorotate","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"3px","text-border-width":1,"text-border-color":"#ccc"}},{selector:'edge[relationshipType="stochastic"]',style:{"line-color":"#dc3545","target-arrow-color":"#dc3545","line-style":"dashed"}},{selector:'edge[relationshipType="deterministic"]',style:{"line-color":"#28a745","target-arrow-color":"#28a745","line-style":"solid"}},{selector:".cy-selected",style:{"border-width":3,"border-color":"#007acc","overlay-color":"#007acc","overlay-opacity":.2}},{selector:".cy-connecting",style:{"background-color":"#007acc","border-color":"#0060a0",color:"#ffffff","overlay-color":"#007acc","overlay-opacity":.2}}],layout:{name:"preset"},minZoom:.1,maxZoom:2,boxSelectionEnabled:!0,wheelSensitivity:.2,autounselectify:!1}),Hr.gridGuide({drawGrid:!1,snapToGridOnRelease:!0,snapToGridDuringDrag:!0,gridSpacing:20}),Hr.contextMenus({menuItems:[{id:"remove",content:"Remove",selector:"node, edge",onClickFunction:o=>o.target.remove()}]}),Hr),destroyCytoscape:n=>{n&&(n.destroy(),Hr=null)},getCyInstance:()=>Hr}}function IT(t){const e=qe(!1),r=qe(20),n=dt(()=>`${r.value}px`),a=()=>{const l=t();if(l){const u=l.container();u&&(e.value&&r.value>0?(u.classList.add("grid-background"),u.style.setProperty("--grid-size",n.value)):(u.classList.remove("grid-background"),u.style.removeProperty("--grid-size")))}},i=()=>{e.value=!0,a(),console.log(`Visual grid enabled with ${r.value}px.`)},o=()=>{e.value=!1,a(),console.log("Visual grid disabled.")},s=l=>{r.value=l,e.value&&a()};return ur([e,r],a),{isGridEnabledRef:e,gridSizeRef:r,cssGridSize:n,enableGridSnapping:i,disableGridSnapping:o,setGridSize:s}}const _T=At({__name:"GraphCanvas",props:{elements:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{}},emits:["canvas-tap","node-moved","node-dropped"],setup(t,{emit:e}){const r=t,n=e,a=qe(null);let i=null;const{initCytoscape:o,destroyCytoscape:s,getCyInstance:l}=lf(),{enableGridSnapping:u,disableGridSnapping:c,setGridSize:f}=IT(l),d=["stochastic","deterministic","constant","observed","plate"],g=h=>h.map(w=>{if(w.type==="node")return{group:"nodes",data:{...w},position:w.position};{const y=w,v=h.find(p=>p.id===y.target&&p.type==="node"),m=(v==null?void 0:v.nodeType)==="stochastic"||(v==null?void 0:v.nodeType)==="observed"?"stochastic":"deterministic";return{group:"edges",data:{...y,relationshipType:m}}}});return Na(()=>{a.value&&(i=o(a.value,[]),f(r.gridSize),r.isGridEnabled?u():c(),i.on("tap",h=>{n("canvas-tap",h)}),i.on("dragfree","node",h=>{const w=h.target;if(w.data("nodeType")==="plate")return;const y={x:Math.round(w.position("x")/r.gridSize)*r.gridSize,y:Math.round(w.position("y")/r.gridSize)*r.gridSize};w.position(y);let v;const m=i==null?void 0:i.nodes('[nodeType="plate"]');if(m)for(const p of m){if(p.id()===w.id())continue;const b=p.boundingBox();if(y.x>b.x1&&y.x<b.x2&&y.y>b.y1&&y.y<b.y2){v=p.id();break}}n("node-moved",{nodeId:w.id(),position:y,parentId:v})}),i.on("tap","node, edge",h=>{i==null||i.elements().removeClass("cy-selected"),h.target.addClass("cy-selected")}),i.on("tap",h=>{h.target===i&&(i==null||i.elements().removeClass("cy-selected"))}),a.value.addEventListener("dragover",h=>{h.preventDefault(),h.dataTransfer&&(h.dataTransfer.dropEffect="copy")}),a.value.addEventListener("drop",h=>{var w;if(h.preventDefault(),h.dataTransfer){const y=h.dataTransfer.getData("text/plain");if(d.includes(y)){const v=(w=a.value)==null?void 0:w.getBoundingClientRect();if(v&&i){const m=h.clientX,p=h.clientY,b={x:m-v.left,y:p-v.top},x=i.panzoom().renderedPositionToModelPosition(b);n("node-dropped",{nodeType:y,position:x})}}}}))}),za(()=>{i&&s(i)}),ur(()=>r.isGridEnabled,h=>{h?u():c()}),ur(()=>r.gridSize,h=>{f(h),r.isGridEnabled&&u()}),ur(()=>r.elements,h=>{if(!i)return;const w=g(h);i.batch(()=>{const y=new Set(h.map(v=>v.id));i.elements().forEach(v=>{y.has(v.id())||v.remove()}),w.forEach(v=>{if(!v.data.id)return;const m=i.getElementById(v.data.id);if(m.empty())i.add(v);else if(m.data(v.data),v.group==="nodes"){const p=v,b=m.position();(p.position.x!==b.x||p.position.y!==b.y)&&m.position(p.position);const x=m.parent(),C=x.length>0?x.first().id():void 0;p.data.parent!==C&&m.move({parent:p.data.parent??null})}})})},{deep:!0,immediate:!0}),(h,w)=>(Pe(),Me("div",{ref_key:"cyContainer",ref:a,class:at(["cytoscape-container",{"grid-background":h.isGridEnabled&&h.gridSize>0,"mode-add-node":h.currentMode==="add-node","mode-add-edge":h.currentMode==="add-edge","mode-select":h.currentMode==="select"}]),style:Zn({"--grid-size":`${h.gridSize}px`})},null,6))}}),Kt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},OT=Kt(_T,[["__scopeId","data-v-91de20d6"]]),NT=["disabled"],zT=At({__name:"BaseButton",props:{type:{},size:{},disabled:{type:Boolean}},setup(t){const e=t,r=dt(()=>({"base-button":!0,[`button-${e.type||"default"}`]:!0,[`button-${e.size||"medium"}`]:!0,"button-disabled":e.disabled}));return(n,a)=>(Pe(),Me("button",{class:at(r.value),disabled:n.disabled},[Da(n.$slots,"default",{},void 0,!0)],10,NT))}}),vt=Kt(zT,[["__scopeId","data-v-d8435000"]]),FT={class:"canvas-toolbar"},VT={key:0,class:"node-type-selector"},$T=["value"],qT=["value"],GT={key:1,class:"connecting-message"},HT=At({__name:"CanvasToolbar",props:{currentMode:{},currentNodeType:{},isConnecting:{type:Boolean},sourceNodeName:{}},emits:["update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=e,n=[{label:"Stochastic Node",value:"stochastic"},{label:"Deterministic Node",value:"deterministic"},{label:"Constant Node",value:"constant"},{label:"Observed Node",value:"observed"},{label:"Plate (Loop)",value:"plate"}],a=o=>{r("update:currentMode",o)},i=o=>{const s=o.target;r("update:currentNodeType",s.value)};return(o,s)=>(Pe(),Me("div",FT,[be(vt,{class:at({active:o.currentMode==="select"}),onClick:s[0]||(s[0]=l=>a("select"))},{default:Le(()=>s[3]||(s[3]=[Ve(" Select ")])),_:1,__:[3]},8,["class"]),be(vt,{class:at({active:o.currentMode==="add-node"}),onClick:s[1]||(s[1]=l=>a("add-node"))},{default:Le(()=>s[4]||(s[4]=[Ve(" Add Node ")])),_:1,__:[4]},8,["class"]),be(vt,{class:at({active:o.currentMode==="add-edge"}),onClick:s[2]||(s[2]=l=>a("add-edge"))},{default:Le(()=>s[5]||(s[5]=[Ve(" Add Edge ")])),_:1,__:[5]},8,["class"]),o.currentMode==="add-node"?(Pe(),Me("div",VT,[s[6]||(s[6]=te("label",{for:"node-type"},"Node Type:",-1)),te("select",{id:"node-type",value:o.currentNodeType,onChange:i},[(Pe(),Me(it,null,Qn(n,l=>te("option",{key:l.value,value:l.value},Zt(l.label),9,qT)),64))],40,$T)])):$t("",!0),o.isConnecting?(Pe(),Me("span",GT,[s[7]||(s[7]=Ve(" Connecting from: ")),te("strong",null,Zt(o.sourceNodeName),1),s[8]||(s[8]=Ve(" (Click target node) "))])):$t("",!0)]))}}),UT=Kt(HT,[["__scopeId","data-v-76d273f4"]]),Zi=_c("graph",()=>{const t=qe(new Map),e=qe(null),r=dt(()=>e.value&&t.value.has(e.value)?t.value.get(e.value).elements:[]),n=u=>{e.value=u,u&&!t.value.has(u)&&l(u)},a=u=>{const c={graphId:u,elements:[]};t.value.set(u,c),s(u,c)},i=(u,c)=>{if(t.value.has(u)){const f=t.value.get(u);f.elements=c,s(u,f)}},o=u=>{t.value.delete(u),localStorage.removeItem(`doodlebugs-graph-${u}`),e.value===u&&(e.value=null)},s=(u,c)=>{localStorage.setItem(`doodlebugs-graph-${u}`,JSON.stringify(c))},l=u=>{const c=localStorage.getItem(`doodlebugs-graph-${u}`);if(c){const f=JSON.parse(c);return t.value.set(u,f),f}return null};return{graphContents:t,currentGraphId:e,currentGraphElements:r,selectGraph:n,createNewGraphContent:a,updateGraphElements:i,deleteGraphContent:o,saveGraph:s,loadGraph:l}});function Wm(){const t=Zi(),e=qe(null),r=dt({get:()=>t.currentGraphElements,set:o=>{t.currentGraphId&&t.updateGraphElements(t.currentGraphId,o)}});return{elements:r,selectedElement:e,addElement:o=>{r.value=[...r.value,o],e.value=o},updateElement:o=>{var s;r.value=r.value.map(l=>l.id===o.id?o:l),((s=e.value)==null?void 0:s.id)===o.id&&(e.value=o)},deleteElement:o=>{var s;r.value=r.value.filter(l=>l.id!==o),((s=e.value)==null?void 0:s.id)===o&&(e.value=null)}}}const WT={class:"graph-editor-container"},KT=At({__name:"GraphEditor",props:{isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{}},emits:["element-selected","update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=t,n=e,{elements:a,addElement:i,updateElement:o}=Wm(),{getCyInstance:s}=lf(),l=qe(null),u=qe(!1),c=g=>{var x,C;const{position:h,target:w}=g,y=s();if(!y)return;const v=w===y,m=!v&&w.isNode()&&w.data("nodeType")==="plate",p=!v&&w.isNode(),b=!v&&w.isEdge();switch(r.currentMode){case"add-node":if(v||m){if(r.currentNodeType==="plate"&&m){alert("Nesting plates is not currently supported.");return}const T={id:`node_${crypto.randomUUID().substring(0,8)}`,name:`${r.currentNodeType} ${a.value.filter(S=>S.type==="node").length+1}`,type:"node",nodeType:r.currentNodeType,position:{x:h.x,y:h.y},parent:m?w.id():void 0,distribution:r.currentNodeType==="stochastic"?"dnorm":void 0,equation:r.currentNodeType==="deterministic"?"":void 0,observed:r.currentNodeType==="observed"?!0:void 0,loopVariable:r.currentNodeType==="plate"?"i":void 0,loopRange:r.currentNodeType==="plate"?"1:N":void 0};i(T),n("element-selected",T),n("update:currentMode","select")}break;case"add-edge":if(p){const E=w;if(l.value&&l.value.id()!==E.id()){const T={id:`edge_${crypto.randomUUID().substring(0,8)}`,type:"edge",source:l.value.id(),target:E.id(),name:`Edge ${l.value.data("name")} -> ${E.data("name")}`};i(T),(x=l.value)==null||x.removeClass("cy-connecting"),l.value=null,u.value=!1,n("update:currentMode","select"),n("element-selected",T)}else l.value||(l.value=E,l.value.addClass("cy-connecting"),u.value=!0,n("element-selected",l.value.data()))}else v&&((C=l.value)==null||C.removeClass("cy-connecting"),l.value=null,u.value=!1,n("element-selected",null));break;default:p||b?n("element-selected",w.data()):v&&n("element-selected",null);break}},f=g=>{const h=a.value.find(w=>w.id===g.nodeId);if(h){const w={...h,position:g.position,parent:g.parentId};o(w)}},d=g=>{const{nodeType:h,position:w}=g,y=s();let v;if(y){const b=y.nodes('[nodeType="plate"]');for(const x of b){const C=x.boundingBox();if(w.x>C.x1&&w.x<C.x2&&w.y>C.y1&&w.y<C.y2){if(h==="plate"){alert("Nesting plates is not currently supported.");return}v=x.id();break}}}const p={id:`node_${crypto.randomUUID().substring(0,8)}`,name:`${h} ${a.value.filter(b=>b.type==="node").length+1}`,type:"node",nodeType:h,position:w,parent:v,distribution:h==="stochastic"?"dnorm":void 0,equation:h==="deterministic"?"":void 0,observed:h==="observed"?!0:void 0,loopVariable:h==="plate"?"i":void 0,loopRange:h==="plate"?"1:N":void 0};i(p),n("element-selected",p),n("update:currentMode","select")};return ur(()=>r.currentMode,g=>{var h;g!=="add-edge"&&((h=l.value)==null||h.removeClass("cy-connecting"),l.value=null,u.value=!1)}),(g,h)=>{var w;return Pe(),Me("div",WT,[be(UT,{"current-mode":r.currentMode,"current-node-type":r.currentNodeType,"onUpdate:currentMode":h[0]||(h[0]=y=>n("update:currentMode",y)),"onUpdate:currentNodeType":h[1]||(h[1]=y=>n("update:currentNodeType",y)),"is-connecting":u.value,"source-node-name":(w=l.value)==null?void 0:w.data("name")},null,8,["current-mode","current-node-type","is-connecting","source-node-name"]),be(OT,{elements:st(a),"is-grid-enabled":g.isGridEnabled,"grid-size":g.gridSize,"current-mode":r.currentMode,onCanvasTap:c,onNodeMoved:f,onNodeDropped:d},null,8,["elements","is-grid-enabled","grid-size","current-mode"])])}}}),jT=Kt(KT,[["__scopeId","data-v-b9e1cb04"]]),Km=_c("project",()=>{const t=qe([]),e=qe(null),r=Zi(),n=d=>{const g={id:`project_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:d,createdAt:Date.now(),lastModified:Date.now(),graphs:[]};t.value.push(g),c(),a(g.id)},a=d=>{if(e.value=d,d){const g=t.value.find(h=>h.id===d);g&&g.graphs.length>0?r.selectGraph(g.graphs[0].id):r.selectGraph(null)}else r.selectGraph(null)},i=d=>{const g=t.value.find(h=>h.id===d);g&&(g.graphs.forEach(h=>{r.deleteGraphContent(h.id)}),t.value=t.value.filter(h=>h.id!==d),e.value===d&&(e.value=null,r.selectGraph(null)),c())},o=dt(()=>t.value.find(d=>d.id===e.value)||null),s=(d,g)=>{const h=t.value.find(w=>w.id===d);if(h){const w={id:`graph_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:g,createdAt:Date.now(),lastModified:Date.now()};h.graphs.push(w),h.lastModified=Date.now(),c(),r.createNewGraphContent(w.id),r.selectGraph(w.id)}},l=(d,g)=>{const h=t.value.find(w=>w.id===d);h&&(h.graphs=h.graphs.filter(w=>w.id!==g),h.lastModified=Date.now(),c(),r.deleteGraphContent(g))},u=d=>{var g;return((g=t.value.find(h=>h.id===d))==null?void 0:g.graphs)||[]},c=()=>{localStorage.setItem("doodlebugs-projects",JSON.stringify(t.value))},f=()=>{const d=localStorage.getItem("doodlebugs-projects");d&&(t.value=JSON.parse(d))};return ur(e,d=>{if(d){const g=t.value.find(h=>h.id===d);g&&g.graphs.length>0?(!r.currentGraphId||!g.graphs.some(h=>h.id===r.currentGraphId))&&r.selectGraph(g.graphs[0].id):r.selectGraph(null)}else r.selectGraph(null)},{immediate:!0}),{projects:t,currentProjectId:e,currentProject:o,createProject:n,selectProject:a,deleteProject:i,addGraphToProject:s,deleteGraphFromProject:l,getGraphsForProject:u,loadProjects:f}}),YT={class:"modal-content",role:"dialog","aria-modal":"true"},XT={key:0,class:"modal-header"},ZT={key:1,class:"modal-body"},QT={key:2,class:"modal-footer"},_i=At({__name:"BaseModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e,n=a=>{a.key==="Escape"&&r("close")};return Na(()=>{document.addEventListener("keydown",n)}),za(()=>{document.removeEventListener("keydown",n)}),(a,i)=>(Pe(),Ma(Ic,{name:"modal-fade"},{default:Le(()=>[a.isOpen?(Pe(),Me("div",{key:0,class:"modal-overlay",onClick:i[0]||(i[0]=yr(o=>r("close"),["self"]))},[te("div",YT,[a.$slots.header?(Pe(),Me("header",XT,[Da(a.$slots,"header")])):$t("",!0),a.$slots.body?(Pe(),Me("section",ZT,[Da(a.$slots,"body")])):$t("",!0),a.$slots.footer?(Pe(),Me("footer",QT,[Da(a.$slots,"footer")])):$t("",!0)])])):$t("",!0)]),_:3}))}}),JT={class:"project-manager"},e2={class:"header"},t2={key:0,class:"empty-state"},r2={key:1,class:"project-list"},n2=["onClick"],a2={class:"project-name"},i2=["onClick"],o2={key:0,class:"graph-list"},s2=["onClick"],l2=["onClick"],u2={key:0,class:"empty-state-inner"},c2={key:0},f2={key:0},d2=At({__name:"ProjectManager",emits:["newProject","newGraph"],setup(t,{emit:e}){const r=Km(),n=Zi(),a=qe(!1),i=qe(null),o=qe(null),s=qe(null),l=dt(()=>r.currentProject),u=dt(()=>l.value?r.getGraphsForProject(l.value.id):[]),c=p=>{s.value&&!s.value.contains(p.target)&&(o.value=null)};Na(()=>{r.loadProjects(),r.projects.length>0&&!r.currentProjectId&&r.selectProject(r.projects[0].id),document.addEventListener("click",c)}),za(()=>{document.removeEventListener("click",c)});const f=p=>{n.selectGraph(p)},d=async(p,b,x)=>{p.stopPropagation(),p.preventDefault(),o.value=null,await Ac(),o.value={type:b,id:x,x:p.clientX,y:p.clientY}},g=(p,b,x,C)=>{i.value={type:p,id:b,name:x,projectId:C},a.value=!0,o.value=null},h=()=>{i.value&&(i.value.type==="project"?r.deleteProject(i.value.id):i.value.type==="graph"&&i.value.projectId&&(r.deleteGraphFromProject(i.value.projectId,i.value.id),n.currentGraphId===i.value.id&&n.selectGraph(null)),a.value=!1,i.value=null)},w=()=>{a.value=!1,i.value=null},y=e,v=()=>{y("newProject"),o.value=null},m=()=>{y("newGraph"),o.value=null};return(p,b)=>(Pe(),Me("div",JT,[te("div",e2,[b[3]||(b[3]=te("h4",null,"Projects",-1)),be(vt,{onClick:v,type:"primary",size:"small",class:"add-project-btn",title:"New Project"},{default:Le(()=>b[2]||(b[2]=[te("i",{class:"fas fa-plus"},null,-1)])),_:1,__:[2]})]),st(r).projects.length===0?(Pe(),Me("div",t2,[b[5]||(b[5]=te("p",null,"No projects yet.",-1)),be(vt,{onClick:v,type:"primary"},{default:Le(()=>b[4]||(b[4]=[Ve("Create New Project")])),_:1,__:[4]})])):(Pe(),Me("div",r2,[(Pe(!0),Me(it,null,Qn(st(r).projects,x=>(Pe(),Me("div",{key:x.id,class:"project-item"},[te("div",{class:at(["project-header",{active:st(r).currentProjectId===x.id}]),onClick:C=>st(r).selectProject(x.id)},[te("i",{class:at(["icon-chevron fas fa-chevron-right",{open:st(r).currentProjectId===x.id}])},null,2),b[7]||(b[7]=te("i",{class:"icon-folder fas fa-folder"},null,-1)),te("span",a2,Zt(x.name),1),te("button",{onClick:C=>d(C,"project",x.id),class:"context-menu-btn"},b[6]||(b[6]=[te("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,i2)],10,n2),be(Ic,{name:"slide-fade"},{default:Le(()=>{var C;return[((C=st(r).currentProject)==null?void 0:C.id)===x.id?(Pe(),Me("div",o2,[(Pe(!0),Me(it,null,Qn(u.value,E=>(Pe(),Me("div",{key:E.id,class:at(["graph-item",{active:st(n).currentGraphId===E.id}]),onClick:T=>f(E.id)},[b[9]||(b[9]=te("i",{class:"icon-file fas fa-file-alt"},null,-1)),te("span",null,Zt(E.name),1),te("button",{onClick:T=>d(T,"graph",E.id),class:"context-menu-btn"},b[8]||(b[8]=[te("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,l2)],10,s2))),128)),u.value.length===0?(Pe(),Me("div",u2,[b[11]||(b[11]=te("p",null,"No graphs in this project.",-1)),be(vt,{onClick:m,type:"secondary",size:"small"},{default:Le(()=>b[10]||(b[10]=[Ve("Create New Graph")])),_:1,__:[10]})])):$t("",!0)])):$t("",!0)]}),_:2},1024)]))),128))])),o.value?(Pe(),Me("div",{key:2,ref_key:"contextMenuRef",ref:s,class:"context-menu",style:Zn({top:`${o.value.y}px`,left:`${o.value.x}px`})},[o.value.type==="project"?(Pe(),Me(it,{key:0},[te("div",{class:"context-menu-item",onClick:m},b[12]||(b[12]=[te("i",{class:"fas fa-plus"},null,-1),Ve(" New Graph")])),te("div",{class:"context-menu-item danger",onClick:b[0]||(b[0]=x=>g("project",o.value.id,st(r).projects.find(C=>C.id===o.value.id).name))},b[13]||(b[13]=[te("i",{class:"fas fa-trash-alt"},null,-1),Ve(" Delete Project")]))],64)):$t("",!0),o.value.type==="graph"?(Pe(),Me("div",{key:1,class:"context-menu-item danger",onClick:b[1]||(b[1]=x=>g("graph",o.value.id,u.value.find(C=>C.id===o.value.id).name,l.value.id))},b[14]||(b[14]=[te("i",{class:"fas fa-trash-alt"},null,-1),Ve(" Delete Graph")]))):$t("",!0)],4)):$t("",!0),be(_i,{"is-open":a.value,onClose:w},{header:Le(()=>b[15]||(b[15]=[te("h3",null,"Confirm Deletion",-1)])),body:Le(()=>[i.value?(Pe(),Me("p",c2,[Ve(" Are you sure you want to delete the "+Zt(i.value.type)+" ",1),te("strong",null,'"'+Zt(i.value.name)+'"',1),b[16]||(b[16]=Ve("? ")),i.value.type==="project"?(Pe(),Me("span",f2,"This will also delete all of its graphs.")):$t("",!0),b[17]||(b[17]=Ve(" This action cannot be undone. "))])):$t("",!0)]),footer:Le(()=>[be(vt,{onClick:w,type:"secondary"},{default:Le(()=>b[18]||(b[18]=[Ve("Cancel")])),_:1,__:[18]}),be(vt,{onClick:h,type:"danger"},{default:Le(()=>b[19]||(b[19]=[Ve("Delete")])),_:1,__:[19]})]),_:1},8,["is-open"])]))}}),v2=Kt(d2,[["__scopeId","data-v-a7db5044"]]),h2={class:"node-palette"},g2={class:"palette-section"},p2={class:"palette-grid"},m2=["onDragstart","onClick","title"],y2={class:"card-label"},b2={class:"palette-section"},w2={class:"palette-grid"},x2=["onDragstart","onClick","title"],C2={class:"card-label"},E2=At({__name:"NodePalette",emits:["select-palette-item"],setup(t,{emit:e}){const r=e,n=[{label:"Stochastic",type:"stochastic",icon:"~",styleClass:"stochastic",description:"Random variable with a distribution"},{label:"Deterministic",type:"deterministic",icon:"<-",styleClass:"deterministic",description:"Logical function of parents"},{label:"Constant",type:"constant",icon:"C",styleClass:"constant",description:"A fixed value or parameter"},{label:"Observed",type:"observed",icon:"O",styleClass:"observed",description:"A data node with a fixed value"},{label:"Plate",type:"plate",icon:"[]",styleClass:"plate",description:"Represents a loop structure"}],a=[{label:"Add Edge",type:"add-edge",styleClass:"connection",description:"Connect two nodes"}],i=(s,l)=>{s.dataTransfer&&(s.dataTransfer.setData("text/plain",l),s.dataTransfer.effectAllowed="copy")},o=s=>{r("select-palette-item",s)};return(s,l)=>(Pe(),Me("div",h2,[te("div",g2,[l[0]||(l[0]=te("h5",{class:"section-title"},"Nodes",-1)),te("div",p2,[(Pe(),Me(it,null,Qn(n,u=>te("div",{key:u.type,class:at(["palette-card",u.styleClass]),draggable:"true",onDragstart:c=>i(c,u.type),onClick:c=>o(u.type),title:u.description},[te("div",{class:at(["card-icon",`icon-${u.type}`])},Zt(u.icon),3),te("span",y2,Zt(u.label),1)],42,m2)),64))])]),te("div",b2,[l[2]||(l[2]=te("h5",{class:"section-title"},"Connections",-1)),te("div",w2,[(Pe(),Me(it,null,Qn(a,u=>te("div",{key:u.type,class:at(["palette-card",u.styleClass]),draggable:"true",onDragstart:c=>i(c,u.type),onClick:c=>o(u.type),title:u.description},[l[1]||(l[1]=te("div",{class:"card-icon connection-icon"},null,-1)),te("span",C2,Zt(u.label),1)],42,x2)),64))])])]))}}),S2=Kt(E2,[["__scopeId","data-v-98dd305a"]]),T2={class:"data-input-panel"},D2=At({__name:"DataInputPanel",setup(t){return(e,r)=>(Pe(),Me("div",T2,r[0]||(r[0]=[te("h4",null,"BUGS Model Data",-1),te("div",{class:"data-section"},[te("p",null,"Manage input data for your BUGS model here."),te("p",null," Currently, this section is a placeholder for defining observed variables and uploading/entering their values. "),te("div",{class:"data-placeholder"},[te("i",{class:"icon-data"},"📊"),te("span",null,"Data definitions and values will appear here.")])],-1)])))}}),P2=Kt(D2,[["__scopeId","data-v-08146f1d"]]),k2=["type","value","placeholder","disabled","readonly"],A2=At({__name:"BaseInput",props:{modelValue:{},type:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","change","input","keyup.enter"],setup(t,{emit:e}){const r=t,n=e,a=dt(()=>r.type||"text"),i=l=>{const u=l.target;n("update:modelValue",u.value),n("input",l)},o=l=>{n("change",l)},s=l=>{l.key==="Enter"&&n("keyup.enter",l)};return(l,u)=>(Pe(),Me("input",{type:a.value,value:l.modelValue,placeholder:l.placeholder,disabled:l.disabled,readonly:l.readonly,onInput:i,onChange:o,onKeyup:s,class:"base-input"},null,40,k2))}}),rr=Kt(A2,[["__scopeId","data-v-2a347463"]]),R2=["value","disabled"],B2=["value"],M2=At({__name:"BaseSelect",props:{modelValue:{},options:{},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:e}){const r=t,n=e,a=o=>{const s=o.target;n("update:modelValue",s.value),n("change",o)},i=dt(()=>({"base-select":!0,"select-disabled":r.disabled}));return(o,s)=>(Pe(),Me("select",{value:o.modelValue,onChange:a,disabled:o.disabled,class:at(i.value)},[(Pe(!0),Me(it,null,Qn(o.options,l=>(Pe(),Me("option",{key:l.value,value:l.value},Zt(l.label),9,B2))),128))],42,R2))}}),Nh=Kt(M2,[["__scopeId","data-v-0a02e59a"]]),L2={class:"node-properties-panel"},I2={key:0,class:"no-selection-message"},_2={key:1,class:"properties-form"},O2={class:"form-group"},N2={class:"form-group"},z2={class:"form-group"},F2={class:"form-group"},V2={class:"form-group"},$2={class:"form-group"},q2={class:"form-group"},G2={class:"form-group checkbox-group"},H2={class:"form-group"},U2={class:"form-group"},W2={class:"form-group"},K2={class:"form-group"},j2={class:"form-group"},Y2={class:"form-group"},X2={class:"action-buttons"},Z2=At({__name:"NodePropertiesPanel",props:{selectedElement:{}},emits:["update-element","delete-element"],setup(t,{emit:e}){const r=t,n=e,a=qe(null),i=qe(!1);ur(()=>r.selectedElement,w=>{if(w){const y=JSON.parse(JSON.stringify(w));y.type==="node"?(y.distribution=y.distribution??"",y.equation=y.equation??"",typeof y.initialValue=="object"&&y.initialValue!==null?y.initialValue=JSON.stringify(y.initialValue):y.initialValue=y.initialValue??"",y.indices=y.indices??"",y.loopVariable=y.loopVariable??"",y.loopRange=y.loopRange??""):y.type==="edge"&&(y.name=y.name??""),a.value=y}else a.value=null},{deep:!0,immediate:!0});const o=dt(()=>{var w;return((w=a.value)==null?void 0:w.type)==="node"}),s=dt(()=>{var w;return((w=a.value)==null?void 0:w.type)==="edge"}),l=dt(()=>o.value&&a.value.nodeType==="plate"),u=[{value:"stochastic",label:"Stochastic"},{value:"deterministic",label:"Deterministic"},{value:"constant",label:"Constant"},{value:"observed",label:"Observed"},{value:"plate",label:"Plate"}],c=[{value:"dnorm",label:"Normal (dnorm)"},{value:"dbeta",label:"Beta (dbeta)"},{value:"dgamma",label:"Gamma (dgamma)"},{value:"dbin",label:"Binomial (dbin)"},{value:"dpois",label:"Poisson (dpois)"},{value:"dt",label:"Student-t (dt)"},{value:"dchisqr",label:"Chi-squared (dchisqr)"},{value:"dweib",label:"Weibull (dweib)"},{value:"dexp",label:"Exponential (dexp)"},{value:"dloglik",label:"Log-Likelihood (dloglik)"}],f=()=>{a.value&&n("update-element",a.value)},d=()=>{a.value&&(i.value=!0)},g=()=>{a.value&&(n("delete-element",a.value.id),a.value=null),i.value=!1},h=()=>{i.value=!1};return(w,y)=>(Pe(),Me("div",L2,[y[35]||(y[35]=te("h4",null,"Properties",-1)),a.value?(Pe(),Me("div",_2,[te("div",O2,[y[12]||(y[12]=te("label",{for:"element-id"},"ID:",-1)),be(rr,{id:"element-id","model-value":a.value.id,disabled:""},null,8,["model-value"])]),te("div",N2,[y[13]||(y[13]=te("label",{for:"element-name"},"Name:",-1)),be(rr,{id:"element-name",modelValue:a.value.name,"onUpdate:modelValue":y[0]||(y[0]=v=>a.value.name=v),onInput:f},null,8,["modelValue"])]),o.value?(Pe(),Me(it,{key:0},[te("div",z2,[y[14]||(y[14]=te("label",{for:"node-type"},"Node Type:",-1)),be(Nh,{id:"node-type",modelValue:a.value.nodeType,"onUpdate:modelValue":y[1]||(y[1]=v=>a.value.nodeType=v),options:u,onChange:f},null,8,["modelValue"])]),l.value?(Pe(),Me(it,{key:1},[y[26]||(y[26]=te("div",{class:"form-section-header"},"Plate Properties",-1)),te("div",W2,[y[24]||(y[24]=te("label",{for:"plate-loop-variable"},"Loop Variable:",-1)),be(rr,{id:"plate-loop-variable",modelValue:a.value.loopVariable,"onUpdate:modelValue":y[9]||(y[9]=v=>a.value.loopVariable=v),placeholder:"e.g., i",onInput:f},null,8,["modelValue"])]),te("div",K2,[y[25]||(y[25]=te("label",{for:"plate-loop-range"},"Loop Range:",-1)),be(rr,{id:"plate-loop-range",modelValue:a.value.loopRange,"onUpdate:modelValue":y[10]||(y[10]=v=>a.value.loopRange=v),placeholder:"e.g., 1:N",onInput:f},null,8,["modelValue"])]),y[27]||(y[27]=te("small",{class:"help-text"},"Define the iteration for this plate, e.g., 'i' in '1:N'",-1))],64)):(Pe(),Me(it,{key:0},[te("div",F2,[y[15]||(y[15]=te("label",{for:"node-position-x"},"Position X:",-1)),be(rr,{id:"node-position-x",type:"number",modelValue:a.value.position.x,"onUpdate:modelValue":y[2]||(y[2]=v=>a.value.position.x=v),modelModifiers:{number:!0},onInput:f},null,8,["modelValue"])]),te("div",V2,[y[16]||(y[16]=te("label",{for:"node-position-y"},"Position Y:",-1)),be(rr,{id:"node-position-y",type:"number",modelValue:a.value.position.y,"onUpdate:modelValue":y[3]||(y[3]=v=>a.value.position.y=v),modelModifiers:{number:!0},onInput:f},null,8,["modelValue"])]),y[23]||(y[23]=te("div",{class:"form-section-header"},"BUGS Specific Properties",-1)),te("div",$2,[y[17]||(y[17]=te("label",{for:"distribution"},"Distribution (~):",-1)),be(Nh,{id:"distribution",modelValue:a.value.distribution,"onUpdate:modelValue":y[4]||(y[4]=v=>a.value.distribution=v),options:c,onChange:f},null,8,["modelValue"])]),te("div",q2,[y[18]||(y[18]=te("label",{for:"equation"},"Equation (<--):",-1)),be(rr,{id:"equation",modelValue:a.value.equation,"onUpdate:modelValue":y[5]||(y[5]=v=>a.value.equation=v),placeholder:"e.g., a + b * x",onInput:f},null,8,["modelValue"])]),te("div",G2,[y[19]||(y[19]=te("label",{for:"observed"},"Observed:",-1)),br(te("input",{type:"checkbox",id:"observed","onUpdate:modelValue":y[6]||(y[6]=v=>a.value.observed=v),onChange:f},null,544),[[kb,a.value.observed]])]),te("div",H2,[y[20]||(y[20]=te("label",{for:"initial-value"},"Initial Value:",-1)),be(rr,{id:"initial-value",modelValue:a.value.initialValue,"onUpdate:modelValue":y[7]||(y[7]=v=>a.value.initialValue=v),placeholder:"e.g., 0.5 or list(value=0.5)",onInput:f},null,8,["modelValue"])]),te("div",U2,[y[21]||(y[21]=te("label",{for:"variable-indices"},"Indices (e.g., i,j):",-1)),be(rr,{id:"variable-indices",modelValue:a.value.indices,"onUpdate:modelValue":y[8]||(y[8]=v=>a.value.indices=v),placeholder:"e.g., i,j or 1:N",onInput:f},null,8,["modelValue"]),y[22]||(y[22]=te("small",{class:"help-text"},"Use comma-separated for multiple indices, e.g., 'i,j' or '1:N, 1:M'",-1))])],64))],64)):s.value?(Pe(),Me(it,{key:1},[te("div",j2,[y[28]||(y[28]=te("label",{for:"edge-source"},"Source Node ID:",-1)),be(rr,{id:"edge-source","model-value":a.value.source,disabled:""},null,8,["model-value"])]),te("div",Y2,[y[29]||(y[29]=te("label",{for:"edge-target"},"Target Node ID:",-1)),be(rr,{id:"edge-target","model-value":a.value.target,disabled:""},null,8,["model-value"])])],64)):$t("",!0),te("div",X2,[be(vt,{onClick:f,type:"primary"},{default:Le(()=>y[30]||(y[30]=[Ve("Apply Changes")])),_:1,__:[30]}),be(vt,{onClick:d,type:"danger"},{default:Le(()=>y[31]||(y[31]=[Ve("Delete Element")])),_:1,__:[31]})])])):(Pe(),Me("div",I2,y[11]||(y[11]=[te("p",null,"Select a node or edge on the canvas to view/edit its properties.",-1)]))),be(_i,{"is-open":i.value,onClose:h},{header:Le(()=>y[32]||(y[32]=[te("h3",null,"Confirm Deletion",-1)])),body:Le(()=>{var v,m;return[te("p",null,'Are you sure you want to delete "'+Zt(((v=a.value)==null?void 0:v.name)||((m=a.value)==null?void 0:m.id))+'"? This action cannot be undone. ',1)]}),footer:Le(()=>[be(vt,{onClick:h,type:"secondary"},{default:Le(()=>y[33]||(y[33]=[Ve("Cancel")])),_:1,__:[33]}),be(vt,{onClick:g,type:"danger"},{default:Le(()=>y[34]||(y[34]=[Ve("Delete")])),_:1,__:[34]})]),_:1},8,["is-open"])]))}}),Q2=Kt(Z2,[["__scopeId","data-v-95b7cbe1"]]),J2={class:"code-preview-panel"},eD={class:"code-output"},tD=At({__name:"CodePreviewPanel",setup(t){return(e,r)=>(Pe(),Me("div",J2,[r[3]||(r[3]=te("h4",null,"Generated BUGS Code",-1)),te("div",eD,[r[1]||(r[1]=te("p",null,"BUGS model code will be generated and displayed here.",-1)),r[2]||(r[2]=te("pre",{class:"code-block"},[Ve("        "),te("code",null,`
model {
  # Example: Define a normal distribution
  # mu ~ dnorm(0, 1.0E-6)
  # tau ~ dgamma(0.01, 0.01)

  # Example: A simple deterministic relationship
  # theta <- exp(mu) / (1 + exp(mu))

  # Example: A loop for indexed variables (Plate)
  # for (i in 1:N) {
  #   y[i] ~ dbin(theta[i], n[i])
  # }

  # Add your nodes and connections visually to generate code!
}
        `),Ve(`
      `)],-1)),be(vt,{class:"copy-button",type:"secondary"},{default:Le(()=>r[0]||(r[0]=[Ve("Copy Code")])),_:1,__:[0]})])]))}}),rD=Kt(tD,[["__scopeId","data-v-f06a8382"]]),nD={class:"json-editor-panel"},aD={key:0,class:"error-message"},iD=At({__name:"JsonEditorPanel",setup(t){const e=Zi(),r=qe(""),n=qe(""),a=dt(()=>e.currentGraphElements);ur(a,o=>{if(o){try{if(r.value){const s=JSON.parse(r.value);if(JSON.stringify(s)===JSON.stringify(o))return}}catch{}r.value=JSON.stringify(o,null,2),n.value=""}},{deep:!0,immediate:!0});const i=()=>{try{const o=JSON.parse(r.value);if(!Array.isArray(o))throw new Error("JSON must be an array of graph elements.");e.currentGraphId&&JSON.stringify(e.currentGraphElements)!==JSON.stringify(o)&&e.updateGraphElements(e.currentGraphId,o),n.value=""}catch(o){n.value=`Invalid JSON: ${o.message}`}};return(o,s)=>(Pe(),Me("div",nD,[s[1]||(s[1]=te("div",{class:"header-section"},[te("h4",null,"Live Graph JSON"),te("p",{class:"description"}," Edit the JSON below to see live updates on the canvas. Changes on the canvas will reflect here. ")],-1)),br(te("textarea",{"onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),onInput:i,class:"json-textarea",placeholder:"Graph JSON will appear here...",spellcheck:"false"},null,544),[[Pb,r.value]]),n.value?(Pe(),Me("div",aD,Zt(n.value),1)):$t("",!0)]))}}),oD=Kt(iD,[["__scopeId","data-v-105ce400"]]),sD=At({__name:"DropdownMenu",setup(t){const e=qe(!1),r=qe(null),n=()=>{e.value=!e.value},a=()=>{e.value=!1},i=o=>{r.value&&!r.value.contains(o.target)&&a()};return Na(()=>{document.addEventListener("click",i,!0)}),za(()=>{document.removeEventListener("click",i,!0)}),(o,s)=>(Pe(),Me("div",{class:"menu-item-wrapper",ref_key:"dropdownRef",ref:r},[te("div",{onClick:n,class:"menu-toggle"},[Da(o.$slots,"trigger",{},void 0,!0)]),be(Ic,{name:"dropdown-animation"},{default:Le(()=>[e.value?(Pe(),Me("div",{key:0,class:"dropdown-content",onClick:a},[Da(o.$slots,"content",{},void 0,!0)])):$t("",!0)]),_:3})],512))}}),bo=Kt(sD,[["__scopeId","data-v-9c130f59"]]),lD={class:"navbar"},uD={class:"navbar-left"},cD={class:"navbar-menu"},fD=["onClick"],dD=["checked"],vD={class:"navbar-right"},hD={class:"pane-toggles"},gD={class:"project-name"},pD=At({__name:"TheNavbar",props:{projectName:{},activeGraphName:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},isLeftSidebarOpen:{type:Boolean},isRightSidebarOpen:{type:Boolean}},emits:["update:isGridEnabled","update:gridSize","update:currentMode","update:currentNodeType","new-project","new-graph","save-current-graph","toggle-left-sidebar","toggle-right-sidebar","open-about-modal","export-json","export-png"],setup(t,{emit:e}){const r=t,n=e,a=dt(()=>r.projectName&&r.activeGraphName?`${r.projectName} — ${r.activeGraphName}`:r.projectName?r.projectName:"No Project Selected"),i=[{label:"Stochastic Node",value:"stochastic"},{label:"Deterministic Node",value:"deterministic"},{label:"Constant Node",value:"constant"},{label:"Observed Node",value:"observed"},{label:"Plate (Loop)",value:"plate"}],o=l=>{n("update:currentNodeType",l),n("update:currentMode","add-node")},s=l=>{const u=l.target;n("update:gridSize",Number(u.value))};return(l,u)=>(Pe(),Me("nav",lD,[te("div",uD,[u[24]||(u[24]=te("div",{class:"navbar-brand"},"DoodleBUGS",-1)),te("div",cD,[be(bo,null,{trigger:Le(()=>[be(vt,{type:"ghost",size:"small"},{default:Le(()=>u[12]||(u[12]=[Ve("Project")])),_:1,__:[12]})]),content:Le(()=>[te("a",{href:"#",onClick:u[0]||(u[0]=yr(c=>n("new-project"),["prevent"]))},"New Project..."),te("a",{href:"#",onClick:u[1]||(u[1]=yr(c=>n("new-graph"),["prevent"]))},"New Graph..."),te("a",{href:"#",onClick:u[2]||(u[2]=yr(c=>n("save-current-graph"),["prevent"]))},"Save Current Graph"),u[13]||(u[13]=te("div",{class:"dropdown-divider"},null,-1)),te("a",{href:"#",onClick:u[3]||(u[3]=yr(c=>n("export-json"),["prevent"]))},"Export as JSON"),te("a",{href:"#",onClick:u[4]||(u[4]=yr(c=>n("export-png"),["prevent"]))},"Export as PNG")]),_:1}),be(bo,null,{trigger:Le(()=>[be(vt,{type:"ghost",size:"small"},{default:Le(()=>u[14]||(u[14]=[Ve("Add")])),_:1,__:[14]})]),content:Le(()=>[u[15]||(u[15]=te("div",{class:"dropdown-section-title"},"Nodes",-1)),(Pe(),Me(it,null,Qn(i,c=>te("a",{key:c.value,href:"#",onClick:yr(f=>o(c.value),["prevent"])},Zt(c.label),9,fD)),64)),u[16]||(u[16]=te("div",{class:"dropdown-divider"},null,-1)),te("a",{href:"#",onClick:u[5]||(u[5]=yr(c=>n("update:currentMode","add-edge"),["prevent"]))},"Add Edge")]),_:1}),be(bo,null,{trigger:Le(()=>[be(vt,{type:"ghost",size:"small"},{default:Le(()=>u[17]||(u[17]=[Ve("View")])),_:1,__:[17]})]),content:Le(()=>[te("label",{class:"dropdown-checkbox",onClick:u[7]||(u[7]=yr(()=>{},["stop"]))},[te("input",{type:"checkbox",checked:l.isGridEnabled,onChange:u[6]||(u[6]=c=>n("update:isGridEnabled",c.target.checked))},null,40,dD),u[18]||(u[18]=Ve(" Show Grid "))]),te("div",{class:"dropdown-input-group",onClick:u[8]||(u[8]=yr(()=>{},["stop"]))},[u[19]||(u[19]=te("label",{for:"grid-size-nav"},"Grid Size:",-1)),be(rr,{id:"grid-size-nav",type:"number","model-value":l.gridSize,onInput:s,min:"10",max:"100",step:"5",class:"w-20"},null,8,["model-value"]),u[20]||(u[20]=te("span",null,"px",-1))])]),_:1}),be(bo,null,{trigger:Le(()=>[be(vt,{type:"ghost",size:"small"},{default:Le(()=>u[21]||(u[21]=[Ve("Help")])),_:1,__:[21]})]),content:Le(()=>[te("a",{href:"#",onClick:u[9]||(u[9]=yr(c=>n("open-about-modal"),["prevent"]))},"About DoodleBUGS"),u[22]||(u[22]=te("span",{class:"dropdown-item-placeholder"},"Documentation (Coming Soon)",-1)),u[23]||(u[23]=te("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl/issues/new?template=doodlebugs.md",target:"_blank",rel:"noopener noreferrer",class:"report-issue-link"},[Ve(" Report an Issue "),te("i",{class:"fas fa-external-link-alt external-link-icon"})],-1))]),_:1})])]),te("div",vD,[te("div",hD,[te("button",{onClick:u[10]||(u[10]=c=>n("toggle-left-sidebar")),class:at({active:l.isLeftSidebarOpen}),title:"Toggle Left Sidebar"},u[25]||(u[25]=[te("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[te("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2),te("button",{onClick:u[11]||(u[11]=c=>n("toggle-right-sidebar")),class:at({active:l.isRightSidebarOpen}),title:"Toggle Right Sidebar"},u[26]||(u[26]=[te("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",transform:"matrix(-1, 0, 0, 1, 0, 0)"},[te("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2)]),te("span",gD,Zt(a.value),1)])]))}}),mD=Kt(pD,[["__scopeId","data-v-b843411d"]]),yD=At({__name:"AboutModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e;return(n,a)=>(Pe(),Ma(_i,{"is-open":n.isOpen,onClose:a[1]||(a[1]=i=>r("close"))},{header:Le(()=>a[2]||(a[2]=[te("h3",null,"About DoodleBUGS",-1)])),body:Le(()=>a[3]||(a[3]=[te("div",{class:"about-content"},[te("p",null,[te("strong",null,"DoodleBUGS"),Ve(" is a graphical modeling tool designed to simplify the creation of Bayesian models for analysis with BUGS language -- "),te("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl",target:"_blank",rel:"noopener noreferrer"},"JuliaBUGS.jl"),Ve(". ")]),te("p",null," Our goal is to provide an intuitive, visual interface for statisticians, researchers, and students to build, understand, and share complex probabilistic models. "),te("hr"),te("p",null,[te("strong",null,"Version:"),Ve(" Alpha Phase -- We are just experimenting with things now!")])],-1)])),footer:Le(()=>[te("button",{onClick:a[0]||(a[0]=i=>r("close")),class:"primary"},"Close")]),_:1},8,["is-open"]))}}),bD=Kt(yD,[["__scopeId","data-v-f99eb7f3"]]),wD=_c("ui",()=>{const t=qe(localStorage.getItem("doodlebugs-activeRightTab")||"properties"),e=qe(localStorage.getItem("doodlebugs-isRightTabPinned")==="true");return{activeRightTab:t,isRightTabPinned:e,setActiveRightTab:a=>{t.value=a,localStorage.setItem("doodlebugs-activeRightTab",a)},toggleRightTabPinned:()=>{e.value=!e.value,localStorage.setItem("doodlebugs-isRightTabPinned",e.value.toString())}}}),xD={class:"main-layout"},CD={class:"content-area"},ED={class:"vertical-tabs-container"},SD={class:"graph-editor-wrapper"},TD={class:"tabs-header"},DD={class:"tab-buttons"},PD={class:"tabs-content"},kD={class:"tab-pane"},AD={class:"tab-pane"},RD={class:"tab-pane"},BD=At({__name:"MainLayout",setup(t){const e=Km(),r=Zi(),n=wD(),{selectedElement:a,updateElement:i,deleteElement:o}=Wm(),{getCyInstance:s}=lf(),l=qe("project"),u=qe(!0),c=qe(!0),f=qe("select"),d=qe("stochastic"),g=qe(!0),h=qe(20),w=qe(!1),y=qe(""),v=qe(!1),m=qe(""),p=qe(!1),b=dt(()=>{var I;return((I=e.currentProject)==null?void 0:I.name)||null}),x=dt(()=>{if(e.currentProject&&r.currentGraphId){const I=e.currentProject.graphs.find(M=>M.id===r.currentGraphId);return(I==null?void 0:I.name)||null}return null}),C=I=>{l.value===I&&u.value?u.value=!1:(u.value=!0,l.value=I)},E=()=>{u.value=!u.value},T=()=>{c.value=!c.value},S=dt(()=>({width:u.value?"var(--sidebar-content-width-left)":"0",opacity:u.value?"1":"0",pointerEvents:u.value?"auto":"none"})),P=dt(()=>({"left-sidebar":!0,"sidebar-collapsed-content":!u.value})),L=dt(()=>({width:c.value?"var(--sidebar-width-right)":"0",opacity:c.value?"1":"0",pointerEvents:c.value?"auto":"none",borderLeft:c.value?"1px solid var(--color-border)":"none"})),A=I=>{a.value=I,I&&!n.isRightTabPinned&&n.setActiveRightTab("properties")},_=I=>{i(I)},V=I=>{o(I)},q=I=>{I==="add-edge"?f.value="add-edge":(f.value="add-node",d.value=I),u.value=!1},R=()=>{y.value.trim()&&(e.createProject(y.value.trim()),w.value=!1,y.value="",l.value="project",u.value=!0)},k=()=>{e.currentProject&&m.value.trim()&&(e.addGraphToProject(e.currentProject.id,m.value.trim()),v.value=!1,m.value="")},F=()=>{r.currentGraphId?r.saveGraph(r.currentGraphId,r.graphContents.get(r.currentGraphId)):console.warn("No graph currently selected to save.")},G=(I,M)=>{const B=URL.createObjectURL(I),z=document.createElement("a");z.href=B,z.download=M,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(B)},j=()=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}const I=r.currentGraphElements,M=JSON.stringify(I,null,2),B=new Blob([M],{type:"application/json"}),z=`${x.value||"graph"}.json`;G(B,z)},H=()=>{const I=s();if(!I){alert("Graph instance not available.");return}const M=I.png({output:"base64",full:!0,bg:"white"});fetch(M).then(B=>B.blob()).then(B=>{const z=`${x.value||"graph"}.png`;G(B,z)})};return ur(a,I=>{console.log("Selected element changed in MainLayout:",I)},{deep:!0}),(I,M)=>(Pe(),Me("div",xD,[be(mD,{"project-name":b.value,"active-graph-name":x.value,"is-grid-enabled":g.value,"onUpdate:isGridEnabled":M[0]||(M[0]=B=>g.value=B),"grid-size":h.value,"onUpdate:gridSize":M[1]||(M[1]=B=>h.value=B),"current-mode":f.value,"onUpdate:currentMode":M[2]||(M[2]=B=>f.value=B),"current-node-type":d.value,"onUpdate:currentNodeType":M[3]||(M[3]=B=>d.value=B),"is-left-sidebar-open":u.value,"is-right-sidebar-open":c.value,onToggleLeftSidebar:E,onToggleRightSidebar:T,onNewProject:M[4]||(M[4]=B=>w.value=!0),onNewGraph:M[5]||(M[5]=B=>v.value=!0),onSaveCurrentGraph:F,onOpenAboutModal:M[6]||(M[6]=B=>p.value=!0),onExportJson:j,onExportPng:H},null,8,["project-name","active-graph-name","is-grid-enabled","grid-size","current-mode","current-node-type","is-left-sidebar-open","is-right-sidebar-open"]),te("div",CD,[te("aside",{class:at(P.value)},[te("div",ED,[te("button",{class:at({active:l.value==="project"}),onClick:M[7]||(M[7]=B=>C("project")),title:"Project Manager"},[M[25]||(M[25]=te("i",{class:"fas fa-folder"},null,-1)),M[26]||(M[26]=Ve()),br(te("span",null,"Project",512),[[qr,u.value]])],2),te("button",{class:at({active:l.value==="palette"}),onClick:M[8]||(M[8]=B=>C("palette")),title:"Node Palette"},[M[27]||(M[27]=te("i",{class:"fas fa-shapes"},null,-1)),M[28]||(M[28]=Ve()),br(te("span",null,"Palette",512),[[qr,u.value]])],2),te("button",{class:at({active:l.value==="data"}),onClick:M[9]||(M[9]=B=>C("data")),title:"Data Input"},[M[29]||(M[29]=te("i",{class:"fas fa-database"},null,-1)),M[30]||(M[30]=Ve()),br(te("span",null,"Data",512),[[qr,u.value]])],2)]),te("div",{class:"left-sidebar-content",style:Zn(S.value)},[br(te("div",null,[be(v2,{onNewProject:M[10]||(M[10]=B=>w.value=!0),onNewGraph:M[11]||(M[11]=B=>v.value=!0)})],512),[[qr,l.value==="project"]]),br(te("div",null,[be(S2,{onSelectPaletteItem:q})],512),[[qr,l.value==="palette"]]),br(te("div",null,[be(P2)],512),[[qr,l.value==="data"]])],4)],2),te("main",SD,[be(jT,{"is-grid-enabled":g.value,"grid-size":h.value,"current-mode":f.value,elements:st(r).currentGraphElements,"current-node-type":d.value,"onUpdate:currentMode":M[12]||(M[12]=B=>f.value=B),"onUpdate:currentNodeType":M[13]||(M[13]=B=>d.value=B),onElementSelected:A},null,8,["is-grid-enabled","grid-size","current-mode","elements","current-node-type"])]),te("aside",{class:"right-sidebar",style:Zn(L.value)},[te("div",TD,[te("div",DD,[te("button",{class:at({active:st(n).activeRightTab==="properties"}),onClick:M[14]||(M[14]=B=>st(n).setActiveRightTab("properties"))},"Properties",2),te("button",{class:at({active:st(n).activeRightTab==="code"}),onClick:M[15]||(M[15]=B=>st(n).setActiveRightTab("code"))},"Code",2),te("button",{class:at({active:st(n).activeRightTab==="json"}),onClick:M[16]||(M[16]=B=>st(n).setActiveRightTab("json"))},"JSON",2)]),te("button",{onClick:M[17]||(M[17]=B=>st(n).toggleRightTabPinned()),class:at(["pin-button",{pinned:st(n).isRightTabPinned}]),title:"Pin Tab"},M[31]||(M[31]=[te("i",{class:"fas fa-thumbtack"},null,-1)]),2)]),te("div",PD,[br(te("div",kD,[be(Q2,{"selected-element":st(a),onUpdateElement:_,onDeleteElement:V},null,8,["selected-element"])],512),[[qr,st(n).activeRightTab==="properties"]]),br(te("div",AD,[be(rD)],512),[[qr,st(n).activeRightTab==="code"]]),br(te("div",RD,[be(oD)],512),[[qr,st(n).activeRightTab==="json"]])])],4)]),be(_i,{"is-open":w.value,onClose:M[20]||(M[20]=B=>w.value=!1)},{header:Le(()=>M[32]||(M[32]=[te("h3",null,"Create New Project",-1)])),body:Le(()=>[M[33]||(M[33]=te("label",{for:"new-project-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Project Name:",-1)),be(rr,{id:"new-project-name",modelValue:y.value,"onUpdate:modelValue":M[18]||(M[18]=B=>y.value=B),placeholder:"Enter project name",onKeyup:jf(R,["enter"])},null,8,["modelValue"])]),footer:Le(()=>[be(vt,{onClick:M[19]||(M[19]=B=>w.value=!1),type:"secondary"},{default:Le(()=>M[34]||(M[34]=[Ve("Cancel")])),_:1,__:[34]}),be(vt,{onClick:R,type:"primary"},{default:Le(()=>M[35]||(M[35]=[Ve("Create")])),_:1,__:[35]})]),_:1},8,["is-open"]),be(_i,{"is-open":v.value,onClose:M[23]||(M[23]=B=>v.value=!1)},{header:Le(()=>M[36]||(M[36]=[te("h3",null,"Create New Graph",-1)])),body:Le(()=>[M[37]||(M[37]=te("label",{for:"new-graph-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Graph Name:",-1)),be(rr,{id:"new-graph-name",modelValue:m.value,"onUpdate:modelValue":M[21]||(M[21]=B=>m.value=B),placeholder:"Enter graph name",onKeyup:jf(k,["enter"])},null,8,["modelValue"])]),footer:Le(()=>[be(vt,{onClick:M[22]||(M[22]=B=>v.value=!1),type:"secondary"},{default:Le(()=>M[38]||(M[38]=[Ve("Cancel")])),_:1,__:[38]}),be(vt,{onClick:k,type:"primary"},{default:Le(()=>M[39]||(M[39]=[Ve("Create")])),_:1,__:[39]})]),_:1},8,["is-open"]),be(bD,{"is-open":p.value,onClose:M[24]||(M[24]=B=>p.value=!1)},null,8,["is-open"])]))}}),MD=Kt(BD,[["__scopeId","data-v-1b7d9c26"]]),LD=At({__name:"App",setup(t){return(e,r)=>(Pe(),Ma(MD))}}),jm=_b(LD);jm.use(zb());jm.mount("#app");
